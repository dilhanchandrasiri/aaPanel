System.register(["./index-legacy102.js?v=1732601582185","./index-legacy171.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185"],(function(e,a){"use strict";var l,n,c,s,o,d,t,u,i,m,r,p,_,g,v,x,f,b,k,y,D,I,L,h,j,w,$,C,R,U;return{setters:[e=>{l=e._},e=>{n=e._},e=>{c=e._},e=>{s=e.d,o=e.W,d=e.j,t=e.r,u=e.e,i=e.O,m=e.P,r=e.M,p=e.Y,_=e.Q,g=e.R,v=e.am,x=e.c,f=e.Z,b=e.ac},e=>{k=e.ap,y=e.o,D=e.m,I=e.aE,L=e.I,h=e.df},e=>{j=e.p},e=>{w=e.bL,$=e.bG,C=e.ad,R=e.aa,U=e.bN},null,null],execute:function(){const a={class:"pt-4px"},E={class:"w-440px"},M={class:"w-440px"},G={class:"px-2px py-4px"},H={class:"h-420px"},K=s({__name:"index",setup(e){const{t:l}=o(),s=k(),b=d({name:null,image:""}),h={name:{trigger:"change",validator:()=>null!==b.name||new Error(l("Docker.LocalImage.pull.index_8"))},image:{trigger:["input","blur"],validator:()=>""!==b.image||new Error(l("Docker.LocalImage.pull.index_9"))}},K=t(null),N=t(l("Docker.LocalImage.pull.index_10")),O=t(!1),P=t([]),Q=async()=>{await(K.value?.validate()),N.value="",S.value=!0,Y(),z()},S=t(!1),W=u((()=>S.value)),{open:Y,send:Z,close:q}=j("/ws_model",{immediate:!1,onMessage:(e,a)=>{const{data:n}=a;if(y(n)&&(N.value+=a.data,n.includes("successful")||n.includes("failed"))){S.value=!1;const e={status:n.includes("successful"),msg:n.includes("successful")?l("Docker.Container.create.command_7"):l("Docker.Container.create.command_6")};e.status?(D.success(e.msg),s.setRefresh(!0)):D.error(e.msg),q()}}}),z=()=>{Z({model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:b.name,image:b.image})};return(async()=>{try{O.value=!0;const{message:e}=await I();L(e)&&e.length>0&&(P.value=e.map((e=>({label:e.name,value:e.name}))),b.name=e[0].name)}finally{O.value=!1}})(),(e,l)=>{const s=w,o=$,d=C,t=R,u=U,k=c,y=n;return i(),m("div",a,[r(k,{ref_key:"formRef",ref:K,model:g(b),rules:h},{default:p((()=>[r(o,{label:e.$t("Docker.LocalImage.pull.index_3"),path:"name"},{default:p((()=>[_("div",E,[r(s,{value:g(b).name,"onUpdate:value":l[0]||(l[0]=e=>g(b).name=e),loading:g(O),disabled:g(W),options:g(P)},null,8,["value","loading","disabled","options"])])])),_:1},8,["label"]),r(o,{label:e.$t("Docker.LocalImage.pull.index_4"),path:"image"},{default:p((()=>[_("div",M,[r(u,null,{default:p((()=>[r(d,{value:g(b).image,"onUpdate:value":l[1]||(l[1]=e=>g(b).image=e),disabled:g(W),placeholder:e.$t("Docker.LocalImage.pull.index_5"),onKeyup:v(Q,["enter"])},null,8,["value","disabled","placeholder"]),r(t,{type:"primary",disabled:g(W),onClick:Q},{default:p((()=>[x(f(e.$t("Docker.LocalImage.pull.index_6")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["label"])])),_:1},8,["model"]),_("div",G,f(e.$t("Docker.LocalImage.pull.index_7")),1),_("div",H,[r(y,{log:g(N)},null,8,["log"])])])}}}),N={class:"pt-4px"},O={class:"px-2px py-4px"},P={class:"h-456px"},Q=s({__name:"index",setup(e){const{t:a}=o(),l=k(),c=d({cmd:""}),s=t(a("Docker.LocalImage.pull.index_10")),v=t(!1),b=u((()=>v.value)),I=async()=>{if(""!==c.cmd.trim())try{v.value=!0,s.value=a("Docker.Container.create.command_8"),await h({cmd:c.cmd}),L(),E()}catch(e){v.value=!1,console.error(e)}else D.error(a("Docker.LocalImage.pull.index_13"))},{open:L,send:w,close:$}=j("/ws_model",{immediate:!1,onMessage:(e,n)=>{const{data:c}=n;if(y(c)&&(s.value+=n.data,c.includes("bt_successful")||c.includes("bt_failed"))){v.value=!1;const e={status:c.includes("bt_successful"),msg:c.includes("bt_successful")?a("Docker.Container.create.command_7"):a("Docker.Container.create.command_6")};e.status?(D.success(e.msg),l.setRefresh(!0)):D.error(e.msg),$()}}}),E=()=>{w({model_index:"btdocker",mod_name:"image",def_name:"get_cmd_log",ws_callback:111,name:"",image:""})};return(e,a)=>{const l=C,o=R,d=U,t=n;return i(),m("div",N,[r(d,{class:"mb-16px"},{default:p((()=>[r(l,{value:g(c).cmd,"onUpdate:value":a[0]||(a[0]=e=>g(c).cmd=e),disabled:g(b),placeholder:e.$t("Docker.LocalImage.pull.index_11")},null,8,["value","disabled","placeholder"]),r(o,{type:"primary",disabled:g(b),onClick:I},{default:p((()=>[x(f(e.$t("Docker.LocalImage.pull.index_12")),1)])),_:1},8,["disabled"])])),_:1}),_("div",O,f(e.$t("Docker.LocalImage.pull.index_7")),1),_("div",P,[r(t,{log:g(s)},null,8,["log"])])])}}}),S={class:"p-16px"};e("default",s({__name:"index",setup(e){const{t:a}=o(),n=t("normal"),c=[{key:"normal",label:a("Docker.LocalImage.pull.index_1"),component:K},{key:"command",label:a("Docker.LocalImage.pull.index_2"),component:Q}];return(e,a)=>{const s=l;return i(),m("div",S,[r(s,{value:g(n),"onUpdate:value":a[0]||(a[0]=e=>b(n)?n.value=e:null),options:c},null,8,["value"])])}}}))}}}));
