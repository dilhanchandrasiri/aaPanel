import{_ as a}from"./page_layout.js?v=1732601582185";import{u as s}from"./public.js?v=1732601582185";import{be as e,aV as t,bR as l}from"./naive.js?v=1732601582185";import{d as n,r as i,e as r,O as c,P as u,Q as o,Z as p,R as d,M as m,W as x,F as g}from"./vue.js?v=1732601582185";const b={class:"w-400px p-20px"},h={class:"mb-12px text-14px"},v=n({__name:"progress",props:{data:{}},emits:["close"],setup(a,{emit:s}){const l=a,{title:n,data:x,api:g,callback:v}=l.data,f=s,y=i(0),S=i(0),_=r((()=>x.length));return(async()=>{for(let s=0;s<x.length;s++)try{if(g){const a=await g(x[s]);x[s].batchStatus="success",x[s].reqMsg=e(a,"message.result","Success"),S.value+=1,S.value===_.value?y.value=100:y.value=Math.round(S.value/_.value*100)}}catch(a){x[s].batchStatus="error",x[s].reqMsg=e(a,"message.result","")}null==v||v(x),f("close")})(),(a,s)=>{const e=t;return c(),u("div",b,[o("div",h,[o("span",null,p(a.$t("Public.Components.index_10",d(n))),1),o("span",null,p(d(S))+"/"+p(d(_)),1)]),m(e,{type:"line",status:"success",percentage:d(y),height:24,"border-radius":4,"fill-border-radius":0,processing:!0,"show-indicator":!1,"indicator-placement":"inside"},null,8,["percentage"])])}}}),f={class:"p-24px"},y={class:"flex items-center mb-24px"},S={class:"flex-1 ml-12px text-14px leading-22px"},_={class:"flex-1 ml-12px text-14px leading-22px"},w=n({__name:"index",props:{data:{}},emits:["setConfirm"],setup(e,{expose:t,emit:n}){const r=e,{title:b,desc:h,data:w,columns:C,api:M,done:k}=r.data,j=n,{t:q}=x(),P=i([]),R=i([...C,{key:"batchStatus",title:q("Public.Table.Result"),align:"right",width:200,render:a=>"success"===a.batchStatus?m("span",{class:"text-primary"},[a.reqMsg]):"error"===a.batchStatus?m("span",{class:"text-error"},[a.reqMsg]):m("span",{class:"text-warning"},[q("Public.Status.Wait")])}]),z=i(!1),W=i(""),D=a=>{const s=a.filter((a=>"success"===a.batchStatus)).length,e=a.length-s;W.value=q("Component.Confirm.index_3",[b,a.length,s,e]),z.value=!0,j("setConfirm",{text:"Done",disabled:!1}),null==k||k(a)};return(()=>{P.value=w.map((a=>({batchStatus:"wait",...a})));const{status:a}=r.data;"done"===a&&D(w)})(),t({onConfirm:({hide:a})=>(z.value?a():(j("setConfirm",{disabled:!0}),s({title:b,hideClose:!0,data:{title:b,api:M,data:P.value,callback:D},component:v})),!1)}),(s,e)=>{const t=a,n=l;return c(),u("div",f,[o("div",y,[d(z)?(c(),u(g,{key:1},[m(t,{name:"base-success",size:"40",class:"text-primary"}),o("div",_,p(d(W)),1)],64)):(c(),u(g,{key:0},[m(t,{name:"base-warning",size:"40",class:"text-warning"}),o("div",S,p(d(h)),1)],64))]),m(n,{"max-height":182,data:d(P),columns:d(R)},null,8,["data","columns"])])}}});export{w as _,v as a};
