System.register(["./index-legacy.js?v=1723125373998","./index-legacy70.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1723125373998","./useTableData-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1723125373998","./index-legacy68.js?v=1723125373998","./pinia-legacy.js?v=1723125373998","./site-legacy2.js?v=1723125373998","./useLoading-legacy.js?v=1723125373998","./useTableColumns-legacy.js?v=1723125373998","./site-legacy.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./ButtonGroup-legacy.js?v=1723125373998","./DatePicker-legacy.js?v=1723125373998"],(function(e,t){"use strict";var a,i,n,l,o,d,s,r,c,u,p,h,m,w,y,_,g,v,f,P,b,x,k,S,H,j,C,U,$,B,D,O,W,T,R,L,M,z,N,E,I,K,q,V,G,Q,Z,A,F,J,X,Y,ee,te,ae,ie,ne,le,oe,de,se,re,ce,ue,pe,he,me,we,ye,_e,ge;return{setters:[e=>{a=e.cS,i=e.cT,n=e.cU,l=e.e,o=e.B,d=e.bb,s=e.a,r=e.L,c=e.v,u=e.U,p=e.j,h=e.ay,m=e.cQ,w=e.bg,y=e.g,_=e.k,g=e.q,v=e.cV,f=e.h,P=e.m,b=e.I,x=e.r},e=>{k=e._},e=>{S=e._},e=>{H=e._},e=>{j=e._},e=>{C=e.u,U=e._},e=>{$=e._},e=>{B=e._},e=>{D=e.s},e=>{O=e.o,W=e.l},e=>{T=e.u},e=>{R=e.g,L=e.u,M=e.a,z=e.b},e=>{N=e.s,E=e.a,I=e.b,K=e.c,q=e.d,V=e.e},e=>{G=e.l,Q=e.d,Z=e.r,A=e.k,F=e.S,J=e.U,X=e.V,Y=e.P,ee=e.q,te=e.a3,ae=e.W,ie=e._,ne=e.b,le=e.a1,oe=e.ae,de=e.ad,se=e.s,re=e.ap,ce=e.Z,ue=e.f,pe=e.w,he=e.af,me=e.t,we=e.n},e=>{ye=e._},e=>{_e=e.N},e=>{ge=e._}],execute:function(){var ve=document.createElement("style");function fe(e,t){const n=a(e);return isNaN(t)?i(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function Pe(e,t){return+a(e)<+a(t)}ve.textContent=".n-date-panel[data-v-0f7e7fa2]{margin:0}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-calendar{padding:6px 0 12px}.n-date-panel[data-v-0f7e7fa2] .n-date-panel--month .n-date-panel-footer{display:none}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-footer{padding:12px 0 6px}\n",document.head.appendChild(ve),e({a:fe,i:Pe});const be={class:"flex justify-end"},xe=s(G({__name:"index",props:{row:{}},setup(e){const t=Q(e,"row"),a=Z(null),i=Z(null),s=new Date;s.setHours(0,0,0,0);const r=A((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&Pe(e,s)})),c=A((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&Pe(e,fe(s,7))})),u=e=>Pe(e,fe(s,1)),p=()=>{a.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},h=async()=>{await N({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",i.value?.setShow(!1)},m=async()=>{if(null===a.value)return;const e=n(a.value,"yyyy-MM-dd");await N({id:t.value.id,edate:e}),t.value.edate=e,i.value?.setShow(!1)};return(e,n)=>{const s=l,w=o,y=_e,_=ge,g=d;return F(),J(g,{ref_key:"popoverRef",ref:i,placement:"bottom",trigger:"click"},{trigger:X((()=>[Y(s,{type:ae(r)?"error":ae(c)?"warning":"primary",onClick:p},{default:X((()=>[ee(te("0000-00-00"===ae(t).edate?e.$t("Site.PHP.index_34"):ae(r)?e.$t("Site.PHP.index_28"):ae(t).edate),1)])),_:1},8,["type"])])),default:X((()=>[Y(_,{value:ae(a),"onUpdate:value":n[0]||(n[0]=e=>ne(a)?a.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":u},{footer:X((()=>[ie("div",be,[Y(y,{size:"small"},{default:X((()=>[Y(w,{onClick:h},{default:X((()=>[ee(te(e.$t("Site.PHP.index_34")),1)])),_:1}),Y(w,{disabled:null===ae(a),onClick:m},{default:X((()=>[ee(te(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]);function ke(e){r({title:1===e.length?`Delete site [${e[0].name}]`:"Deleting sites in batches",width:480,minHeight:248,footer:!0,data:{rows:e},component:le((()=>c((()=>t.import("./index-legacy135.js?v=1723125373998")),void 0)))})}const Se=G({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=oe();return{goPath:()=>{u("Path",e.path),t.push("/files")}}},render(){return Y("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}}),He=({row:e})=>Y(l,null,{default:()=>[e.name]}),je=({row:e})=>Y(R,{value:e.status},null),Ce=({row:e})=>{const{t:a}=de();return Y(l,{type:e.backup_count>0?"primary":"warning",onClick:()=>{r({title:a("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:le((()=>c((()=>t.import("./index-legacy136.js?v=1723125373998")),void 0)))})}},{default:()=>[e.backup_count>0?a("Site.PHP.index_31",[e.backup_count]):a("Site.PHP.index_32")]})},Ue=({row:e})=>Y(Se,{path:e.path},null),$e=({row:e})=>Y(l,null,{default:()=>[e.php_version]}),Be=({row:e})=>{let t;const{t:a}=de(),{ssl:i}=e;return p(i)?Y(l,{type:i.endtime<0?"error":"primary"},{default:()=>[i.endtime<0?a("Site.PHP.index_28"):a("Site.PHP.index_29",[i.endtime])]}):Y(l,{type:"warning"},"function"==typeof(n=t=a("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(n)&&!se(n)?t:{default:()=>[t]});var n},De=({row:e})=>Y(l,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Oe={class:"w-160px"},We=G({__name:"index",props:{value:{default:null}},setup(e){const{t:a}=de(),i=le((()=>c((()=>t.import("./set-legacy.js?v=1723125373998")),void 0))),n=re(e,"value"),{loading:l,setLoading:d}=T(),s=Z([]),r=y(a("Site.PHP.index_44"),{setOptions:(e,t)=>{t===n.value&&(n.value=-1),s.value=e.map((e=>({label:e.name,value:e.id}))),p()}}),u=()=>{r.show=!0},p=()=>{s.value.unshift({label:a("Site.PHP.index_45"),value:-1})};return p(),(async()=>{try{d(!0);const{message:e}=await E();_(e)?s.value=e.map((e=>({label:e.name,value:e.id}))):s.value=[],p()}finally{d(!1)}})(),(e,t)=>{const a=o,d=ye,c=g;return F(),ce("div",Oe,[Y(d,{value:ae(n),"onUpdate:value":t[0]||(t[0]=e=>ne(n)?n.value=e:null),loading:ae(l),options:ae(s)},{action:X((()=>[Y(a,{block:"",onClick:u},{default:X((()=>[ee(te(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),Y(c,{show:ae(r).show,"onUpdate:show":t[1]||(t[1]=e=>ae(r).show=e),width:350,title:ae(r).title,data:ae(r).data,component:ae(i)},null,8,["show","title","data","component"])])}}}),Te=ie("span",{class:"mx-4px"},"|",-1),Re=G({__name:"index",setup(e){const a=le((()=>c((()=>t.import("./index-legacy137.js?v=1723125373998")),void 0))),i=le((()=>c((()=>t.import("./index-legacy138.js?v=1723125373998")),void 0))),n=le((()=>c((()=>t.import("./index-legacy139.js?v=1723125373998")),void 0))),d=le((()=>c((()=>t.import("./index-legacy140.js?v=1723125373998")),void 0))),s=le((()=>c((()=>t.import("./index-legacy141.js?v=1723125373998").then((e=>e.i))),void 0))),{t:u}=de(),R=v(),{web:N,webserver:E}=D(R),G=Z(!1),Q=y(u("Site.PHP.index_9")),A=()=>{Q.show=!0},oe=y(u("Site.PHP.index_10")),se=()=>{oe.show=!0},re=y(u("Site.PHP.index_11")),ce=()=>{re.show=!0},ye=y(u("Site.PHP.index_12")),_e=()=>{ye.show=!0},ge=ue({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),ve=(e,t={})=>{ge.title=u("Site.PHP.index_13",[e.name,e.addtime]),ge.data.siteInfo=e,ge.data.config=Object.assign({menu:"",subMenu:""},t),ge.show=!0},fe=()=>z({title:u("Public.Table.Operation"),width:150,options:e=>[{label:u("Site.PHP.index_14"),onClick:()=>{(async()=>{await h({source:142}),await m("monitor"),w({name:"monitor",title:"Website statistics-v2",admin:!0})})()}},{label:u("Site.PHP.index_15"),show:"nginx"===R.webserver||"apache"===R.webserver,onClick:()=>{O(e.name)}},{label:u("Site.PHP.index_16"),onClick:()=>{ve(e)}},{label:u("Public.Btn.Del"),onClick:()=>{ke([e])}}]}),{keys:Pe,table:be,columns:Se}=C([{type:"selection",width:40},{key:"name",title:u("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>Y(He,{row:e,onClick:()=>{ve(e)}},null)},{key:"status",title:u("Public.Table.Status"),width:"8%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>Y(je,{row:e,onClick:t=>{f({title:`${u("1"===t?"Site.PHP.index_21.1":"Site.PHP.index_21.2")} ${u("Site.PHP.index_21.0",[e.name])}`,content:u("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await I("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:u("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>Y(Ce,{row:e},null)},{key:"path",title:u("Site.PHP.index_20"),minWidth:130,ellipsis:{tooltip:!0},render:e=>Y(Ue,{row:e},null)},L({type:"site",width:"6%",minWidth:70,callback:()=>{Ne()}}),{key:"edate",title:u("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>Y(xe,{row:e},null)},M({width:"8%",onBlur:async(e,t)=>{await V({id:t.id,ps:e})}}),{key:"php_version",title:u("Site.PHP.index_26"),width:"6%",minWidth:70,render:e=>Y($e,{row:e,onClick:()=>{ve(e,{menu:"php"})}},null)},{key:"site_ssl",title:u("Site.PHP.index_27"),width:"9%",minWidth:110,sorter:!0,sortOrder:!1,render:e=>Y(Be,{row:e,onClick:()=>{ve(e,{menu:"ssl"})}},null)},{key:"attack",title:u("Site.PHP.index_24"),width:"6%",minWidth:60,render:e=>Y(De,{row:e,onClick:()=>{ve(e,{menu:"logs",subMenu:"security"})}},null)},fe()]),Oe=e=>{Se.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?Le.order=`${e.columnKey} ${"descend"===e.order?"desc":"asc"}`:Le.order="",Ne()},Re=[{key:"enable",type:"confirm",label:"Enable website",confirm:{title:"Batch enable website",desc:"Please be cautious, The selected item will be [Enable website] after confirmation",columns:[Se.value[1]],api:e=>I(!0,{id:e.id,name:e.name},!1),done:()=>{Ne()}}},{key:"disable",type:"confirm",label:"Disable website",confirm:{title:"Batch disable website",desc:"Please be cautious, The selected item will be [Disable website] after confirmation",columns:[Se.value[1]],api:e=>I(!1,{id:e.id,name:e.name},!1),done:()=>{Ne()}}},{key:"backup",type:"confirm",label:"Backup website",confirm:{title:"Batch backup website",desc:"Please be cautious, The selected item will be [Backup website] after confirmation",columns:[Se.value[1]],api:e=>K({id:e.id},!1),done:()=>{Ne()}}},{key:"expired",label:"Set expired date",onBatch:e=>{r({title:"Batch set expired date",width:380,minHeight:72,footer:!0,data:{rows:e},component:le((()=>c((()=>t.import("./batch-legacy.js?v=1723125373998")),void 0)))})}},{key:"php",label:"Set php version",onBatch:e=>{r({title:"Batch set php version",width:500,minHeight:198,footer:!0,data:{rows:e},component:le((()=>c((()=>t.import("./batch-legacy2.js?v=1723125373998")),void 0)))})}},{key:"category",label:"Set category",onBatch:e=>{r({title:"Batch set category",width:350,minHeight:72,footer:!0,data:{rows:e},component:le((()=>c((()=>t.import("./batch-legacy3.js?v=1723125373998")),void 0)))})}},{key:"delete",label:"Delete website",onBatch:e=>{ke(e)}}],Le=ue({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Me,setLoading:ze}=T(!0),Ne=async()=>{try{ze(!0);const e={...me(Le)},{message:t}=await q(e);p(t)?(be.data=_(t.data)?t.data:[],be.total=P(t.page)):(be.data=[],be.total=0)}finally{Pe.value=[],ze(!1)}};return pe((()=>R.isRefresh),(e=>{e&&(R.setRefresh(!1),Ne())})),(async()=>{try{await R.getConfig(),ze(!1),await we(),Se.value[Se.value.length-1]=fe(),ze(!0),R.web.setup?(G.value=!0,Ne()):(G.value=!1,ze(!1),W())}catch{ze(!1)}})(),(e,t)=>{const r=l,c=o,u=B,p=$,h=U,m=j,w=H,y=S,_=g,v=k,f=x;return F(),J(f,null,{default:X((()=>[Y(v,{install:ae(N).setup},{desc:X((()=>[ie("span",null,te(e.$t("Site.PHP.index_1")),1),Y(r,{class:"ml-4px",onClick:t[0]||(t[0]=e=>ae(b)("nginx"))},{default:X((()=>[ee(te(e.$t("Site.PHP.index_2")),1)])),_:1}),Te,Y(r,{onClick:t[1]||(t[1]=e=>ae(b)("apache"))},{default:X((()=>[ee(te(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:X((()=>[Y(y,{class:"p-16px",feedback:!0},{toolsLeft:X((()=>[Y(c,{type:"primary",onClick:A},{default:X((()=>[ee(te(e.$t("Site.PHP.index_4")),1)])),_:1}),Y(c,{onClick:se},{default:X((()=>[ee(te(e.$t("Site.PHP.index_5")),1)])),_:1}),Y(c,{onClick:ce},{default:X((()=>[ee(te(e.$t("Site.PHP.index_6")),1)])),_:1}),Y(c,{onClick:_e},{default:X((()=>[ee(te(e.$t("Site.PHP.index_7")),1)])),_:1}),ae(G)?(F(),J(u,{key:0,"soft-name":ae(E)},null,8,["soft-name"])):he("",!0)])),toolsRight:X((()=>[Y(We,{value:ae(Le).type,"onUpdate:value":[t[2]||(t[2]=e=>ae(Le).type=e),Ne]},null,8,["value"]),Y(p,{value:ae(Le).search,"onUpdate:value":t[3]||(t[3]=e=>ae(Le).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:Ne},null,8,["value","placeholder"])])),table:X((()=>[Y(h,{"checked-row-keys":ae(Pe),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>ne(Pe)?Pe.value=e:null),loading:ae(Me),data:ae(be).data,columns:ae(Se),"onUpdate:sorter":Oe},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:X((()=>[Y(m,{"checked-row-keys":ae(Pe),"onUpdate:checkedRowKeys":t[5]||(t[5]=e=>ne(Pe)?Pe.value=e:null),data:ae(be).data,options:Re},null,8,["checked-row-keys","data"])])),pageRight:X((()=>[Y(w,{page:ae(Le).p,"onUpdate:page":t[6]||(t[6]=e=>ae(Le).p=e),"page-size":ae(Le).limit,"onUpdate:pageSize":t[7]||(t[7]=e=>ae(Le).limit=e),"item-count":ae(be).total,"store-key":"site-php-page",onRefresh:Ne},null,8,["page","page-size","item-count"])])),_:1}),Y(_,{show:ae(Q).show,"onUpdate:show":t[8]||(t[8]=e=>ae(Q).show=e),title:ae(Q).title,width:640,height:540,footer:!0,component:ae(a)},null,8,["show","title","component"]),Y(_,{show:ae(oe).show,"onUpdate:show":t[9]||(t[9]=e=>ae(oe).show=e),title:ae(oe).title,width:820,"min-height":608,component:ae(i)},null,8,["show","title","component"]),Y(_,{show:ae(re).show,"onUpdate:show":t[10]||(t[10]=e=>ae(re).show=e),title:ae(re).title,width:560,footer:!0,component:ae(n)},null,8,["show","title","component"]),Y(_,{show:ae(ye).show,"onUpdate:show":t[11]||(t[11]=e=>ae(ye).show=e),title:ae(ye).title,width:560,"min-height":148,footer:!0,component:ae(d)},null,8,["show","title","component"]),Y(_,{show:ae(ge).show,"onUpdate:show":t[12]||(t[12]=e=>ae(ge).show=e),title:ae(ge).title,data:ae(ge).data,width:860,height:700,component:ae(s)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}),Le=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));e("b",Le)}}}));
