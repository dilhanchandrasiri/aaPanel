System.register(["./index-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1723125373998","./useTableData-legacy.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./useTableColumns-legacy.js?v=1723125373998","./mail-legacy.js?v=1723125373998","./Switch-legacy.js?v=1723125373998","./pinia-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1723125373998","./DataTable-legacy.js?v=1723125373998","./Checkbox-legacy.js?v=1723125373998","./Ellipsis-legacy.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./Tag-legacy.js?v=1723125373998","./Empty-legacy.js?v=1723125373998","./omit-legacy.js?v=1723125373998","./data-legacy.js?v=1723125373998","./Skeleton-legacy.js?v=1723125373998","./Progress-legacy.js?v=1723125373998"],(function(e,t){"use strict";var a,s,l,i,n,o,u,c,d,r,p,g,m,y,_,h,b,w,v,j,f,k,x,P,C,M,$,S,A,z,E,U,W,q,T,D,V;return{setters:[e=>{a=e.n,s=e.aw,l=e.g,i=e.N,n=e.h,o=e.j,u=e.k,c=e.m,d=e.r,r=e.B,p=e.q,g=e.v},e=>{m=e._},e=>{y=e._},e=>{_=e.u,h=e._},e=>{b=e.ao,w=e.l,v=e.ad,j=e.f,f=e.P,k=e.q,x=e.S,P=e.U,C=e.V,M=e.ae,$=e.t,S=e.W,A=e.a1},e=>{z=e.f,E=e.b},e=>{U=e.e,W=e.l,q=e.b,T=e.c,D=e.h},e=>{V=e._},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("default",w({__name:"index",setup(e){const w=A((()=>g((()=>t.import("./index-legacy121.js?v=1723125373998")),void 0))),{t:B}=v(),R=M(),L=j({p:1,size:10}),G=l("Add Mailbox",{isEdit:!1,row:void 0,onRefresh:()=>{Y()}}),I=()=>{G.data.isEdit=!1,G.data.row=void 0,G.title="Add Mailbox",G.show=!0},N=()=>{window.open(`${X.ssl_status?"https":"http"}://${X.site_name}`)},{table:O,columns:Q}=_([{key:"username",title:"Username",ellipsis:{tooltip:!0}},z({width:160}),{key:"info",title:"Login info",width:180,render:e=>f("a",{class:"bt-link",href:"javascript:;",onClick:()=>{F(e)}},[k("Copy")])},{key:"quota",title:"Quota",render:e=>i(e.quota)},{key:"is_admin",title:"Type",render:e=>1===e.is_admin?"Admin":"General user"},{key:"active",title:"Active",render:e=>f(V,{value:e.active,size:"small",checkedValue:1,uncheckedValue:0,onUpdateValue:async t=>{await U({username:e.username,full_name:e.full_name,quota:i(e.quota),active:t,is_admin:e.is_admin}),e.active=t}},null)},E({width:150,options:e=>[{label:"WebMail",onClick:()=>{if(X.status)H(e);else{const{hide:e}=n({title:"WebMail is not activated",content:()=>f("div",null,[k('WebMail is not activated yet. Please go to "'),f("a",{class:"bt-link",href:"javascript:;",onClick:()=>{R.push("/mail/setting"),e()}},[k("Mail Server > Setting")]),k('" to activate and install it')]),onConfirm:()=>{R.push("/mail/setting")}})}}},{label:B("Public.Btn.Edit"),onClick:()=>{J(e)}},{label:B("Public.Btn.Del"),onClick:()=>{K(e)}}]})]),F=e=>{(async e=>{const{copy:t,isSupported:l}=b({legacy:!0});l.value?(t(e),a.success(s.global.t("Public.Components.index_4"))):a.error(s.global.t("Public.Components.index_5"))})(`WebMail: ${X.ssl_status?"https":"http"}://${X.site_name}\nUsername: ${e.username}\nPassword: ${e.password}\nPOP service [ Address：${e.mx} Port：110/995 ]\nIMAP service [ Address：${e.mx} Port：143/993 ]\nSMTP service [ Address：${e.mx} Port：25/465/587 ]\n`)},H=async e=>{const{message:t}=await W({rc_user:e.username,rc_pass:e.password});o(t)&&window.open(`${X.ssl_status?"https":"http"}://${t.result}`)},J=e=>{G.data.isEdit=!0,G.data.row=e,G.title="Edit Mailbox",G.show=!0},K=async e=>{n({title:"Delete mailbox",content:`Whether to delete the [${e.username}] member?`,onConfirm:async()=>{await q({username:e.username}),Y()}})},X=j({id:0,site_name:"",status:!1,ssl_status:!1}),Y=async()=>{try{O.loading=!0;const{message:e}=await T($(L));o(e)&&(O.data=u(e.data)?e.data:[],O.total=c(e.page))}finally{O.loading=!1}};return(async()=>{try{O.loading=!0,await(async()=>{const{message:e}=await D();o(e)&&(X.id=e.id,X.status=e.status,X.site_name=e.site_name,X.ssl_status=e.ssl_status)})(),await Y()}finally{O.loading=!1}})(),(e,t)=>{const a=r,s=h,l=y,i=m,n=p,o=d;return x(),P(o,{class:"p-16px"},{default:C((()=>[f(i,null,{toolsLeft:C((()=>[f(a,{type:"primary",onClick:I},{default:C((()=>[k("Add Mailbox")])),_:1}),f(a,{onClick:N},{default:C((()=>[k("WebMail")])),_:1})])),table:C((()=>[f(s,{loading:S(O).loading,data:S(O).data,columns:S(Q)},null,8,["loading","data","columns"])])),pageRight:C((()=>[f(l,{page:S(L).p,"onUpdate:page":t[0]||(t[0]=e=>S(L).p=e),"page-size":S(L).size,"onUpdate:pageSize":t[1]||(t[1]=e=>S(L).size=e),"item-count":S(O).total,onRefresh:Y},null,8,["page","page-size","item-count"])])),_:1}),f(n,{show:S(G).show,"onUpdate:show":t[2]||(t[2]=e=>S(G).show=e),title:S(G).title,data:S(G).data,width:480,"min-height":236,footer:!0,component:S(w)},null,8,["show","title","data","component"])])),_:1})}}}))}}}));
