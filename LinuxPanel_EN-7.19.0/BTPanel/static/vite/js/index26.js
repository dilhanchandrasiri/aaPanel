import{_ as e}from"./index.js?v=1732601582185";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import{aP as t,aQ as s,f as l,aR as i,aE as d,I as n}from"./page_layout.js?v=1732601582185";import{h as p,d as c,f as u,b as m,q as _}from"./public.js?v=1732601582185";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{d as k,W as f,t as v,r as w,j as x,O as h,P as g,M as R,Y as b,Q as D,R as j,ak as $,X as E,c as U,Z as P,ac as C}from"./vue.js?v=1732601582185";import{ad as B,bG as L,bJ as K,aa as Q}from"./naive.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";const q={class:"px-20px py-24px"},z={class:"w-430px"},G={class:"w-430px"},H={class:"flex"},I={class:"w-160px"},J={class:"w-160px"},M={class:"w-430px"},O={class:"w-430px"},S=k({__name:"index",props:{isEdit:{type:Boolean,default:!1},row:{default:void 0}},emits:["refresh"],setup(e,{expose:a,emit:r}){const o=e,i=r,{t:d}=f(),n=v(o,"isEdit"),p=w(),c=x({registry:"",name:"",username:"",password:"",namespace:"",remark:""}),u={registry:{trigger:["blur"],validator:()=>""!==c.registry||new Error(d("Docker.Repository.form.index_11"))},name:{trigger:["blur"],validator:()=>""!==c.name||new Error(d("Docker.Repository.form.index_12"))},username:{trigger:["blur"],validator:()=>""!==c.username||new Error(d("Docker.Repository.form.index_13"))},password:{trigger:["blur"],validator:()=>""!==c.password||new Error(d("Docker.Repository.form.index_13"))},namespace:{trigger:["blur"],validator:()=>""!==c.namespace||new Error(d("Docker.Repository.form.index_14"))}};return(()=>{const{row:e}=o;n.value&&l(e)&&(console.log(1),c.registry=e.url,c.name=e.name,c.username=e.username,c.password=e.password,c.namespace=e.namespace,c.remark=e.remark)})(),a({onConfirm:async()=>{var e;await(null==(e=p.value)?void 0:e.validate()),n.value?o.row&&await s({...$(c),id:o.row.id}):await t($(c)),i("refresh")}}),(e,a)=>{const r=B,o=L,t=y;return h(),g("div",q,[R(t,{ref_key:"formRef",ref:p,model:j(c),rules:u,"label-width":"140px"},{default:b((()=>[R(o,{label:e.$t("Docker.Repository.form.index_1"),path:"registry"},{default:b((()=>[D("div",z,[R(r,{value:j(c).registry,"onUpdate:value":a[0]||(a[0]=e=>j(c).registry=e),placeholder:e.$t("Docker.Repository.form.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_3"),path:"name"},{default:b((()=>[D("div",G,[R(r,{value:j(c).name,"onUpdate:value":a[1]||(a[1]=e=>j(c).name=e),placeholder:e.$t("Docker.Repository.form.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),D("div",H,[R(o,{label:e.$t("Docker.Repository.form.index_5"),path:"username"},{default:b((()=>[D("div",I,[R(r,{value:j(c).username,"onUpdate:value":a[2]||(a[2]=e=>j(c).username=e),placeholder:e.$t("Docker.Repository.form.index_6")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_15"),"label-width":"110",path:"password"},{default:b((()=>[D("div",J,[R(r,{value:j(c).password,"onUpdate:value":a[3]||(a[3]=e=>j(c).password=e),placeholder:e.$t("Docker.Repository.form.index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"])]),R(o,{label:e.$t("Docker.Repository.form.index_8"),path:"namespace"},{default:b((()=>[D("div",M,[R(r,{value:j(c).namespace,"onUpdate:value":a[4]||(a[4]=e=>j(c).namespace=e),placeholder:e.$t("Docker.Repository.form.index_9")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_10"),path:"remark","show-feedback":!1},{default:b((()=>[D("div",O,[R(r,{value:j(c).remark,"onUpdate:value":a[5]||(a[5]=e=>j(c).remark=e),placeholder:e.$t("Docker.Repository.form.index_10")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),W=k({__name:"index",setup(t){const{t:s}=f(),l=p(s("Docker.Repository.index_1"),{isEdit:!1,onRefresh:()=>{q()}}),y=()=>{l.data.row=void 0,l.data.isEdit=!1,l.title=s("Docker.Repository.index_1"),l.show=!0},k=x({page:1,pageSize:10}),{keys:v,table:w,columns:g}=c([{type:"selection",width:40},{key:"url",title:"URL",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.url||"--"},{key:"namespace",title:s("Docker.Repository.index_3"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.namespace||"--"},{key:"name",title:s("Docker.Repository.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.name||"--"},{key:"remark",title:s("Docker.Repository.index_5"),render:e=>e.remark||"--"},u({width:120,options:e=>[{label:s("Public.Btn.Edit"),disabled:1===e.id,onClick:()=>{(e=>{l.data.row=e,l.data.isEdit=!0,l.title=s("Docker.Repository.index_2",[e.name]),l.show=!0})(e)}},{label:s("Public.Btn.Del"),disabled:1===e.id,onClick:()=>{D(e)}}]})]),D=e=>{_({title:s("Docker.Repository.index_8",[e.name]),content:s("Docker.Repository.index_9",[e.name]),onConfirm:async()=>{await i({id:e.id}),q()}})},$=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:s("Docker.Repository.index_10"),desc:s("Docker.Repository.index_11"),columns:[g.value[3]],api:e=>i({id:e.id},!1),done:()=>{q()}}}],{loading:B,setLoading:L}=m(),q=async()=>{try{L(!0);const{message:e}=await d();w.data=n(e)?e:[]}finally{v.value=[],L(!1)}};return q(),(t,s)=>{const i=Q,d=o,n=r,p=a,c=e,u=K;return h(),E(u,{class:"p-16px"},{default:b((()=>[R(p,null,{toolsLeft:b((()=>[R(i,{type:"primary",onClick:y},{default:b((()=>[U(P(t.$t("Docker.Repository.index_1")),1)])),_:1})])),table:b((()=>[R(n,{page:j(k),"onUpdate:page":s[1]||(s[1]=e=>C(k)?k.value=e:null),"checked-row-keys":j(v),"onUpdate:checkedRowKeys":s[2]||(s[2]=e=>C(v)?v.value=e:null),"is-page":!0,loading:j(B),data:j(w).data,columns:j(g)},{pagePrefix:b((()=>[R(d,{"checked-row-keys":j(v),"onUpdate:checkedRowKeys":s[0]||(s[0]=e=>C(v)?v.value=e:null),data:j(w).data,options:$},null,8,["checked-row-keys","data"])])),_:1},8,["page","checked-row-keys","loading","data","columns"])])),_:1}),R(c,{show:j(l).show,"onUpdate:show":s[3]||(s[3]=e=>j(l).show=e),data:j(l).data,title:j(l).title,width:620,footer:!0,component:S},null,8,["show","data","title"])])),_:1})}}});export{W as default};
