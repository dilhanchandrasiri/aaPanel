const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/rewrite.js?v=1732601582185","js/index96.js?v=1732601582185","js/page_layout.js?v=1732601582185","js/vue.js?v=1732601582185","js/__commonjsHelpers__.js?v=1732601582185","js/naive.js?v=1732601582185","js/common.js?v=1732601582185","js/public.js?v=1732601582185","css/public.css?v=1732601582185","css/page_layout.css?v=1732601582185","js/file.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang14.js?v=1732601582185","js/theme-chrome.js?v=1732601582185","js/index236.js?v=1732601582185","js/index.js?v=1732601582185","css/index80.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang.js?v=1732601582185","js/site.js?v=1732601582185","js/index215.js?v=1732601582185","css/index47.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185","css/index14.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185","js/index99.js?v=1732601582185","css/index11.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang5.js?v=1732601582185","js/index97.js?v=1732601582185","css/index10.css?v=1732601582185","js/index102.js?v=1732601582185","css/index15.css?v=1732601582185","js/index121.js?v=1732601582185","css/index17.css?v=1732601582185","js/refersh.js?v=1732601582185","js/php.js?v=1732601582185","js/form.vue_vue_type_script_setup_true_lang2.js?v=1732601582185","js/index171.js?v=1732601582185","css/index21.css?v=1732601582185","js/logs.vue_vue_type_script_setup_true_lang.js?v=1732601582185","js/old4.js?v=1732601582185","js/site4.js?v=1732601582185"])))=>i.map(i=>d[i]);
import{i as e,j as a,I as t,m as l,c as i,f as n,n as s,a7 as o,o as d,bd as r,bP as u,k as c,u as p,ca as m,a0 as _}from"./page_layout.js?v=1732601582185";import{_ as v}from"./index215.js?v=1732601582185";import{p as h,a as x,M as f,d as w,W as y,r as b,O as g,P as S,Q as k,Y as C,Z as $,R as P,ac as R,c as U,j as L,a6 as T,F as E,ao as j,ak as B,X as I,f as N,ax as D,L as O,e as H,n as A,V as q}from"./vue.js?v=1732601582185";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{_ as z}from"./index99.js?v=1732601582185";import{Y as W,Z as X,_ as F,aQ as G,aR as Y,aS as Z,aT as Q,aU as J,$ as ee,a0 as ae,a1 as te,a2 as le,a3 as ie,a4 as ne,a5 as se,a6 as oe,av as de,aw as re,ax as ue,ay as ce,az as pe,aA as me,aB as _e,aC as ve,ak as he,al as xe,am as fe,aV as we,aW as ye,an as be,ao as ge,ap as Se,aq as ke,ar as Ce,as as $e,at as Pe,au as Re,aX as Ue,aY as Le,aZ as Te,a_ as Ee,a$ as je,b0 as Be,b1 as Ie,a7 as Ne,a8 as De,a9 as Oe,aa as He,ab as Ae,ac as qe,ad as Me,ae as Ke,af as Ve,ag as ze,ah as We,ai as Xe,aj as Fe,aE as Ge,aF as Ye,aG as Ze,g as Qe,aH as Je}from"./site.js?v=1732601582185";import{a as ea,H as aa,d as ta,b as la,h as ia,f as na,s as sa,_ as oa,u as da}from"./public.js?v=1732601582185";import{aa as ra,be as ua,ad as ca,bh as pa,bL as ma,bG as _a,bo as va,_ as ha,bl as xa,c0 as fa,bM as wa,bN as ya,aV as ba}from"./naive.js?v=1732601582185";import{_ as ga}from"./index.js?v=1732601582185";import{_ as Sa}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{_ as ka}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1732601582185";import{_ as Ca}from"./index102.js?v=1732601582185";import{_ as $a}from"./index96.js?v=1732601582185";import{_ as Pa}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1732601582185";import{_ as Ra}from"./index121.js?v=1732601582185";import{_ as Ua,a as La,b as Ta}from"./refersh.js?v=1732601582185";import{a as Ea,b as ja}from"./php.js?v=1732601582185";import{_ as Ba}from"./form.vue_vue_type_script_setup_true_lang2.js?v=1732601582185";import{_ as Ia}from"./index171.js?v=1732601582185";import{_ as Na}from"./logs.vue_vue_type_script_setup_true_lang.js?v=1732601582185";const Da=Symbol("site-config");function Oa(){return x(Da)}const{t:Ha}=e.global;function Aa({delDomain:e}){return{key:"action",title:Ha("Public.Table.Action"),width:80,align:"right",render:a=>f(aa,{options:[{label:Ha("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ea({title:"".concat(Ha("Site.Batch.index_12"),"[").concat(a.name,"]"),content:Ha("Site.Batch.index_13"),onConfirm:async({hide:t})=>{await e(a),t()}})}}]},null)}}const qa={class:"flex justify-between items-center mb-24px"},Ma={class:"w-400px"},Ka={class:"pr-40px"},Va=w({__name:"index",setup(e,{expose:i}){const{t:n}=y(),{data:s}=Oa(),o=b(""),d=async()=>{""!==o.value.trim()?(await F({id:s.id,webname:s.name,domain:o.value.trim().split("\n").join(",")}),o.value="",x()):l.error(n("Site.RulesError.index_31"))},r=async e=>{await W({id:s.id,webname:s.name,domain:e.name,port:e.port}),x()},{keys:u,table:c,columns:p}=ta([{type:"selection",width:40},{key:"name",title:Ha("Site.TableRow.index_19"),render:e=>f(a,{href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:()=>[e.name]})},{key:"port",title:Ha("Site.TableRow.index_16"),width:100},Aa({delDomain:r})]),m=()=>{c.data.length>1?p.value[p.value.length-1]=Aa({delDomain:r}):p.value[p.value.length-1]={key:"action",title:Ha("Public.Table.Action"),width:80,align:"right",render:()=>f("span",{class:"text-default"},[Ha("Config.Panel.index_82")])}},_=[{key:"del",type:"confirm",label:n("Site.Batch.index_20"),confirm:{title:n("Site.Batch.index_21"),desc:n("Site.Batch.index_11"),api:e=>W({id:s.id,webname:s.name,domain:e.name,port:e.port},!1),done:()=>{x()},columns:[{key:"name",title:n("Site.Cert.index_29"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:v,setLoading:h}=la(),x=async()=>{try{h(!0);const e={id:s.id},{message:a}=await X(e);c.data=t(a)?a:[],m()}finally{u.value=[],h(!1)}};return x(),i({init:x}),(e,a)=>{const t=z,l=ra,i=V,n=K,s=M;return g(),S("div",null,[k("div",qa,[k("div",Ma,[f(t,{value:P(o),"onUpdate:value":a[0]||(a[0]=e=>R(o)?o.value=e:null),name:"domain"},{default:C((()=>[k("p",null,$(e.$t("Site.Config.index_30")),1),k("p",null,$(e.$t("Site.Config.index_31")),1),k("p",null,$(e.$t("Site.Config.index_32")),1)])),_:1},8,["value"])]),k("div",Ka,[f(l,{class:"add-domain-btn",type:"primary",onClick:d},{default:C((()=>[U($(e.$t("Site.Cert.index_62")),1)])),_:1})])]),f(s,null,{table:C((()=>[f(i,{"checked-row-keys":P(u),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(u)?u.value=e:null),loading:P(v),"max-height":400,data:P(c).data,columns:P(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[f(n,{"checked-row-keys":P(u),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>R(u)?u.value=e:null),data:P(c).data,options:_},null,8,["checked-row-keys","data"])])),_:1})])}}}),za={class:"w-140px"},Wa={class:"w-120px"},Xa=w({__name:"index",setup(e,{expose:a}){const s=T((()=>i((()=>import("./rewrite.js?v=1732601582185")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))),{t:o}=y(),{data:d}=Oa(),r=L({domain:"",dirName:null}),u=b([]),c=async()=>{const e=r.dirName;""!==r.domain.trim()?null!==e?(await Y({id:d.id,domain:r.domain,dirName:e}),j()):l.error(o("Site.RulesError.index_32")):l.error(o("Site.RulesError.index_31"))},p=ia(o("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),m=e=>{p.data.filename=e.filename,p.data.fileContent=e.data,p.data.rlist=e.rlist,p.show=!0},{keys:_,table:v,columns:h}=ta([{type:"selection",width:40},{key:"domain",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:o("Site.TableRow.index_16"),width:80},{key:"path",title:o("Site.Config.index_33"),width:120,ellipsis:{tooltip:{width:"trigger"}}},na({width:130,options:e=>[{label:o("Site.TableOP.index_10"),onClick:()=>{(async e=>{try{const{message:a}=await Z({id:e.id});n(a)&&m(a)}catch(a){const t=ua(a,"meesage.result","");t?l.error(t):ea({title:o("Site.Cert.index_40"),content:o("Site.PHP.index_80"),onConfirm:async({hide:a})=>{const{message:t}=await Q({id:e.id});n(t)&&m(t),a()}})}})(e)}},{label:o("Public.Btn.Del"),onClick:()=>{ea({title:"".concat(o("Ftp.Table.index_10")," ").concat(e.path),content:o("Site.Config.index_34"),onConfirm:async({hide:a})=>{await G({id:e.id}),j(),a()}})}}]})]),x=[{key:"del",type:"confirm",label:o("Site.Batch.index_20"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),api:e=>G({id:e.id},!1),done:()=>{j()},columns:[{key:"domain",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:w,setLoading:E}=la(),j=()=>{r.domain="",r.dirName=null,(async()=>{try{E(!0);const{message:e}=await J({id:d.id});if(n(e)){const{dirs:a,binding:l}=e;t(a)&&a.length>0?(u.value=a.map((e=>({label:e,value:e}))),r.dirName=a[0]):(u.value=[],r.dirName=null),v.data=t(l)?l:[]}}finally{_.value=[],E(!1)}})()};return j(),a({init:j}),(e,a)=>{const t=ca,l=pa,i=ma,n=ra,o=V,d=K,m=M,y=ga;return g(),S("div",null,[f(l,{class:"items-center",size:16},{default:C((()=>[f(l,{class:"items-center"},{default:C((()=>[k("div",null,$(e.$t("Site.TableRow.index_19")),1),k("div",za,[f(t,{value:P(r).domain,"onUpdate:value":a[0]||(a[0]=e=>P(r).domain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])])),_:1}),f(l,{class:"items-center"},{default:C((()=>[k("div",null,$(e.$t("Site.Config.index_33")),1),k("div",Wa,[f(i,{value:P(r).dirName,"onUpdate:value":a[1]||(a[1]=e=>P(r).dirName=e),options:P(u)},null,8,["value","options"])])])),_:1}),f(n,{class:"add-domain-btn",type:"primary",onClick:c},{default:C((()=>[U($(e.$t("Site.Cert.index_62")),1)])),_:1})])),_:1}),f(m,{class:"mt-16px"},{table:C((()=>[f(o,{"checked-row-keys":P(_),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>R(_)?_.value=e:null),loading:P(w),"max-height":440,data:P(v).data,columns:P(h)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[f(d,{"checked-row-keys":P(_),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>R(_)?_.value=e:null),data:P(v).data,options:x},null,8,["checked-row-keys","data"])])),_:1}),f(y,{show:P(p).show,"onUpdate:show":a[4]||(a[4]=e=>P(p).show=e),title:P(p).title,data:P(p).data,width:600,"min-height":488,component:P(s)},null,8,["show","title","data","component"])])}}}),Fa={class:"pt-16px"},Ga={class:"flex-1"},Ya={class:"w-240px"},Za={class:"mt-8px text-desc"},Qa={class:"flex-1"},Ja={class:"w-240px"},et={class:"mt-12px text-desc"},at={class:"my-16px"},tt={class:"text-desc"},lt={class:"my-20px"},it={class:"w-240px"},nt={class:"w-240px"},st={class:"w-240px"},ot=w({__name:"index",setup(e,{expose:a}){const{t:t}=y(),{data:i}=Oa(),o=b(""),d=async()=>{if(""!==o.value.trim())try{await ee({id:i.id,name:i.name,path:o.value}),B()}catch(e){console.warn(e)}else l.error(t("Site.RulesError.index_13"))},r=b(null),u=b([]),c=async()=>{null!==r.value?(await ae({id:i.id,runPath:r.value}),B()):l.error(t("Site.RulesError.index_15"))},p=b(!1),m=async()=>{await te({id:i.id,path:i.path}),B()},_=b(!1),v=async()=>{await le({id:i.id}),B()},h=b(!1),x=L({username_get:"",password_get_1:"",password_get_2:""}),w=async e=>{e||(await ie({id:i.id}),B())},T=async()=>{""!==x.username_get.trim()?""!==x.password_get_1.trim()?""!==x.password_get_2.trim()?x.username_get.trim().length<3||x.password_get_1.trim().length<3?l.error(t("Site.RulesError.index_35")):x.password_get_1.trim()===x.password_get_2.trim()?(await ne({id:i.id,username:x.username_get,password:x.password_get_1}),x.username_get="",x.password_get_1="",x.password_get_2="",B()):l.error(t("Site.RulesError.index_38")):l.error(t("Site.RulesError.index_37")):l.error(t("Site.RulesError.index_36")):l.error(t("Site.RulesError.index_34"))},B=()=>{(async()=>{const{message:e}=await se({id:i.id});n(e)&&(o.value=e.result||"/www")})(),(async()=>{const{message:e}=await oe({id:i.id,path:i.path});if(n(e)){r.value=ua(e,"runPath.runPath",null),p.value=ua(e,"userini",!1),_.value=ua(e,"logs.result",!1),h.value=ua(e,"pass.result",!1);const a=ua(e,"runPath.dirs",[]);u.value=a.map((e=>({label:e,value:e})))}})()};return B(),a({init:B}),(e,a)=>{const t=ka,l=ra,i=pa,n=_a,y=ma,b=s,L=va,B=ca,I=Sa;return g(),S("div",Fa,[f(I,{"label-width":"140"},{default:C((()=>[f(n,{label:e.$t("Site.Lable.index_2"),"show-feedback":!1},{default:C((()=>[k("div",Ga,[f(i,null,{default:C((()=>[k("div",Ya,[f(t,{value:P(o),"onUpdate:value":a[0]||(a[0]=e=>R(o)?o.value=e:null),"input-props":{name:"directory"}},null,8,["value"])]),f(l,{class:"save-dir-btn",type:"primary",onClick:d},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1}),k("div",Za,$(e.$t("Site.Config.index_35")),1)])])),_:1},8,["label"]),f(n,{class:"mt-16px",label:e.$t("Site.Lable.index_3"),"show-feedback":!1},{default:C((()=>[k("div",Qa,[f(i,null,{default:C((()=>[k("div",Ja,[f(y,{value:P(r),"onUpdate:value":a[1]||(a[1]=e=>R(r)?r.value=e:null),class:"run-select",options:P(u)},null,8,["value","options"])]),f(l,{class:"save-run-btn",type:"primary",onClick:c},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1}),k("div",et,$(e.$t("Site.Config.index_36")),1)])])),_:1},8,["label"]),k("div",at,[f(b,{dashed:""})]),f(n,{label:e.$t("Site.Lable.index_4"),"show-feedback":!1},{default:C((()=>[f(i,{class:"items-center"},{default:C((()=>[f(L,{value:P(p),"onUpdate:value":[a[2]||(a[2]=e=>R(p)?p.value=e:null),m]},null,8,["value"]),k("div",tt,$(e.$t("Site.Config.index_37")),1)])),_:1})])),_:1},8,["label"]),f(n,{class:"mt-16px",label:e.$t("Site.Lable.index_5"),"show-feedback":!1},{default:C((()=>[f(i,{class:"items-center"},{default:C((()=>[f(L,{value:P(_),"onUpdate:value":[a[3]||(a[3]=e=>R(_)?_.value=e:null),v]},null,8,["value"]),a[8]||(a[8]=k("div",{class:"text-desc"},null,-1))])),_:1})])),_:1},8,["label"]),k("div",lt,[f(b,{dashed:""})]),f(n,{label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:C((()=>[f(i,{class:"items-center"},{default:C((()=>[f(L,{value:P(h),"onUpdate:value":[a[4]||(a[4]=e=>R(h)?h.value=e:null),w]},null,8,["value"]),a[9]||(a[9]=k("div",{class:"text-desc"},null,-1))])),_:1})])),_:1},8,["label"]),P(h)?(g(),S(E,{key:0},[f(n,{class:"mt-16px",label:e.$t("Site.Lable.index_17"),"show-feedback":!1},{default:C((()=>[k("div",it,[f(B,{value:P(x).username_get,"onUpdate:value":a[5]||(a[5]=e=>P(x).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),f(n,{class:"mt-16px",label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:C((()=>[k("div",nt,[f(B,{value:P(x).password_get_1,"onUpdate:value":a[6]||(a[6]=e=>P(x).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),f(n,{class:"mt-16px",label:e.$t("Site.Lable.index_18"),"show-feedback":!1},{default:C((()=>[k("div",st,[f(B,{value:P(x).password_get_2,"onUpdate:value":a[7]||(a[7]=e=>P(x).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),f(n,{class:"mt-16px",label:" ","show-feedback":!1},{default:C((()=>[f(l,{type:"primary",onClick:T},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})],64)):j("",!0)])),_:1})])}}}),dt={class:"p-20px"},rt={class:"w-280px"},ut={class:"w-280px"},ct={class:"w-280px"},pt={class:"w-280px"},mt=w({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{t:l}=y(),{isEdit:i,siteId:n,row:s,getList:o}=t.data,d=b(null),r=L({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:l("Site.RulesError.index_16"),trigger:["blur","input"]},site_dir:{required:!0,message:l("Site.RulesError.index_17"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return i&&s&&(r.name=s.name,r.site_dir=s.site_dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=d.value)?void 0:a.validate()),i?await de({id:n,name:r.name,username:r.username,password:r.password}):await re({...B(r),id:n}),null==o||o(),e()}}),(e,a)=>{const t=ca,l=_a,n=Sa,s=$a;return g(),S("div",dt,[f(n,{ref_key:"formRef",ref:d,model:P(r),rules:u},{default:C((()=>[f(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:C((()=>[k("div",rt,[f(t,{value:P(r).name,"onUpdate:value":a[0]||(a[0]=e=>P(r).name=e),disabled:P(i),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])])),_:1},8,["label"]),f(l,{label:e.$t("Site.TableRow.index_15"),path:"site_dir"},{default:C((()=>[k("div",ut,[f(t,{value:P(r).site_dir,"onUpdate:value":a[1]||(a[1]=e=>P(r).site_dir=e),disabled:P(i),placeholder:e.$t("Site.Config.Limit.index_5"),"input-props":{name:"site_dir"}},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),f(l,{label:e.$t("Site.Lable.index_24"),path:"username"},{default:C((()=>[k("div",ct,[f(t,{value:P(r).username,"onUpdate:value":a[2]||(a[2]=e=>P(r).username=e),placeholder:"","input-props":{name:"username"}},null,8,["value"])])])),_:1},8,["label"]),f(l,{label:e.$t("Site.Lable.index_27"),path:"password"},{default:C((()=>[k("div",pt,[f(t,{value:P(r).password,"onUpdate:value":a[3]||(a[3]=e=>P(r).password=e),placeholder:"","input-props":{name:"password"}},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),f(s,{class:"mt-4px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_40")),1),k("li",null,$(e.$t("Site.Config.index_41")),1)])),_:1})])}}}),_t=w({__name:"index",setup(e,{expose:a}){const{t:t}=y(),{data:l}=Oa(),{keys:i,table:s,columns:o}=ta([{type:"selection",width:40},{key:"name",title:t("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:t("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},na({width:130,options:e=>[{label:t("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{_(e)}},{label:t("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ea({title:"".concat(t("Site.Config.Limit.index_1",[e.name])),content:t("Site.Config.Limit.index_2"),onConfirm:async({hide:a})=>{await ue({id:l.id,name:e.name}),c(),a()}})}}]})]),d=[{key:"del",type:"confirm",label:t("Site.Batch.index_20"),confirm:{title:t("Site.Batch.index_21"),desc:t("Site.Batch.index_11"),columns:[o.value[1]],api:e=>ue({id:l.id,name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=la(),c=async()=>{try{u(!0);const{message:e}=await ce({id:l.id});if(n(e)){s.data=[];for(const[a,t]of Object.entries(e))if(l.name===a){s.data=t;break}}}finally{i.value=[],u(!1)}},p=ia(t("Site.Config.index_38"),{row:void 0,siteId:l.id,isEdit:!1,getList:c}),m=()=>{p.data.isEdit=!1,p.title=t("Site.Config.index_38"),p.show=!0},_=e=>{p.data.row=e,p.data.isEdit=!0,p.title=t("Site.Config.index_39"),p.show=!0};return c(),a({init:c}),(e,a)=>{const t=ra,l=V,n=K,u=M,c=$a,_=ga;return g(),S("div",null,[f(u,null,{toolsLeft:C((()=>[f(t,{class:"add-limit-btn",type:"primary",onClick:m},{default:C((()=>[U($(e.$t("Site.Config.index_38")),1)])),_:1})])),table:C((()=>[f(l,{"checked-row-keys":P(i),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(i)?i.value=e:null),"row-key":"name",loading:P(r),"max-height":440,data:P(s).data,columns:P(o)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[f(n,{"checked-row-keys":P(i),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(i)?i.value=e:null),"row-key":"name",data:P(s).data,options:d},null,8,["checked-row-keys","data"])])),_:1}),f(c,{class:"mt-16px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_40")),1),k("li",null,$(e.$t("Site.Config.index_41")),1)])),_:1}),f(_,{show:P(p).show,"onUpdate:show":a[2]||(a[2]=e=>P(p).show=e),title:P(p).title,data:P(p).data,width:480,footer:!0,component:mt},null,8,["show","title","data"])])}}}),vt={class:"p-20px"},ht={class:"w-280px"},xt={class:"w-280px"},ft={class:"w-280px"},wt=w({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{isEdit:l,siteName:i,row:n,getList:s}=t.data,{t:o}=y(),d=b(null),r=L({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:o("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:o("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:o("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...B(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=d.value)?void 0:a.validate()),l?await pe(c()):await me(c()),null==s||s(),e()}}),(e,a)=>{const t=ca,i=_a,n=Sa,s=$a;return g(),S("div",vt,[f(n,{ref_key:"formRef",ref:d,model:P(r),rules:u},{default:C((()=>[f(i,{label:e.$t("Site.TableRow.index_2"),path:"deny_name"},{default:C((()=>[k("div",ht,[f(t,{value:P(r).deny_name,"onUpdate:value":a[0]||(a[0]=e=>P(r).deny_name=e),disabled:P(l),placeholder:e.$t("Site.Placeholder.Index_1"),"input-props":{name:"name"}},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),f(i,{label:e.$t("Site.TableRow.index_18"),path:"suffix"},{default:C((()=>[k("div",xt,[f(t,{value:P(r).suffix,"onUpdate:value":a[1]||(a[1]=e=>P(r).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2"),"input-props":{name:"suffix"}},null,8,["value","placeholder"])])])),_:1},8,["label"]),f(i,{label:e.$t("Site.TableRow.index_15"),path:"dir"},{default:C((()=>[k("div",ft,[f(t,{value:P(r).dir,"onUpdate:value":a[2]||(a[2]=e=>P(r).dir=e),placeholder:e.$t("Site.Placeholder.Index_3"),"input-props":{name:"dir"}},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),f(s,{class:"mt-4px"},{default:C((()=>[k("li",null,$(e.$t("Site.PHP.index_72")),1),k("li",null,$(e.$t("Site.PHP.index_73")),1),k("li",null,$(e.$t("Site.PHP.index_74")),1),k("li",null,$(e.$t("Site.PHP.index_75")),1),k("li",null,$(e.$t("Site.PHP.index_76")),1)])),_:1})])}}}),yt=w({__name:"index",setup(e,{expose:a}){const{t:l}=y(),{data:i}=Oa(),{keys:n,table:s,columns:o}=ta([{type:"selection",width:40},{key:"name",title:l("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:l("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:l("Site.TableRow.index_18"),ellipsis:{tooltip:{width:"trigger"}}},na({width:130,options:e=>[{label:l("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{_(e)}},{label:l("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ea({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.name,"]"),content:l("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await _e({website:i.name,deny_name:e.name}),c(),a()}})}}]})]),d=[{key:"del",type:"confirm",label:l("Site.Batch.index_20"),confirm:{title:l("Site.Batch.index_21"),desc:l("Site.Batch.index_11"),columns:[o.value[1]],api:e=>_e({website:i.name,deny_name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=la(),c=async()=>{try{u(!0);const{message:e}=await ve({website:i.name});s.data=t(e)?e:[]}finally{n.value=[],u(!1)}},p=ia(l("Site.Config.index_38"),{row:void 0,siteName:i.name,isEdit:!1,getList:c}),m=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=l("Site.Config.index_38"),p.show=!0},_=e=>{p.data.row=e,p.data.isEdit=!0,p.title=l("Site.Config.index_39"),p.show=!0};return c(),a({init:c}),(e,a)=>{const t=ra,l=V,i=K,u=M,c=$a,_=ga;return g(),S("div",null,[f(u,null,{toolsLeft:C((()=>[f(t,{class:"add-deny-btn",type:"primary",onClick:m},{default:C((()=>[U($(e.$t("Site.Config.index_38")),1)])),_:1})])),table:C((()=>[f(l,{"checked-row-keys":P(n),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(n)?n.value=e:null),"row-key":"name",loading:P(r),"max-height":440,data:P(s).data,columns:P(o)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[f(i,{"checked-row-keys":P(n),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(n)?n.value=e:null),"row-key":"name",data:P(s).data,options:d},null,8,["checked-row-keys","data"])])),_:1}),f(c,{class:"mt-16px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_42"))+" |",1),k("li",null,$(e.$t("Site.Config.index_43")),1),k("li",null,$(e.$t("Site.Config.index_44")),1),k("li",null,$(e.$t("Site.Config.index_45")),1)])),_:1}),f(_,{show:P(p).show,"onUpdate:show":a[2]||(a[2]=e=>P(p).show=e),title:P(p).title,data:P(p).data,width:480,footer:!0,component:wt},null,8,["show","title","data"])])}}}),bt=w({__name:"index",setup(e){const{t:a}=y(),t=b("limit"),l=[{key:"limit",label:a("Site.Config.index_5"),component:_t},{key:"deny",label:a("Site.Config.index_14"),component:yt}];return(e,a)=>{const i=Ca;return g(),I(i,{value:P(t),"onUpdate:value":a[0]||(a[0]=e=>R(t)?t.value=e:null),options:l},null,8,["value"])}}}),gt={class:"pt-8px"},St={class:"w-200px"},kt={class:"flex flex-col"},Ct={class:"w-200px"},$t={class:"mt-8px text-desc"},Pt={class:"flex flex-col"},Rt={class:"w-200px"},Ut={class:"mt-8px text-desc"},Lt={class:"flex flex-col"},Tt={class:"w-200px"},Et={class:"mt-8px text-desc"},jt=w({__name:"index",setup(e,{expose:a}){const{t:t}=y(),{data:l}=Oa(),i=b(null),s=L({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),d={perserver:{trigger:["blur","change"],validator:()=>!!s.perserver||new Error(t("Site.RulesError.index_318"))},perip:{trigger:["blur","change"],validator:()=>!!s.perip||new Error(t("Site.RulesError.index_319"))},limit_rate:{trigger:["blur","change"],validator:()=>!!s.limit_rate||new Error(t("Site.RulesError.index_320"))}},r=b([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?m():(await he({id:l.id}),_())},c=(e,a)=>{const{items:t}=a;n(t)&&p(t)},p=e=>{s.perserver=e.perserver,s.perip=e.perip,s.limit_rate=e.limit_rate},m=async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),await xe({id:l.id,perserver:s.perserver,perip:s.perip,limit_rate:s.limit_rate}),_()},_=async()=>{const{message:e}=await fe({id:l.id});n(e)&&(s.status=0!=e.perserver,p(r.value[0].items),o(e.perserver)&&0!=e.perserver&&(s.perserver=e.perserver),o(e.perip)&&0!=e.perip&&(s.perip=e.perip),o(e.limit_rate)&&0!=e.limit_rate&&(s.limit_rate=e.limit_rate))};return _(),a({init:_}),(e,a)=>{const t=ha,l=_a,n=ma,o=xa,p=ra,_=Sa;return g(),S("div",gt,[f(_,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:P(s),rules:d},{default:C((()=>[f(l,{label:" "},{default:C((()=>[f(t,{checked:P(s).status,"onUpdate:checked":[a[0]||(a[0]=e=>P(s).status=e),u]},{default:C((()=>[U($(e.$t("Site.PHP.index_82")),1)])),_:1},8,["checked"])])),_:1}),f(l,{label:e.$t("Site.Lable.index_40"),path:"type"},{default:C((()=>[k("div",St,[f(n,{value:P(s).type,"onUpdate:value":[a[1]||(a[1]=e=>P(s).type=e),c],options:P(r)},null,8,["value","options"])])])),_:1},8,["label"]),f(l,{label:e.$t("Site.Lable.index_41"),path:"perserver"},{default:C((()=>[k("div",kt,[k("div",Ct,[f(o,{value:P(s).perserver,"onUpdate:value":a[2]||(a[2]=e=>P(s).perserver=e),"show-button":!1,min:0},null,8,["value"])]),k("div",$t,$(e.$t("Site.PHP.index_83")),1)])])),_:1},8,["label"]),f(l,{label:e.$t("Site.Lable.index_45"),path:"perip"},{default:C((()=>[k("div",Pt,[k("div",Rt,[f(o,{value:P(s).perip,"onUpdate:value":a[3]||(a[3]=e=>P(s).perip=e),"show-button":!1,min:0},null,8,["value"])]),k("div",Ut,$(e.$t("Site.PHP.index_84")),1)])])),_:1},8,["label"]),f(l,{label:e.$t("Site.Config.index_6"),path:"limit_rate"},{default:C((()=>[k("div",Lt,[k("div",Tt,[f(o,{value:P(s).limit_rate,"onUpdate:value":a[4]||(a[4]=e=>P(s).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),k("div",Et,$(e.$t("Site.PHP.index_85")),1)])])),_:1},8,["label"]),f(l,{label:" "},{default:C((()=>[f(p,{type:"primary",onClick:m},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Bt={class:"w-420px"},It={class:"mt-8px"},Nt=w({__name:"index",setup(e,{expose:a}){const{data:t}=Oa(),l=b(""),i=async()=>{const{message:e}=await we({id:t.id});n(e)&&(l.value=d(e.result)?e.result.split(",").join("\n"):"")},s=async()=>{await ye({id:t.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),a({init:i}),(e,a)=>{const t=z,i=ra,n=$a;return g(),S("div",null,[k("div",Bt,[f(t,{value:P(l),"onUpdate:value":a[0]||(a[0]=e=>R(l)?l.value=e:null),rows:12,name:"content",placeholder:""},null,8,["value"])]),k("div",It,[f(i,{class:"save-btn",type:"primary",onClick:s},{default:C((()=>[U($(e.$t("Public.Btn.Save")),1)])),_:1})]),f(n,{class:"mt-16px"},{default:C((()=>[k("li",null,$(e.$t("Site.PHP.index_79")),1)])),_:1})])}}}),Dt={class:"mt-8px"},Ot=w({__name:"index",setup(e,{expose:a}){const{data:t}=Oa(),l=r(),i=b(null),n=b((()=>{const{webserver:e}=l,a="openlitespeed"===e?"".concat(e,"/detail"):e;return"/www/server/panel/vhost/".concat(a,"/").concat(t.name,".conf")})()),s=async()=>{var e;null==(e=i.value)||e.getContent()},o=()=>{var e;null==(e=i.value)||e.saveFile()};return N((()=>{s()})),a({init:s}),(e,a)=>{const t=ra,l=$a;return g(),S("div",null,[f(Pa,{ref_key:"configRef",ref:i,path:P(n),"onUpdate:path":a[0]||(a[0]=e=>R(n)?n.value=e:null),height:"500"},null,8,["path"]),k("div",Dt,[f(t,{type:"primary",onClick:o},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})]),f(l,{class:"mt-16px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_59")),1),k("li",null,$(e.$t("Site.Config.index_60")),1)])),_:1})])}}}),Ht={class:"p-8"},At=w({__name:"form",setup(e,{expose:a}){const t=b(null),l=b(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=L({path:"",operation:[]}),s=(e,a)=>{"dir"===a.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return a({onConfirm:async()=>{var e;await(null==(e=t.value)?void 0:e.validate())}}),(e,a)=>{const o=ka,d=_a,r=ha,c=u,p=fa,m=Sa,_=pa,v=$a;return g(),S("div",Ht,[f(_,null,{default:C((()=>[f(m,{ref_key:"formRef",ref:t,model:P(n),rules:i},{default:C((()=>[f(d,{label:"Detection path",path:"path"},{default:C((()=>[f(o,{disabled:"",value:P(n).path,"onUpdate:value":a[0]||(a[0]=e=>P(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])])),_:1}),f(d,{label:"Alert operation",path:"operation"},{default:C((()=>[f(p,{value:P(n).operation,"onUpdate:value":a[1]||(a[1]=e=>P(n).operation=e)},{default:C((()=>[f(c,null,{default:C((()=>[f(r,{value:0},{default:C((()=>a[2]||(a[2]=[U(" Read ")]))),_:1}),f(r,{value:1,disabled:P(l)},{default:C((()=>a[3]||(a[3]=[U(" delete ")]))),_:1},8,["disabled"]),f(r,{value:2,disabled:P(l)},{default:C((()=>a[4]||(a[4]=[U(" Modify/increase ")]))),_:1},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),f(v,{class:"mt-16px"},{default:C((()=>a[5]||(a[5]=[k("li",null,"Directory temporarily only supports reading alarm operation",-1)]))),_:1})])}}}),qt={class:"p-5"},Mt={class:"mt-16px"},Kt=w({__name:"monitor",setup(e){const a=b(!1),t=b(!1),l=b([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=b([]);return(e,n)=>{const s=ra,o=pa,d=V,r=$a,u=ga;return g(),S("div",qt,[k("div",null,[f(o,{justify:"space-between"},{default:C((()=>[f(s,{type:"primary",onClick:n[0]||(n[0]=e=>a.value=!0)},{default:C((()=>n[2]||(n[2]=[U(" Add monitor ")]))),_:1}),f(s,null,{icon:C((()=>n[3]||(n[3]=[k("img",{src:Ua,class:"w-5"},null,-1)]))),_:1})])),_:1})]),k("div",Mt,[f(d,{loading:P(t),"loading-num":6,data:P(i),columns:P(l)},null,8,["loading","data","columns"])]),k("div",null,[f(r,{class:"mt-16px"},{default:C((()=>[n[5]||(n[5]=k("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1)),n[6]||(n[6]=k("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1)),k("li",null,[f(s,{text:"",class:"color-#20a53a"},{default:C((()=>n[4]||(n[4]=[U("Tutorial")]))),_:1})])])),_:1})]),f(u,{show:P(a),"onUpdate:show":n[1]||(n[1]=e=>R(a)?a.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:At},null,8,["show"])])}}});const Vt=c({},[["render",function(e,a){return g(),S("div",null,"555")}]]),zt={class:"box mt-16px"},Wt={key:0,class:"items-center warning"},Xt={class:"warning"},Ft={class:"color-#f23836"},Gt=c(w({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=r(),l=b(!1),i=b(!1),n=b(!1),s=e,o=p(),d=()=>{sa({source:114})},u=()=>{const e=l.value?"Open the site security alarm":"Close the site security alarm",a=l.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";ea({title:e,content:a,onConfirm:async()=>{const e=Ea(l.value);console.log(e,"result")},onPublicClose:()=>{l.value=!l.value}})};return(e,r)=>{const c=va,p=pa,m=ra,_=$a,v=a,h=Ra,x=ga;return g(),S(E,null,[k("div",zt,[f(h,{install:P(o).isPro,class:"install"},D({default:C((()=>[f(p,{class:"items-center color-#666"},{default:C((()=>[r[8]||(r[8]=k("div",null,"Site protection",-1)),k("div",null,[f(c,{value:P(l),"onUpdate:value":[r[0]||(r[0]=e=>R(l)?l.value=e:null),u]},null,8,["value"])]),r[9]||(r[9]=k("div",null,"today: 0",-1)),r[10]||(r[10]=k("div",null,"Total alarm: 0",-1)),P(l)?j("",!0):(g(),S("div",Wt,[r[7]||(r[7]=k("img",{src:Ta,class:"h-8"},null,-1)),k("span",Xt,[r[5]||(r[5]=U(" Please open ")),k("span",Ft,"PHP-"+$(s.phpVersion),1),r[6]||(r[6]=U(" protection first "))])]))])),_:1}),f(p,{class:"mt-16px"},{default:C((()=>[f(m,{onClick:r[1]||(r[1]=e=>i.value=!0)},{default:C((()=>r[11]||(r[11]=[U("Monitor")]))),_:1}),f(m,{onClick:r[2]||(r[2]=e=>n.value=!0)},{default:C((()=>r[12]||(r[12]=[U("Trigger log")]))),_:1})])),_:1}),f(_,{class:"mt-16px"},{default:C((()=>r[13]||(r[13]=[k("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1),k("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1)]))),_:1})])),_:2},[s.isInstall?{name:"desc",fn:C((()=>[f(p,{class:"items-center"},{default:C((()=>[r[16]||(r[16]=k("img",{src:La,class:"h-10"},null,-1)),k("span",null,[r[15]||(r[15]=U("If you need to use the [PHP website security alarm] function, please buy first ")),f(v,{onClick:d},{default:C((()=>r[14]||(r[14]=[U("click to buy")]))),_:1})])])),_:1})])),key:"0"}:{name:"desc",fn:C((()=>[f(p,{class:"items-center"},{default:C((()=>[r[19]||(r[19]=k("img",{src:La,class:"h-10"},null,-1)),k("span",null,[r[18]||(r[18]=U("Currently not installed [PHP website security alarm], ")),f(v,null,{default:C((()=>r[17]||(r[17]=[U("Click to install")]))),_:1})])])),_:1})])),key:"1"}]),1032,["install"])]),f(x,{show:P(i),"onUpdate:show":r[3]||(r[3]=e=>R(i)?i.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:Kt},null,8,["show"]),f(x,{show:P(n),"onUpdate:show":r[4]||(r[4]=e=>R(n)?n.value=e:null),title:"[".concat(P(t).siteName,"] Site security log"),width:1e3,"min-height":148,footer:!1,component:Vt},null,8,["show","title"])],64)}}}),[["__scopeId","data-v-b2f1026f"]]),Yt={class:"w-140px"},Zt={class:"my-16px"},Qt={key:0,class:"my-16px"},Jt=w({__name:"index",setup(e,{expose:a}){const{data:i}=Oa(),o=r(),d=b(null),u=b(!1),c=b(!1);let p="";const _=b([]),v=async()=>{null!==d.value?(await be({siteName:i.name,version:d.value,other:p}),o.setRefresh(!0),w()):l.error("Please select a PHP version")},h=async()=>{const{message:e}=await Ce({id:i.id});n(e)&&(u.value=e.result)},x=async e=>{await ge({id:i.id,act:e?1:0}),h()},w=()=>{(async()=>{const{message:e}=await ja();n(e)&&(c.value=e.php_status)})(),h(),(async()=>{const{message:e}=await ke();t(e)&&(_.value=e.reverse().map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await Se({siteName:i.name});n(e)&&(d.value=e.phpversion,p=e.php_other||"")})()};return w(),a({init:w}),(e,a)=>{const t=ma,l=ra,i=pa,n=$a,o=s,r=va;return g(),S("div",null,[f(i,{class:"items-center"},{default:C((()=>[k("div",null,$(e.$t("Site.Lable.index_22")),1),k("div",Yt,[f(t,{value:P(d),"onUpdate:value":a[0]||(a[0]=e=>R(d)?d.value=e:null),options:P(_)},null,8,["value","options"])]),k("div",null,[f(l,{type:"primary",onClick:v},{default:C((()=>[U($(e.$t("Site.Cert.index_61")),1)])),_:1})])])),_:1}),f(n,{class:"mt-16px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_65")),1),k("li",null,$(e.$t("Site.Config.index_66")),1),k("li",null,$(e.$t("Site.Config.index_67")),1),k("li",null,$(e.$t("Site.Config.index_68")),1),k("li",null,$(e.$t("Site.Config.index_69")),1),k("li",null,$(e.$t("Site.Config.index_70")),1)])),_:1}),k("div",Zt,[f(o,{dashed:""})]),f(i,{class:"items-center"},{default:C((()=>[k("div",null,$(e.$t("Site.Config.index_64")),1),k("div",null,[f(r,{value:P(u),"onUpdate:value":[a[1]||(a[1]=e=>R(u)?u.value=e:null),x]},null,8,["value"])])])),_:1}),f(n,{class:"mt-16px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_71")),1),k("li",null,$(e.$t("Site.Config.index_72")),1)])),_:1}),P(m)?(g(),S("div",Qt,[f(o,{dashed:""}),f(Gt,{isInstall:P(c),phpVersion:P(d)},null,8,["isInstall","phpVersion"])])):j("",!0)])}}}),el={class:"mr-16px text-#777"},al={key:1,class:"text-#777"},tl={class:"w-200px mr-8px"},ll={class:"w-200px mr-8px"},il=w({__name:"index",setup(e,{expose:a}){const i=r(),{data:s}=Oa(),o=b(!1),d=b("--"),u=b("--"),c=b(s.cache_status),p=b(null),m=b([]),_=b(""),v=async()=>{await $e({s_id:s.id,version:u.value}),y()},h=async e=>{await Pe({version:s.php_version,sitename:s.name,act:e}),s.cache_status=e,i.setRefresh(!0)},x=async()=>{await Re({s_id:s.id})},w=async()=>{p.value?""!==_.value.trim()?await Ue({s_id:s.id,user:p.value,new_pass:_.value}):l.error("Please enter new password"):l.error("Please select user")},y=async()=>{const e=l.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await Le({s_id:s.id});n(e)&&(d.value=e.local_v,u.value=e.online_v,o.value=e.update)})(),await(async()=>{const{message:e}=await Te({s_id:s.id});t(e)&&e.length>0?(m.value=e.map((e=>({label:e,value:e}))),p.value=e[0]):(m.value=[],p.value=null)})()}finally{e.close()}};return y(),a({init:y}),(e,a)=>{const t=ra,l=_a,i=ha,n=ma,s=ca,r=Sa;return g(),S("div",null,[f(r,null,{default:C((()=>[f(l,{label:"WP Version"},{default:C((()=>[P(o)?(g(),S(E,{key:0},[k("div",el,"The current version is: "+$(P(d)),1),f(t,{type:"primary",onClick:v},{default:C((()=>[U("Upgrade to "+$(P(u)),1)])),_:1})],64)):(g(),S("span",al,"The latest version"))])),_:1}),f(l,{label:"Cache"},{default:C((()=>[f(i,{checked:P(c),"onUpdate:checked":[a[0]||(a[0]=e=>R(c)?c.value=e:null),h],class:"mr-16px"},{default:C((()=>a[3]||(a[3]=[U(" Open cache ")]))),_:1},8,["checked"]),f(t,{type:"primary",onClick:x},{default:C((()=>a[4]||(a[4]=[U("Purge all cache")]))),_:1})])),_:1}),f(l,{label:"Reset password"},{default:C((()=>[k("div",tl,[f(n,{value:P(p),"onUpdate:value":a[1]||(a[1]=e=>R(p)?p.value=e:null),options:P(m)},null,8,["value","options"])]),k("div",ll,[f(s,{value:P(_),"onUpdate:value":a[2]||(a[2]=e=>R(_)?_.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),f(t,{type:"primary",onClick:w},{default:C((()=>a[5]||(a[5]=[U("Save password")]))),_:1})])),_:1})])),_:1})])}}}),nl={class:"pt-8px"},sl={class:"w-180px mr-8px"},ol={class:"w-180px"},dl={class:"w-180px"},rl={class:"w-280px"},ul={class:"w-180px"},cl={class:"w-180px"},pl={class:"w-280px"},ml={class:"flex-1"},_l={key:0,class:"mb-16px text-error"},vl={key:1,class:"mb-16px text-error"},hl=w({__name:"index",setup(e,{expose:t}){const{t:l}=y(),{data:i}=Oa(),s=L({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),o=b([]),r=[{label:l("Docker.App.index_4"),value:"install"},{label:l("Docker.App.index_3"),value:"update"}],u=[{label:l("Site.Lable.index_8"),value:"repos.packagist"}],c=[{label:l("Site.Lable.index_9"),value:"www"},{label:l("Site.Lable.index_10"),value:"root"}],p=b(""),m=b(""),_=async()=>{await Ee({repo:s.repo}),w()},v=async()=>{await je({path:i.path}),w()},h=()=>{ea({title:l("Site.PHP.index_77"),content:l("Site.PHP.index_78"),onConfirm:async()=>{await Be({php_version:s.php_version,composer_args:s.composer_args,composer_cmd:s.composer_cmd,repo:s.repo,path:s.composer_path,user:s.composer_user}),w()}})},x=()=>{o.value.unshift({label:l("Site.Lable.index_12"),value:"auto"})},w=async()=>{const{message:e}=await Ie({path:i.path});n(e)&&(s.composer_version=e.result,e.comp_json&&(p.value=e.comp_json),d(e.comp_lock)&&(m.value=e.comp_lock),o.value=e.php_versions.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),x())};return x(),w(),t({init:w}),(e,t)=>{const l=ca,i=ra,n=_a,d=ma,x=ka,w=a,y=Sa;return g(),S("div",nl,[f(y,{class:"px-8px"},{default:C((()=>[f(n,{label:e.$t("Site.TableRow.index_3"),path:"composer_version"},{default:C((()=>[k("div",sl,[f(l,{value:P(s).composer_version,"onUpdate:value":t[0]||(t[0]=e=>P(s).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),f(i,{onClick:_},{default:C((()=>[U($(e.$t("Docker.App.index_3")),1)])),_:1})])),_:1},8,["label"]),f(n,{label:e.$t("Site.TableRow.index_27"),path:"php_version"},{default:C((()=>[k("div",ol,[f(d,{value:P(s).php_version,"onUpdate:value":t[1]||(t[1]=e=>P(s).php_version=e),options:P(o)},null,8,["value","options"])])])),_:1},8,["label"]),f(n,{label:e.$t("Site.TableRow.index_28"),path:"composer_args"},{default:C((()=>[k("div",dl,[f(d,{value:P(s).composer_args,"onUpdate:value":t[2]||(t[2]=e=>P(s).composer_args=e),options:r},null,8,["value"])])])),_:1},8,["label"]),f(n,{label:e.$t("Site.TableRow.index_29"),path:"composer_cmd"},{default:C((()=>[k("div",rl,[f(l,{value:P(s).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>P(s).composer_cmd=e),placeholder:e.$t("Site.Cert.index_67")},null,8,["value","placeholder"])])])),_:1},8,["label"]),f(n,{label:e.$t("Site.Lable.index_32"),path:"repo"},{default:C((()=>[k("div",ul,[f(d,{value:P(s).repo,"onUpdate:value":t[4]||(t[4]=e=>P(s).repo=e),options:u},null,8,["value"])])])),_:1},8,["label"]),f(n,{label:e.$t("Ftp.Analysis.Index_27"),path:"composer_user"},{default:C((()=>[k("div",cl,[f(d,{value:P(s).composer_user,"onUpdate:value":t[5]||(t[5]=e=>P(s).composer_user=e),options:c},null,8,["value"])])])),_:1},8,["label"]),f(n,{label:e.$t("Site.Lable.index_26"),path:"composer_path"},{default:C((()=>[k("div",pl,[f(x,{value:P(s).composer_path,"onUpdate:value":t[6]||(t[6]=e=>P(s).composer_path=e)},null,8,["value"])])])),_:1},8,["label"]),f(n,{label:" ","show-feedback":!1},{default:C((()=>[k("div",ml,[P(p)?(g(),S("div",_l,$(P(p)),1)):j("",!0),P(m)?(g(),S("div",vl,[k("span",null,$(P(m)),1),f(w,{onClick:v},{default:C((()=>[U("["+$(e.$t("Site.TableOP.index_6"))+"]",1)])),_:1})])):j("",!0),f(i,{type:"primary",onClick:h},{default:C((()=>[U($(e.$t("Site.Lable.index_11")),1)])),_:1})])])),_:1})])),_:1})])}}}),xl={class:"px-20px py-24px"},fl={class:"w-120px"},wl={class:"w-120px"},yl={class:"w-200px"},bl={class:"w-200px"},gl={class:"w-200px"},Sl=w({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:l}=y(),i=e,{isEdit:n,siteId:s,siteName:o,row:d,getList:r}=i.data,u=b(null),c=L({redirectname:"".concat((new Date).valueOf()),type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),p={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(l("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(l("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(l("Site.RulesError.index_25"))}},m=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],_=[{label:"301",value:"301"},{label:"302",value:"302"}],v=b([]),h=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:x,setLoading:w}=la();return n&&d&&(c.redirectname=d.redirectname,c.type=d.type,c.holdpath=d.holdpath,c.redirecttype=d.redirecttype,c.redirectpath=d.redirectpath,c.domainorpath=d.domainorpath,c.redirectdomain=d.redirectdomain,c.tourl=d.tourl),(async()=>{try{w(!0);const{message:e}=await X({id:s});v.value=t(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{w(!1)}})(),a({onConfirm:async({hide:e})=>{var a;await(null==(a=u.value)?void 0:a.validate());const t={...B(c),sitename:o};n?await De(t):await Ne(t),null==r||r(),e()}}),(e,a)=>{const t=va,l=_a,i=pa,n=ma,s=ca,o=Sa,d=$a;return g(),S("div",xl,[f(o,{ref_key:"formRef",ref:u,model:P(c),rules:p},{default:C((()=>[f(i,{size:60},{default:C((()=>[f(l,{label:e.$t("Site.Lable.index_34")},{default:C((()=>[f(t,{value:P(c).type,"onUpdate:value":a[0]||(a[0]=e=>P(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),f(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:C((()=>[f(t,{value:P(c).holdpath,"onUpdate:value":a[1]||(a[1]=e=>P(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),f(i,{size:30},{default:C((()=>[f(l,{label:e.$t("Site.TableRow.index_11")},{default:C((()=>[k("div",fl,[f(n,{value:P(c).domainorpath,"onUpdate:value":[a[2]||(a[2]=e=>P(c).domainorpath=e),h],class:"type-select",options:m},null,8,["value"])])])),_:1},8,["label"]),f(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:C((()=>[k("div",wl,[f(n,{value:P(c).redirecttype,"onUpdate:value":a[3]||(a[3]=e=>P(c).redirecttype=e),class:"mode-select",options:_},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===P(c).domainorpath?(g(),I(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:C((()=>[k("div",yl,[f(n,{value:P(c).redirectdomain,"onUpdate:value":a[4]||(a[4]=e=>P(c).redirectdomain=e),class:"domain-select",multiple:!0,loading:P(x),options:P(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):j("",!0),"path"===P(c).domainorpath?(g(),I(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:C((()=>[k("div",bl,[f(s,{value:P(c).redirectpath,"onUpdate:value":a[5]||(a[5]=e=>P(c).redirectpath=e),placeholder:"","input-props":{name:"path"}},null,8,["value"])])])),_:1},8,["label"])):j("",!0),f(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:C((()=>[k("div",gl,[f(s,{value:P(c).tourl,"onUpdate:value":a[6]||(a[6]=e=>P(c).tourl=e),placeholder:"","input-props":{name:"url"}},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),f(d,{class:"mt-12px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_77")),1),k("li",null,$(e.$t("Site.Config.index_78")),1),k("li",null,$(e.$t("Site.Config.index_79")),1),k("li",null,$(e.$t("Site.Config.index_80")),1),k("li",null,$(e.$t("Site.Config.index_81")),1),k("li",null,$(e.$t("Site.Config.index_82")),1)])),_:1})])}}}),kl={class:"p-20px"},Cl={class:"mt-12px"},$l=w({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:i,siteName:s,getList:o}=t.data,d=a,u=r(),c=b(""),p=b(""),m=b(""),_=async()=>{const{message:e}=await He({path:m.value,data:c.value,encoding:p.value});n(e)&&l.success(e.msg),null==o||o(),d("close")};return(async()=>{const{message:e}=await Oe({sitename:s,redirectname:i.redirectname,webserver:u.webserver});n(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,a)=>{const t=ra,l=$a;return g(),S("div",kl,[f(Pa,{value:P(c),"onUpdate:value":a[0]||(a[0]=e=>R(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),k("div",Cl,[f(t,{type:"primary",onClick:_},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})]),f(l,{class:"mt-24px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),Pl=w({__name:"index",setup(e,{expose:l}){const{t:i}=y(),{data:n}=Oa(),s=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:d,columns:r}=ta([{type:"selection",width:40},{key:"sitename",title:i("Site.TableRow.index_11"),ellipsis:{tooltip:{width:"trigger"}},render:e=>"path"===e.domainorpath?e.redirectpath:e.sitename},{key:"redirecttype",title:i("Site.TableRow.index_12"),width:90},{key:"holdpath",title:i("Site.TableRow.index_13"),width:140,render:e=>f(a,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Ae({...s(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?i("Config.Alarm.index_18"):i("Public.Status.TurnOff")]})},{key:"type",title:i("Config.Safe.index_156"),width:100,render:e=>f(oa,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":i("Public.Status.Running"),"unchecked-title":i("Public.Status.Paused"),onClick:async a=>{await Ae({...s(e),type:a,holdpath:e.holdpath,status:e.type}),e.type=a}},null)},na({width:140,options:e=>[{label:i("Site.TableOP.index_2"),class:"config-btn",onClick:()=>{w(e)}},{label:i("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:i("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ea({title:i("Site.Config.Redirect.index_1",[e.redirectname]),content:i("Site.Config.Redirect.index_2"),onConfirm:async()=>{await qe({sitename:n.name,redirectname:e.redirectname}),m()}})}}]})]),u=[{key:"del",type:"confirm",label:i("Site.Batch.index_20"),confirm:{title:i("Site.Batch.index_21"),desc:i("Site.Batch.index_11"),columns:[r.value[1]],api:e=>qe({sitename:n.name,redirectname:e.redirectname},!1),done:()=>{m()}}}],{loading:c,setLoading:p}=la(),m=async()=>{try{p(!0);const{message:e}=await Me({sitename:n.name});d.data=t(e)?e:[]}finally{o.value=[],p(!1)}},_=ia(i("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:m}),v=()=>{_.data.row=void 0,_.data.isEdit=!1,_.title=i("Site.Config.index_74"),_.show=!0},h=e=>{_.data.row=e,_.data.isEdit=!0,_.title="".concat(i("Site.Config.index_75")," [").concat(e.redirectname,"]"),_.show=!0},x=ia("",{row:void 0,siteName:n.name,getList:m}),w=e=>{x.data.row=e,x.title="".concat(i("Site.Config.index_76")," [").concat(e.redirectname,"]"),x.show=!0};return m(),l({init:m}),(e,a)=>{const t=ra,l=V,i=K,n=M,s=ga;return g(),S("div",null,[f(n,null,{toolsLeft:C((()=>[f(t,{class:"add-btn",type:"primary",onClick:v},{default:C((()=>[U($(e.$t("Site.Config.index_73")),1)])),_:1})])),table:C((()=>[f(l,{"checked-row-keys":P(o),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(o)?o.value=e:null),"row-key":"redirectname",loading:P(c),"max-height":440,data:P(d).data,columns:P(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[f(i,{"checked-row-keys":P(o),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(o)?o.value=e:null),"row-key":"redirectname",data:P(d).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),f(s,{show:P(_).show,"onUpdate:show":a[2]||(a[2]=e=>P(_).show=e),title:P(_).title,data:P(_).data,width:660,footer:!0,component:Sl},null,8,["show","title","data"]),f(s,{show:P(x).show,"onUpdate:show":a[3]||(a[3]=e=>P(x).show=e),title:P(x).title,data:P(x).data,width:580,component:$l},null,8,["show","title","data"])])}}}),Rl={class:"px-20px py-24px"},Ul={class:"w-220px"},Ll={class:"w-220px"},Tl={class:"w-220px"},El={class:"w-220px"},jl={class:"w-220px"},Bl={class:"w-220px"},Il={class:"w-220px"},Nl=w({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=y(),i=e,{isEdit:n,siteName:s,row:o,getList:d}=i.data,r=b(null),u=L({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:s}),c={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error(l("Site.RulesError.index_26"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error(l("Site.RulesError.index_27"))},proxydir:{trigger:["blur","input"],validator:()=>1!==u.advanced||""!==u.proxydir.trim()||new Error(l("Site.RulesError.index_28"))},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error(l("Site.RulesError.index_25"))},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error(l("Site.RulesError.index_29"))}},p=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?u.todomain="$host":u.todomain=e},m=b([]),_=()=>{m.value.length>=3||m.value.push({sub1:"",sub2:""})};_();return(()=>{if(n&&o){u.type=o.type,u.cache=o.cache,u.advanced=o.advanced,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename;const e=o.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(m.value=e)}})(),t({onConfirm:async({hide:e})=>{var a;await(null==(a=r.value)?void 0:a.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach(((e,a)=>{m.value.length-1<a||(e.sub1=m.value[a].sub1,e.sub2=m.value[a].sub2)})),{...B(u),subfilter:e}})();n?await Ve(t):await Ke(t),null==d||d(),e()}}),(e,t)=>{const l=va,i=_a,s=pa,o=ca,d=xa,v=wa,h=ya,x=a,w=ra,y=Sa,b=$a;return g(),S("div",Rl,[f(y,{ref_key:"formRef",ref:r,model:P(u),rules:c},{default:C((()=>[f(s,{size:32},{default:C((()=>[f(i,{label:e.$t("Site.Lable.index_46")},{default:C((()=>[f(l,{value:P(u).type,"onUpdate:value":t[0]||(t[0]=e=>P(u).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),f(i,{label:e.$t("Site.Lable.index_47"),"label-width":"100"},{default:C((()=>[f(l,{value:P(u).cache,"onUpdate:value":t[1]||(t[1]=e=>P(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),f(i,{label:e.$t("Site.Lable.index_35"),"label-width":"126"},{default:C((()=>[f(l,{value:P(u).advanced,"onUpdate:value":t[2]||(t[2]=e=>P(u).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),f(i,{label:e.$t("Site.Lable.index_38"),path:"proxyname"},{default:C((()=>[k("div",Ul,[f(o,{value:P(u).proxyname,"onUpdate:value":t[3]||(t[3]=e=>P(u).proxyname=e),disabled:P(n),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])])),_:1},8,["label"]),1===P(u).cache?(g(),I(i,{key:0,label:e.$t("Site.Lable.index_39"),path:"cachetime"},{default:C((()=>[k("div",Ll,[f(h,null,{default:C((()=>[f(d,{value:P(u).cachetime,"onUpdate:value":t[4]||(t[4]=e=>P(u).cachetime=e),min:1,"show-button":!1,placeholder:"","input-props":{name:"time"}},null,8,["value"]),f(v,{class:"w-70px text-center"},{default:C((()=>[U($(P(u).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1},8,["label"])):j("",!0),1===P(u).advanced?(g(),I(i,{key:1,label:e.$t("Site.TableRow.index_17"),path:"proxydir"},{default:C((()=>[k("div",Tl,[f(o,{value:P(u).proxydir,"onUpdate:value":t[5]||(t[5]=e=>P(u).proxydir=e),placeholder:"","input-props":{name:"dir"}},null,8,["value"])])])),_:1},8,["label"])):j("",!0),f(i,{label:e.$t("Site.Lable.index_33")},{default:C((()=>[k("div",El,[f(o,{value:P(u).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>P(u).proxysite=e),p],placeholder:"","input-props":{name:"url"}},null,8,["value"])])])),_:1},8,["label"]),f(i,{label:e.$t("Site.Lable.index_36")},{default:C((()=>[k("div",jl,[f(o,{value:P(u).todomain,"onUpdate:value":t[7]||(t[7]=e=>P(u).todomain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])])),_:1},8,["label"]),f(i,{label:e.$t("Site.Lable.index_37")},{default:C((()=>[f(s,{class:"flex-1",vertical:""},{default:C((()=>[(g(!0),S(E,null,O(P(m),((a,t)=>(g(),I(s,{key:"".concat(t+1),class:"sub-rows items-center"},{default:C((()=>[k("div",Bl,[f(o,{value:a.sub1,"onUpdate:value":e=>a.sub1=e,placeholder:e.$t("Site.Placeholder.index_20"),"input-props":{name:"sub1"}},null,8,["value","onUpdate:value","placeholder"])]),k("div",Il,[f(o,{value:a.sub2,"onUpdate:value":e=>a.sub2=e,placeholder:e.$t("Site.Placeholder.index_21"),"input-props":{name:"sub2"}},null,8,["value","onUpdate:value","placeholder"])]),k("div",null,[f(x,{type:"error",disabled:0===t&&1===P(m).length,onClick:e=>(e=>{m.value.length<=1||m.value.splice(e,1)})(t)},{default:C((()=>[U($(e.$t("Public.Btn.Del")),1)])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),k("div",null,[f(w,{type:"primary",class:"add-content-btn",disabled:P(m).length>=3,onClick:_},{default:C((()=>[k("span",null,$(e.$t("Site.Config.index_87")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["label"])])),_:1},8,["model"]),f(b,{class:"mt-12px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_88")),1),k("li",null,$(e.$t("Site.Config.index_89")),1),k("li",null,$(e.$t("Site.Config.index_90")),1),k("li",null,$(e.$t("Site.Config.index_91")),1)])),_:1})])}}}),Dl={class:"p-20px"},Ol={class:"mt-12px"},Hl=w({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:i,siteName:s,getList:o}=t.data,d=a,u=r(),c=b(""),p=b(""),m=b(""),_=async()=>{const{message:e}=await We({path:m.value,data:c.value,encoding:p.value});n(e)&&l.success(e.msg),null==o||o(),d("close")};return(async()=>{const{message:e}=await ze({sitename:s,proxyname:i.proxyname,webserver:u.webserver});n(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,a)=>{const t=ra,l=$a;return g(),S("div",Dl,[f(Pa,{value:P(c),"onUpdate:value":a[0]||(a[0]=e=>R(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),k("div",Ol,[f(t,{type:"primary",onClick:_},{default:C((()=>[U($(e.$t("Site.Cert.index_60")),1)])),_:1})]),f(l,{class:"mt-24px"},{default:C((()=>[k("li",null,$(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),Al=w({__name:"index",setup(e,{expose:l}){const{t:i}=y(),{data:n}=Oa(),s=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:o,table:d,columns:r}=ta([{type:"selection",width:40},{key:"proxyname",title:i("Site.TableRow.index_2"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:i("Site.TableRow.index_17"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:i("Site.Lable.index_33"),ellipsis:{tooltip:{width:"trigger"}},render:e=>f("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:i("Site.Lable.index_31"),width:90,render:e=>f(a,{type:1===e.cache?"primary":"error",onClick:async()=>{await Ve({...s(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:i("Site.TableRow.index_14"),width:90,render:e=>f(oa,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await Ve({...s(e),type:a,cache:e.cache}),e.type=a}},null)},na({width:120,options:e=>[{label:i("Site.TableOP.index_2"),onClick:()=>{w(e)}},{label:i("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:i("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ea({title:i("Site.Config.Proxy.index_1",[e.proxyname]),content:i("Site.Config.Proxy.index_2"),onConfirm:async()=>{await Xe({sitename:n.name,proxyname:e.proxyname}),m()}})}}]})]),u=[{key:"del",type:"confirm",label:i("Site.Batch.index_20"),confirm:{title:i("Site.Batch.index_21"),desc:i("Site.Batch.index_11"),api:e=>Xe({sitename:n.name,proxyname:e.proxyname},!1),done:()=>{m()},columns:[{key:"proxyname",title:i("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=la(),m=async()=>{try{p(!0);const{message:e}=await Fe({sitename:n.name});d.data=t(e)?e:[]}finally{o.value=[],p(!1)}},_=ia(i("Site.Config.index_86"),{row:void 0,siteName:n.name,isEdit:!1,getList:m}),v=()=>{_.data.row=void 0,_.data.isEdit=!1,_.title=i("Site.Config.index_86"),_.show=!0},h=e=>{_.data.row=e,_.data.isEdit=!0,_.title="".concat(i("Site.Config.index_75")," [").concat(e.proxyname,"]"),_.show=!0},x=ia("",{row:void 0,siteName:n.name,getList:m}),w=e=>{x.data.row=e,x.title="".concat(i("Site.Config.index_76")," [").concat(e.proxyname,"]"),x.show=!0};return m(),l({init:m}),(e,a)=>{const t=ra,l=V,i=K,n=M,s=ga;return g(),S("div",null,[f(n,null,{toolsLeft:C((()=>[f(t,{class:"add-btn",type:"primary",onClick:v},{default:C((()=>[U($(e.$t("Site.Config.index_85")),1)])),_:1})])),table:C((()=>[f(l,{"checked-row-keys":P(o),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(o)?o.value=e:null),"row-key":"proxyname",loading:P(c),"max-height":440,data:P(d).data,columns:P(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[f(i,{"checked-row-keys":P(o),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(o)?o.value=e:null),"row-key":"proxyname",data:P(d).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),f(s,{show:P(_).show,"onUpdate:show":a[2]||(a[2]=e=>P(_).show=e),title:P(_).title,data:P(_).data,width:660,footer:!0,component:Nl},null,8,["show","title","data"]),f(s,{show:P(x).show,"onUpdate:show":a[3]||(a[3]=e=>P(x).show=e),title:P(x).title,data:P(x).data,width:580,component:Hl},null,8,["show","title","data"])])}}}),ql={class:"pt-8px"},Ml=w({__name:"index",setup(e,{expose:a}){const{data:t}=Oa(),l=b();return a({init:()=>{l.value.init()}}),(e,a)=>(g(),S("div",ql,[f(Ba,{ref_key:"formRef",ref:l,site:P(t)},null,8,["site"])]))}}),Kl=w({__name:"index",setup(e,{expose:a}){const{data:t}=Oa(),l=b("None"),{loading:i,setLoading:s}=la(),o=async()=>{try{s(!0);const{message:e}=await Ge({siteName:t.name});n(e)&&(l.value=d(e.result)?e.result:"None")}finally{s(!1)}};return o(),a({init:o}),(e,a)=>{const t=Ia,n=_;return g(),I(n,{class:"h-560px",show:P(i)},{default:C((()=>[f(t,{log:P(l)},null,8,["log"])])),_:1},8,["show"])}}}),Vl=w({__name:"index",setup(e,{expose:a}){const{data:t}=Oa(),l=b("None"),{loading:i,setLoading:s}=la(),o=async()=>{try{s(!0);const{message:e}=await Ye({siteName:t.name});n(e)&&(l.value=d(e.result)?e.result:"None")}finally{s(!1)}};return o(),a({init:o}),(e,a)=>{const t=Ia,n=_;return g(),I(n,{class:"h-560px",show:P(i)},{default:C((()=>[f(t,{log:P(l)},null,8,["log"])])),_:1},8,["show"])}}}),zl={class:"text-error"},Wl={class:"w-400px p-20px"},Xl={class:"mb-16px"},Fl=w({__name:"index",setup(e,{expose:t}){const{t:i}=y(),s=r(),{data:o}=Oa(),d=H((()=>{let e="";switch(s.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return"/www/wwwlogs/".concat(o.name).concat(e)})),u=H((()=>{const e=d.value.split("/");return e[e.length-1]})),c=()=>{ea({title:i("Site.Config.index_104"),content:"".concat(i("Site.Config.index_105")," [").concat(u.value,"] ").concat(i("Site.Config.index_106")),onConfirm:async({hide:e})=>{await Ze({path:d.value}),e(),_()}})},p=b(!1),m=b(0),_=async()=>{p.value=!0,v()},v=(e=0)=>{let a=setTimeout((async()=>{const{message:e}=await Qe({path:d.value});n(e)&&(m.value=e.result,m.value>=100?(l.success(i("Site.Config.index_107")),p.value=!1,m.value=0,E(),clearTimeout(a)):v(1e3))}),e)},h=e=>{da({title:"[".concat(e,"] ").concat(i("Site.Config.index_103")),data:{type:e,path:d.value},component:Na})},{table:x,columns:w}=ta([{key:"start_time",title:i("Site.Cert.index_68")},{key:"time",title:i("Site.DelSite.index_6"),render:e=>"".concat(e.time.substring(0,4)," s")},{key:"xss",title:i("Site.TableRow.index_4"),render:e=>e.xss>0?f("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:i("Site.TableRow.index_5"),render:e=>e.sql>0?f("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:i("Site.TableRow.index_6"),render:e=>e.san>0?f("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:i("Site.TableRow.index_27"),render:e=>e.php>0?f("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:i("Site.TableRow.index_7"),render:e=>e.ip>0?f(a,{onClick:()=>{h("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:i("Site.TableRow.index_8"),render:e=>e.url>0?f(a,{onClick:()=>{h("url")}},{default:()=>[e.url]}):e.url}]),{loading:L,setLoading:T}=la(),E=async()=>{try{T(!0);const{message:e}=await Je({path:d.value});n(e)&&(x.data=[e])}finally{T(!1)}},j=()=>{E()};return j(),t({init:j}),(e,t)=>{const l=ra,i=V,n=M,s=$a,o=ba,d=ga;return g(),S("div",null,[f(n,null,{toolsLeft:C((()=>[f(l,{type:"primary",onClick:c},{default:C((()=>[U($(e.$t("Site.Config.index_104")),1)])),_:1})])),table:C((()=>[f(i,{loading:P(L),"loading-num":1,data:P(x).data,columns:P(w)},null,8,["loading","data","columns"])])),_:1}),f(s,{class:"mt-16px"},{default:C((()=>[k("li",null,[U($(e.$t("Site.Config.index_108"))+" ",1),k("span",zl,$(e.$t("Site.Config.index_109")),1)]),k("li",null,$(e.$t("Site.Config.index_110")),1),k("li",null,$(e.$t("Site.Config.index_111")),1),k("li",null,$(e.$t("Site.Config.index_112")),1),k("li",null,[f(a,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:C((()=>[U($(e.$t("Site.Config.index_113")),1)])),_:1}),U(" "+$(e.$t("Site.Config.index_114")),1)])])),_:1}),f(d,{show:P(p),"onUpdate:show":t[0]||(t[0]=e=>R(p)?p.value=e:null)},{default:C((()=>[k("div",Wl,[k("div",Xl,$(e.$t("Site.Config.index_115")),1),f(o,{type:"line",status:"success",height:24,percentage:P(m),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),Gl=w({__name:"index",setup(e,{expose:a}){const{t:t}=y(),{config:l}=Oa(),i=b("access"),n=b(),s=[{key:"access",label:t("Site.Config.index_100"),component:Kl},{key:"error",label:t("Site.Config.index_101"),component:Vl},{key:"security",label:t("Site.Config.index_102"),component:Fl}];return i.value=l.subMenu||"access",l.subMenu="",a({init:()=>{i.value="access",A((()=>{var e;null==(e=n.value)||e.init()}))}}),(e,a)=>{const t=Ca;return g(),I(t,{value:P(i),"onUpdate:value":a[0]||(a[0]=e=>R(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),Yl={class:"h-full"},Zl=w({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=y(),t=r(),{siteName:l}=q(t),n=T((()=>i((()=>import("./index236.js?v=1732601582185")),__vite__mapDeps([13,14,3,4,6,7,2,5,9,8,15,16,1,10,17,11,12,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39])))),s=T((()=>i((()=>import("./old4.js?v=1732601582185")),__vite__mapDeps([40,41,2,3,4,5,6,7,8,9,18,19,20,21,22,23,24,25,26,17,14,15,16,27,28,29,30,31,1,11,12,10,32,33,34,35,36,37,38,39])))),o=e,{siteInfo:d,config:u}=o;l.value=o.siteInfo.name;const c=b();d&&h(Da,{data:d,config:u});const p=b("domain"),m=[{key:"domain",label:a("Site.Config.index_1"),component:Va},{key:"subdirectory",label:a("Site.Config.index_3"),component:Xa},{key:"directory",label:a("Site.Config.index_4"),component:ot},{key:"access",label:a("Site.Config.index_5"),component:bt},{key:"traffic",label:a("Site.Config.index_6"),component:jt},{key:"rewrite",label:a("Site.Config.index_7"),component:n},{key:"document",label:a("Site.Config.index_9"),component:Nt},{key:"config",label:a("Site.Config.index_10"),component:Ot},{key:"ssl",label:()=>f(E,null,[a("Site.Config.index_11")]),component:s},{key:"php",label:a("Site.Config.index_12"),component:Jt},{key:"wordpress",label:"Wordpress Setting",show:"WP"===(null==d?void 0:d.project_type),component:il},{key:"composer",label:a("Site.Config.index_20"),component:hl},{key:"redirect",label:a("Site.Config.index_21"),component:Pl},{key:"proxy",label:a("Site.Config.index_23"),component:Al},{key:"hotlink",label:a("Site.Config.index_24"),component:Ml},{key:"logs",label:a("Site.Config.index_25"),component:Gl}];return p.value=u.menu||"domain",u.menu="",N((()=>{window.siteConfigInit=c.value.init})),(e,a)=>{const t=v;return g(),S("div",Yl,[f(t,{value:P(p),"onUpdate:value":a[0]||(a[0]=e=>R(p)?p.value=e:null),ref_key:"tabsRef",ref:c,data:m},null,8,["value"])])}}}),Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"}));export{Ql as i,Oa as u};
