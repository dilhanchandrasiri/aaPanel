import{I as t,S as e,f as a,j as i,k as l}from"./page_layout.js?v=1732601582185";import{b as s,d as o,u as r}from"./public.js?v=1732601582185";import{g as d,a as p}from"./mail.js?v=1732601582185";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang15.js?v=1732601582185";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{d as u,W as m,M as y,O as _,P as x,Y as b,R as h,r as w,e as g,aA as M,Q as f,Z as O,c as k,F as j,X as S}from"./vue.js?v=1732601582185";import{bq as H,bJ as $}from"./naive.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";const A={class:"p-20px"},C=u({__name:"error",setup(e){const{t:a}=m(),{loading:i,setLoading:l}=s(),{table:r,columns:p}=o([{key:"recipient",title:a("Mail.Mass.index_50"),width:160,render:t=>y(H,{class:t.tooltip?"":"break-all!","line-clamp":t.tooltip?999:1,tooltip:!1},{default:()=>[t.recipient]})},{key:"dsn",title:"Dsn",width:60},{key:"delay",title:a("Mail.Mass.index_51"),width:70},{key:"delays",title:a("Mail.Mass.index_52"),width:150},{key:"status",title:a("Public.Table.Status"),width:100,ellipsis:{tooltip:!0},render:t=>t.status},{key:"relay",title:a("Mail.Mass.index_53"),width:200,render:t=>y(H,{class:t.tooltip?"":"break-all!","line-clamp":t.tooltip?9999:1,tooltip:!1},{default:()=>[t.relay]})},{key:"err_info",title:a("Public.Btn.Details"),render:t=>y(H,{class:t.tooltip?"":"break-all!","line-clamp":t.tooltip?9999:1,tooltip:!1},{default:()=>[t.err_info]})}]),n=t=>({onMousemove:()=>{t.tooltip=!0},onMouseleave:()=>{t.tooltip=!1}});return(async()=>{try{l(!0);const{message:e}=await d();r.data=t(e)?e.map((t=>({...t,tooltip:!1}))):[]}finally{l(!1)}})(),(t,e)=>{const a=c,l=v;return _(),x("div",A,[y(l,null,{table:b((()=>[y(a,{"max-height":600,loading:h(i),data:h(r).data,columns:h(p),"row-props":n},null,8,["loading","data","columns"])])),_:1})])}}}),L={class:"p-24px"},P={class:"total-list"},B={class:"total-item"},D={class:"total-label"},G={class:"total-value text-primary text-22px"},F={class:"total-item"},W={class:"total-label"},E={class:"total-value text-17px"},I={class:"total-item"},q={class:"total-label"},J={class:"total-value text-17px"},Q={class:"h-200px"},R={class:"p-24px"},T={class:"total-list"},X={class:"total-item"},Y={class:"total-label"},Z={class:"total-value text-primary text-22px"},z={class:"total-item"},K={class:"total-label"},N={class:"total-value text-17px"},U={class:"total-item"},V={class:"total-label"},tt={class:"total-value text-17px"},et={class:"h-200px"},at=l(u({__name:"today",setup(t){const{t:l}=m(),s=w({delivered:0,bounced:0,received:0,rejected:0}),o=g((()=>s.value.delivered||0)),d=g((()=>s.value.bounced||0)),v=g((()=>{const t=d.value+o.value;return 0===t?0:(o.value/t*100).toFixed(1)})),c=()=>{r({title:l("Mail.Overview.today_9"),width:980,component:C})},u=M({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},legend:{top:0,itemGap:16,icon:"circle",itemWidth:10,itemHeight:10,data:[l("Mail.Overview.today_2"),l("Mail.Overview.today_3")],textStyle:{lineHeight:12,padding:[0,0,-2,0],rich:{a:{verticalAlign:"middle"}}}},grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},xAxis:{type:"category",axisLabel:{formatter:t=>e(t,"HH:mm")}},yAxis:{type:"value",boundaryGap:[0,"6%"],splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:"#ebeef5"}}},series:[{type:"bar",name:l("Mail.Overview.today_3"),data:[]},{type:"bar",name:l("Mail.Overview.today_2"),data:[]}]}),S=g((()=>s.value.received||0)),H=g((()=>s.value.rejected||0)),A=g((()=>{const t=H.value+S.value;return 0===t?0:(S.value/t*100).toFixed(1)})),at=M({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},legend:{top:0,itemGap:16,icon:"circle",itemWidth:10,itemHeight:10,data:[l("Mail.Overview.today_4"),l("Mail.Overview.today_5")],textStyle:{lineHeight:12,padding:[0,0,-2,0],rich:{a:{verticalAlign:"middle"}}}},grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},xAxis:{type:"category",axisLabel:{formatter:t=>e(t,"HH:mm")}},yAxis:{type:"value",boundaryGap:[0,"6%"],splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:"#ebeef5"}}},series:[{type:"bar",name:l("Mail.Overview.today_5"),data:[]},{type:"bar",name:l("Mail.Overview.today_4"),data:[]}]});return(async()=>{const{message:t}=await p();a(t)&&(s.value=t.stats_dict,(t=>{const a=[],i=[],s=[],o=[];t.forEach((t=>{a.push([e(t.time),t.bounced]),i.push([e(t.time),t.delivered]),s.push([e(t.time),t.received]),o.push([e(t.time),t.rejected])})),u.series=[{type:"bar",name:l("Mail.Overview.today_3"),data:a,stack:"total",itemStyle:{color:"#1A519B"}},{type:"bar",name:l("Mail.Overview.today_2"),data:i,stack:"total",itemStyle:{color:"#91CC75"}}],at.series=[{type:"bar",name:l("Mail.Overview.today_5"),data:o,stack:"total",itemStyle:{color:"#7CB5EC"}},{type:"bar",name:l("Mail.Overview.today_4"),data:s,stack:"total",itemStyle:{color:"#7895CB"}}]})(t.hourly_stats))})(),(t,e)=>{const a=i,l=$;return _(),x(j,null,[y(l,{class:"mb-16px",title:t.$t("Mail.Overview.today_7")},{default:b((()=>[f("div",L,[f("div",P,[f("div",B,[f("div",D,O(t.$t("Mail.Overview.today_1")),1),f("div",G,O(h(v))+"%",1)]),f("div",F,[f("div",W,O(t.$t("Mail.Overview.today_2")),1),f("div",E,O(h(o)),1)]),f("div",I,[f("div",q,[k(O(t.$t("Mail.Overview.today_3"))+" ",1),y(a,{class:"ml-4px",onClick:c},{default:b((()=>[k(O(t.$t("Public.Btn.Details")),1)])),_:1})]),f("div",J,[y(a,{class:"text-17px!",onClick:c},{default:b((()=>[k(O(h(d)),1)])),_:1})])])]),f("div",Q,[y(n,{type:"bar",height:"200",option:h(u)},null,8,["option"])])])])),_:1},8,["title"]),y(l,{title:t.$t("Mail.Overview.today_8")},{default:b((()=>[f("div",R,[f("div",T,[f("div",X,[f("div",Y,O(t.$t("Mail.Overview.today_6")),1),f("div",Z,O(h(A))+"%",1)]),f("div",z,[f("div",K,O(t.$t("Mail.Overview.today_4")),1),f("div",N,O(h(S)),1)]),f("div",U,[f("div",V,O(t.$t("Mail.Overview.today_5")),1),f("div",tt,O(h(H)),1)])]),f("div",et,[y(n,{type:"bar",height:"200",option:h(at)},null,8,["option"])])])])),_:1},8,["title"])],64)}}}),[["__scopeId","data-v-43223182"]]),it=u({__name:"index",setup:t=>(t,e)=>(_(),S(at))});export{it as default};
