import{_ as e,a}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import{u as s,dP as r,ae as t,e as l,n as u}from"./index.js?v=1723125373998";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1723125373998";import{l as d,r as p,f as n,k as i,S as m,U as _,V as v,P as c,_ as f,W as g,B as b,M as h,q as w,t as x}from"./vue.js?v=1723125373998";import{s as j}from"./pinia.js?v=1723125373998";import{g as y}from"./index69.js?v=1723125373998";import{_ as U}from"./Select.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998";import"./InputGroupLabel.js?v=1723125373998";import"./InputGroup.js?v=1723125373998";import"./index70.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";const q={class:"w-240px"},k={class:"w-240px"},E={class:"w-240px"},P={class:"w-240px"},R={class:"ml-8px"},B=d({__name:"index",props:{data:{}},setup(d,{expose:B}){const C=d,{status:D}=C.data,G=s(),{remoteList:I}=j(G),L=p(null),N=n({sid:I.value.length>0?I.value[0].id:null,name:"",db_user:"",password:"",active:!1,ssl:""}),S=i((()=>I.value.map((e=>({label:"".concat(e.ps," (").concat(e.db_host,")"),value:e.id}))))),A={name:{required:!0,message:"请输入数据库名",trigger:["blur","change"]},db_user:{required:!0,message:"请输入用户名",trigger:["blur","change"]},password:{required:!0,message:"请输入管理员密码",trigger:["blur","change"]},sid:{trigger:"change",validator:(e,a)=>null!==a||new Error("请选择远程服务器")}},M=e=>{N.db_user=e},T=()=>{y()};return B({onConfirm:async({hide:e})=>{var a;try{await(null==(a=L.value)?void 0:a.validate());const s=(()=>{const{sid:e}=N;if(null===e)throw u.error("请选择远程服务器"),new Error("请选择远程服务器");return{...x(N),sid:e,ps:N.name}})();await r(G.type,s),G.setRefresh(!0),e()}catch(s){console.error(s)}}}),(s,r)=>{const u=t,d=e,p=o,n=U,i=l,x=a;return m(),_(x,{ref_key:"formRef",ref:L,model:g(N),rules:A,class:"p-20px"},{default:v((()=>[c(d,{label:"DBName",path:"name"},{default:v((()=>[f("div",q,[c(u,{value:g(N).name,"onUpdate:value":[r[0]||(r[0]=e=>g(N).name=e),M],placeholder:"New database name"},null,8,["value"])])])),_:1}),b(c(d,{label:"Username",path:"db_user"},{default:v((()=>[f("div",k,[c(u,{value:g(N).db_user,"onUpdate:value":r[1]||(r[1]=e=>g(N).db_user=e),placeholder:"Database user"},null,8,["value"])])])),_:1},512),[[h,g(D)]]),b(c(d,{label:"Password",path:"password"},{default:v((()=>[f("div",E,[c(p,{value:g(N).password,"onUpdate:value":r[2]||(r[2]=e=>g(N).password=e)},null,8,["value"])])])),_:1},512),[[h,g(D)]]),c(d,{label:"Add to",path:"sid"},{default:v((()=>[f("div",P,[c(n,{value:g(N).sid,"onUpdate:value":r[3]||(r[3]=e=>g(N).sid=e),options:g(S)},null,8,["value","options"])]),f("div",R,[c(i,{onClick:T},{default:v((()=>[w("Remote servers")])),_:1})])])),_:1})])),_:1},8,["model"])}}});export{B as default};
