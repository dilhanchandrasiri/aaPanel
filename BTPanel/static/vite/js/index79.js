import{u as t,h as e,dz as s,dA as a,B as o,q as i}from"./index.js?v=1723125373998";import{_ as l}from"./index73.js?v=1723125373998";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{u as d,_ as n}from"./useTableData.js?v=1723125373998";import{s as m}from"./pinia.js?v=1723125373998";import{_ as p,b as u}from"./useTableColumns.js?v=1723125373998";import{P as _,l as c,f as y,k as h,S as f,Z as b,V as j,q as w,W as v,af as k,_ as g}from"./vue.js?v=1723125373998";import{_ as D}from"./form.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{u as x}from"./useLoading.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Checkbox.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./Switch.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import"./check.js?v=1723125373998";import"./index155.js?v=1723125373998";const R={class:"p-20px"},B={key:0},C=g("li",null,"Support cloud database",-1),E=g("li",null,"Note 1: Make sure this server has permission to access the database",-1),S=g("li",null," Note 2: Please make sure that the administrator account you fill in has sufficient permissions ",-1),q=c({__name:"index",setup(c){const g=t(),{type:q,remoteList:L}=m(g),P=y({show:!1,title:"Add Remote DB",data:{row:void 0,isEdit:!1}}),A=()=>{P.data.row=void 0,P.data.isEdit=!1,P.title="Add Remote DB",P.show=!0},T=h((()=>L.value.filter((t=>0!==t.id)))),{columns:M}=d([{key:"db_host",title:"DB address"},{key:"db_port",title:"Port"},{key:"db_type",title:"Database type"},{key:"db_user",title:"Username"},{key:"db_password",title:"Password",width:160,render:t=>_(p,{value:t.db_password},null)},{key:"ps",title:"Notes"},u({width:"mysql"===g.type?150:100,options:t=>[{label:"Get DB",show:"mysql"===t.db_type,onClick:()=>{(async t=>{await s(q.value,{sid:t.id}),g.setRefresh(!0)})(t)}},{label:"Edit",onClick:()=>{(t=>{P.data.row=t,P.data.isEdit=!0,P.title="Edit Remote DB",P.show=!0})(t)}},{label:"Del",onClick:()=>{e({title:"Del Remote DB [".concat(t.db_host,"]"),content:"Only delete management information and database records in the panel, not delete remote databases!",onConfirm:async({hide:e})=>{await(async t=>{await a(q.value,{id:t.id}),g.getRemote(),g.setRefresh(!0),g.setDelRemoteId(t.id)})(t),e()}})}}]})]),{loading:N,setLoading:U}=x();return(async()=>{try{U(!0),g.getRemote()}finally{U(!1)}})(),(t,e)=>{const s=o,a=n,d=r,m=l,p=i;return f(),b("div",R,[_(d,null,{toolsLeft:j((()=>[_(s,{type:"primary",onClick:A},{default:j((()=>[w("Add Remote DB")])),_:1})])),table:j((()=>[_(a,{loading:v(N),columns:v(M),data:v(T)},null,8,["loading","columns","data"])])),_:1}),_(m,{class:"mt-24px"},{default:j((()=>["mysql"===v(q)?(f(),b("li",B,"Compatible with MySQL5.5, MariaDB10.1 and above")):k("",!0),C,E,S])),_:1}),_(p,{show:v(P).show,"onUpdate:show":e[0]||(e[0]=t=>v(P).show=t),title:v(P).title,width:460,footer:!0,data:v(P).data,component:D},null,8,["show","title","data"])])}}});export{q as default};
