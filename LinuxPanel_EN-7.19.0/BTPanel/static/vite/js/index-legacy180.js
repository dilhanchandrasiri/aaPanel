System.register(["./page_layout-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./file-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185"],(function(e,t){"use strict";var a,l,n,o,i,s,d,p,r,c,u,f,m,x,g,_,h,v,y,C,b,U,F,w,z,j,k;return{setters:[e=>{a=e.a1,l=e.h,n=e.m,o=e.bl,i=e._,s=e.dt,d=e.k},e=>{p=e.d,r=e.W,c=e.r,u=e.e,f=e.M,m=e.O,x=e.P,g=e.Q,_=e.Y,h=e.c,v=e.Z,y=e.R,C=e.ac,b=e.X,U=e.an},e=>{F=e.f},e=>{w=e.u},e=>{z=e.aV,j=e.aa,k=e.bR},null,null],execute:function(){var t=document.createElement("style");t.textContent=".n-upload-dragger[data-v-6fd253a2]{--n-dragger-border-hover: 1px dashed #ccc;height:360px;padding:10px}.drag-text[data-v-6fd253a2]{margin-top:20px;font-size:16px}.drag-suffix[data-v-6fd253a2]{margin-top:12px;color:#777;font-size:14px}.n-data-table[data-v-6fd253a2]{--n-th-color-modal: transparent;--n-td-color-modal: transparent;--n-th-color-hover-modal: transparent;--n-td-color-hover-modal: transparent;--n-border-color-modal: transparent}\n",document.head.appendChild(t);const D={class:"p-16px"},S={class:"flex items-center mb-12px"},$={key:1,class:"flex-center flex-col h-300px"},B={class:"drag-text"},E={class:"drag-suffix"},L=p({__name:"index",props:{path:{default:""},size:{default:100},uploadData:{default:()=>({multiple:!1})}},emits:["setConfirm","uploadSuccess"],setup(e,{expose:t,emit:d}){const p=e,L=d,{path:P,uploadData:R}=p,{t:H}=r(),I=a(),M=c([]),O=u((()=>(R.accept||"").split(",").map((e=>`'${e}'`)).join(", "))),Q=e=>{const{file:t}=e,{size:a}=p;return(t.file?.size??0)>1048576*a?(n.error(H("Component.UploadFile.index_7",[t.name,a])),!1):(R.multiple||(M.value=[]),!0)},V=c([{key:"name",title:H("Component.UploadFile.index_3"),ellipsis:!0},{key:"size",title:H("Component.UploadFile.index_4"),width:100,render:e=>l(e.file?.size)},{key:"status",title:H("Component.UploadFile.index_5"),width:140,render:e=>"pending"===e.status?H("Component.UploadFile.index_8"):"finished"===e.status?f("span",{class:"text-primary"},[H("Component.UploadFile.index_9")]):f(z,{type:"line",color:I.value.primaryColor,"indicator-placement":"outside",processing:!0,percentage:e.percentage||0},null)},F({width:70,options:(e,t)=>[{label:H("Public.Btn.Del"),type:"error",show:"uploading"!==e.status,onClick:()=>{M.value.splice(t,1)}}]})]);return t({onConfirm:async()=>{const e=M.value.filter((e=>"pending"===e.status));if(0===e.length)return n.error(H("Component.UploadFile.index_10")),!1;L("setConfirm",{disabled:!0}),e.forEach((e=>{e.status="uploading"}));for(let t of e){const e=new FormData;e.append("f_path",P),e.append("f_name",t.name),e.append("f_start","0"),t.file&&(e.append("f_size",t.file.size.toString()),e.append("blob",t.file)),await w(e,(e=>{t.percentage=100*(e.progress||0)})),t.status="finished"}n.success(H("Component.UploadFile.index_9")),L("setConfirm",{disabled:!1}),L("uploadSuccess",e)}}),(e,t)=>{const a=j,l=o,n=k,d=i,p=s;return m(),x("div",D,[g("div",S,[f(l,{ref:"upload",class:"w-auto","file-list":y(M),"onUpdate:fileList":t[0]||(t[0]=e=>C(M)?M.value=e:null),accept:y(R).accept,multiple:y(R).multiple,"default-upload":!1,"show-file-list":!1,onBeforeUpload:Q},{default:_((()=>[f(a,{type:"primary"},{default:_((()=>[h(v(e.$t("Component.UploadFile.index_6")),1)])),_:1})])),_:1},8,["file-list","accept","multiple"])]),f(l,{ref:"upload",class:"w-auto","file-list":y(M),"onUpdate:fileList":t[2]||(t[2]=e=>C(M)?M.value=e:null),accept:y(R).accept,multiple:y(R).multiple,"default-upload":!1,"show-file-list":!1,onBeforeUpload:Q},{default:_((()=>[f(p,null,{default:_((()=>[y(M).length>0?(m(),b(n,{key:0,"max-height":300,bordered:!1,data:y(M),columns:y(V),onClick:t[1]||(t[1]=U((()=>{}),["stop"]))},null,8,["data","columns"])):(m(),x("div",$,[f(d,{name:"base-upload",size:"48",class:"text-#999"}),g("div",B,v(e.$t("Component.UploadFile.index_1")),1),g("div",E,v(e.$t("Component.UploadFile.index_2",[y(O)])),1)]))])),_:1})])),_:1},8,["file-list","accept","multiple"])])}}});e("default",d(L,[["__scopeId","data-v-6fd253a2"]]))}}}));
