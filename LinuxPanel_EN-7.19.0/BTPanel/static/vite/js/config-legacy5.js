System.register(["./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./setting-legacy.js?v=1732601582185","./index-legacy96.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185"],(function(e,t){"use strict";var l,a,n,i,c,r,s,u,o,f,d,y,g,p,_,m,v,b,x,w,h,S,j,q,W,k,E,U,$;return{setters:[e=>{l=e._},e=>{a=e.f,n=e.J},e=>{i=e.d,c=e.f,r=e.u},e=>{s=e.k,u=e.l,o=e.n,f=e.g},e=>{d=e._},e=>{y=e._},e=>{g=e.d,p=e.W,_=e.r,m=e.j,v=e.O,b=e.P,x=e.M,w=e.Y,h=e.Q,S=e.R,j=e.Z,q=e.ak,W=e.c},e=>{k=e.ad,E=e.bG,U=e.bl,$=e.aa},null,null],execute:function(){const t={class:"p-20px"},P={class:"w-220px"},R={class:"ml-8px text-desc"},B={class:"w-220px mr-8px"},C={class:"text-desc"},L={class:"w-220px mr-8px"},O={class:"text-desc"},A=g({__name:"form",props:{isEdit:{type:Boolean,default:!1},row:{}},emits:["refresh"],setup(e,{expose:l,emit:a}){const n=e,i=a,{t:c}=p(),r=_(null),o=m({url:"",frequency:30,cycle:60}),f={url:{trigger:["blur","input"],validator:()=>""!==o.url.trim()||new Error(c("Waf.Setting.config_55"))},frequency:{trigger:["blur","input"],validator:()=>!!o.frequency||new Error(c("Waf.Setting.config_56"))},cycle:{trigger:["blur","input"],validator:()=>!!o.cycle||new Error(c("Waf.Setting.config_57"))}};return(()=>{const{row:e,isEdit:t}=n;t&&e&&(o.url=e.url,o.frequency=e.frequency,o.cycle=e.cycle)})(),l({onConfirm:async()=>{await(r.value?.validate()),n.isEdit?await s(q(o)):await u(q(o)),i("refresh")}}),(e,l)=>{const a=k,n=E,i=U,c=y,s=d;return v(),b("div",t,[x(c,{ref_key:"formRef",ref:r,model:S(o),rules:f},{default:w((()=>[x(n,{label:"URL",path:"url"},{default:w((()=>[h("div",P,[x(a,{value:S(o).url,"onUpdate:value":l[0]||(l[0]=e=>S(o).url=e),placeholder:"/index.php"},null,8,["value"])]),h("span",R,j(e.$t("Waf.Setting.config_51")),1)])),_:1}),x(n,{label:e.$t("Waf.Setting.config_48"),path:"frequency"},{default:w((()=>[h("div",B,[x(i,{value:S(o).frequency,"onUpdate:value":l[1]||(l[1]=e=>S(o).frequency=e),min:1,"show-button":!1},null,8,["value"])]),h("span",C,j(e.$t("Public.Unit.Time",S(o).frequency)),1)])),_:1},8,["label"]),x(n,{label:e.$t("Waf.Setting.config_49"),path:"cycle"},{default:w((()=>[h("div",L,[x(i,{value:S(o).cycle,"onUpdate:value":l[2]||(l[2]=e=>S(o).cycle=e),min:1,"show-button":!1},null,8,["value"])]),h("span",O,j(e.$t("Public.Unit.Second",S(o).cycle)),1)])),_:1},8,["label"])])),_:1},8,["model"]),x(s,{class:"mt-12px"},{default:w((()=>[h("li",null,j(e.$t("Waf.Setting.config_54")),1)])),_:1})])}}}),D={class:"p-20px"},G={class:"flex mb-16px"};e("default",g({__name:"config",setup(e){const{t:t}=p(),s=e=>{r({title:e.title,width:570,footer:!0,data:{...e.data,onRefresh:()=>{_()}},component:A})},u=async()=>{s({title:t("Waf.Setting.config_46"),data:{isEdit:!1}})},{table:d,columns:y,setLoading:g}=i([{key:"url",title:"URL",ellipsis:{tooltip:!0}},{key:"frequency",title:t("Waf.Setting.config_48"),width:100,ellipsis:{tooltip:!0}},{key:"cycle",title:t("Waf.Setting.config_49"),width:120,ellipsis:{tooltip:!0},render:e=>t("Waf.Setting.config_50",[e.cycle])},c({width:100,options:e=>[{label:t("Public.Btn.Edit"),onClick:async()=>{(async e=>{s({title:t("Waf.Setting.config_47"),data:{row:e,isEdit:!0}})})(e)}},{label:t("Public.Btn.Del"),onClick:async()=>{await o({url:e.url}),_()}}]})]),_=async()=>{try{g(!0);const{message:e}=await f();a(e)&&(d.data=Object.entries(e.cc_uri_frequency).map((([e,t])=>({url:e,frequency:n(t.frequency),cycle:n(t.cycle)}))))}finally{g(!1)}};return _(),(e,t)=>{const a=$,n=l;return v(),b("div",D,[h("div",G,[x(a,{type:"primary",onClick:u},{default:w((()=>[W(j(e.$t("Public.Btn.Add")),1)])),_:1})]),x(n,{"max-height":368,loading:S(d).loading,data:S(d).data,columns:S(y)},null,8,["loading","data","columns"])])}}}))}}}));
