import{a3 as a,W as t,j as e,r as i,M as c,V as n}from"./vue.js?v=1732601582185";import{q as l,b as s,u as o}from"./accountState.js?v=1732601582185";import{b as r,a as m,f as _}from"./public.js?v=1732601582185";import{bS as d,f as u,m as g,bY as k,bZ as p,b_ as h,h as y,S as b}from"./page_layout.js?v=1732601582185";import{u as f}from"./disk.js?v=1732601582185";const v=a("packageStore",(()=>{const a=w(),{t:e}=t(),i=async()=>{try{n(!0);const{message:t}=await d(a.search);u(t)&&(a.table.data=t.list,a.table.total=t.page.count)}finally{n(!1)}},{loading:c,setLoading:n}=r();function l(){const{package_name:t,disk_space_quota:e,monthly_bandwidth_limit:i,max_site_limit:c,max_database:n,php_start_children:l,php_max_children:s,remark:o}=a.formData;return{package_name:t,disk_space_quota:e.unlimited?0:String(1024*Number(e.value)*1024),monthly_bandwidth_limit:i.unlimited?0:String(1024*Number(i.value)*1024),max_site_limit:c.unlimited?0:c.value,max_database:n.unlimited?0:n.value,max_email_account:0,php_start_children:l,php_max_children:s,remark:o}}return{init:i,loading:c,setLoading:n,removePackage:async a=>{m({title:e("Account.Package.package-988835-0",[a.package_name]),content:e("Account.Package.package-988835-1"),onConfirm:async()=>{1!==a.status?(await k({package_id:a.package_id}),i()):g.error(e("Account.Package.package-988835-2"))}})},create_package:async function(){a.isEdit=!1,a.addVisible=!0,a.formData_reset()},editPackage:async function(t){!function(t){const{package_name:e,disk_space_quota:i,monthly_bandwidth_limit:c,max_site_limit:n,max_database:l,php_start_children:s,php_max_children:o,remark:r}=t;a.formData.package_name=e,a.formData.disk_space_quota=0==i?{value:"",unlimited:!0}:{value:i/1024/1024,unlimited:!1},a.formData.monthly_bandwidth_limit=0==c?{value:"",unlimited:!0}:{value:c/1024/1024,unlimited:!1},a.formData.max_site_limit=0==n?{value:"",unlimited:!0}:{value:n,unlimited:!1},a.formData.max_database=0==l?{value:"",unlimited:!0}:{value:l,unlimited:!1},a.formData.php_start_children=s,a.formData.php_max_children=o,a.formData.remark=r}(t),a.current_account_id=t.package_id,a.isEdit=!0,a.addVisible=!0},packageInfoConfirm:async function(){var t;try{await(null==(t=a.packageFormRef)?void 0:t.validate()),a.isEdit?(await p({package_id:a.current_account_id,...l()}),a.formData_reset(),i()):(await h(l()),a.formData_reset(),i())}catch(e){return Promise.reject(e)}}}})),w=a("packageStateStore",(()=>{const a=v(),{t:n}=t(),o=e({data:[],total:0,loading:!1}),r=i([{title:n("Account.Package.packageState-592272-0"),key:"package_name",width:150},{title:n("Account.Package.packageState-592272-1"),key:"php_start_children",width:80,render:a=>c("div",null,[0===a.max_site_limit?c("img",{class:"icon",title:"",src:l},null):a.max_site_limit])},{title:n("Account.Account.accountState-721844-3"),key:"disk_space_quota",render:a=>c("div",null,[0===a.disk_space_quota?c("img",{class:"icon",title:"",src:l},null):y(a.disk_space_quota,!0,0)])},{title:n("Account.Package.packageState-592272-2"),key:"monthly_bandwidth_limit",render:a=>c("div",null,[0===a.monthly_bandwidth_limit?c("img",{class:"icon",title:"",src:l},null):y(a.monthly_bandwidth_limit,!0,0)])},{title:n("Account.Account.accountState-721844-14"),key:"remark",render:a=>a.remark?a.remark:"--"},{title:n("Account.Package.packageState-592272-7"),key:"create_time",render:a=>b(a.create_time)},_({title:n("Public.Table.Action"),align:"right",width:200,options:t=>[{label:n("Account.Package.packageState-592272-8"),onClick:async()=>a.editPackage(t)},{label:n("Account.Package.packageState-592272-9"),onClick:async()=>{a.removePackage(t)}}]})]),m=i([]),d=e({p:1,rows:10,search_value:""}),u=i(!1),g=i(!1),[k,p]=s();const h=i(0),f=i(0),w=i(null),x=i();return{search:d,table:o,columns:r,keys:m,addVisible:u,formData:p,PackageInfoForm:()=>k,formData_reset:function(){p.package_name="",p.disk_space_quota={value:0,unlimited:!0},p.monthly_bandwidth_limit={value:0,unlimited:!0},p.max_site_limit={value:0,unlimited:!0},p.max_database={value:0,unlimited:!0},p.php_start_children=1,p.php_max_children=3,p.remark=""},packageFormRef:x,isEdit:g,disk_space_quota_cache:h,monthly_bandwidth_limit_cache:f,current_account_id:w}})),x=a("logsStateStore",(()=>{const{t:a}=t(),n=e({data:[],total:0,loading:!1}),l=i([{title:a("Account.Logs.logsState-131428-0"),key:"log_type",width:150},{title:a("Account.Logs.logsState-131428-1"),key:"log_level",width:100},{title:a("Account.Logs.logsState-131428-2"),key:"status",width:100,render:t=>t.log_status?c("span",{class:"text-primary"},[a("Account.Logs.logsState-456809-0")]):c("span",{class:"text-error"},[a("Account.Logs.logsState-456809-1")])},{title:a("Account.Logs.logsState-131428-3"),key:"log_body",render:t=>c("div",{class:"flex"},[t.username?c("div",{class:"text-[#909399]"},[a("Account.Account.whm_account_533924-0")+" ["+t.username+"]--\x3e"]):"",c("div",null,[t.log_body])])},{key:"log_time",align:"right",title:a("Logs.Panel.index_7"),render:a=>b(a.log_time)}]),s=i([]);return{search:e({p:1,rows:10,search:""}),table:n,columns:l,keys:s}})),S=a("whmStore",(()=>{const a=o(),t=n(a),e=w(),c=n(e),l=f(),s=x(),r=n(s);return{install:i(!1),account:{...t},w_package:{...c},disk:{...l},logs:{...r}}}));export{S as a,v as b,x as c,w as u};
