const __vite__fileDeps=["js/index135.js?v=1723125373998","js/index.js?v=1723125373998","js/vue.js?v=1723125373998","js/pinia.js?v=1723125373998","css/index42.css?v=1723125373998","js/site.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang14.js?v=1723125373998","js/Progress.js?v=1723125373998","js/DataTable.js?v=1723125373998","js/Checkbox.js?v=1723125373998","js/Ellipsis.js?v=1723125373998","js/Select.js?v=1723125373998","js/Tag.js?v=1723125373998","js/Empty.js?v=1723125373998","js/omit.js?v=1723125373998","js/file2.js?v=1723125373998","js/use-theme-vars.js?v=1723125373998","css/index38.css?v=1723125373998","js/index136.js?v=1723125373998","js/index145.js?v=1723125373998","js/Spin.js?v=1723125373998","css/index21.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998","css/index9.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998","js/useTableData.js?v=1723125373998","js/data.js?v=1723125373998","js/Skeleton.js?v=1723125373998","js/useLoading.js?v=1723125373998","js/useTableColumns.js?v=1723125373998","js/Switch.js?v=1723125373998","css/useTableColumns.css?v=1723125373998","js/set.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998","js/index137.js?v=1723125373998","js/index77.js?v=1723125373998","js/Tabs.js?v=1723125373998","css/index11.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang13.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998","js/InputGroupLabel.js?v=1723125373998","js/InputGroup.js?v=1723125373998","js/index105.js?v=1723125373998","css/index12.css?v=1723125373998","js/check.js?v=1723125373998","css/index36.css?v=1723125373998","js/index138.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang12.js?v=1723125373998","js/index139.js?v=1723125373998","js/index73.js?v=1723125373998","js/index140.js?v=1723125373998","js/index141.js?v=1723125373998","js/index144.js?v=1723125373998","css/index20.css?v=1723125373998","js/index70.js?v=1723125373998","css/index10.css?v=1723125373998","js/refersh.js?v=1723125373998","js/php.js?v=1723125373998","js/Space.js?v=1723125373998","js/form.vue_vue_type_script_setup_true_lang2.js?v=1723125373998","css/index37.css?v=1723125373998","js/batch.js?v=1723125373998","js/DatePicker.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang4.js?v=1723125373998","js/index68.js?v=1723125373998","css/index8.css?v=1723125373998","js/site2.js?v=1723125373998","js/ButtonGroup.js?v=1723125373998","js/batch2.js?v=1723125373998","js/batch3.js?v=1723125373998"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{cS as e,cT as t,cU as a,e as i,B as n,bb as o,a as s,L as l,v as r,U as d,j as u,ay as c,cQ as p,bg as _,g as m,k as h,q as w,cV as P,h as f,m as b,I as y,r as v}from"./index.js?v=1723125373998";import{_ as x}from"./index70.js?v=1723125373998";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import{_ as S}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998";import{u as H,_ as j}from"./useTableData.js?v=1723125373998";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1723125373998";import{_ as D}from"./index68.js?v=1723125373998";import{s as E}from"./pinia.js?v=1723125373998";import{o as O,l as T}from"./site2.js?v=1723125373998";import{u as R}from"./useLoading.js?v=1723125373998";import{g as U,u as B,a as L,b as I}from"./useTableColumns.js?v=1723125373998";import{s as V,a as $,b as A,c as W,d as M,e as z}from"./site.js?v=1723125373998";import{l as N,d as K,r as q,k as G,S as Q,U as Z,V as F,P as J,q as X,a3 as Y,W as ee,_ as te,b as ae,a1 as ie,ae as ne,ad as oe,s as se,ap as le,Z as re,f as de,w as ue,af as ce,t as pe,n as _e}from"./vue.js?v=1723125373998";import{_ as me}from"./Select.js?v=1723125373998";import{N as he}from"./ButtonGroup.js?v=1723125373998";import{_ as we}from"./DatePicker.js?v=1723125373998";function Pe(a,i){const n=e(a);return isNaN(i)?t(a,NaN):i?(n.setDate(n.getDate()+i),n):n}function fe(t,a){return+e(t)<+e(a)}const be={class:"flex justify-end"},ye=s(N({__name:"index",props:{row:{}},setup(e){const t=K(e,"row"),s=q(null),l=q(null),r=new Date;r.setHours(0,0,0,0);const d=G((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&fe(e,r)})),u=G((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&fe(e,Pe(r,7))})),c=e=>fe(e,Pe(r,1)),p=()=>{s.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},_=async()=>{var e;await V({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",null==(e=l.value)||e.setShow(!1)},m=async()=>{var e;if(null===s.value)return;const i=a(s.value,"yyyy-MM-dd");await V({id:t.value.id,edate:i}),t.value.edate=i,null==(e=l.value)||e.setShow(!1)};return(e,a)=>{const r=i,h=n,w=he,P=we,f=o;return Q(),Z(f,{ref_key:"popoverRef",ref:l,placement:"bottom",trigger:"click"},{trigger:F((()=>[J(r,{type:ee(d)?"error":ee(u)?"warning":"primary",onClick:p},{default:F((()=>[X(Y("0000-00-00"===ee(t).edate?e.$t("Site.PHP.index_34"):ee(d)?e.$t("Site.PHP.index_28"):ee(t).edate),1)])),_:1},8,["type"])])),default:F((()=>[J(P,{value:ee(s),"onUpdate:value":a[0]||(a[0]=e=>ae(s)?s.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":c},{footer:F((()=>[te("div",be,[J(w,{size:"small"},{default:F((()=>[J(h,{onClick:_},{default:F((()=>[X(Y(e.$t("Site.PHP.index_34")),1)])),_:1}),J(h,{disabled:null===ee(s),onClick:m},{default:F((()=>[X(Y(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]);function ve(e){l({title:1===e.length?"Delete site [".concat(e[0].name,"]"):"Deleting sites in batches",width:480,minHeight:248,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./index135.js?v=1723125373998")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))))})}const xe=N({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=ne();return{goPath:()=>{d("Path",e.path),t.push("/files")}}},render(){return J("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}});const ke=({row:e})=>J(i,null,{default:()=>[e.name]}),ge=({row:e})=>J(U,{value:e.status},null),Se=({row:e})=>{const{t:t}=oe();return J(i,{type:e.backup_count>0?"primary":"warning",onClick:()=>{l({title:t("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:ie((()=>r((()=>import("./index136.js?v=1723125373998")),__vite__mapDeps([18,1,2,3,4,19,20,21,22,23,24,25,8,9,10,11,12,13,14,26,27,28,29,30,31,7,32,33,5]))))})}},{default:()=>[e.backup_count>0?t("Site.PHP.index_31",[e.backup_count]):t("Site.PHP.index_32")]})},He=({row:e})=>J(xe,{path:e.path},null),je=({row:e})=>J(i,null,{default:()=>[e.php_version]}),Ce=({row:e})=>{let t;const{t:a}=oe(),{ssl:n}=e;return u(n)?J(i,{type:n.endtime<0?"error":"primary"},{default:()=>[n.endtime<0?a("Site.PHP.index_28"):a("Site.PHP.index_29",[n.endtime])]}):J(i,{type:"warning"},"function"==typeof(o=t=a("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(o)&&!se(o)?t:{default:()=>[t]});var o},De=({row:e})=>J(i,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Ee={class:"w-160px"},Oe=N({__name:"index",props:{value:{default:null}},setup(e){const{t:t}=oe(),a=ie((()=>r((()=>import("./set.js?v=1723125373998")),__vite__mapDeps([34,1,2,3,4,35,5,31,7,32,10,33,27,28,29,8,9,11,12,13,14])))),i=le(e,"value"),{loading:o,setLoading:s}=R(),l=q([]),d=m(t("Site.PHP.index_44"),{setOptions:(e,t)=>{t===i.value&&(i.value=-1),l.value=e.map((e=>({label:e.name,value:e.id}))),c()}}),u=()=>{d.show=!0},c=()=>{l.value.unshift({label:t("Site.PHP.index_45"),value:-1})};return c(),(async()=>{try{s(!0);const{message:e}=await $();h(e)?l.value=e.map((e=>({label:e.name,value:e.id}))):l.value=[],c()}finally{s(!1)}})(),(e,t)=>{const s=n,r=me,c=w;return Q(),re("div",Ee,[J(r,{value:ee(i),"onUpdate:value":t[0]||(t[0]=e=>ae(i)?i.value=e:null),loading:ee(o),options:ee(l)},{action:F((()=>[J(s,{block:"",onClick:u},{default:F((()=>[X(Y(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),J(c,{show:ee(d).show,"onUpdate:show":t[1]||(t[1]=e=>ee(d).show=e),width:350,title:ee(d).title,data:ee(d).data,component:ee(a)},null,8,["show","title","data","component"])])}}}),Te=te("span",{class:"mx-4px"},"|",-1),Re=N({__name:"index",setup(e){const t=ie((()=>r((()=>import("./index137.js?v=1723125373998")),__vite__mapDeps([36,37,2,38,1,3,4,14,39,35,40,41,42,43,44,16,45,5,11,12,13,30,46,8,9,10,47])))),a=ie((()=>r((()=>import("./index138.js?v=1723125373998")),__vite__mapDeps([48,37,2,38,1,3,4,14,39,49,30,15,11,12,13,20])))),o=ie((()=>r((()=>import("./index139.js?v=1723125373998")),__vite__mapDeps([50,51,1,2,3,4,35,5,30,11,12,13])))),s=ie((()=>r((()=>import("./index140.js?v=1723125373998")),__vite__mapDeps([52,51,1,2,3,4,35,5,30,11,12,13])))),d=ie((()=>r((()=>import("./index141.js?v=1723125373998").then((e=>e.i))),__vite__mapDeps([53,1,2,3,4,54,38,14,10,55,22,23,24,26,9,11,12,13,27,28,29,8,44,16,45,5,30,31,7,32,33,35,40,41,42,43,37,39,51,49,15,20,56,57,58,59,60,61,19,21,62])))),{t:U}=oe(),V=P(),{web:$,webserver:N}=E(V),K=q(!1),G=m(U("Site.PHP.index_9")),ne=()=>{G.show=!0},se=m(U("Site.PHP.index_10")),le=()=>{se.show=!0},re=m(U("Site.PHP.index_11")),me=()=>{re.show=!0},he=m(U("Site.PHP.index_12")),we=()=>{he.show=!0},Pe=de({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),fe=(e,t={})=>{Pe.title=U("Site.PHP.index_13",[e.name,e.addtime]),Pe.data.siteInfo=e,Pe.data.config=Object.assign({menu:"",subMenu:""},t),Pe.show=!0},be=()=>I({title:U("Public.Table.Operation"),width:150,options:e=>[{label:U("Site.PHP.index_14"),onClick:()=>{(async()=>{await c({source:142}),await p("monitor"),_({name:"monitor",title:"Website statistics-v2",admin:!0})})()}},{label:U("Site.PHP.index_15"),show:"nginx"===V.webserver||"apache"===V.webserver,onClick:()=>{O(e.name)}},{label:U("Site.PHP.index_16"),onClick:()=>{fe(e)}},{label:U("Public.Btn.Del"),onClick:()=>{ve([e])}}]}),{keys:xe,table:Ee,columns:Re}=H([{type:"selection",width:40},{key:"name",title:U("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>J(ke,{row:e,onClick:()=>{fe(e)}},null)},{key:"status",title:U("Public.Table.Status"),width:"8%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>J(ge,{row:e,onClick:t=>{f({title:"".concat(U("1"===t?"Site.PHP.index_21.1":"Site.PHP.index_21.2")," ").concat(U("Site.PHP.index_21.0",[e.name])),content:U("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await A("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:U("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>J(Se,{row:e},null)},{key:"path",title:U("Site.PHP.index_20"),minWidth:130,ellipsis:{tooltip:!0},render:e=>J(He,{row:e},null)},B({type:"site",width:"6%",minWidth:70,callback:()=>{$e()}}),{key:"edate",title:U("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>J(ye,{row:e},null)},L({width:"8%",onBlur:async(e,t)=>{await z({id:t.id,ps:e})}}),{key:"php_version",title:U("Site.PHP.index_26"),width:"6%",minWidth:70,render:e=>J(je,{row:e,onClick:()=>{fe(e,{menu:"php"})}},null)},{key:"site_ssl",title:U("Site.PHP.index_27"),width:"9%",minWidth:110,sorter:!0,sortOrder:!1,render:e=>J(Ce,{row:e,onClick:()=>{fe(e,{menu:"ssl"})}},null)},{key:"attack",title:U("Site.PHP.index_24"),width:"6%",minWidth:60,render:e=>J(De,{row:e,onClick:()=>{fe(e,{menu:"logs",subMenu:"security"})}},null)},be()]),Ue=e=>{Re.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?Le.order="".concat(e.columnKey," ").concat("descend"===e.order?"desc":"asc"):Le.order="",$e()},Be=[{key:"enable",type:"confirm",label:"Enable website",confirm:{title:"Batch enable website",desc:"Please be cautious, The selected item will be [Enable website] after confirmation",columns:[Re.value[1]],api:e=>A(!0,{id:e.id,name:e.name},!1),done:()=>{$e()}}},{key:"disable",type:"confirm",label:"Disable website",confirm:{title:"Batch disable website",desc:"Please be cautious, The selected item will be [Disable website] after confirmation",columns:[Re.value[1]],api:e=>A(!1,{id:e.id,name:e.name},!1),done:()=>{$e()}}},{key:"backup",type:"confirm",label:"Backup website",confirm:{title:"Batch backup website",desc:"Please be cautious, The selected item will be [Backup website] after confirmation",columns:[Re.value[1]],api:e=>W({id:e.id},!1),done:()=>{$e()}}},{key:"expired",label:"Set expired date",onBatch:e=>{l({title:"Batch set expired date",width:380,minHeight:72,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./batch.js?v=1723125373998")),__vite__mapDeps([63,35,2,1,3,4,5,6,7,8,9,10,11,12,13,14,64,56,57,22,23,24,25,26,27,28,29,65,66,59,30,67,68,31,32,33,69]))))})}},{key:"php",label:"Set php version",onBatch:e=>{l({title:"Batch set php version",width:500,minHeight:198,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./batch2.js?v=1723125373998")),__vite__mapDeps([70,51,1,2,3,4,35,30,5,6,7,8,9,10,11,12,13,14]))))})}},{key:"category",label:"Set category",onBatch:e=>{l({title:"Batch set category",width:350,minHeight:72,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./batch3.js?v=1723125373998")),__vite__mapDeps([71,35,2,1,3,4,30,5,11,12,13]))))})}},{key:"delete",label:"Delete website",onBatch:e=>{ve(e)}}],Le=de({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Ie,setLoading:Ve}=R(!0),$e=async()=>{try{Ve(!0);const e={...pe(Le)},{message:t}=await M(e);u(t)?(Ee.data=h(t.data)?t.data:[],Ee.total=b(t.page)):(Ee.data=[],Ee.total=0)}finally{xe.value=[],Ve(!1)}};ue((()=>V.isRefresh),(e=>{e&&(V.setRefresh(!1),$e())}));return(async()=>{try{await V.getConfig(),Ve(!1),await _e(),Re.value[Re.value.length-1]=be(),Ve(!0),V.web.setup?(K.value=!0,$e()):(K.value=!1,Ve(!1),T())}catch(e){Ve(!1)}})(),(e,l)=>{const r=i,u=n,c=D,p=C,_=j,m=S,h=g,P=k,f=w,b=x,H=v;return Q(),Z(H,null,{default:F((()=>[J(b,{install:ee($).setup},{desc:F((()=>[te("span",null,Y(e.$t("Site.PHP.index_1")),1),J(r,{class:"ml-4px",onClick:l[0]||(l[0]=e=>ee(y)("nginx"))},{default:F((()=>[X(Y(e.$t("Site.PHP.index_2")),1)])),_:1}),Te,J(r,{onClick:l[1]||(l[1]=e=>ee(y)("apache"))},{default:F((()=>[X(Y(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:F((()=>[J(P,{class:"p-16px",feedback:!0},{toolsLeft:F((()=>[J(u,{type:"primary",onClick:ne},{default:F((()=>[X(Y(e.$t("Site.PHP.index_4")),1)])),_:1}),J(u,{onClick:le},{default:F((()=>[X(Y(e.$t("Site.PHP.index_5")),1)])),_:1}),J(u,{onClick:me},{default:F((()=>[X(Y(e.$t("Site.PHP.index_6")),1)])),_:1}),J(u,{onClick:we},{default:F((()=>[X(Y(e.$t("Site.PHP.index_7")),1)])),_:1}),ee(K)?(Q(),Z(c,{key:0,"soft-name":ee(N)},null,8,["soft-name"])):ce("",!0)])),toolsRight:F((()=>[J(Oe,{value:ee(Le).type,"onUpdate:value":[l[2]||(l[2]=e=>ee(Le).type=e),$e]},null,8,["value"]),J(p,{value:ee(Le).search,"onUpdate:value":l[3]||(l[3]=e=>ee(Le).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:$e},null,8,["value","placeholder"])])),table:F((()=>[J(_,{"checked-row-keys":ee(xe),"onUpdate:checkedRowKeys":l[4]||(l[4]=e=>ae(xe)?xe.value=e:null),loading:ee(Ie),data:ee(Ee).data,columns:ee(Re),"onUpdate:sorter":Ue},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:F((()=>[J(m,{"checked-row-keys":ee(xe),"onUpdate:checkedRowKeys":l[5]||(l[5]=e=>ae(xe)?xe.value=e:null),data:ee(Ee).data,options:Be},null,8,["checked-row-keys","data"])])),pageRight:F((()=>[J(h,{page:ee(Le).p,"onUpdate:page":l[6]||(l[6]=e=>ee(Le).p=e),"page-size":ee(Le).limit,"onUpdate:pageSize":l[7]||(l[7]=e=>ee(Le).limit=e),"item-count":ee(Ee).total,"store-key":"site-php-page",onRefresh:$e},null,8,["page","page-size","item-count"])])),_:1}),J(f,{show:ee(G).show,"onUpdate:show":l[8]||(l[8]=e=>ee(G).show=e),title:ee(G).title,width:640,height:540,footer:!0,component:ee(t)},null,8,["show","title","component"]),J(f,{show:ee(se).show,"onUpdate:show":l[9]||(l[9]=e=>ee(se).show=e),title:ee(se).title,width:820,"min-height":608,component:ee(a)},null,8,["show","title","component"]),J(f,{show:ee(re).show,"onUpdate:show":l[10]||(l[10]=e=>ee(re).show=e),title:ee(re).title,width:560,footer:!0,component:ee(o)},null,8,["show","title","component"]),J(f,{show:ee(he).show,"onUpdate:show":l[11]||(l[11]=e=>ee(he).show=e),title:ee(he).title,width:560,"min-height":148,footer:!0,component:ee(s)},null,8,["show","title","component"]),J(f,{show:ee(Pe).show,"onUpdate:show":l[12]||(l[12]=e=>ee(Pe).show=e),title:ee(Pe).title,data:ee(Pe).data,width:860,height:700,component:ee(d)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{Pe as a,Ue as b,fe as i};
