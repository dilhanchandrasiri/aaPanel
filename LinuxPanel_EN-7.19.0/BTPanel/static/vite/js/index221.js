import{_ as e}from"./index102.js?v=1732601582185";import{_ as a}from"./index121.js?v=1732601582185";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{c9 as r,I as t,g as i,q as n,f as s,j as o,_ as d,m as u,bl as p}from"./page_layout.js?v=1732601582185";import{d as _,V as v,aq as m,r as c,O as h,X as b,R as f,n as g,w as x,e as w,W as y,j as k,Y as S,Q as P,Z as j,c as $,ao as E,P as L,M as U,ac as R,m as W}from"./vue.js?v=1732601582185";import{b as q,n as V}from"./public.js?v=1732601582185";import{g as A,a as C,c as z,b as H}from"./index87.js?v=1732601582185";import{aq as M}from"./site.js?v=1732601582185";import{bL as F,ad as Q,bG as N,bp as D,bh as G,_ as I,aa as O,bP as X,bQ as Y,bM as Z,bN as B}from"./naive.js?v=1732601582185";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang17.js?v=1732601582185";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1732601582185";import{u as T}from"./file.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import"./site4.js?v=1732601582185";import"./index215.js?v=1732601582185";import"./index99.js?v=1732601582185";import"./index96.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang14.js?v=1732601582185";import"./theme-chrome.js?v=1732601582185";import"./refersh.js?v=1732601582185";import"./php.js?v=1732601582185";import"./index171.js?v=1732601582185";import"./index97.js?v=1732601582185";const ee=_({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=r(),{phpVersion:l}=v(a),i=m(e,"value"),{loading:n,setLoading:s}=q(),o=c([]),d=e=>{l.value=e};return(async()=>{try{s(!0);const{message:e}=await M(),a=t(e)?e:[];o.value=a.reverse().filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),await g(),a.length>0&&(i.value="00"==a[0].version?"":a[0].version,l.value="00"==a[0].version?"":a[0].version)}finally{s(!1)}})(),(e,a)=>{const l=F;return h(),b(l,{value:i.value,"onUpdate:value":[a[0]||(a[0]=e=>i.value=e),d],loading:f(n),options:f(o)},null,8,["value","loading","options"])}}}),ae=_({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=r();x((()=>a.phpVersion),(e=>{d(e)}));const l=w((()=>a.phpVersion?"Not supported by current PHP":"Please select PHP version")),i=m(e,"value"),{loading:n,setLoading:s}=q(),o=c([]),d=async e=>{try{s(!0),i.value="";const{message:a}=await A({php_version_short:e});t(a)&&(o.value=a.map((e=>({label:e.version,value:e.version}))),await g(),a.length>0&&(i.value=a[0].version))}finally{s(!1)}};return a.phpVersion&&d(a.phpVersion),(e,a)=>{const r=F;return h(),b(r,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),loading:f(n),options:f(o),placeholder:f(l)},null,8,["value","loading","options","placeholder"])}}}),le={key:1},re={class:"w-400px"},te={class:"w-400px"},ie={class:"w-230px"},ne={class:"w-230px"},se={class:"w-400px"},oe={class:"w-230px mr-16px"},de={class:"w-400px"},ue={class:"w-400px"},pe=_({__name:"index",setup(e,{expose:t}){const{t:p}=y(),_=r(),{web:m,mysql:g,php:x}=v(_),w=c(null),W=k({domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:i(6),admin_password:n(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+i(6)+"_",enable_cache:!1,wps:!1}),q={domain:{required:!0,trigger:["blur","input"],validator:()=>""!==W.domain.trim()||new Error(p("Site.RulesError.index_31"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==W.weblog_title.trim()||new Error(p("Site.RulesError.index_3"))},language:{trigger:"change",validator:()=>null!==W.language||new Error(p("Site.RulesError.index_4"))},php_version:{trigger:"change",validator:()=>null!==W.php_version||new Error(p("Site.RulesError.index_5"))},wp_version:{trigger:"change",validator:()=>null!==W.php_version||new Error(p("Site.RulesError.index_6"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==W.user_name.trim()||new Error(p("Site.RulesError.index_7"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==W.admin_password.trim()||new Error(p("Site.RulesError.index_8"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==W.admin_email.trim()||new Error(p("Site.RulesError.index_9"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==W.redirection_url.trim()||new Error(p("Site.RulesError.index_12"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==W.Login_url.trim()||new Error(p("Site.RulesError.index_11"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==W.prefix.trim()||new Error(p("Site.RulesError.index_10"))}};return t({onConfirm:async()=>{var e;await(null==(e=w.value)?void 0:e.validate());const{message:a}=await C((()=>{const{domain:e,php_version:a}=W,l=e.replace(new RegExp(/([-.])/g),"_");if(null===a)throw u.error(p("Site.RulesError.index_5")),new Error(p("Site.RulesError.index_5"));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:_.sitePath+"/"+e,ps:l,version:a,datauser:"sql_"+l,datapassword:i(16),password:W.admin_password,pw_weak:W.pw_weak?"on":"off",email:W.admin_email,weblog_title:W.weblog_title,language:W.language,user_name:W.user_name,prefix:W.prefix,enable_cache:W.enable_cache?1:0,enable_whl:0,whl_page:W.Login_url?W.Login_url:null,whl_redirect_admin:W.redirection_url?W.redirection_url:null,package_version:W.wp_version}})());s(a)&&_.setRefresh(!0)}}),(e,r)=>{const t=o,i=Q,n=N,s=d,u=D,p=G,_=I,v=l,c=a;return h(),b(c,{install:f(g).setup&&f(x).setup},{desc:S((()=>[P("span",null,j(e.$t("WP.index_6")),1),f(x).setup?E("",!0):(h(),b(t,{key:0,class:"ml-4px",onClick:r[0]||(r[0]=e=>f(V)("php-8.0"))},{default:S((()=>[$(j(e.$t("WP.index_7")),1)])),_:1})),f(g).setup?E("",!0):(h(),L("span",le,[r[14]||(r[14]=P("span",{class:"mx-4px"},"|",-1)),U(t,{onClick:r[1]||(r[1]=e=>f(V)("mysql"))},{default:S((()=>[$(j(e.$t("WP.index_8")),1)])),_:1})]))])),default:S((()=>[U(v,{ref_key:"formRef",ref:w,modelValue:f(W),"onUpdate:modelValue":r[13]||(r[13]=e=>R(W)?W.value=e:null),rules:q},{default:S((()=>[U(n,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:S((()=>[P("div",re,[U(i,{value:f(W).domain,"onUpdate:value":r[2]||(r[2]=e=>f(W).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_20"),path:"weblog_title"},{default:S((()=>[P("div",te,[U(i,{value:f(W).weblog_title,"onUpdate:value":r[3]||(r[3]=e=>f(W).weblog_title=e),placeholder:e.$t("Site.Placeholder.index_13")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_21"),path:"language"},{default:S((()=>[P("div",ie,[U(J,{value:f(W).language,"onUpdate:value":r[4]||(r[4]=e=>f(W).language=e)},null,8,["value"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:S((()=>[P("div",ne,[U(ee,{value:f(W).php_version,"onUpdate:value":r[5]||(r[5]=e=>f(W).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_23"),path:"wp_version"},{default:S((()=>[U(p,{class:"items-center",size:8},{default:S((()=>[U(ae,{value:f(W).wp_version,"onUpdate:value":r[6]||(r[6]=e=>f(W).wp_version=e),class:"w-230px"},null,8,["value"]),U(u,{trigger:"hover"},{trigger:S((()=>[U(s,{name:"common-ask",size:"18",color:"#999"})])),default:S((()=>[$(" "+j(e.$t("WP.Add.index_8")),1)])),_:1})])),_:1})])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_24"),path:"user_name"},{default:S((()=>[P("div",se,[U(i,{value:f(W).user_name,"onUpdate:value":r[7]||(r[7]=e=>f(W).user_name=e),placeholder:e.$t("Site.Placeholder.index_14")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_27"),path:"admin_password"},{default:S((()=>[P("div",oe,[U(i,{value:f(W).admin_password,"onUpdate:value":r[8]||(r[8]=e=>f(W).admin_password=e),placeholder:e.$t("Site.Placeholder.index_15")},null,8,["value","placeholder"])]),U(_,{checked:f(W).pw_weak,"onUpdate:checked":r[9]||(r[9]=e=>f(W).pw_weak=e)},{default:S((()=>[P("span",null,j(e.$t("WP.Add.index_9")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_28"),path:"admin_email"},{default:S((()=>[P("div",de,[U(i,{value:f(W).admin_email,"onUpdate:value":r[10]||(r[10]=e=>f(W).admin_email=e),placeholder:e.$t("Site.Placeholder.index_16")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_29"),path:"prefix"},{default:S((()=>[P("div",ue,[U(i,{value:f(W).prefix,"onUpdate:value":r[11]||(r[11]=e=>f(W).prefix=e),placeholder:e.$t("Site.Placeholder.index_17")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(n,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:S((()=>[U(_,{checked:f(W).enable_cache,"onUpdate:checked":r[12]||(r[12]=e=>f(W).enable_cache=e),disabled:"nginx"!==f(m).type},{default:S((()=>[P("span",null,j(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["install"])}}}),_e=_({__name:"upload",props:{path:{default:"/"}},emits:["finish"],setup(e,{emit:a}){const l=e,r=a,t=c([]),i=async({file:e})=>{try{const a=new FormData;a.append("f_path",l.path),a.append("f_name",e.name),a.append("f_start","0"),e.file&&(a.append("blob",e.file),a.append("f_size",e.file.size.toString())),await T(a),r("finish","".concat(l.path,"/").concat(e.name))}finally{t.value=[]}};return(e,a)=>{const l=O,r=p;return h(),b(r,{ref:"upload",class:"w-auto",action:"","file-list":f(t),"onUpdate:fileList":a[0]||(a[0]=e=>R(t)?t.value=e:null),"show-file-list":!1,multiple:!1,"custom-request":i},{default:S((()=>[U(l,null,{default:S((()=>[W(e.$slots,"default")])),_:3})])),_:3},8,["file-list"])}}}),ve={class:"w-302px ml-12px"},me={class:"w-400px"},ce={class:"w-230px"},he=_({__name:"index",setup(e,{expose:a}){const{t:t}=y(),i=r(),{web:n}=v(i),s=c(null),o=c(null),d=k({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1}),u={bak_file:{trigger:["blur","input"],validator:()=>""!==d.bak_file.trim()||new Error(t("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==d.domain.trim()||new Error(t("Site.RulesError.index_31"))},php_version:{trigger:"change",validator:()=>null!==d.php_version||new Error(t("Site.RulesError.index_5"))}},p=w((()=>d.domain?"/".concat(d.domain,"/"):"/")),_=()=>{var e;null==(e=o.value)||e.restoreValidation()},m=e=>{d.bak_file=e};return a({onConfirm:async()=>{var e;await(null==(e=s.value)?void 0:e.validate());const a={bak_file:d.bak_file,domain:d.domain,sub_path:d.sub_path,php_ver_short:d.php_version||"",enable_cache:d.enable_cache?1:0};1===d.method?await z(a):await H(a),i.setRefresh(!0)}}),(e,a)=>{const r=X,t=Y,v=N,c=K,g=Q,x=Z,w=B,y=I,k=l;return h(),b(k,{ref_key:"formRef",ref:s,modelValue:f(d),"onUpdate:modelValue":a[6]||(a[6]=e=>R(d)?d.value=e:null),rules:u},{default:S((()=>[U(v,{label:e.$t("WP.Add.import_1")},{default:S((()=>[U(t,{value:f(d).method,"onUpdate:value":a[0]||(a[0]=e=>f(d).method=e)},{default:S((()=>[U(r,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),U(r,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"])])),_:1},8,["value"])])),_:1},8,["label"]),U(v,{ref_key:"bakFileRef",ref:o,label:e.$t("WP.Add.import_4"),path:"bak_file"},{default:S((()=>[U(_e,{path:"/www/server/panel/temp",onFinish:m},{default:S((()=>a[7]||(a[7]=[$(" Upload file ")]))),_:1}),P("div",ve,[U(c,{value:f(d).bak_file,"onUpdate:value":a[1]||(a[1]=e=>f(d).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:_},null,8,["value"])])])),_:1},8,["label"]),U(v,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:S((()=>[P("div",me,[U(g,{value:f(d).domain,"onUpdate:value":a[2]||(a[2]=e=>f(d).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(v,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:S((()=>[U(w,{class:"w-400px"},{default:S((()=>[U(x,null,{default:S((()=>[$(j(f(i).sitePath)+j(f(p)),1)])),_:1}),U(g,{value:f(d).sub_path,"onUpdate:value":a[3]||(a[3]=e=>f(d).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])])),_:1})])),_:1},8,["label"]),U(v,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:S((()=>[P("div",ce,[U(ee,{value:f(d).php_version,"onUpdate:value":a[4]||(a[4]=e=>f(d).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),U(v,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:S((()=>[U(y,{checked:f(d).enable_cache,"onUpdate:checked":a[5]||(a[5]=e=>f(d).enable_cache=e),disabled:"nginx"!==f(n).type},{default:S((()=>[$(j(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"])}}}),be={class:"p-20px h-full"},fe=_({__name:"index",setup(a,{expose:l}){const{t:r}=y(),t=c("single"),i=c(),n=[{key:"single",label:r("WP.Add.index_1"),isLazy:!0,component:pe},{key:"import",label:r("WP.Add.index_2"),isLazy:!0,component:he}];return l({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.onConfirm())}}),(a,l)=>{const r=e;return h(),L("div",be,[U(r,{ref_key:"tabsRef",ref:i,value:f(t),"onUpdate:value":l[0]||(l[0]=e=>R(t)?t.value=e:null),options:n},null,8,["value"])])}}});export{fe as default};
