import{M as e,ad as a,ae as o,g as t,O as l,af as r,ag as s,k as i,Z as n,r as d,ah as m,B as p,q as u}from"./index.js?v=1723125373998";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{u as _,_ as k}from"./useTableData.js?v=1723125373998";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998";import{u as x}from"./useLoading.js?v=1723125373998";import{b as h}from"./useTableColumns.js?v=1723125373998";import{_ as v,a as w}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import{_ as y}from"./index105.js?v=1723125373998";import{l as D,ad as b,r as j,f as V,S as g,Z as C,P as $,V as U,_ as N,W as L,t as R,w as P,U as S,q as W,a3 as T,b as E}from"./vue.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Checkbox.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./Switch.js?v=1723125373998";import"./use-theme-vars.js?v=1723125373998";const M={class:"px-20px py-24px"},q={class:"w-350px"},A={class:"w-350px"},B={class:"w-350px"},K={class:"w-350px"},O=D({__name:"index",setup(t,{expose:l}){const{t:r}=b(),s=e(),i=j(null),n=V({name:"",driver:"local",driver_opts:"",labels:"",remark:""}),d={name:{trigger:["blur"],validator:()=>""!==n.name||new Error(r("Docker.Volume.form.index_2"))}};return l({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),await a(R(n)),s.setRefresh(!0)}}),(e,a)=>{const t=o,l=v,r=y,s=w;return g(),C("div",M,[$(s,{ref_key:"formRef",ref:i,model:L(n),rules:d},{default:U((()=>[$(l,{label:e.$t("Docker.Volume.form.index_1"),path:"name"},{default:U((()=>[N("div",q,[$(t,{value:L(n).name,"onUpdate:value":a[0]||(a[0]=e=>L(n).name=e),placeholder:e.$t("Docker.Volume.form.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),$(l,{label:e.$t("Docker.Volume.form.index_3"),path:"driver_opts"},{default:U((()=>[N("div",A,[$(r,{value:L(n).driver_opts,"onUpdate:value":a[1]||(a[1]=e=>L(n).driver_opts=e),rows:3,placeholder:e.$t("Docker.Volume.form.index_3")},null,8,["value","placeholder"])])])),_:1},8,["label"]),$(l,{label:e.$t("Docker.Volume.form.index_4"),path:"labels"},{default:U((()=>[N("div",B,[$(r,{value:L(n).labels,"onUpdate:value":a[2]||(a[2]=e=>L(n).labels=e),rows:3,placeholder:e.$t("Docker.Volume.form.index_5")},null,8,["value","placeholder"])])])),_:1},8,["label"]),$(l,{label:e.$t("Docker.Volume.form.index_6"),path:"remark"},{default:U((()=>[N("div",K,[$(r,{value:L(n).remark,"onUpdate:value":a[3]||(a[3]=e=>L(n).remark=e),rows:3,placeholder:e.$t("Docker.Volume.form.index_6")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),Z=D({__name:"index",setup(a){const{t:o}=b(),v=t(o("Docker.Volume.index_1")),w=e(),y=()=>{v.show=!0},D=()=>{n({title:o("Docker.Volume.index_2"),width:400,content:()=>$("span",{class:"text-error"},[o("Docker.Volume.index_13")]),onConfirm:async()=>{await m(),K()}})},j=V({page:1,pageSize:10}),{keys:C,table:N,columns:R}=_([{type:"selection",width:40},{key:"Name",title:o("Docker.Volume.index_3"),ellipsis:{tooltip:!0},render:e=>e.Name||"--"},{key:"Mountpoint",title:o("Docker.Volume.index_4"),ellipsis:{tooltip:!0},render:e=>e.Mountpoint||"--"},{key:"container",title:o("Docker.Volume.index_5"),width:"16%",minWidth:120,ellipsis:{tooltip:!0},render:e=>e.container||"--"},{key:"Driver",title:o("Docker.Volume.index_6"),width:"10%",minWidth:100,render:e=>e.Driver||"--"},{key:"CreatedAt",title:o("Docker.Volume.index_7"),width:"12%",minWidth:140,render:e=>l(e.CreatedAt)},{key:"Labels",title:o("Docker.Volume.index_8"),width:"16%",minWidth:140,ellipsis:{tooltip:!0},render:e=>{if(!e.Labels)return"--";return(Object.entries(e.Labels)||[]).map((e=>"".concat(e[0],":").concat(e[1]))).join("\n")}},h({width:80,options:e=>[{label:o("Public.Btn.Del"),onClick:()=>{M(e)}}]})]),M=e=>{n({title:o("Docker.Volume.index_10",[e.Name]),content:()=>$("span",{class:"text-error"},[o("Docker.Volume.index_14",[e.Name])]),onConfirm:async()=>{await r({name:e.Name}),K()}})},q=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:o("Docker.Volume.index_11"),desc:o("Docker.Volume.index_12"),api:e=>r({name:e.Name},!1),done:()=>{K()},columns:[R.value[1]]}}],{loading:A,setLoading:B}=x(),K=async()=>{try{B(!0);const{message:e}=await s();N.data=i(e)?e:[]}finally{C.value=[],B(!1)}};return P((()=>w.isRefresh),(e=>{e&&(w.setRefresh(!1),K())})),K(),(e,a)=>{const o=p,t=f,l=k,r=c,s=u,i=d;return g(),S(i,{class:"p-16px"},{default:U((()=>[$(r,null,{toolsLeft:U((()=>[$(o,{type:"primary",onClick:y},{default:U((()=>[W(T(e.$t("Docker.Volume.index_1")),1)])),_:1}),$(o,{onClick:D},{default:U((()=>[W(T(e.$t("Docker.Volume.index_2")),1)])),_:1})])),table:U((()=>[$(l,{page:L(j),"onUpdate:page":a[1]||(a[1]=e=>E(j)?j.value=e:null),"checked-row-keys":L(C),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>E(C)?C.value=e:null),"row-key":"Name","is-page":!0,loading:L(A),data:L(N).data,columns:L(R)},{pagePrefix:U((()=>[$(t,{"checked-row-keys":L(C),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>E(C)?C.value=e:null),"row-key":"Name",data:L(N).data,options:q},null,8,["checked-row-keys","data"])])),_:1},8,["page","checked-row-keys","loading","data","columns"])])),_:1}),$(s,{show:L(v).show,"onUpdate:show":a[3]||(a[3]=e=>L(v).show=e),title:L(v).title,width:580,footer:!0,component:O},null,8,["show","title"])])),_:1})}}});export{Z as default};
