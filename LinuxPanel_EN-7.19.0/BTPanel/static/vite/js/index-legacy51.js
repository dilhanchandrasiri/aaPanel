System.register(["./page_layout-legacy.js?v=1732601582185","./index-legacy121.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./soft-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./mail-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./index-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./site-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy14.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./theme-chrome-legacy.js?v=1732601582185","./file-legacy.js?v=1732601582185"],(function(t,e){"use strict";var a,i,n,l,s,o,d,u,c,r,p,_,m,g,v,x,y,f,h,S,b,w,k,M,$,C,P,j,U,R,B,L,I,z,E,V,Q,W,D,O,X,Y,Z,F,G,H,J,N,T,q,A,K,tt,et,at,it,nt,lt,st,ot,dt,ut,ct,rt,pt,_t,mt,gt,vt,xt,yt,ft,ht,St,bt,wt;return{setters:[t=>{a=t.k,i=t.bf,n=t.m,l=t.f,s=t.I,o=t.j,d=t._,u=t.u,c=t.c,r=t.bg},t=>{p=t._},t=>{_=t.d,m=t.O,g=t.P,v=t.Q,x=t.Z,y=t.m,f=t.W,h=t.r,S=t.X,b=t.Y,w=t.M,k=t.c,M=t.R,$=t.ac,C=t.j,P=t.V,j=t.e,U=t.af,R=t.$,B=t.ad,L=t.ao,I=t.F,z=t.a6},t=>{E=t.i},t=>{V=t.b,Q=t.h,W=t.a,D=t.d,O=t._,X=t.f,Y=t.u},t=>{Z=t.P,F=t.Q,G=t.R,H=t.S,J=t.T,N=t.k,T=t.U,q=t.V,A=t.W,K=t.X,tt=t.Y,et=t.Z,at=t._,it=t.$,nt=t.a0},t=>{lt=t.b$,st=t.bQ,ot=t.bl,dt=t.bM,ut=t.bN,ct=t.aa,rt=t.ad,pt=t.bG,_t=t.bL,mt=t._,gt=t.bp,vt=t.bh,xt=t.bo,yt=t.bJ},t=>{ft=t._},t=>{ht=t._},t=>{St=t.b},t=>{bt=t._},t=>{wt=t._},null,null,null,null],execute:function(){var kt=document.createElement("style");kt.textContent=".setting-card[data-v-7c578c97]{padding:12px}.setting-card .setting-title[data-v-7c578c97]{margin-bottom:12px;font-size:15px;--un-text-opacity:1;color:rgb(102 102 102 / var(--un-text-opacity));font-weight:700;line-height:28px}.setting-title[data-v-a5fba457]{font-size:18px;margin-bottom:12px}\n",document.head.appendChild(kt);const Mt={class:"setting-card"},$t={class:"setting-title"},Ct=a(_({__name:"index",props:{title:{default:""}},setup:t=>(t,e)=>(m(),g("div",Mt,[v("div",$t,x(t.title),1),y(t.$slots,"default",{},void 0,!0)]))}),[["__scopeId","data-v-7c578c97"]]),Pt={class:"flex items-center"},jt=_({__name:"index",setup(t){const{t:e}=f(),a=i(),s=h(0),o=h(null),d=async()=>{o.value||0===o.value?(await Z({save_day:0===s.value?0:o.value}),u()):n.error(e("Mail.Setting.index_27"))},u=async()=>{const{message:t}=await F();l(t)&&(0===t.result?(s.value=0,o.value=null):(s.value=1,o.value=t.result))};return a.setup&&u(),(t,e)=>{const a=lt,i=st,n=ot,l=dt,u=ut,c=ct;return m(),S(Ct,{title:t.$t("Mail.Setting.index_24")},{default:b((()=>[v("div",Pt,[w(i,{value:M(s),"onUpdate:value":e[0]||(e[0]=t=>$(s)?s.value=t:null)},{default:b((()=>[w(a,{value:0},{default:b((()=>[k(x(t.$t("Mail.Setting.index_25")),1)])),_:1}),w(a,{class:"ml-24px",value:1},{default:b((()=>[k(x(t.$t("Mail.Setting.index_26")),1)])),_:1})])),_:1},8,["value"]),w(u,{class:"w-240px"},{default:b((()=>[w(n,{value:M(o),"onUpdate:value":e[1]||(e[1]=t=>$(o)?o.value=t:null),class:"flex-1 ml-16px",min:0,disabled:0===M(s),"show-button":!1,placeholder:t.$t("Mail.Setting.index_27")},null,8,["value","disabled","placeholder"]),w(l,null,{default:b((()=>[k(x(t.$t("Public.Unit.Day",null===M(o)?2:M(o))),1)])),_:1})])),_:1}),w(c,{class:"ml-24px",type:"primary",ghost:"",onClick:d},{default:b((()=>[k(x(t.$t("Public.Btn.Save")),1)])),_:1})])])),_:1},8,["title"])}}}),Ut={class:"p-20px pt-24px pb-8px"},Rt={class:"w-280px"},Bt={class:"w-280px"},Lt=_({__name:"install",emits:["refresh"],setup(t,{expose:e,emit:a}){const i=a,{t:n}=f(),s=h(null),o=C({domain:"",php_version:null}),d={domain:{trigger:"change",validator:()=>""!==o.domain.trim()||new Error(n("Mail.Setting.index_20"))},php_version:{trigger:"change",validator:()=>null!==o.php_version||new Error(n("Mail.Setting.index_21"))}},u=h([]),c=async()=>{const{message:t}=await St();if(l(t)){u.value=t.versions.reverse().map((t=>({label:t.name,value:t.version})));const e=t.versions.findIndex((t=>"74"===t.version));o.php_version=-1!==e?t.versions[e].version:t.versions[0].version}},{loading:r,setLoading:p}=V();return(async()=>{try{p(!0),await Promise.all([c()])}finally{p(!1)}})(),e({onConfirm:async()=>{await(s.value?.validate()),await G({site_name:o.domain||"",php_version:o.php_version||""}),i("refresh")}}),(t,e)=>{const a=rt,i=pt,n=_t,l=ht;return m(),g("div",Ut,[w(l,{ref_key:"formRef",ref:s,model:M(o),rules:d},{default:b((()=>[w(i,{label:t.$t("Mail.Setting.index_18"),path:"domain"},{default:b((()=>[v("div",Rt,[w(a,{value:M(o).domain,"onUpdate:value":e[0]||(e[0]=t=>M(o).domain=t)},null,8,["value"])])])),_:1},8,["label"]),w(i,{label:t.$t("Mail.Setting.index_19"),path:"php_version"},{default:b((()=>[v("div",Bt,[w(n,{value:M(o).php_version,"onUpdate:value":e[1]||(e[1]=t=>M(o).php_version=t),loading:M(r),options:M(u)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),It={class:"p-20px pt-24px pb-8px"},zt={class:"w-280px"},Et=_({__name:"config",emits:["refresh"],setup(t,{expose:e,emit:a}){const i=a,{t:n}=f(),o=h(null),d=C({id:0,domain:null,path:""}),u={domain:{trigger:"change",validator:()=>null!==d.domain||new Error(n("Mail.Setting.index_23"))}},c=h([]),r=async()=>{const{message:t}=await J();s(t)&&(c.value=t.map((t=>({label:t.name,value:t.name,data:t}))),t.length&&(d.domain=t[0].name,d.path=t[0].path,d.id=t[0].id))},p=(t,e)=>{const{data:a}=e;l(a)&&(d.id=a.id,d.path=a.path)},{loading:_,setLoading:x}=V();return(async()=>{try{x(!0),await Promise.all([r()])}finally{x(!1)}})(),e({onConfirm:async()=>{await(o.value?.validate()),await H({id:d.id,site_name:d.domain||"",path:d.path}),i("refresh")}}),(t,e)=>{const a=_t,i=pt,n=ht;return m(),g("div",It,[w(n,{ref_key:"formRef",ref:o,model:M(d),rules:u},{default:b((()=>[w(i,{label:t.$t("Mail.Setting.index_22"),path:"domain"},{default:b((()=>[v("div",zt,[w(a,{value:M(d).domain,"onUpdate:value":[e[0]||(e[0]=t=>M(d).domain=t),p],loading:M(_),options:M(c)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),Vt={class:"flex items-center mr-32px text-13px"},Qt={class:"mr-4px"},Wt={key:0,class:"mr-24px text-13px"},Dt={class:"mr-10px"},Ot=_({__name:"index",setup(t){const{t:e}=f(),a=i(),{setup:n}=P(a),s=C({id:0,site_name:"",status:!1,ssl_status:!1}),u=j((()=>`${s.ssl_status?"https":"http"}://${s.site_name}`)),c=U(),r=()=>{c.push("/site/php")},p=async()=>{const{message:t}=await N();l(t)&&(s.id=t.id,s.status=t.status,s.site_name=t.site_name,s.ssl_status=t.ssl_status)},_=Q(e("Mail.Setting.index_14"),{onRefresh:p}),y=()=>{_.show=!0},$=()=>{const t=h(!1);W({title:e("Mail.Setting.index_15"),width:420,content:()=>w(I,null,[w("div",{class:"mb-16px"},[e("Mail.Setting.index_16",[s.site_name])]),w(mt,{checked:t.value,onUpdateChecked:e=>{t.value=e}},{default:()=>[w("div",{class:"text-desc leading-[1.4]"},[e("Mail.Setting.index_17")])]})]),onConfirm:async()=>{await T({id:s.id,site_name:s.site_name,force:t.value?1:0}),p()}})},z=Q(e("Mail.Setting.index_12"),{onRefresh:p}),E=()=>{z.show=!0};return n.value&&p(),(t,e)=>{const a=o,i=R("i18n-t"),n=ct,l=d,c=gt,p=vt,f=ft;return m(),S(Ct,{title:"WebMail"},{default:b((()=>[w(p,{class:"items-center",size:0},{default:b((()=>[v("div",Vt,[v("span",Qt,x(t.$t("Mail.Setting.index_6")),1),v("span",{class:B(M(s).status?"text-primary":"text-error")},x(M(s).status?t.$t("Mail.Setting.index_7"):t.$t("Mail.Setting.index_8")),3)]),M(s).status?(m(),g("div",Wt,[v("span",Dt,x(t.$t("Mail.Setting.index_9")),1),w(a,{href:M(u),target:"_blank"},{default:b((()=>[k(x(M(u)),1)])),_:1},8,["href"]),M(s).ssl_status?L("",!0):(m(),S(i,{key:0,tag:"span",class:"ml-6px text-desc",keypath:"Mail.Setting.index_10",scope:"global"},{link_1:b((()=>[w(a,{onClick:r},{default:b((()=>[k(x(t.$t("Mail.Setting.index_11")),1)])),_:1})])),_:1}))])):L("",!0),M(s).status?(m(),S(n,{key:1,onClick:$},{default:b((()=>[k(x(t.$t("Public.Btn.Uninstall")),1)])),_:1})):(m(),g(I,{key:2},[w(n,{type:"primary",ghost:"",onClick:y},{default:b((()=>[k(x(t.$t("Public.Btn.Install")),1)])),_:1}),w(n,{class:"ml-10px",onClick:E},{default:b((()=>[v("span",null,x(t.$t("Mail.Setting.index_12")),1)])),_:1}),w(c,null,{trigger:b((()=>[w(l,{class:"ml-6px",name:"common-ask",size:"16"})])),default:b((()=>[k(x(t.$t("Mail.Setting.index_13")),1)])),_:1})],64))])),_:1}),w(f,{show:M(_).show,"onUpdate:show":e[0]||(e[0]=t=>M(_).show=t),title:M(_).title,data:M(_).data,width:480,footer:!0,"confirm-text":t.$t("Public.Btn.Install"),component:Lt},null,8,["show","title","data","confirm-text"]),w(f,{show:M(z).show,"onUpdate:show":e[1]||(e[1]=t=>M(z).show=t),title:M(z).title,data:M(z).data,width:480,footer:!0,component:Et},null,8,["show","title","data"])])),_:1})}}}),Xt={class:"text-13px"},Yt=_({__name:"index",setup(t){const{t:e}=f(),a=i(),n=h(!1),l=async t=>{t?W({width:380,title:e("Mail.Setting.index_29"),content:e("Mail.Setting.index_30"),onConfirm:async()=>{await q()},onPublicClose:()=>{n.value=!t}}):await A()},{loading:s,setLoading:o}=V();return a.setup&&(async()=>{try{o(!0),await K(),n.value=!0}catch(t){n.value=!1,console.error(t)}finally{o(!1)}})(),(t,e)=>{const a=xt,i=vt;return m(),S(Ct,{title:"Monitoring"},{default:b((()=>[w(i,{class:"items-center",size:24},{default:b((()=>[v("div",Xt,x(t.$t("Mail.Setting.index_28")),1),w(a,{value:M(n),"onUpdate:value":[e[0]||(e[0]=t=>$(n)?n.value=t:null),l],loading:M(s)},null,8,["value","loading"])])),_:1})])),_:1})}}}),Zt={class:"p-16px"},Ft=_({__name:"config",props:{row:{}},setup(t,{expose:e}){const a=t,{row:i}=a,n=h(""),s=h("utf-8"),{loading:o,setLoading:d}=V();return(async()=>{try{d(!0);const{message:t}=await tt({service:i.key});l(t)&&(n.value=t.data,s.value=t.encoding)}finally{d(!1)}})(),e({onConfirm:async()=>{await et({service:i.key,data:n.value})}}),(t,e)=>(m(),g("div",Zt,[w(wt,{value:M(n),"onUpdate:value":e[0]||(e[0]=t=>$(n)?n.value=t:null),encoding:M(s),"onUpdate:encoding":e[1]||(e[1]=t=>$(s)?s.value=t:null),height:550,load:M(o),"show-encoding":!0},null,8,["value","encoding","load"])]))}}),Gt=_({__name:"index",setup(t){const e=i(),{t:a}=f(),{table:n,columns:s}=D([{key:"name",title:a("Mail.Setting.index_31")},{key:"status",title:a("Mail.Setting.index_32"),render:t=>w(O,{value:t.status,checkedValue:!0,onClick:()=>{o(t)}},null)},X({width:200,options:t=>[{label:t.status?a("Public.Status.Stop"):a("Public.Status.Start"),onClick:()=>{o(t)}},{label:a("Public.Status.Restart"),onClick:()=>{d(t)}},{label:a("Public.Btn.Repair"),onClick:()=>{u(t)}},{label:a("Public.Btn.Config"),onClick:()=>{r(t)}}]})]),o=t=>{W({title:a("Mail.Setting.index_33",[t.key,t.status?a("Public.Status.Stop"):a("Public.Status.Start")]),content:a("Mail.Setting.index_34",[t.key,t.status?a("Public.Status.Stop").toLowerCase():a("Public.Status.Start").toLowerCase()]),onConfirm:async()=>{await at({service:t.key,type:t.status?"stop":"start"}),g()}})},d=t=>{W({title:a("Mail.Setting.index_33",[t.key,a("Public.Status.Restart")]),content:a("Mail.Setting.index_34",[t.key,a("Public.Status.Restart").toLowerCase()]),onConfirm:async()=>{await at({service:t.key,type:"restart"}),g()}})},u=t=>{let e=a("Mail.Setting.index_34",[t.key,a("Public.Btn.Repair").toLowerCase()]);"dovecot"===t.key?e=a("Mail.Setting.index_35"):"postfix"===t.key&&(e=a("Mail.Setting.index_36")),W({title:a("Mail.Setting.index_33",[t.key,a("Public.Btn.Repair")]),content:e,onConfirm:async()=>{await it({service:t.key,type:"repair"}),g()}})},c=Q(),r=t=>{c.data.row=t,c.title=a("Mail.Setting.index_37",[`${t.key}_config_file`]),c.show=!0},{loading:p,setLoading:_}=V(),g=async()=>{try{_(!0);const{message:t}=await nt();l(t)&&(n.data=[],n.data.push({key:"dovecot",name:"Dovecot",status:t.dovecot}),t.change_rspamd&&n.data.push({key:"opendkim",name:"Opendkim",status:t.opendkim}),n.data.push({key:"rspamd",name:"Rspamd",status:t.rspamd}),n.data.push({key:"postfix",name:"Postfix",status:t.postfix}))}finally{_(!1)}};return e.setup&&g(),(t,e)=>{const a=bt,i=ft;return m(),S(Ct,{title:"Service Status"},{default:b((()=>[w(a,{loading:M(p),"loading-num":3,data:M(n).data,columns:M(s)},null,8,["loading","data","columns"]),w(i,{show:M(c).show,"onUpdate:show":e[0]||(e[0]=t=>M(c).show=t),title:M(c).title,data:M(c).data,width:800,height:624,footer:!0,"confirm-text":t.$t("Public.Btn.Save"),component:Ft},null,8,["show","title","data","confirm-text"])])),_:1})}}}),Ht={class:"mr-8px"},Jt={class:"mr-8px"};t("default",a(_({__name:"index",setup(t){const{t:a}=f(),n=i(),{setup:l,install:s,update:o,version:d,lastVersion:_}=P(n),y=u(),{userInfo:h}=P(y),$=()=>{s.value&&!o.value?Y({title:a("Mail.Setting.index_5"),width:560,height:550,component:z((()=>c((()=>e.import("./index-legacy184.js?v=1732601582185")),void 0)))}):E("mail_sys")},C=()=>{r()};return(t,e)=>{const a=ct,i=yt,n=p;return m(),S(n,{install:M(l)},{desc:b((()=>[M(h).status?(m(),g(I,{key:1},[v("span",Jt,x(M(s)?M(o)?t.$t("Mail.Setting.index_4",[M(d),M(_)]):t.$t("Mail.Setting.index_5"):t.$t("Mail.Setting.index_3")),1),w(a,{class:"px-8px h-24px",type:"primary",size:"small",onClick:$},{default:b((()=>[k(x(t.$t("Public.Btn.Install")),1)])),_:1})],64)):(m(),g(I,{key:0},[v("span",Ht,x(t.$t("Mail.Setting.index_1")),1),w(a,{class:"px-8px h-24px",type:"primary",size:"small",onClick:C},{default:b((()=>[k(x(t.$t("Mail.Setting.index_2")),1)])),_:1})],64))])),default:b((()=>[w(i,{class:"p-16px"},{default:b((()=>[w(Ot),w(jt),w(Yt),w(Gt)])),_:1})])),_:1},8,["install"])}}}),[["__scopeId","data-v-a5fba457"]]))}}}));
