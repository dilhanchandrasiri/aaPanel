const __vite__fileDeps=["js/rewrite.js?v=1723125373998","js/index73.js?v=1723125373998","js/index.js?v=1723125373998","js/vue.js?v=1723125373998","js/pinia.js?v=1723125373998","css/index42.css?v=1723125373998","js/file2.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang12.js?v=1723125373998","js/useLoading.js?v=1723125373998","js/Select.js?v=1723125373998","js/Tag.js?v=1723125373998","js/Empty.js?v=1723125373998","js/Spin.js?v=1723125373998","js/uniq.js?v=1723125373998","js/_baseUniq.js?v=1723125373998","js/_baseFindIndex.js?v=1723125373998","js/index158.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998","js/site.js?v=1723125373998","js/index144.js?v=1723125373998","js/Tabs.js?v=1723125373998","js/omit.js?v=1723125373998","js/Ellipsis.js?v=1723125373998","css/index20.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998","css/index9.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998","js/Checkbox.js?v=1723125373998","js/useTableData.js?v=1723125373998","js/data.js?v=1723125373998","js/Skeleton.js?v=1723125373998","js/DataTable.js?v=1723125373998","js/index105.js?v=1723125373998","js/use-theme-vars.js?v=1723125373998","css/index12.css?v=1723125373998","js/useTableColumns.js?v=1723125373998","js/Progress.js?v=1723125373998","js/Switch.js?v=1723125373998","css/useTableColumns.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang13.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998","js/InputGroupLabel.js?v=1723125373998","js/InputGroup.js?v=1723125373998","js/index77.js?v=1723125373998","css/index11.css?v=1723125373998","js/index70.js?v=1723125373998","css/index10.css?v=1723125373998","js/refersh.js?v=1723125373998","js/php.js?v=1723125373998","js/Space.js?v=1723125373998","js/form.vue_vue_type_script_setup_true_lang2.js?v=1723125373998","js/index145.js?v=1723125373998","css/index21.css?v=1723125373998","js/old4.js?v=1723125373998","js/site2.js?v=1723125373998"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{aw as e,e as a,h as t,k as l,n as i,B as o,g as n,v as s,j as r,ao as d,ae as u,G as c,q as p,p as m,bh as v,cG as h,z as f,cV as y,a as g,au as w,b8 as b,d1 as _,L as x}from"./index.js?v=1723125373998";import{_ as S}from"./index144.js?v=1723125373998";import{s as C}from"./pinia.js?v=1723125373998";import{A as k,a as P,P as T,q as R,l as L,ad as $,r as U,S as D,Z as E,_ as j,V as A,a3 as N,W as I,b as B,f as O,a1 as H,F as W,af as q,t as M,U as z,x as K,al as V,a5 as X,a6 as G,ag as F,k as Q,n as Y}from"./vue.js?v=1723125373998";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998";import{u as ee,_ as ae}from"./useTableData.js?v=1723125373998";import{_ as te}from"./index105.js?v=1723125373998";import{W as le,X as ie,Y as oe,aQ as ne,aR as se,aS as re,aT as de,aU as ue,Z as ce,_ as pe,$ as me,a0 as ve,a1 as he,a2 as fe,a3 as ye,a4 as ge,au as we,av as be,aw as _e,ax as xe,ay as Se,az as Ce,aA as ke,aB as Pe,ai as Te,aj as Re,ak as Le,aV as $e,aW as Ue,al as De,am as Ee,an as je,ao as Ae,ap as Ne,ar as Ie,as as Be,at as Oe,aX as He,aY as We,aZ as qe,a_ as Me,a$ as ze,b0 as Ke,b1 as Ve,a5 as Xe,a6 as Ge,a7 as Fe,a8 as Qe,a9 as Ye,aa as Ze,ab as Je,ac as ea,ad as aa,ae as ta,af as la,ag as ia,ah as oa,aD as na,aE as sa,aF as ra,aG as da,aH as ua,aI as ca}from"./site.js?v=1723125373998";import{u as pa}from"./useLoading.js?v=1723125373998";import{B as ma,b as va,g as ha}from"./useTableColumns.js?v=1723125373998";import{_ as fa}from"./Select.js?v=1723125373998";import{_ as ya,a as ga}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import{_ as wa}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1723125373998";import{_ as ba}from"./Switch.js?v=1723125373998";import{_ as _a}from"./index77.js?v=1723125373998";import{_ as xa}from"./index73.js?v=1723125373998";import{_ as Sa,a as Ca}from"./Checkbox.js?v=1723125373998";import{_ as ka}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1723125373998";import{_ as Pa}from"./index70.js?v=1723125373998";import{_ as Ta,a as Ra,b as La}from"./refersh.js?v=1723125373998";import{a as $a,b as Ua}from"./php.js?v=1723125373998";import{_ as Da}from"./Space.js?v=1723125373998";import{_ as Ea}from"./InputGroupLabel.js?v=1723125373998";import{_ as ja}from"./InputGroup.js?v=1723125373998";import{_ as Aa}from"./form.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import{_ as Na}from"./index145.js?v=1723125373998";import{_ as Ia}from"./Spin.js?v=1723125373998";import{_ as Ba}from"./Progress.js?v=1723125373998";import{_ as Oa}from"./Tag.js?v=1723125373998";const Ha=Symbol("site-config");function Wa(){return P(Ha)}const{t:qa}=e.global;function Ma({delDomain:e}){return{key:"action",title:qa("Site.TableRow.OPT"),width:80,align:"right",render:a=>T(ma,{options:[{label:qa("Site.TableOP.Del"),onClick:()=>{t({title:"".concat(qa("Site.Batch.DeleteDomain.Title"),"[").concat(a.name,"]"),content:qa("Site.Batch.DeleteDomain.Content"),onConfirm:async({hide:t})=>{await e(a),t()}})}}]},null)}}const za={class:"flex justify-between items-center mb-24px"},Ka={class:"w-400px"},Va={class:"pr-40px"},Xa=L({__name:"index",setup(e,{expose:t}){const{t:n}=$(),{data:s}=Wa(),r=U(""),d=async()=>{""!==r.value.trim()?(await oe({id:s.id,webname:s.name,domain:r.value.trim().split("\n").join(",")}),r.value="",g()):i.error(n("Site.RulesError.Domain"))},u=async e=>{await le({id:s.id,webname:s.name,domain:e.name,port:e.port}),g()},{keys:c,table:p,columns:m}=ee([{type:"selection",width:40},{key:"name",title:qa("Site.TableRow.Domain"),render:e=>T(a,{href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:()=>[e.name]})},{key:"port",title:qa("Site.TableRow.Port"),width:100},Ma({delDomain:u})]),v=()=>{p.data.length>1?m.value[m.value.length-1]=Ma({delDomain:u}):m.value[m.value.length-1]={key:"action",title:qa("Site.TableRow.OPT"),width:80,align:"right",render:()=>T("span",{class:"text-default"},[R("Inoperable")])}},h=[{key:"del",type:"confirm",label:n("Site.Batch.DeleteWeb.Label1"),confirm:{title:n("Site.Batch.DeleteWeb.Label2"),desc:n("Site.Batch.DeleteWeb.Content"),api:e=>le({id:s.id,webname:s.name,domain:e.name,port:e.port},!1),done:()=>{g()},columns:[{key:"name",title:n("Site.Cert.HolderTable.Domain"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:f,setLoading:y}=pa(),g=async()=>{try{y(!0);const e={id:s.id},{message:a}=await ie(e);p.data=l(a)?a:[],v()}finally{c.value=[],y(!1)}};return g(),t({init:g}),(e,a)=>{const t=te,l=o,i=ae,n=J,s=Z;return D(),E("div",null,[j("div",za,[j("div",Ka,[T(t,{value:I(r),"onUpdate:value":a[0]||(a[0]=e=>B(r)?r.value=e:null)},{default:A((()=>[j("p",null,N(e.$t("Site.Config.Domain.TopTips.0")),1),j("p",null,N(e.$t("Site.Config.Domain.TopTips.1")),1),j("p",null,N(e.$t("Site.Config.Domain.TopTips.2")),1)])),_:1},8,["value"])]),j("div",Va,[T(l,{type:"primary",onClick:d},{default:A((()=>[R(N(e.$t("Site.Cert.Add")),1)])),_:1})])]),T(s,null,{table:A((()=>[T(i,{"checked-row-keys":I(c),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>B(c)?c.value=e:null),loading:I(f),"max-height":400,data:I(p).data,columns:I(m)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[T(n,{"checked-row-keys":I(c),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>B(c)?c.value=e:null),data:I(p).data,options:h},null,8,["checked-row-keys","data"])])),_:1})])}}}),Ga={class:"w-140px"},Fa={class:"w-120px"},Qa=L({__name:"index",setup(e,{expose:a}){const m=H((()=>s((()=>import("./rewrite.js?v=1723125373998")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))),{t:v}=$(),{data:h}=Wa(),f=O({domain:"",dirName:null}),y=U([]),g=async()=>{const e=f.dirName;""!==f.domain.trim()?null!==e?(await se({id:h.id,domain:f.domain,dirName:e}),L()):i.error(v("Site.RulesError.Index_2")):i.error(v("Site.RulesError.Index_1"))},w=n(v("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),b=e=>{w.data.filename=e.filename,w.data.fileContent=e.data,w.data.rlist=e.rlist,w.show=!0},{keys:_,table:x,columns:S}=ee([{type:"selection",width:40},{key:"domain",title:v("Site.TableRow.Domain"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:v("Site.TableRow.Port"),width:80},{key:"path",title:v("Site.Config.DirectoryConf.Subdir"),width:120,ellipsis:{tooltip:{width:"trigger"}}},va({width:130,options:e=>[{label:v("Site.TableOP.Rewrite"),onClick:()=>{(async e=>{try{const{message:a}=await re({id:e.id});r(a)&&b(a)}catch(a){const l=d(a,"meesage.result","");l?i.error(l):t({title:v("Site.Cert.TipsText"),content:v("Site.PHP.index_80"),onConfirm:async({hide:a})=>{const{message:t}=await de({id:e.id});r(t)&&b(t),a()}})}})(e)}},{label:v("Site.TableOP.Del"),onClick:()=>{t({title:v("Site.Config.DirectoryConf.Content1",[e.path]),content:v("Site.Config.DirectoryConf.Content1"),onConfirm:async({hide:a})=>{await ne({id:e.id}),L(),a()}})}}]})]),C=[{key:"del",type:"confirm",label:v("Site.Batch.DeleteWeb.Label1"),confirm:{title:v("Site.Batch.DeleteWeb.Label2"),desc:v("Site.Batch.DeleteWeb.Content"),api:e=>ne({id:e.id},!1),done:()=>{L()},columns:[{key:"domain",title:v("Site.TableRow.Domain"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:k,setLoading:P}=pa(),L=()=>{f.domain="",f.dirName=null,(async()=>{try{P(!0);const{message:e}=await ue({id:h.id});if(r(e)){const{dirs:a,binding:t}=e;l(a)&&a.length>0?(y.value=a.map((e=>({label:e,value:e}))),f.dirName=a[0]):(y.value=[],f.dirName=null),x.data=l(t)?t:[]}}finally{_.value=[],P(!1)}})()};return L(),a({init:L}),(e,a)=>{const t=u,l=c,i=fa,n=o,s=ae,r=J,d=Z,v=p;return D(),E("div",null,[T(l,{class:"items-center",size:16},{default:A((()=>[T(l,{class:"items-center"},{default:A((()=>[j("div",null,N(e.$t("Site.TableRow.Domain")),1),j("div",Ga,[T(t,{value:I(f).domain,"onUpdate:value":a[0]||(a[0]=e=>I(f).domain=e),placeholder:""},null,8,["value"])])])),_:1}),T(l,{class:"items-center"},{default:A((()=>[j("div",null,N(e.$t("Site.Config.DirectoryConf.Subdir")),1),j("div",Fa,[T(i,{value:I(f).dirName,"onUpdate:value":a[1]||(a[1]=e=>I(f).dirName=e),options:I(y)},null,8,["value","options"])])])),_:1}),T(n,{type:"primary",onClick:g},{default:A((()=>[R(N(e.$t("Site.Cert.Add")),1)])),_:1})])),_:1}),T(d,{class:"mt-16px"},{table:A((()=>[T(s,{"checked-row-keys":I(_),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>B(_)?_.value=e:null),loading:I(k),"max-height":440,data:I(x).data,columns:I(S)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[T(r,{"checked-row-keys":I(_),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>B(_)?_.value=e:null),data:I(x).data,options:C},null,8,["checked-row-keys","data"])])),_:1}),T(v,{show:I(w).show,"onUpdate:show":a[4]||(a[4]=e=>I(w).show=e),title:I(w).title,data:I(w).data,width:600,"min-height":488,component:I(m)},null,8,["show","title","data","component"])])}}}),Ya={class:"pt-16px"},Za={class:"flex-1"},Ja={class:"w-240px"},et={class:"mt-8px text-desc"},at={class:"flex-1"},tt={class:"w-240px"},lt={class:"mt-12px text-desc"},it={class:"my-16px"},ot={class:"text-desc"},nt=j("div",{class:"text-desc"},null,-1),st={class:"my-20px"},rt=j("div",{class:"text-desc"},null,-1),dt={class:"w-240px"},ut={class:"w-240px"},ct={class:"w-240px"},pt=L({__name:"index",setup(e,{expose:a}){const{t:t}=$(),{data:l}=Wa(),n=U("");let s="";const p=async()=>{""!==n.value.trim()?n.value!==s?(await ce({id:l.id,name:l.name,path:n.value}),k()):i.success(t("Site.RulesError.OriginalPath")):i.error(t("Site.RulesError.Directory"))},v=U(null),h=U([]),f=async()=>{null!==v.value?(await pe({id:l.id,runPath:v.value}),k()):i.error(t("Site.RulesError.RuntimeDirectory"))},y=U(!1),g=async()=>{await me({id:l.id,path:l.path}),k()},w=U(!1),b=async()=>{await ve({id:l.id}),k()},_=U(!1),x=O({username_get:"",password_get_1:"",password_get_2:""}),S=async e=>{e||(await he({id:l.id}),k())},C=async()=>{""!==x.username_get.trim()?""!==x.password_get_1.trim()?""!==x.password_get_2.trim()?x.username_get.trim().length<3||x.password_get_1.trim().length<3?i.error(t("Site.RulesError.UserName2")):x.password_get_1.trim()===x.password_get_2.trim()?(await fe({id:l.id,username:x.username_get,password:x.password_get_1}),x.username_get="",x.password_get_1="",x.password_get_2="",k()):i.error(t("Site.RulesError.Password3")):i.error(t("Site.RulesError.Password2")):i.error(t("Site.RulesError.Password1")):i.error(t("Site.RulesError.UserName1"))},k=()=>{(async()=>{const{message:e}=await ye({id:l.id});r(e)&&(n.value=e.result||"/www",s=n.value)})(),(async()=>{const{message:e}=await ge({id:l.id,path:l.path});if(r(e)){v.value=d(e,"runPath.runPath",null),y.value=d(e,"userini",!1),w.value=d(e,"logs.result",!1),_.value=d(e,"pass.result",!1);const a=d(e,"runPath.dirs",[]);h.value=a.map((e=>({label:e,value:e})))}})()};return k(),a({init:k}),(e,a)=>{const t=wa,l=o,i=c,s=ya,r=fa,d=m,k=ba,P=u,L=ga;return D(),E("div",Ya,[T(L,{"label-width":"140"},{default:A((()=>[T(s,{label:e.$t("Site.Lable.SiteDirectory"),"show-feedback":!1},{default:A((()=>[j("div",Za,[T(i,null,{default:A((()=>[j("div",Ja,[T(t,{value:I(n),"onUpdate:value":a[0]||(a[0]=e=>B(n)?n.value=e:null)},null,8,["value"])]),T(l,{type:"primary",onClick:p},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1}),j("div",et,N(e.$t("Site.Config.SiteDirectory.Content")),1)])])),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.RunningDirectory"),"show-feedback":!1},{default:A((()=>[j("div",at,[T(i,null,{default:A((()=>[j("div",tt,[T(r,{value:I(v),"onUpdate:value":a[1]||(a[1]=e=>B(v)?v.value=e:null),options:I(h)},null,8,["value","options"])]),T(l,{type:"primary",onClick:f},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1}),j("div",lt,N(e.$t("Site.Config.SiteDirectory.Content1")),1)])])),_:1},8,["label"]),j("div",it,[T(d,{dashed:""})]),T(s,{label:e.$t("Site.Lable.AntiXSS"),"show-feedback":!1},{default:A((()=>[T(i,{class:"items-center"},{default:A((()=>[T(k,{value:I(y),"onUpdate:value":[a[2]||(a[2]=e=>B(y)?y.value=e:null),g]},null,8,["value"]),j("div",ot,N(e.$t("Site.Config.SiteDirectory.Content2")),1)])),_:1})])),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.WriteAL"),"show-feedback":!1},{default:A((()=>[T(i,{class:"items-center"},{default:A((()=>[T(k,{value:I(w),"onUpdate:value":[a[3]||(a[3]=e=>B(w)?w.value=e:null),b]},null,8,["value"]),nt])),_:1})])),_:1},8,["label"]),j("div",st,[T(d,{dashed:""})]),T(s,{label:e.$t("Site.Lable.PasswordAccess"),"show-feedback":!1},{default:A((()=>[T(i,{class:"items-center"},{default:A((()=>[T(k,{value:I(_),"onUpdate:value":[a[4]||(a[4]=e=>B(_)?_.value=e:null),S]},null,8,["value"]),rt])),_:1})])),_:1},8,["label"]),I(_)?(D(),E(W,{key:0},[T(s,{class:"mt-16px",label:e.$t("Site.Lable.Authorized"),"show-feedback":!1},{default:A((()=>[j("div",dt,[T(P,{value:I(x).username_get,"onUpdate:value":a[5]||(a[5]=e=>I(x).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.PasswordAccess"),"show-feedback":!1},{default:A((()=>[j("div",ut,[T(P,{value:I(x).password_get_1,"onUpdate:value":a[6]||(a[6]=e=>I(x).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.RepeatPassword"),"show-feedback":!1},{default:A((()=>[j("div",ct,[T(P,{value:I(x).password_get_2,"onUpdate:value":a[7]||(a[7]=e=>I(x).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),T(s,{class:"mt-16px",label:" ","show-feedback":!1},{default:A((()=>[T(l,{type:"primary",onClick:C},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})],64)):q("",!0)])),_:1})])}}}),mt={class:"p-20px"},vt={class:"w-280px"},ht={class:"w-280px"},ft={class:"w-280px"},yt={class:"w-280px"},gt=L({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:t}=$(),l=e,{isEdit:i,siteId:o,row:n,getList:s}=l.data,r=U(null),d=O({name:"",site_dir:"",username:"",password:""}),c={name:{required:!0,message:t("Site.RulesError.Name"),trigger:["blur","input"]},site_dir:{required:!0,message:t("Site.RulesError.Path"),trigger:["blur","input"]},username:{required:!0,message:t("Site.RulesError.UserName1"),trigger:["blur","input"]},password:{required:!0,message:t("Site.RulesError.Password1"),trigger:["blur","input"]}};return i&&n&&(d.name=n.name,d.site_dir=n.site_dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=r.value)?void 0:a.validate()),i?await we({id:o,name:d.name,username:d.username,password:d.password}):await be({...M(d),id:o}),null==s||s(),e()}}),(e,a)=>{const t=u,l=ya,o=ga,n=xa;return D(),E("div",mt,[T(o,{ref_key:"formRef",ref:r,model:I(d),rules:c},{default:A((()=>[T(l,{label:e.$t("Site.TableRow.Name"),path:"name"},{default:A((()=>[j("div",vt,[T(t,{value:I(d).name,"onUpdate:value":a[0]||(a[0]=e=>I(d).name=e),disabled:I(i),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.Path"),path:"site_dir"},{default:A((()=>[j("div",ht,[T(t,{value:I(d).site_dir,"onUpdate:value":a[1]||(a[1]=e=>I(d).site_dir=e),disabled:I(i),placeholder:"Enter the path: /text/，/test/api"},null,8,["value","disabled"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.UserName"),path:"username"},{default:A((()=>[j("div",ft,[T(t,{value:I(d).username,"onUpdate:value":a[2]||(a[2]=e=>I(d).username=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.Password"),path:"password"},{default:A((()=>[j("div",yt,[T(t,{value:I(d).password,"onUpdate:value":a[3]||(a[3]=e=>I(d).password=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),T(n,{class:"mt-4px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.0")),1),j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.1")),1)])),_:1})])}}}),wt=L({__name:"index",setup(e,{expose:a}){const{t:l}=$(),{data:i}=Wa(),{keys:s,table:d,columns:u}=ee([{type:"selection",width:40},{key:"name",title:l("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:l("Site.TableRow.Path"),ellipsis:{tooltip:{width:"trigger"}}},va({width:130,options:e=>[{label:l("Site.TableOP.Edit"),onClick:()=>{g(e)}},{label:l("Site.TableOP.Del"),onClick:()=>{t({title:"".concat(l("Site.TableOP.Delete")," [").concat(e.name,"]"),content:l("Site.Batch.DeleteDomain.Content1"),onConfirm:async({hide:a})=>{await _e({id:i.id,name:e.name}),h(),a()}})}}]})]),c=[{key:"del",type:"confirm",label:l("Site.Batch.DeleteWeb.Label1"),confirm:{title:l("Site.Batch.DeleteWeb.Label2"),desc:l("Site.Batch.DeleteWeb.Content"),columns:[u.value[1]],api:e=>_e({id:i.id,name:e.name},!1),done:()=>{h()}}}],{loading:m,setLoading:v}=pa(),h=async()=>{try{v(!0);const{message:e}=await xe({id:i.id});if(r(e)){d.data=[];for(const[a,t]of Object.entries(e))if(i.name===a){d.data=t;break}}}finally{s.value=[],v(!1)}},f=n(l("Site.Config.LimitAccess.Add"),{row:void 0,siteId:i.id,isEdit:!1,getList:h}),y=()=>{f.data.isEdit=!1,f.title=l("Site.Config.LimitAccess.Add"),f.show=!0},g=e=>{f.data.row=e,f.data.isEdit=!0,f.title=l("Site.Config.LimitAccess.Edit"),f.show=!0};return h(),a({init:h}),(e,a)=>{const t=o,l=ae,i=J,n=Z,r=xa,v=p;return D(),E("div",null,[T(n,null,{toolsLeft:A((()=>[T(t,{type:"primary",onClick:y},{default:A((()=>[R(N(e.$t("Site.Config.LimitAccess.Add")),1)])),_:1})])),table:A((()=>[T(l,{"checked-row-keys":I(s),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>B(s)?s.value=e:null),"row-key":"name",loading:I(m),"max-height":440,data:I(d).data,columns:I(u)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[T(i,{"checked-row-keys":I(s),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>B(s)?s.value=e:null),"row-key":"name",data:I(d).data,options:c},null,8,["checked-row-keys","data"])])),_:1}),T(r,{class:"mt-16px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.0")),1),j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.1")),1)])),_:1}),T(v,{show:I(f).show,"onUpdate:show":a[2]||(a[2]=e=>I(f).show=e),title:I(f).title,data:I(f).data,width:480,footer:!0,component:gt},null,8,["show","title","data"])])}}}),bt={class:"p-20px"},_t={class:"w-280px"},xt={class:"w-280px"},St={class:"w-280px"},Ct=L({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:t}=$(),l=e,{isEdit:i,siteName:o,row:n,getList:s}=l.data,r=U(null),d=O({deny_name:"",suffix:"php|jsp",dir:""}),c={deny_name:{required:!0,message:t("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:t("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:t("Site.Placeholder.Index_6"),trigger:["blur","input"]}},p=()=>({...M(d),dir:d.dir.replace(/\/$/,"")+"/",website:o});return i&&n&&(d.deny_name=n.name,d.suffix=n.suffix,d.dir=n.dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=r.value)?void 0:a.validate()),i?await Se(p()):await Ce(p()),null==s||s(),e()}}),(e,a)=>{const t=u,l=ya,o=ga,n=xa;return D(),E("div",bt,[T(o,{ref_key:"formRef",ref:r,model:I(d),rules:c},{default:A((()=>[T(l,{label:e.$t("Site.TableRow.Name"),path:"deny_name"},{default:A((()=>[j("div",_t,[T(t,{value:I(d).deny_name,"onUpdate:value":a[0]||(a[0]=e=>I(d).deny_name=e),disabled:I(i),placeholder:e.$t("Site.Placeholder.Index_1")},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.Suffix"),path:"suffix"},{default:A((()=>[j("div",xt,[T(t,{value:I(d).suffix,"onUpdate:value":a[1]||(a[1]=e=>I(d).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.Path"),path:"dir"},{default:A((()=>[j("div",St,[T(t,{value:I(d).dir,"onUpdate:value":a[2]||(a[2]=e=>I(d).dir=e),placeholder:e.$t("Site.Placeholder.Index_3")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),T(n,{class:"mt-4px"},{default:A((()=>[j("li",null,N(e.$t("Site.PHP.index_72")),1),j("li",null,N(e.$t("Site.PHP.index_73")),1),j("li",null,N(e.$t("Site.PHP.index_74")),1),j("li",null,N(e.$t("Site.PHP.index_75")),1),j("li",null,N(e.$t("Site.PHP.index_76")),1)])),_:1})])}}}),kt=L({__name:"index",setup(e,{expose:a}){const{t:i}=$(),{data:s}=Wa(),{keys:r,table:d,columns:u}=ee([{type:"selection",width:40},{key:"name",title:i("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:i("Site.TableRow.Path"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:i("Site.TableRow.Suffix"),ellipsis:{tooltip:{width:"trigger"}}},va({width:130,options:e=>[{label:i("Site.TableOP.Edit"),onClick:()=>{g(e)}},{label:i("Site.TableOP.Del"),onClick:()=>{t({title:"".concat(i("Site.TableOP.Delete")," [").concat(e.name,"]"),content:i("Site.Batch.DeleteDomain.Content1"),onConfirm:async({hide:a})=>{await ke({website:s.name,deny_name:e.name}),h(),a()}})}}]})]),c=[{key:"del",type:"confirm",label:i("Site.Batch.DeleteWeb.Label1"),confirm:{title:i("Site.Batch.DeleteWeb.Label2"),desc:i("Site.Batch.DeleteWeb.Content"),columns:[u.value[1]],api:e=>ke({website:s.name,deny_name:e.name},!1),done:()=>{h()}}}],{loading:m,setLoading:v}=pa(),h=async()=>{try{v(!0);const{message:e}=await Pe({website:s.name});d.data=l(e)?e:[]}finally{r.value=[],v(!1)}},f=n(i("Site.Config.LimitAccess.Add"),{row:void 0,siteName:s.name,isEdit:!1,getList:h}),y=()=>{f.data.row=void 0,f.data.isEdit=!1,f.title=i("Site.Config.LimitAccess.Add"),f.show=!0},g=e=>{f.data.row=e,f.data.isEdit=!0,f.title=i("Site.Config.LimitAccess.Edit"),f.show=!0};return h(),a({init:h}),(e,a)=>{const t=o,l=ae,i=J,n=Z,s=xa,v=p;return D(),E("div",null,[T(n,null,{toolsLeft:A((()=>[T(t,{type:"primary",onClick:y},{default:A((()=>[R(N(e.$t("Site.Config.LimitAccess.Add")),1)])),_:1})])),table:A((()=>[T(l,{"checked-row-keys":I(r),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>B(r)?r.value=e:null),"row-key":"name",loading:I(m),"max-height":440,data:I(d).data,columns:I(u)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[T(i,{"checked-row-keys":I(r),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>B(r)?r.value=e:null),"row-key":"name",data:I(d).data,options:c},null,8,["checked-row-keys","data"])])),_:1}),T(s,{class:"mt-16px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.2"))+" |",1),j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.3")),1),j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.4")),1),j("li",null,N(e.$t("Site.Config.LimitAccess.Tips.5")),1)])),_:1}),T(v,{show:I(f).show,"onUpdate:show":a[2]||(a[2]=e=>I(f).show=e),title:I(f).title,data:I(f).data,width:480,footer:!0,component:Ct},null,8,["show","title","data"])])}}}),Pt=L({__name:"index",setup(e){const{t:a}=$(),t=U("limit"),l=[{key:"limit",label:a("Site.Config.Limit"),component:wt},{key:"deny",label:a("Site.Config.Deny"),component:kt}];return(e,a)=>{const i=_a;return D(),z(i,{value:I(t),"onUpdate:value":a[0]||(a[0]=e=>B(t)?t.value=e:null),options:l},null,8,["value"])}}}),Tt={class:"pt-8px"},Rt={class:"w-200px"},Lt={class:"flex flex-col"},$t={class:"w-200px"},Ut={class:"mt-8px text-desc"},Dt={class:"flex flex-col"},Et={class:"w-200px"},jt={class:"mt-8px text-desc"},At={class:"flex flex-col"},Nt={class:"w-200px"},It={class:"mt-8px text-desc"},Bt=L({__name:"index",setup(e,{expose:a}){const{t:t}=$(),{data:l}=Wa(),i=U(null),n=O({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),s={perserver:{trigger:["blur","change"],validator:()=>!!n.perserver||new Error(t("Site.RulesError.Concurrency"))},perip:{trigger:["blur","change"],validator:()=>!!n.perip||new Error(t("Site.RulesError.SingleIP"))},limit_rate:{trigger:["blur","change"],validator:()=>!!n.limit_rate||new Error(t("Site.RulesError.Traffic"))}},d=U([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?m():(await Te({id:l.id}),f())},c=(e,a)=>{const{items:t}=a;r(t)&&p(t)},p=e=>{n.perserver=e.perserver,n.perip=e.perip,n.limit_rate=e.limit_rate},m=async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),await Re({id:l.id,perserver:n.perserver,perip:n.perip,limit_rate:n.limit_rate}),f()},f=async()=>{const{message:e}=await Le({id:l.id});r(e)&&(n.status=0!=e.perserver,p(d.value[0].items),v(e.perserver)&&0!=e.perserver&&(n.perserver=e.perserver),v(e.perip)&&0!=e.perip&&(n.perip=e.perip),v(e.limit_rate)&&0!=e.limit_rate&&(n.limit_rate=e.limit_rate))};return f(),a({init:f}),(e,a)=>{const t=Sa,l=ya,r=fa,p=h,v=o,f=ga;return D(),E("div",Tt,[T(f,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:I(n),rules:s},{default:A((()=>[T(l,{label:" "},{default:A((()=>[T(t,{checked:I(n).status,"onUpdate:checked":[a[0]||(a[0]=e=>I(n).status=e),u]},{default:A((()=>[R(N(e.$t("Site.Config.TrafficCofig.Tips.0")),1)])),_:1},8,["checked"])])),_:1}),T(l,{label:e.$t("Site.Lable.Limit"),path:"type"},{default:A((()=>[j("div",Rt,[T(r,{value:I(n).type,"onUpdate:value":[a[1]||(a[1]=e=>I(n).type=e),c],options:I(d)},null,8,["value","options"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.Concurrency"),path:"perserver"},{default:A((()=>[j("div",Lt,[j("div",$t,[T(p,{value:I(n).perserver,"onUpdate:value":a[2]||(a[2]=e=>I(n).perserver=e),"show-button":!1,min:0},null,8,["value"])]),j("div",Ut,N(e.$t("Site.Config.TrafficCofig.Tips.1")),1)])])),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.BlockIP"),path:"perip"},{default:A((()=>[j("div",Dt,[j("div",Et,[T(p,{value:I(n).perip,"onUpdate:value":a[3]||(a[3]=e=>I(n).perip=e),"show-button":!1,min:0},null,8,["value"])]),j("div",jt,N(e.$t("Site.Config.TrafficCofig.Tips.2")),1)])])),_:1},8,["label"]),T(l,{label:e.$t("Site.Config.Traffic"),path:"limit_rate"},{default:A((()=>[j("div",At,[j("div",Nt,[T(p,{value:I(n).limit_rate,"onUpdate:value":a[4]||(a[4]=e=>I(n).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),j("div",It,N(e.$t("Site.Config.TrafficCofig.Tips.3")),1)])])),_:1},8,["label"]),T(l,{label:" "},{default:A((()=>[T(v,{type:"primary",onClick:m},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Ot={class:"w-420px"},Ht={class:"mt-8px"},Wt=L({__name:"index",setup(e,{expose:a}){const{data:t}=Wa(),l=U(""),i=async()=>{const{message:e}=await $e({id:t.id});r(e)&&(l.value=f(e.result)?e.result.split(",").join("\n"):"")},n=async()=>{await Ue({id:t.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),a({init:i}),(e,a)=>{const t=u,i=o,s=xa;return D(),E("div",null,[j("div",Ot,[T(t,{value:I(l),"onUpdate:value":a[0]||(a[0]=e=>B(l)?l.value=e:null),type:"textarea",autosize:{minRows:12,maxRows:12},placeholder:""},null,8,["value"])]),j("div",Ht,[T(i,{type:"primary",onClick:n},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})]),T(s,{class:"mt-16px"},{default:A((()=>[j("li",null,N(e.$t("Site.PHP.index_79")),1)])),_:1})])}}}),qt={class:"mt-8px"},Mt=L({__name:"index",setup(e,{expose:a}){const{data:t}=Wa(),l=y(),i=U(null),n=U((()=>{const{webserver:e}=l,a="openlitespeed"===e?"".concat(e,"/detail"):e;return"/www/server/panel/vhost/".concat(a,"/").concat(t.name,".conf")})()),s=async()=>{var e;null==(e=i.value)||e.getContent()},r=()=>{var e;null==(e=i.value)||e.saveFile()};return K((()=>{s()})),a({init:s}),(e,a)=>{const t=o,l=xa;return D(),E("div",null,[T(ka,{ref_key:"configRef",ref:i,path:I(n),"onUpdate:path":a[0]||(a[0]=e=>B(n)?n.value=e:null),height:"500"},null,8,["path"]),j("div",qt,[T(t,{type:"primary",onClick:r},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})]),T(l,{class:"mt-16px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.ConfConfig.Tips.0")),1),j("li",null,N(e.$t("Site.Config.ConfConfig.Tips.1")),1)])),_:1})])}}}),zt={class:"p-8"},Kt=j("li",null,"Directory temporarily only supports reading alarm operation",-1),Vt=L({__name:"form",setup(e,{expose:a}){const t=U(null),l=U(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},o=O({path:"",operation:[]}),n=(e,a)=>{"dir"===a.type?(l.value=!0,o.operation=[0]):(l.value=!1,o.operation=[0,1,2])};return a({onConfirm:async()=>{var e;await(null==(e=t.value)?void 0:e.validate())}}),(e,a)=>{const s=wa,r=ya,d=Sa,u=Da,p=Ca,m=ga,v=c,h=xa;return D(),E("div",zt,[T(v,null,{default:A((()=>[T(m,{ref_key:"formRef",ref:t,model:I(o),rules:i},{default:A((()=>[T(r,{label:"Detection path",path:"path"},{default:A((()=>[T(s,{disabled:"",value:I(o).path,"onUpdate:value":a[0]||(a[0]=e=>I(o).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:n},null,8,["value"])])),_:1}),T(r,{label:"Alert operation",path:"operation"},{default:A((()=>[T(p,{value:I(o).operation,"onUpdate:value":a[1]||(a[1]=e=>I(o).operation=e)},{default:A((()=>[T(u,null,{default:A((()=>[T(d,{value:0},{default:A((()=>[R(" Read ")])),_:1}),T(d,{value:1,disabled:I(l)},{default:A((()=>[R(" delete ")])),_:1},8,["disabled"]),T(d,{value:2,disabled:I(l)},{default:A((()=>[R(" Modify/increase ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),T(h,{class:"mt-16px"},{default:A((()=>[Kt])),_:1})])}}}),Xt={class:"p-5"},Gt=j("img",{src:Ta,class:"w-5"},null,-1),Ft={class:"mt-16px"},Qt=j("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1),Yt=j("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1),Zt=L({__name:"monitor",setup(e){const a=U(!1),t=U(!1),l=U([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=U([]);return(e,n)=>{const s=o,r=c,d=ae,u=xa,m=p;return D(),E("div",Xt,[j("div",null,[T(r,{justify:"space-between"},{default:A((()=>[T(s,{type:"primary",onClick:n[0]||(n[0]=e=>a.value=!0)},{default:A((()=>[R(" Add monitor ")])),_:1}),T(s,null,{icon:A((()=>[Gt])),_:1})])),_:1})]),j("div",Ft,[T(d,{loading:I(t),"loading-num":6,data:I(i),columns:I(l)},null,8,["loading","data","columns"])]),j("div",null,[T(u,{class:"mt-16px"},{default:A((()=>[Qt,Yt,j("li",null,[T(s,{text:"",class:"color-#20a53a"},{default:A((()=>[R("Tutorial")])),_:1})])])),_:1})]),T(m,{show:I(a),"onUpdate:show":n[1]||(n[1]=e=>B(a)?a.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:Vt},null,8,["show"])])}}});const Jt=g({},[["render",function(e,a){return D(),E("div",null,"555")}]]),el=e=>(X("data-v-24287f9c"),e=e(),G(),e),al={class:"box mt-16px"},tl=el((()=>j("div",null,"Site protection",-1))),ll=el((()=>j("div",null,"today: 0",-1))),il=el((()=>j("div",null,"Total alarm: 0",-1))),ol={key:0,class:"items-center warning"},nl=el((()=>j("img",{src:Ra,class:"h-8"},null,-1))),sl={class:"warning"},rl={class:"color-#f23836"},dl=el((()=>j("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1))),ul=el((()=>j("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1))),cl=el((()=>j("img",{src:La,class:"h-10"},null,-1))),pl=el((()=>j("img",{src:La,class:"h-10"},null,-1))),ml=g(L({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const l=y(),i=U(!1),n=U(!1),s=U(!1),r=e,d=w(),u=()=>{b({source:114})},m=()=>{const e=i.value?"Open the site security alarm":"Close the site security alarm",a=i.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";t({title:e,content:a,onConfirm:async()=>{const e=$a(i.value);console.log(e,"result")},onPublicClose:()=>{i.value=!i.value}})};return(e,t)=>{const v=ba,h=c,f=o,y=xa,g=a,w=Pa,b=p;return D(),E(W,null,[j("div",al,[T(w,{install:I(d).isPro,class:"install"},V({default:A((()=>[T(h,{class:"items-center color-#666"},{default:A((()=>[tl,j("div",null,[T(v,{value:I(i),"onUpdate:value":[t[0]||(t[0]=e=>B(i)?i.value=e:null),m]},null,8,["value"])]),ll,il,I(i)?q("",!0):(D(),E("div",ol,[nl,j("span",sl,[R(" Please open "),j("span",rl,"PHP-"+N(r.phpVersion),1),R(" protection first ")])]))])),_:1}),T(h,{class:"mt-16px"},{default:A((()=>[T(f,{onClick:t[1]||(t[1]=e=>n.value=!0)},{default:A((()=>[R("Monitor")])),_:1}),T(f,{onClick:t[2]||(t[2]=e=>s.value=!0)},{default:A((()=>[R("Trigger log")])),_:1})])),_:1}),T(y,{class:"mt-16px"},{default:A((()=>[dl,ul])),_:1})])),_:2},[r.isInstall?{name:"desc",fn:A((()=>[T(h,{class:"items-center"},{default:A((()=>[cl,j("span",null,[R("If you need to use the [PHP website security alarm] function, please buy first "),T(g,{onClick:u},{default:A((()=>[R("click to buy")])),_:1})])])),_:1})])),key:"0"}:{name:"desc",fn:A((()=>[T(h,{class:"items-center"},{default:A((()=>[pl,j("span",null,[R("Currently not installed [PHP website security alarm], "),T(g,null,{default:A((()=>[R("Click to install")])),_:1})])])),_:1})])),key:"1"}]),1032,["install"])]),T(b,{show:I(n),"onUpdate:show":t[3]||(t[3]=e=>B(n)?n.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:Zt},null,8,["show"]),T(b,{show:I(s),"onUpdate:show":t[4]||(t[4]=e=>B(s)?s.value=e:null),title:"[".concat(I(l).siteName,"] Site security log"),width:1e3,"min-height":148,footer:!1,component:Jt},null,8,["show","title"])],64)}}}),[["__scopeId","data-v-24287f9c"]]),vl=j("div",null,"PHP version",-1),hl={class:"w-140px"},fl=j("li",null,"Select the version according to your program requirements",-1),yl=j("li",null,"Try not to use PHP5.2 unless you have to, as this can reduce your server security",-1),gl=j("li",null," PHP7 does not support the MySQL extension. The default installation is mysqli and mysql-pdo ",-1),wl=j("li",null," [Customize] You can customize the PHP connection information by selecting the available PHP connection configuration ",-1),bl=j("li",null,"[Customize] Currently only support NGINX",-1),_l=j("li",null,"Support TCP or UNIX configuration. Example: 192.168.1.25:9001 or unix:/tmp/php8.sock",-1),xl={class:"my-16px"},Sl=j("div",null,"Session isolation",-1),Cl=j("li",null," When enabled, session files will be stored in a separate folder, not in a common storage location with other sites ",-1),kl=j("li",null," Do not enable this option if you are saving sessions to caches such as memcache/redis in your PHP configuration ",-1),Pl={key:0,class:"my-16px"},Tl=L({__name:"index",setup(e,{expose:a}){const{data:t}=Wa(),n=y(),s=U(null),d=U(!1),u=U(!1);let p="";const v=U([]),h=async()=>{null!==s.value?(await De({siteName:t.name,version:s.value,other:p}),n.setRefresh(!0),w()):i.error("请选择PHP版本")},f=async()=>{const{message:e}=await Ne({id:t.id});r(e)&&(d.value=e.result)},g=async e=>{await Ee({id:t.id,act:e?1:0}),f()},w=()=>{(async()=>{const{message:e}=await Ua();r(e)&&(u.value=e.php_status)})(),f(),(async()=>{const{message:e}=await Ae();l(e)&&(v.value=e.reverse().map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await je({siteName:t.name});r(e)&&(s.value=e.phpversion,p=e.php_other||"")})()};return w(),a({init:w}),(e,a)=>{const t=fa,l=o,i=c,n=xa,r=m,p=ba;return D(),E("div",null,[T(i,{class:"items-center"},{default:A((()=>[vl,j("div",hl,[T(t,{value:I(s),"onUpdate:value":a[0]||(a[0]=e=>B(s)?s.value=e:null),options:I(v)},null,8,["value","options"])]),j("div",null,[T(l,{type:"primary",onClick:h},{default:A((()=>[R("Switch")])),_:1})])])),_:1}),T(n,{class:"mt-16px"},{default:A((()=>[fl,yl,gl,wl,bl,_l])),_:1}),j("div",xl,[T(r,{dashed:""})]),T(i,{class:"items-center"},{default:A((()=>[Sl,j("div",null,[T(p,{value:I(d),"onUpdate:value":[a[1]||(a[1]=e=>B(d)?d.value=e:null),g]},null,8,["value"])])])),_:1}),T(n,{class:"mt-16px"},{default:A((()=>[Cl,kl])),_:1}),I(_)?(D(),E("div",Pl,[T(r,{dashed:""}),T(ml,{isInstall:I(u),phpVersion:I(s)},null,8,["isInstall","phpVersion"])])):q("",!0)])}}}),Rl={class:"mr-16px text-#777"},Ll={key:1,class:"text-#777"},$l={class:"w-200px mr-8px"},Ul={class:"w-200px mr-8px"},Dl=L({__name:"index",setup(e,{expose:a}){const t=y(),{data:n}=Wa(),s=U(!1),d=U("--"),c=U("--"),p=U(n.cache_status),m=U(null),v=U([]),h=U(""),f=async()=>{await Ie({s_id:n.id,version:c.value}),_()},g=async e=>{await Be({version:n.php_version,sitename:n.name,act:e}),n.cache_status=e,t.setRefresh(!0)},w=async()=>{await Oe({s_id:n.id})},b=async()=>{m.value?""!==h.value.trim()?await He({s_id:n.id,user:m.value,new_pass:h.value}):i.error("Please enter new password"):i.error("Please select user")},_=async()=>{const e=i.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await We({s_id:n.id});r(e)&&(d.value=e.local_v,c.value=e.online_v,s.value=e.update)})(),await(async()=>{const{message:e}=await qe({s_id:n.id});l(e)&&e.length>0?(v.value=e.map((e=>({label:e,value:e}))),m.value=e[0]):(v.value=[],m.value=null)})()}finally{e.close()}};return _(),a({init:_}),(e,a)=>{const t=o,l=ya,i=Sa,n=fa,r=u,y=ga;return D(),E("div",null,[T(y,null,{default:A((()=>[T(l,{label:"WP Version"},{default:A((()=>[I(s)?(D(),E(W,{key:0},[j("div",Rl,"The current version is: "+N(I(d)),1),T(t,{type:"primary",onClick:f},{default:A((()=>[R("Upgrade to "+N(I(c)),1)])),_:1})],64)):(D(),E("span",Ll,"The latest version"))])),_:1}),T(l,{label:"Cache"},{default:A((()=>[T(i,{checked:I(p),"onUpdate:checked":[a[0]||(a[0]=e=>B(p)?p.value=e:null),g],class:"mr-16px"},{default:A((()=>[R(" Open cache ")])),_:1},8,["checked"]),T(t,{type:"primary",onClick:w},{default:A((()=>[R("Purge all cache")])),_:1})])),_:1}),T(l,{label:"Reset password"},{default:A((()=>[j("div",$l,[T(n,{value:I(m),"onUpdate:value":a[1]||(a[1]=e=>B(m)?m.value=e:null),options:I(v)},null,8,["value","options"])]),j("div",Ul,[T(r,{value:I(h),"onUpdate:value":a[2]||(a[2]=e=>B(h)?h.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),T(t,{type:"primary",onClick:b},{default:A((()=>[R("Save password")])),_:1})])),_:1})])),_:1})])}}}),El={class:"pt-8px"},jl={class:"w-180px mr-8px"},Al={class:"w-180px"},Nl={class:"w-180px"},Il={class:"w-280px"},Bl={class:"w-180px"},Ol={class:"w-180px"},Hl={class:"w-280px"},Wl={class:"flex-1"},ql={key:0,class:"mb-16px text-error"},Ml={key:1,class:"mb-16px text-error"},zl=L({__name:"index",setup(e,{expose:l}){const{t:i}=$(),{data:n}=Wa(),s=O({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:n.path}),d=U([]),c=[{label:i("Site.Lable.Install"),value:"install"},{label:i("Site.Lable.Update"),value:"update"}],p=[{label:i("Site.Lable.Official"),value:"repos.packagist"}],m=[{label:i("Site.Lable.Recommend"),value:"www"},{label:i("Site.Lable.Root"),value:"root"}],v=U(""),h=U(""),y=async()=>{await Me({repo:s.repo}),_()},g=async()=>{await ze({path:n.path}),_()},w=()=>{t({title:i("Site.PHP.index_77"),content:i("Site.PHP.index_78"),onConfirm:async()=>{await Ke({php_version:s.php_version,composer_args:s.composer_args,composer_cmd:s.composer_cmd,repo:s.repo,path:s.composer_path,user:s.composer_user}),_()}})},b=()=>{d.value.unshift({label:i("Site.Lable.Auto"),value:"auto"})},_=async()=>{const{message:e}=await Ve({path:n.path});r(e)&&(s.composer_version=e.result,e.comp_json&&(v.value=e.comp_json),f(e.comp_lock)&&(h.value=e.comp_lock),d.value=e.php_versions.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),b())};return b(),_(),l({init:_}),(e,t)=>{const l=u,i=o,n=ya,r=fa,f=wa,b=a,_=ga;return D(),E("div",El,[T(_,{class:"px-8px"},{default:A((()=>[T(n,{label:e.$t("Site.TableRow.Version"),path:"composer_version"},{default:A((()=>[j("div",jl,[T(l,{value:I(s).composer_version,"onUpdate:value":t[0]||(t[0]=e=>I(s).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),T(i,{onClick:y},{default:A((()=>[R("Update")])),_:1})])),_:1},8,["label"]),T(n,{label:e.$t("Site.TableRow.PHP"),path:"php_version"},{default:A((()=>[j("div",Al,[T(r,{value:I(s).php_version,"onUpdate:value":t[1]||(t[1]=e=>I(s).php_version=e),options:I(d)},null,8,["value","options"])])])),_:1},8,["label"]),T(n,{label:e.$t("Site.TableRow.Parameters"),path:"composer_args"},{default:A((()=>[j("div",Nl,[T(r,{value:I(s).composer_args,"onUpdate:value":t[2]||(t[2]=e=>I(s).composer_args=e),options:c},null,8,["value"])])])),_:1},8,["label"]),T(n,{label:e.$t("Site.TableRow.Extra"),path:"composer_cmd"},{default:A((()=>[j("div",Il,[T(l,{value:I(s).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>I(s).composer_cmd=e),placeholder:"App name or full Composer command"},null,8,["value"])])])),_:1},8,["label"]),T(n,{label:e.$t("Site.Lable.Source"),path:"repo"},{default:A((()=>[j("div",Bl,[T(r,{value:I(s).repo,"onUpdate:value":t[4]||(t[4]=e=>I(s).repo=e),options:p},null,8,["value"])])])),_:1},8,["label"]),T(n,{label:e.$t("Site.Lable.User"),path:"composer_user"},{default:A((()=>[j("div",Ol,[T(r,{value:I(s).composer_user,"onUpdate:value":t[5]||(t[5]=e=>I(s).composer_user=e),options:m},null,8,["value"])])])),_:1},8,["label"]),T(n,{label:e.$t("Site.Lable.Dir"),path:"composer_path"},{default:A((()=>[j("div",Hl,[T(f,{value:I(s).composer_path,"onUpdate:value":t[6]||(t[6]=e=>I(s).composer_path=e)},null,8,["value"])])])),_:1},8,["label"]),T(n,{label:" ","show-feedback":!1},{default:A((()=>[j("div",Wl,[I(v)?(D(),E("div",ql,N(I(v)),1)):q("",!0),I(h)?(D(),E("div",Ml,[j("span",null,N(I(h)),1),T(b,{onClick:g},{default:A((()=>[R("["+N(e.$t("Site.TableOP.Delete"))+"]",1)])),_:1})])):q("",!0),T(i,{type:"primary",onClick:w},{default:A((()=>[R(N(e.$t("Site.Lable.Execute")),1)])),_:1})])])),_:1})])),_:1})])}}}),Kl={class:"px-20px py-24px"},Vl={class:"w-120px"},Xl={class:"w-120px"},Gl={class:"w-200px"},Fl={class:"w-200px"},Ql={class:"w-200px"},Yl=L({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:t}=$(),i=e,{isEdit:o,siteId:n,siteName:s,row:r,getList:d}=i.data,p=U(null),m=O({redirectname:"".concat((new Date).valueOf()),type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),v={redirectdomain:{trigger:["change"],validator:()=>0!==m.redirectdomain.length||new Error(t("Site.RulesError.RedirectedDomain"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==m.redirectpath.trim()||new Error(t("Site.RulesError.RedirectedPath"))},tourl:{trigger:["blur","input"],validator:()=>""!==m.tourl.trim()||new Error(t("Site.RulesError.RedirectedUrl"))}},h=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],f=[{label:"301",value:"301"},{label:"302",value:"302"}],y=U([]),g=()=>{m.redirectdomain=[],m.redirectpath=""},{loading:w,setLoading:b}=pa();return o&&r&&(m.redirectname=r.redirectname,m.type=r.type,m.holdpath=r.holdpath,m.redirecttype=r.redirecttype,m.redirectpath=r.redirectpath,m.domainorpath=r.domainorpath,m.redirectdomain=r.redirectdomain,m.tourl=r.tourl),(async()=>{try{b(!0);const{message:e}=await ie({id:n});y.value=l(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{b(!1)}})(),a({onConfirm:async({hide:e})=>{var a;await(null==(a=p.value)?void 0:a.validate());const t={...M(m),sitename:s};o?await Ge(t):await Xe(t),null==d||d(),e()}}),(e,a)=>{const t=ba,l=ya,i=c,o=fa,n=u,s=ga,r=xa;return D(),E("div",Kl,[T(s,{ref_key:"formRef",ref:p,model:I(m),rules:v},{default:A((()=>[T(i,{size:60},{default:A((()=>[T(l,{label:e.$t("Site.Lable.Enable")},{default:A((()=>[T(t,{value:I(m).type,"onUpdate:value":a[0]||(a[0]=e=>I(m).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.KeepUP"),"label-width":"120"},{default:A((()=>[T(t,{value:I(m).holdpath,"onUpdate:value":a[1]||(a[1]=e=>I(m).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),T(i,{size:30},{default:A((()=>[T(l,{label:e.$t("Site.TableRow.Type")},{default:A((()=>[j("div",Vl,[T(o,{value:I(m).domainorpath,"onUpdate:value":[a[2]||(a[2]=e=>I(m).domainorpath=e),g],options:h},null,8,["value"])])])),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.Mode"),"label-width":"70"},{default:A((()=>[j("div",Xl,[T(o,{value:I(m).redirecttype,"onUpdate:value":a[3]||(a[3]=e=>I(m).redirecttype=e),options:f},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===I(m).domainorpath?(D(),z(l,{key:0,label:e.$t("Site.Lable.Source"),path:"redirectdomain"},{default:A((()=>[j("div",Gl,[T(o,{value:I(m).redirectdomain,"onUpdate:value":a[4]||(a[4]=e=>I(m).redirectdomain=e),multiple:!0,loading:I(w),options:I(y),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):q("",!0),"path"===I(m).domainorpath?(D(),z(l,{key:1,label:e.$t("Site.Lable.Redirect"),path:"redirectpath"},{default:A((()=>[j("div",Fl,[T(n,{value:I(m).redirectpath,"onUpdate:value":a[5]||(a[5]=e=>I(m).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):q("",!0),T(l,{label:e.$t("Site.Lable.Target"),path:"tourl"},{default:A((()=>[j("div",Ql,[T(n,{value:I(m).tourl,"onUpdate:value":a[6]||(a[6]=e=>I(m).tourl=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),T(r,{class:"mt-12px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.0")),1),j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.1")),1),j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.2")),1),j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.3")),1),j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.4")),1),j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.5")),1)])),_:1})])}}}),Zl={class:"p-20px"},Jl={class:"mt-12px"},ei=L({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:l,siteName:n,getList:s}=t.data,d=a,u=y(),c=U(""),p=U(""),m=U(""),v=async()=>{const{message:e}=await Qe({path:m.value,data:c.value,encoding:p.value});r(e)&&i.success(e.msg),null==s||s(),d("close")};return(async()=>{const{message:e}=await Fe({sitename:n,redirectname:l.redirectname,webserver:u.webserver});r(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,a)=>{const t=o,l=xa;return D(),E("div",Zl,[T(ka,{value:I(c),"onUpdate:value":a[0]||(a[0]=e=>B(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),j("div",Jl,[T(t,{type:"primary",onClick:v},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})]),T(l,{class:"mt-24px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.6")),1)])),_:1})])}}}),ai=L({__name:"index",setup(e,{expose:i}){const{t:s}=$(),{data:r}=Wa(),d=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:u,table:c,columns:m}=ee([{type:"selection",width:40},{key:"sitename",title:s("Site.TableRow.Type"),ellipsis:{tooltip:{width:"trigger"}}},{key:"redirecttype",title:s("Site.TableRow.Mode"),width:90},{key:"holdpath",title:s("Site.TableRow.KeepUP"),width:140,render:e=>T(a,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Ye({...d(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?"Enable":"Turn off"]})},{key:"type",title:"Status",width:100,render:e=>T(ha,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await Ye({...d(e),type:a,holdpath:e.holdpath,status:e.type}),e.type=a}},null)},va({width:120,options:e=>[{label:s("Site.TableOP.Conf"),onClick:()=>{x(e)}},{label:s("Site.TableOP.Edit"),onClick:()=>{b(e)}},{label:s("Site.TableOP.Del"),onClick:()=>{t({title:"".concat(s("Site.Batch.DeleteRedirection.Label")," [").concat(e.redirectname,"]"),content:s("Site.Batch.DeleteRedirection.Content"),onConfirm:async({hide:a})=>{await Ze({sitename:r.name,redirectname:e.redirectname}),y(),a()}})}}]})]),v=[{key:"del",type:"confirm",label:s("Site.Batch.DeleteWeb.Label1"),confirm:{title:s("Site.Batch.DeleteWeb.Label2"),desc:s("Site.Batch.DeleteWeb.Content"),columns:[m.value[1]],api:e=>Ze({sitename:r.name,redirectname:e.redirectname},!1),done:()=>{y()}}}],{loading:h,setLoading:f}=pa(),y=async()=>{try{f(!0);const{message:e}=await Je({sitename:r.name});c.data=l(e)?e:[]}finally{u.value=[],f(!1)}},g=n(s("Site.Config.RedirectConfig.Create"),{row:void 0,siteId:r.id,siteName:r.name,isEdit:!1,getList:y}),w=()=>{g.data.row=void 0,g.data.isEdit=!1,g.title=s("Site.Config.RedirectConfig.Create"),g.show=!0},b=e=>{g.data.row=e,g.data.isEdit=!0,g.title="".concat(s("Site.Config.RedirectConfig.Modify")," [").concat(e.redirectname,"]"),g.show=!0},_=n("",{row:void 0,siteName:r.name,getList:y}),x=e=>{_.data.row=e,_.title="".concat(s("Site.Config.RedirectConfig.Edit")," [").concat(e.redirectname,"]"),_.show=!0};return y(),i({init:y}),(e,a)=>{const t=o,l=ae,i=J,n=Z,s=p;return D(),E("div",null,[T(n,null,{toolsLeft:A((()=>[T(t,{type:"primary",onClick:w},{default:A((()=>[R(N(e.$t("Site.Config.RedirectConfig.Add")),1)])),_:1})])),table:A((()=>[T(l,{"checked-row-keys":I(u),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>B(u)?u.value=e:null),"row-key":"redirectname",loading:I(h),"max-height":440,data:I(c).data,columns:I(m)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[T(i,{"checked-row-keys":I(u),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>B(u)?u.value=e:null),"row-key":"redirectname",data:I(c).data,options:v},null,8,["checked-row-keys","data"])])),_:1}),T(s,{show:I(g).show,"onUpdate:show":a[2]||(a[2]=e=>I(g).show=e),title:I(g).title,data:I(g).data,width:660,footer:!0,component:Yl},null,8,["show","title","data"]),T(s,{show:I(_).show,"onUpdate:show":a[3]||(a[3]=e=>I(_).show=e),title:I(_).title,data:I(_).data,width:580,component:ei},null,8,["show","title","data"])])}}}),ti={class:"px-20px py-24px"},li={class:"w-220px"},ii={class:"w-220px"},oi={class:"w-220px"},ni={class:"w-220px"},si={class:"w-220px"},ri={class:"w-220px"},di={class:"w-220px"},ui=L({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=$(),i=e,{isEdit:n,siteName:s,row:r,getList:d}=i.data,p=U(null),m=O({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:s}),v={proxyname:{trigger:["blur","input"],validator:()=>""!==m.proxyname.trim()||new Error(l("Site.RulesError.ProxyName"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===m.cache&&!m.cachetime)||new Error(l("Site.RulesError.CacheTime"))},proxydir:{trigger:["blur","input"],validator:()=>1!==m.advanced||""!==m.proxydir.trim()||new Error(l("Site.RulesError.ProxyDir"))},proxysite:{trigger:["blur","input"],validator:()=>""!==m.proxysite.trim()||new Error(l("Site.RulesError.RedirectedUrl"))},todomain:{trigger:["blur","input"],validator:()=>""!==m.todomain.trim()||new Error(l("Site.RulesError.Sent"))}},f=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?m.todomain="$host":m.todomain=e},y=U([]),g=()=>{y.value.length>=3||y.value.push({sub1:"",sub2:""})};g();return(()=>{if(n&&r){m.type=r.type,m.cache=r.cache,m.advanced=r.advanced,m.proxyname=r.proxyname,m.cachetime=r.cachetime,m.proxydir=r.proxydir,m.proxysite=r.proxysite,m.todomain=r.todomain,m.sitename=r.sitename;const e=r.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(y.value=e)}})(),t({onConfirm:async({hide:e})=>{var a;await(null==(a=p.value)?void 0:a.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach(((e,a)=>{y.value.length-1<a||(e.sub1=y.value[a].sub1,e.sub2=y.value[a].sub2)})),{...M(m),subfilter:e}})();n?await aa(t):await ea(t),null==d||d(),e()}}),(e,t)=>{const l=ba,i=ya,s=c,r=u,d=h,w=Ea,b=ja,_=a,x=o,S=ga,C=xa;return D(),E("div",ti,[T(S,{ref_key:"formRef",ref:p,model:I(m),rules:v},{default:A((()=>[T(s,{size:32},{default:A((()=>[T(i,{label:e.$t("Site.Lable.EnableProxy")},{default:A((()=>[T(l,{value:I(m).type,"onUpdate:value":t[0]||(t[0]=e=>I(m).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.EnableCache"),"label-width":"100"},{default:A((()=>[T(l,{value:I(m).cache,"onUpdate:value":t[1]||(t[1]=e=>I(m).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.Advanced"),"label-width":"126"},{default:A((()=>[T(l,{value:I(m).advanced,"onUpdate:value":t[2]||(t[2]=e=>I(m).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),T(i,{label:e.$t("Site.Lable.ProxyName"),path:"proxyname"},{default:A((()=>[j("div",li,[T(r,{value:I(m).proxyname,"onUpdate:value":t[3]||(t[3]=e=>I(m).proxyname=e),disabled:I(n),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),1===I(m).cache?(D(),z(i,{key:0,label:e.$t("Site.Lable.CacheTime"),path:"cachetime"},{default:A((()=>[j("div",ii,[T(b,null,{default:A((()=>[T(d,{value:I(m).cachetime,"onUpdate:value":t[4]||(t[4]=e=>I(m).cachetime=e),min:1,"show-button":!1,placeholder:""},null,8,["value"]),T(w,{class:"w-70px text-center"},{default:A((()=>[R(N(I(m).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1},8,["label"])):q("",!0),1===I(m).advanced?(D(),z(i,{key:1,label:e.$t("Site.TableRow.ProxyDir"),path:"proxydir"},{default:A((()=>[j("div",oi,[T(r,{value:I(m).proxydir,"onUpdate:value":t[5]||(t[5]=e=>I(m).proxydir=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):q("",!0),T(i,{label:e.$t("Site.Lable.Target")},{default:A((()=>[j("div",ni,[T(r,{value:I(m).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>I(m).proxysite=e),f],placeholder:""},null,8,["value"])])])),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.Sent")},{default:A((()=>[j("div",si,[T(r,{value:I(m).todomain,"onUpdate:value":t[7]||(t[7]=e=>I(m).todomain=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.ContentReplace")},{default:A((()=>[T(s,{class:"flex-1",vertical:""},{default:A((()=>[(D(!0),E(W,null,F(I(y),((a,t)=>(D(),z(s,{key:"".concat(t+1),class:"items-center"},{default:A((()=>[j("div",ri,[T(r,{value:a.sub1,"onUpdate:value":e=>a.sub1=e,placeholder:e.$t("Site.Placeholder.Source")},null,8,["value","onUpdate:value","placeholder"])]),j("div",di,[T(r,{value:a.sub2,"onUpdate:value":e=>a.sub2=e,placeholder:e.$t("Site.Placeholder.Replace")},null,8,["value","onUpdate:value","placeholder"])]),j("div",null,[T(_,{type:"error",disabled:0===t&&1===I(y).length,onClick:e=>(e=>{y.value.length<=1||y.value.splice(e,1)})(t)},{default:A((()=>[R(N(e.$t("Site.TableOP.Del")),1)])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),j("div",null,[T(x,{type:"primary",disabled:I(y).length>=3,onClick:g},{default:A((()=>[j("span",null,N(e.$t("Site.Config.ProxyConfig.Replacement")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["label"])])),_:1},8,["model"]),T(C,{class:"mt-12px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.ProxyConfig.Tips.0")),1),j("li",null,N(e.$t("Site.Config.ProxyConfig.Tips.1")),1),j("li",null,N(e.$t("Site.Config.ProxyConfig.Tips.2")),1),j("li",null,N(e.$t("Site.Config.ProxyConfig.Tips.3")),1)])),_:1})])}}}),ci={class:"p-20px"},pi={class:"mt-12px"},mi=L({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:l,siteName:n,getList:s}=t.data,d=a,u=y(),c=U(""),p=U(""),m=U(""),v=async()=>{const{message:e}=await la({path:m.value,data:c.value,encoding:p.value});r(e)&&i.success(e.msg),null==s||s(),d("close")};return(async()=>{const{message:e}=await ta({sitename:n,proxyname:l.proxyname,webserver:u.webserver});r(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,a)=>{const t=o,l=xa;return D(),E("div",ci,[T(ka,{value:I(c),"onUpdate:value":a[0]||(a[0]=e=>B(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),j("div",pi,[T(t,{type:"primary",onClick:v},{default:A((()=>[R(N(e.$t("Site.Cert.Save")),1)])),_:1})]),T(l,{class:"mt-24px"},{default:A((()=>[j("li",null,N(e.$t("Site.Config.RedirectConfig.Tips.6")),1)])),_:1})])}}}),vi=L({__name:"index",setup(e,{expose:i}){const{t:s}=$(),{data:r}=Wa(),d=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:u,table:c,columns:m}=ee([{type:"selection",width:40},{key:"proxyname",title:s("Site.TableRow.Name"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:s("Site.TableRow.ProxyDir"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:s("Site.Lable.Target"),ellipsis:{tooltip:{width:"trigger"}},render:e=>T("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:s("Site.Lable.Cache"),width:90,render:e=>T(a,{type:1===e.cache?"primary":"error",onClick:async()=>{await aa({...d(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:s("Site.TableRow.Status"),width:90,render:e=>T(ha,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await aa({...d(e),type:a,cache:e.cache}),e.type=a}},null)},va({width:120,options:e=>[{label:s("Site.TableOP.Conf"),onClick:()=>{x(e)}},{label:s("Site.TableOP.Edit"),onClick:()=>{b(e)}},{label:s("Site.TableOP.Del"),onClick:()=>{t({title:"".concat(s("Site.Batch.DeleteProxy.Label")," [").concat(e.proxyname,"]"),content:s("Site.Batch.DeleteProxy.Content"),onConfirm:async({hide:a})=>{await ia({sitename:r.name,proxyname:e.proxyname}),y(),a()}})}}]})]),v=[{key:"del",type:"confirm",label:s("Site.Batch.DeleteWeb.Label1"),confirm:{title:s("Site.Batch.DeleteWeb.Label2"),desc:s("Site.Batch.DeleteWeb.Content"),api:e=>ia({sitename:r.name,proxyname:e.proxyname},!1),done:()=>{y()},columns:[{key:"proxyname",title:s("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:h,setLoading:f}=pa(),y=async()=>{try{f(!0);const{message:e}=await oa({sitename:r.name});c.data=l(e)?e:[]}finally{u.value=[],f(!1)}},g=n(s("Site.Config.ProxyConfig.Create"),{row:void 0,siteName:r.name,isEdit:!1,getList:y}),w=()=>{g.data.row=void 0,g.data.isEdit=!1,g.title=s("Site.Config.ProxyConfig.Create"),g.show=!0},b=e=>{g.data.row=e,g.data.isEdit=!0,g.title="".concat(s("Site.Config.RedirectConfig.Modify")," [").concat(e.proxyname,"]"),g.show=!0},_=n("",{row:void 0,siteName:r.name,getList:y}),x=e=>{_.data.row=e,_.title="".concat(s("Site.Config.RedirectConfig.Edit")," [").concat(e.proxyname,"]"),_.show=!0};return y(),i({init:y}),(e,a)=>{const t=o,l=ae,i=J,n=Z,s=p;return D(),E("div",null,[T(n,null,{toolsLeft:A((()=>[T(t,{type:"primary",onClick:w},{default:A((()=>[R(N(e.$t("Site.Config.ProxyConfig.Add")),1)])),_:1})])),table:A((()=>[T(l,{"checked-row-keys":I(u),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>B(u)?u.value=e:null),"row-key":"proxyname",loading:I(h),"max-height":440,data:I(c).data,columns:I(m)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[T(i,{"checked-row-keys":I(u),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>B(u)?u.value=e:null),"row-key":"proxyname",data:I(c).data,options:v},null,8,["checked-row-keys","data"])])),_:1}),T(s,{show:I(g).show,"onUpdate:show":a[2]||(a[2]=e=>I(g).show=e),title:I(g).title,data:I(g).data,width:660,footer:!0,component:ui},null,8,["show","title","data"]),T(s,{show:I(_).show,"onUpdate:show":a[3]||(a[3]=e=>I(_).show=e),title:I(_).title,data:I(_).data,width:580,component:mi},null,8,["show","title","data"])])}}}),hi={class:"pt-8px"},fi=L({__name:"index",setup(e,{expose:a}){const{data:t}=Wa(),l=U();return a({init:()=>{l.value.init()}}),(e,a)=>(D(),E("div",hi,[T(Aa,{ref_key:"formRef",ref:l,site:I(t)},null,8,["site"])]))}}),yi=L({__name:"index",setup(e,{expose:a}){const{data:t}=Wa(),l=U("None"),{loading:i,setLoading:o}=pa(),n=async()=>{try{o(!0);const{message:e}=await na({siteName:t.name});r(e)&&(l.value=f(e.result)?e.result:"None")}finally{o(!1)}};return n(),a({init:n}),(e,a)=>{const t=Na,o=Ia;return D(),z(o,{class:"h-560px",show:I(i)},{default:A((()=>[T(t,{log:I(l)},null,8,["log"])])),_:1},8,["show"])}}}),gi=L({__name:"index",setup(e,{expose:a}){const{data:t}=Wa(),l=U("None"),{loading:i,setLoading:o}=pa(),n=async()=>{try{o(!0);const{message:e}=await sa({siteName:t.name});r(e)&&(l.value=f(e.result)?e.result:"None")}finally{o(!1)}};return n(),a({init:n}),(e,a)=>{const t=Na,o=Ia;return D(),z(o,{class:"h-560px",show:I(i)},{default:A((()=>[T(t,{log:I(l)},null,8,["log"])])),_:1},8,["show"])}}}),wi=L({__name:"logs",props:{data:{}},setup(e){const a=e,{type:t,path:l}=a.data,i=U(""),{loading:o,setLoading:n}=pa();return(async()=>{try{n(!0);const{message:e}=await ra({type:t,path:l});r(e)&&(i.value=e.result)}finally{n(!1)}})(),(e,a)=>{const t=Na,l=Ia;return D(),z(l,{class:"w-650px h-550px bg-#282C34",show:I(o)},{default:A((()=>[T(t,{log:I(i)},null,8,["log"])])),_:1},8,["show"])}}}),bi={class:"text-error"},_i={class:"w-400px p-20px"},xi={class:"mb-16px"},Si=L({__name:"index",setup(e,{expose:l}){const{t:n}=$(),s=y(),{data:d}=Wa(),u=Q((()=>{let e="";switch(s.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return"/www/wwwlogs/".concat(d.name).concat(e)})),c=Q((()=>{const e=u.value.split("/");return e[e.length-1]})),m=()=>{t({title:n("Site.Config.LogsConfig.ScanTitle"),content:"".concat(n("Site.Config.LogsConfig.ScanContent")," [").concat(c.value,"] ").concat(n("Site.Config.LogsConfig.ScanContent1")),onConfirm:async({hide:e})=>{await da({path:u.value}),e(),f()}})},v=U(!1),h=U(0),f=async()=>{v.value=!0,g()},g=(e=0)=>{let a=setTimeout((async()=>{const{message:e}=await ua({path:u.value});r(e)&&(h.value=e.result,h.value>=100?(i.success(n("Site.Config.LogsConfig.Complete")),v.value=!1,h.value=0,k(),clearTimeout(a)):g(1e3))}),e)},w=e=>{x({title:"[".concat(e,"] ").concat(n("Site.Config.LogsConfig.Details")),data:{type:e,path:u.value},component:wi})},{table:b,columns:_}=ee([{key:"start_time",title:"Date"},{key:"time",title:n("Site.DelSite.Time"),render:e=>"".concat(e.time.substring(0,4)," s")},{key:"xss",title:n("Site.TableRow.XSS"),render:e=>e.xss>0?T("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:n("Site.TableRow.SQL"),render:e=>e.sql>0?T("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:n("Site.TableRow.Scan"),render:e=>e.san>0?T("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:n("Site.TableRow.PHP"),render:e=>e.php>0?T("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:n("Site.TableRow.IPTop"),render:e=>e.ip>0?T(a,{onClick:()=>{w("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:n("Site.TableRow.URLTop"),render:e=>e.url>0?T(a,{onClick:()=>{w("url")}},{default:()=>[e.url]}):e.url}]),{loading:S,setLoading:C}=pa(),k=async()=>{try{C(!0);const{message:e}=await ca({path:u.value});r(e)&&(b.data=[e])}finally{C(!1)}},P=()=>{k()};return P(),l({init:P}),(e,t)=>{const l=o,i=ae,n=Z,s=xa,r=Ba,d=p;return D(),E("div",null,[T(n,null,{toolsLeft:A((()=>[T(l,{type:"primary",onClick:m},{default:A((()=>[R(N(e.$t("Site.Config.LogsConfig.Scan")),1)])),_:1})])),table:A((()=>[T(i,{loading:I(S),"loading-num":1,data:I(b).data,columns:I(_)},null,8,["loading","data","columns"])])),_:1}),T(s,{class:"mt-16px"},{default:A((()=>[j("li",null,[R(N(e.$t("Site.Config.LogsConfig.Tips.0"))+" ",1),j("span",bi,N(e.$t("Site.Config.LogsConfig.Tips.1")),1)]),j("li",null,N(e.$t("Site.Config.LogsConfig.Tips.2")),1),j("li",null,N(e.$t("Site.Config.LogsConfig.Tips.3"))+")",1),j("li",null,N(e.$t("Site.Config.LogsConfig.Tips.4")),1),j("li",null,[T(a,{href:"https://forum.aapanel.com/d/3351-nginx-waf-instructions",target:"_blank"},{default:A((()=>[R(N(e.$t("Site.Config.LogsConfig.Tips.5")),1)])),_:1}),R(" "+N(e.$t("Site.Config.LogsConfig.Tips.6")),1)])])),_:1}),T(d,{show:I(v),"onUpdate:show":t[0]||(t[0]=e=>B(v)?v.value=e:null)},{default:A((()=>[j("div",_i,[j("div",xi,N(e.$t("Site.Config.LogsConfig.Tips.7")),1),T(r,{type:"line",status:"success",height:24,percentage:I(h),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),Ci=L({__name:"index",setup(e,{expose:a}){const{t:t}=$(),{config:l}=Wa(),i=U("access"),o=U(),n=[{key:"access",label:t("Site.Config.LogsConfig.Access"),component:yi},{key:"error",label:t("Site.Config.LogsConfig.Error"),component:gi},{key:"security",label:t("Site.Config.LogsConfig.Security"),component:Si}];return i.value=l.subMenu||"access",l.subMenu="",a({init:()=>{i.value="access",Y((()=>{var e;null==(e=o.value)||e.init()}))}}),(e,a)=>{const t=_a;return D(),z(t,{value:I(i),"onUpdate:value":a[0]||(a[0]=e=>B(i)?i.value=e:null),ref_key:"tabsRef",ref:o,options:n},null,8,["value"])}}}),ki={class:"h-full"},Pi=L({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=$(),t=y(),{siteName:l}=C(t),i=H((()=>s((()=>import("./index158.js?v=1723125373998")),__vite__mapDeps([16,2,3,4,5,17,1,18,7,8,6,9,10,11,12,13,14,15,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53])))),o=H((()=>s((()=>import("./old4.js?v=1723125373998")),__vite__mapDeps([54,55,2,3,4,5,19,20,21,22,23,24,25,26,27,28,9,10,11,29,30,31,32,33,34,35,18,8,36,37,38,39,17,40,41,42,43,44,45,1,7,6,12,46,47,48,49,50,51,52,53])))),n=e,{siteInfo:r,config:d}=n;l.value=n.siteInfo.name;const u=U();r&&k(Ha,{data:r,config:d});const c=U("domain"),p=[{key:"domain",label:a("Site.Config.Manager"),component:Xa},{key:"subdirectory",label:a("Site.Config.Subdirectory"),component:Qa},{key:"directory",label:a("Site.Config.Directory"),component:pt},{key:"access",label:a("Site.Config.Limit"),component:Pt},{key:"traffic",label:a("Site.Config.Traffic"),component:Bt},{key:"rewrite",label:a("Site.Config.URL"),component:i},{key:"document",label:a("Site.Config.Indexes"),component:Wt},{key:"config",label:a("Site.Config.Conf"),component:Mt},{key:"ssl",label:()=>T(W,null,[a("Site.Config.SSL"),T(Oa,{type:"primary",size:"small",bordered:!1,class:"ml-10px"},{default:()=>[R("lowest price $2.9")]})]),component:o},{key:"php",label:a("Site.Config.PHPversion"),component:Tl},{key:"wordpress",label:"Wordpress Setting",show:"WP"===(null==r?void 0:r.project_type),component:Dl},{key:"composer",label:a("Site.Config.Composer"),component:zl},{key:"redirect",label:a("Site.Config.Redirect"),component:ai},{key:"proxy",label:a("Site.Config.Proxy"),component:vi},{key:"hotlink",label:a("Site.Config.Hotlink"),component:fi},{key:"logs",label:a("Site.Config.Response"),component:Ci}];return c.value=d.menu||"domain",d.menu="",K((()=>{window.siteConfigInit=u.value.init})),(e,a)=>{const t=S;return D(),E("div",ki,[T(t,{value:I(c),"onUpdate:value":a[0]||(a[0]=e=>B(c)?c.value=e:null),ref_key:"tabsRef",ref:u,data:p},null,8,["value"])])}}}),Ti=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"}));export{Ti as i,Wa as u};
