System.register(["./index-legacy77.js?v=1723125373998","./index-legacy145.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./index-legacy.js?v=1723125373998","./useSocket-legacy.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./InputGroup-legacy.js?v=1723125373998","./Tabs-legacy.js?v=1723125373998","./omit-legacy.js?v=1723125373998","./Spin-legacy.js?v=1723125373998","./pinia-legacy.js?v=1723125373998","./data-legacy.js?v=1723125373998","./Tag-legacy.js?v=1723125373998","./Empty-legacy.js?v=1723125373998"],(function(e,l){"use strict";var a,c,n,s,t,u,o,d,r,i,m,_,g,p,v,x,k,b,y,f,D,I,j,L,h,w,S,$,C,W;return{setters:[e=>{a=e._},e=>{c=e._},e=>{n=e._,s=e.a},e=>{t=e.l,u=e.ad,o=e.f,d=e.r,r=e.k,i=e.S,m=e.Z,_=e.P,g=e.V,p=e._,v=e.W,x=e.aq,k=e.q,b=e.a3,y=e.b},e=>{f=e.M,D=e.z,I=e.n,j=e.Y,L=e.k,h=e.ae,w=e.B,S=e.en},e=>{$=e.u},e=>{C=e._},e=>{W=e._},null,null,null,null,null,null,null],execute:function(){const l={class:"pt-4px"},U={class:"w-440px"},E={class:"w-440px"},M={class:"px-2px py-4px"},R={class:"h-420px"},q=t({__name:"index",setup(e){const{t:a}=u(),t=f(),y=o({name:null,image:""}),S={name:{trigger:"change",validator:()=>null!==y.name||new Error(a("Docker.LocalImage.pull.index_8"))},image:{trigger:["input","blur"],validator:()=>""!==y.image||new Error(a("Docker.LocalImage.pull.index_9"))}},q=d(null),T=d(a("Docker.LocalImage.pull.index_10")),z=d(!1),B=d([]),G=async()=>{await(q.value?.validate()),T.value="",K.value=!0,V(),A()},K=d(!1),P=r((()=>K.value)),{createWebSocket:V,sendSocket:Y,closeWebSocket:Z}=$({url:"/ws_model",onMessage:(e,l)=>{const{data:c}=l;if(D(c)&&(T.value+=l.data,c.includes("bt_successful")||c.includes("bt_failed"))){K.value=!1;const e={status:c.includes("bt_successful"),msg:c.includes("bt_successful")?a("Docker.Container.create.command_7"):a("Docker.Container.create.command_6")};e.status?(I.success(e.msg),t.setRefresh(!0)):I.error(e.msg),Z()}},onDisconnected:()=>{K.value=!1}}),A=()=>{Y({model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:y.name,image:y.image})};return(async()=>{try{z.value=!0;const{message:e}=await j();L(e)&&e.length>0&&(B.value=e.map((e=>({label:e.name,value:e.name}))),y.name=e[0].name)}finally{z.value=!1}})(),(e,a)=>{const t=C,u=n,o=h,d=w,r=W,f=s,D=c;return i(),m("div",l,[_(f,{ref_key:"formRef",ref:q,model:v(y),rules:S},{default:g((()=>[_(u,{label:e.$t("Docker.LocalImage.pull.index_3"),path:"name"},{default:g((()=>[p("div",U,[_(t,{value:v(y).name,"onUpdate:value":a[0]||(a[0]=e=>v(y).name=e),loading:v(z),disabled:v(P),options:v(B)},null,8,["value","loading","disabled","options"])])])),_:1},8,["label"]),_(u,{label:e.$t("Docker.LocalImage.pull.index_4"),path:"image"},{default:g((()=>[p("div",E,[_(r,null,{default:g((()=>[_(o,{value:v(y).image,"onUpdate:value":a[1]||(a[1]=e=>v(y).image=e),disabled:v(P),placeholder:e.$t("Docker.LocalImage.pull.index_5"),onKeyup:x(G,["enter"])},null,8,["value","disabled","placeholder"]),_(d,{type:"primary",disabled:v(P),onClick:G},{default:g((()=>[k(b(e.$t("Docker.LocalImage.pull.index_6")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["label"])])),_:1},8,["model"]),p("div",M,b(e.$t("Docker.LocalImage.pull.index_7")),1),p("div",R,[_(D,{log:v(T)},null,8,["log"])])])}}}),T={class:"pt-4px"},z={class:"px-2px py-4px"},B={class:"h-456px"},G=t({__name:"index",setup(e){const{t:l}=u(),a=f(),n=o({cmd:""}),s=d(l("Docker.LocalImage.pull.index_10")),t=d(!1),x=r((()=>t.value)),y=async()=>{if(""!==n.cmd.trim())try{t.value=!0,s.value=l("Docker.Container.create.command_8"),await S({cmd:n.cmd}),j(),U()}catch(e){t.value=!1}else I.error(l("Docker.LocalImage.pull.index_13"))},{createWebSocket:j,sendSocket:L,closeWebSocket:C}=$({url:"/ws_model",onMessage:(e,c)=>{const{data:n}=c;if(D(n)&&(s.value+=c.data,n.includes("bt_successful")||n.includes("bt_failed"))){t.value=!1;const e={status:n.includes("bt_successful"),msg:n.includes("bt_successful")?l("Docker.Container.create.command_7"):l("Docker.Container.create.command_6")};e.status?(I.success(e.msg),a.setRefresh(!0)):I.error(e.msg),C()}}}),U=()=>{L({model_index:"btdocker",mod_name:"image",def_name:"get_cmd_log",ws_callback:111,name:"",image:""})};return(e,l)=>{const a=h,t=w,u=W,o=c;return i(),m("div",T,[_(u,{class:"mb-16px"},{default:g((()=>[_(a,{value:v(n).cmd,"onUpdate:value":l[0]||(l[0]=e=>v(n).cmd=e),disabled:v(x),placeholder:e.$t("Docker.LocalImage.pull.index_11")},null,8,["value","disabled","placeholder"]),_(t,{type:"primary",disabled:v(x),onClick:y},{default:g((()=>[k(b(e.$t("Docker.LocalImage.pull.index_12")),1)])),_:1},8,["disabled"])])),_:1}),p("div",z,b(e.$t("Docker.LocalImage.pull.index_7")),1),p("div",B,[_(o,{log:v(s)},null,8,["log"])])])}}}),K={class:"p-16px"};e("default",t({__name:"index",setup(e){const{t:l}=u(),c=d("normal"),n=[{key:"normal",label:l("Docker.LocalImage.pull.index_1"),component:q},{key:"command",label:l("Docker.LocalImage.pull.index_2"),component:G}];return(e,l)=>{const s=a;return i(),m("div",K,[_(s,{value:v(c),"onUpdate:value":l[0]||(l[0]=e=>y(c)?c.value=e:null),options:n},null,8,["value"])])}}}))}}}));
