const __vite__fileDeps=["js/index64.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998","js/vue.js?v=1723125373998","js/index.js?v=1723125373998","js/pinia.js?v=1723125373998","css/index42.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang7.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998","js/InputGroupLabel.js?v=1723125373998","js/InputGroup.js?v=1723125373998","js/index69.js?v=1723125373998","js/index70.js?v=1723125373998","css/index10.css?v=1723125373998","js/Select.js?v=1723125373998","js/Tag.js?v=1723125373998","js/Empty.js?v=1723125373998","js/Switch.js?v=1723125373998","js/index65.js?v=1723125373998","js/index144.js?v=1723125373998","js/Tabs.js?v=1723125373998","js/omit.js?v=1723125373998","js/Ellipsis.js?v=1723125373998","css/index20.css?v=1723125373998","js/index73.js?v=1723125373998","js/Checkbox.js?v=1723125373998","js/useLoading.js?v=1723125373998","js/site.js?v=1723125373998","css/index25.css?v=1723125373998","js/index66.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998","css/index9.css?v=1723125373998","js/useTableData.js?v=1723125373998","js/data.js?v=1723125373998","js/Skeleton.js?v=1723125373998","js/DataTable.js?v=1723125373998","js/useTableColumns.js?v=1723125373998","js/Progress.js?v=1723125373998","css/useTableColumns.css?v=1723125373998","js/index67.js?v=1723125373998"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as a,u as e,g as t,h as s,s as i,t as o,i as n,j as l,k as d,m as r,n as p,o as _,l as c,_ as m,B as u,p as h,q as b,r as w,v as x}from"./index.js?v=1723125373998";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998";import{u as D,_ as g}from"./useTableData.js?v=1723125373998";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1723125373998";import{_ as v}from"./index68.js?v=1723125373998";import{u as C}from"./useLoading.js?v=1723125373998";import{_ as R,u as U,a as E,b as W}from"./useTableColumns.js?v=1723125373998";import{u as L,a as P,b as T,c as S,d as $,_ as A,e as B,f as I,g as O}from"./index69.js?v=1723125373998";import{P as q,ad as z,X as V,q as K,s as X,l as F,r as G,ae as H,f as J,w as M,S as N,U as Q,V as Y,_ as Z,a3 as aa,W as ea,af as ta,b as sa,a1 as ia,t as oa}from"./vue.js?v=1723125373998";import{g as na}from"./hooks.js?v=1723125373998";import{_ as la}from"./Alert.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Checkbox.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./php.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./Switch.js?v=1723125373998";import"./index70.js?v=1723125373998";const da=({row:a})=>{if(a.password)return q(R,{value:a.password},null);const{t:e}=z();return q(V("i18n-t"),{keypath:"Database.index_15.0",tag:"span",class:"text-desc cursor-pointer",onClick:()=>{L(a)}},{error:()=>q("span",{class:"text-error"},[e("Database.index_15.1")])})},ra=({row:e})=>{let t;const{t:s}=z();return q("div",{class:"flex items-center"},[q(a,{type:e.backup_count>0?"primary":"warning",onClick:()=>{P(e)}},{default:()=>[e.backup_count>0?s("Database.index_17",[e.backup_count]):s("Database.index_18")]}),q("span",{class:"mx-4px"},[K("|")]),q(a,{onClick:()=>{T(e)}},(i=t=s("Public.Btn.Import"),"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!X(i)?t:{default:()=>[t]}))]);var i},pa={class:"p-16px"},_a={class:"flex items-center flex-wrap"},ca=F({__name:"index",setup(a){const R=ia((()=>x((()=>import("./index64.js?v=1723125373998")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])))),P=ia((()=>x((()=>import("./index65.js?v=1723125373998")),__vite__mapDeps([17,18,2,19,3,4,5,20,21,22,23,24,25,26,13,14,15,1,16,27])))),T=ia((()=>x((()=>import("./index66.js?v=1723125373998")),__vite__mapDeps([28,23,3,2,4,5,29,30,31,32,33,34,35,24,21,13,14,15,20,25,36,37,16,38])))),X=ia((()=>x((()=>import("./index67.js?v=1723125373998")),__vite__mapDeps([39,1,2,3,4,5,13,14,15,16])))),{t:F}=z(),ca=e(),ma=G(!1),ua=t(),ha=t(F("Database.index_3"),{row:void 0}),ba=()=>{ua.show=!0},wa=()=>{I()},xa=a=>{ca.phpmyadmin.setup?(a?(ha.data.row=a,ha.title=F("Database.index_8",[a.name])):(ha.data.row=void 0,ha.title=F("Database.index_3")),ha.show=!0):p.error(F("Database.index_9"))},ya=()=>{O()},fa=t(),ka=t(),Da=async()=>{await i(ca.type,{ids:[]}),Pa()},ga=H(),ja=()=>{ga.push("/crontab")},{keys:va,table:Ca,columns:Ra}=D([{type:"selection",width:40},{key:"name",title:F("Database.index_12"),width:"10%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:F("Database.index_13"),width:"10%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:F("Database.index_14"),width:"12%",minWidth:150,render:a=>q(da,{row:a},null)},U({type:"database",width:"7%",minWidth:100,callback:()=>{Pa()}}),{key:"backup_count",title:F("Database.index_16"),width:"10%",minWidth:130,render:a=>q(ra,{row:a},null)},{key:"sid",title:F("Database.index_19"),width:"9%",minWidth:100,ellipsis:{tooltip:!0},render:a=>na(a)},E({minWidth:90,onBlur:async(a,e)=>{await _({id:e.id,ps:a})}}),W({width:"24%",minWidth:220,maxWidth:276,options:a=>[{label:F("Database.index_20"),show:0===a.db_type,onClick:()=>{xa(a)}},{label:F("Database.index_21"),onClick:()=>{(a=>{ka.data.row=a,ka.title=F("Database.index_11",[a.name]),ka.show=!0})(a)}},{label:F("Database.index_22"),onClick:()=>{(a=>{fa.data.row=a,fa.title=F("Database.index_10",[a.name]),fa.show=!0})(a)}},{label:F("Database.index_23"),onClick:()=>{L(a)}},{label:F("Public.Btn.Del"),onClick:()=>{S([a])}}]})]),Ua=[{key:"sync",label:F("Database.index_24"),onBatch:a=>{s({title:F("Database.index_25"),content:F("Database.index_26"),onConfirm:async()=>{await i(ca.type,{ids:a.map((a=>a.id))})}})}},{key:"backup",type:"confirm",label:F("Database.index_27"),confirm:{title:F("Database.index_28"),desc:F("Database.index_29"),api:a=>o(ca.type,{id:a.id},!1),done:()=>{Pa()},columns:[{key:"name",title:F("Database.index_12")}]}},{key:"delete",label:F("Database.index_30"),onBatch:a=>{S(a)}}],{loading:Ea,setLoading:Wa}=C(!0),La=J({p:1,limit:20,sid:-1,search:""}),Pa=async()=>{try{Wa(!0);const{message:a}=await n((()=>{const a={...oa(La)};return-1===a.sid&&delete a.sid,a})());l(a)?(Ca.data=d(a.data)?a.data:[],Ca.total=r(a.page)):(Ca.data=[],Ca.total=0)}finally{va.value=[],Wa(!1)}};M((()=>ca.isRefresh),(a=>{a&&(ca.setRefresh(!1),ca.delRemoteId===La.sid&&(La.sid=-1),Pa())}));return(async()=>{try{await ca.getRemote(),ca.install?(ma.value=!0,Pa()):(ma.value=!1,c())}finally{Wa(!1)}})(),(a,e)=>{const t=m,s=u,i=V("i18n-t"),o=la,n=h,l=v,d=j,r=g,p=k,_=f,c=y,x=b,D=w;return N(),Q(ea(B),null,{default:Y((()=>[q(D,null,{default:Y((()=>[Z("div",pa,[q(o,{"show-icon":!1,closable:!1},{default:Y((()=>[Z("div",_a,[q(t,{name:"base-info",size:"18",class:"mr-8px"}),q(i,{tag:"span",keypath:"Database.index_7.0"},{btn:Y((()=>[q(s,{class:"px-8px h-24px",size:"small",type:"primary",onClick:ja},{default:Y((()=>[K(aa(a.$t("Database.index_7.1")),1)])),_:1})])),_:1})])])),_:1}),q(c,{class:"mt-16px",feedback:!0},{toolsLeft:Y((()=>[q(s,{type:"primary",onClick:ba},{default:Y((()=>[K(aa(a.$t("Database.index_1")),1)])),_:1}),q(s,{onClick:wa},{default:Y((()=>[K(aa(a.$t("Database.index_2")),1)])),_:1}),q(s,{onClick:e[0]||(e[0]=a=>xa())},{default:Y((()=>[K(aa(a.$t("Database.index_3")),1)])),_:1}),q(s,{onClick:ya},{default:Y((()=>[K(aa(a.$t("Database.index_4")),1)])),_:1}),q(n,{class:"mx-0!",vertical:""}),q(s,{onClick:Da},{default:Y((()=>[K(aa(a.$t("Database.index_5")),1)])),_:1}),q(s,{onClick:ea($)},{default:Y((()=>[K(aa(a.$t("Database.index_6")),1)])),_:1},8,["onClick"]),ea(ma)?(N(),Q(l,{key:0,"soft-name":"mysql"})):ta("",!0)])),toolsRight:Y((()=>[q(ea(A),{ref:"remoteRef",value:ea(La).sid,"onUpdate:value":e[1]||(e[1]=a=>ea(La).sid=a),"store-key":"mysql-remote",onChange:Pa},null,8,["value"]),q(d,{value:ea(La).search,"onUpdate:value":e[2]||(e[2]=a=>ea(La).search=a),placeholder:"Database search",width:"180",onSearch:Pa},null,8,["value"])])),table:Y((()=>[q(r,{"checked-row-keys":ea(va),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>sa(va)?va.value=a:null),loading:ea(Ea),data:ea(Ca).data,columns:ea(Ra)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Y((()=>[q(p,{"checked-row-keys":ea(va),"onUpdate:checkedRowKeys":e[4]||(e[4]=a=>sa(va)?va.value=a:null),data:ea(Ca).data,options:Ua},null,8,["checked-row-keys","data"])])),pageRight:Y((()=>[q(_,{page:ea(La).p,"onUpdate:page":e[5]||(e[5]=a=>ea(La).p=a),"page-size":ea(La).limit,"onUpdate:pageSize":e[6]||(e[6]=a=>ea(La).limit=a),"store-key":"database-mysql-page","item-count":ea(Ca).total,onRefresh:Pa},null,8,["page","page-size","item-count"])])),_:1}),q(x,{show:ea(ua).show,"onUpdate:show":e[7]||(e[7]=a=>ea(ua).show=a),title:"Add Database",width:540,"min-height":334,footer:!0,component:ea(R)},null,8,["show","component"]),q(x,{show:ea(ha).show,"onUpdate:show":e[8]||(e[8]=a=>ea(ha).show=a),title:ea(ha).title,data:ea(ha).data,width:740,height:580,component:ea(P)},null,8,["show","title","data","component"]),q(x,{show:ea(ka).show,"onUpdate:show":e[9]||(e[9]=a=>ea(ka).show=a),data:ea(ka).data,title:ea(ka).title,width:480,"min-height":132,footer:!0,component:ea(X)},null,8,["show","data","title","component"]),q(x,{show:ea(fa).show,"onUpdate:show":e[10]||(e[10]=a=>ea(fa).show=a),data:ea(fa).data,title:ea(fa).title,width:870,"min-height":359,component:ea(T)},null,8,["show","data","title","component"])])])),_:1})])),_:1})}}});export{ca as default};
