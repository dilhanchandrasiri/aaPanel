const __vite__fileDeps=["js/index71.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998","js/vue.js?v=1723125373998","js/index.js?v=1723125373998","js/pinia.js?v=1723125373998","css/index42.css?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang7.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998","js/InputGroupLabel.js?v=1723125373998","js/InputGroup.js?v=1723125373998","js/index69.js?v=1723125373998","js/index70.js?v=1723125373998","css/index10.css?v=1723125373998","js/Select.js?v=1723125373998","js/Tag.js?v=1723125373998","js/Empty.js?v=1723125373998"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{u as e,g as a,s as t,o as s,h as o,t as i,w as l,j as n,k as r,m as d,B as p,p as c,q as u,r as m,v as _}from"./index.js?v=1723125373998";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998";import{u as f,_ as g}from"./useTableData.js?v=1723125373998";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1723125373998";import{u as v}from"./useLoading.js?v=1723125373998";import{_ as b,a as j,b as x}from"./useTableColumns.js?v=1723125373998";import{g as D}from"./hooks.js?v=1723125373998";import{P as S,l as C,f as R,w as B,S as U,U as L,V as P,_ as T,q as W,W as E,b as q,a1 as z,t as A}from"./vue.js?v=1723125373998";import{d as G,_ as I,e as K,g as V,u as H,c as N}from"./index69.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Checkbox.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./Switch.js?v=1723125373998";import"./index70.js?v=1723125373998";const O={class:"p-16px"},F=C({__name:"index",setup(C){const F=z((()=>_((()=>import("./index71.js?v=1723125373998")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))),J=e(),M=a(),Q=()=>{M.show=!0},X=()=>{V()},Y=async()=>{await t(J.type,{ids:[]}),ie()},{keys:Z,table:$,columns:ee}=f([{type:"selection",width:40},{key:"name",title:"Database name",width:"12%",minWidth:120},{key:"username",title:"Username",width:"12%",minWidth:120},{key:"password",title:"Password",minWidth:150,render:e=>S(b,{value:e.password},null)},{key:"sid",title:"Location",width:"12%",minWidth:120,render:e=>D(e)},j({onBlur:async(e,a)=>{await s({id:a.id,ps:e})}}),x({width:100,options:e=>[{label:"CHG PW",onClick:()=>{H(e)}},{label:"Del",onClick:()=>{N([e])}}]})]),ae=[{key:"sync",label:"Sync to Server",onBatch:e=>{o({title:"Batch Sync to Server",content:"Please be cautious, The selected item will be [Sync to Server] after confirmation",onConfirm:async({hide:a})=>{await t(J.type,{ids:e.map((e=>e.id))}),a()}})}},{key:"backup",type:"confirm",label:"DB backup",confirm:{title:"Batch backup database",desc:"Do you continue to operate in batch backup database?",api:e=>i(J.type,{id:e.id},!1),done:()=>{ie()},columns:[{key:"name",title:"Database Name"}]}},{key:"delete",label:"Delete database",onBatch:e=>{N(e)}}],{loading:te,setLoading:se}=v(),oe=R({p:1,limit:10,sid:-1,search:""}),ie=async()=>{try{se(!0);const{message:e}=await l(J.type,(()=>{const e={...A(oe)};return-1===e.sid&&delete e.sid,e})());n(e)?($.data=r(e.data)?e.data:[],$.total=d(e.page)):($.data=[],$.total=0)}finally{Z.value=[],se(!1)}};B((()=>J.isRefresh),(e=>{e&&(J.setRefresh(!1),J.delRemoteId===oe.sid&&(oe.sid=-1),ie())}));return(async()=>{await J.getRemote(),J.install&&ie()})(),(e,a)=>{const t=p,s=c,o=w,i=g,l=k,n=y,r=h,d=u,_=m;return U(),L(E(K),null,{default:P((()=>[S(_,null,{default:P((()=>[T("div",O,[S(r,null,{toolsLeft:P((()=>[S(t,{type:"primary",onClick:Q},{default:P((()=>[W("Add DB")])),_:1}),S(t,{onClick:X},{default:P((()=>[W("Remote DB")])),_:1}),S(s,{class:"mx-0!",vertical:""}),S(t,{onClick:Y},{default:P((()=>[W("Sync all")])),_:1}),S(t,{onClick:E(G)},{default:P((()=>[W("Get DB from server")])),_:1},8,["onClick"])])),toolsRight:P((()=>[S(E(I),{value:E(oe).sid,"onUpdate:value":a[0]||(a[0]=e=>E(oe).sid=e),"store-key":"database-sqlserver-page",onChange:ie},null,8,["value"]),S(o,{value:E(oe).search,"onUpdate:value":a[1]||(a[1]=e=>E(oe).search=e),placeholder:"Database search",onSearch:ie},null,8,["value"])])),table:P((()=>[S(i,{"checked-row-keys":E(Z),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>q(Z)?Z.value=e:null),loading:E(te),data:E($).data,columns:E(ee)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[S(l,{"checked-row-keys":E(Z),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>q(Z)?Z.value=e:null),data:E($).data,options:ae},null,8,["checked-row-keys","data"])])),pageRight:P((()=>[S(n,{page:E(oe).p,"onUpdate:page":a[4]||(a[4]=e=>E(oe).p=e),"page-size":E(oe).limit,"onUpdate:pageSize":a[5]||(a[5]=e=>E(oe).limit=e),"item-count":E($).total,onRefresh:ie},null,8,["page","page-size","item-count"])])),_:1}),S(d,{show:E(M).show,"onUpdate:show":a[6]||(a[6]=e=>E(M).show=e),title:"Add Database",width:540,"min-height":280,footer:!0,component:E(F)},null,8,["show","component"])])])),_:1})])),_:1})}}});export{F as default};
