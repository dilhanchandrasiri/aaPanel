System.register(["./useTableData-legacy.js?v=1723125373998","./index-legacy.js?v=1723125373998","./file-legacy2.js?v=1723125373998","./useLoading-legacy.js?v=1723125373998","./_baseFindIndex-legacy.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./Checkbox-legacy.js?v=1723125373998","./Ellipsis-legacy.js?v=1723125373998","./data-legacy.js?v=1723125373998","./Skeleton-legacy.js?v=1723125373998","./DataTable-legacy.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./Tag-legacy.js?v=1723125373998","./Empty-legacy.js?v=1723125373998","./omit-legacy.js?v=1723125373998","./pinia-legacy.js?v=1723125373998"],(function(e,l){"use strict";var a,i,n,t,s,c,u,o,d,r,p,f,v,x,y,g,m,h,b,k,j,_,w,P,C,F,$;return{setters:[e=>{a=e.u,i=e._},e=>{n=e.aB,t=e._,s=e.j,c=e.ao,u=e.O,o=e.B,d=e.G},e=>{r=e.e},e=>{p=e.u},e=>{f=e.b},e=>{v=e.l,x=e.ad,y=e.r,g=e.P,m=e.S,h=e.Z,b=e.V,k=e.q,j=e.a3,_=e._,w=e.W,P=e.F,C=e.ag},e=>{F=e._},e=>{$=e._},null,null,null,null,null,null,null,null],execute:function(){const l={class:"flex flex-col h-full"},D={class:"flex-1 w-0 truncate"},S={class:"flex flex-1 overflow-hidden"},z={class:"w-160px py-12px overflow-auto"},E=["onClick"],I={class:"flex-1 ml-8px"},T={class:"flex-1","b-l":"1 solid #aaa"};e("default",v({__name:"index",props:{data:{}},setup(e,{expose:v}){const{t:L}=x(),B=e,{path:O,checkedType:q,callback:A}=B.data,G=y([]),H=y([]),K=y(O||"/"),{table:R,columns:U}=a([{key:"checkbox",title:"",width:36,render:e=>q.includes(e.type)?g("div",{onClick:e=>{e.stopPropagation()}},[g(F,{checked:e.filename===H.value[0],onUpdateChecked:l=>{H.value=l?[e.filename]:[]}},null)]):""},{key:"filename",title:L("Public.File.index_3"),render:e=>g("div",{class:"flex"},[g("div",{class:"flex items-center flex-1 cursor-pointer",onClick:l=>{"dir"===e.type&&(l.preventDefault(),K.value+=`${"/"===K.value?"":"/"}${e.filename}`,M(),l.stopPropagation())}},[g("div",null,["dir"===e.type?g(t,{name:"base-dir",size:"16"},null):"","file"===e.type?g(t,{name:"base-file",size:"16",color:"#666"},null):""]),g("div",{class:"ml-6px flex-1 w-0"},[g($,null,{default:()=>[e.filename]})])])])},{key:"time",title:L("Public.File.index_4"),width:146},{key:"permission",title:L("Public.File.index_5"),width:86},{key:"owner",title:L("Public.File.index_6"),width:72}]),V=e=>({onClick:()=>{if(q.includes(e.type)){const i=(l=H.value,a=l=>l===e.filename,null!=l&&l.length?f(l,n(a),0):-1);H.value=-1!==i?[]:[e.filename]}var l,a},onDblclick:()=>{q.includes(e.type)&&(K.value+=`${"/"===K.value?"":"/"}${e.filename}`,M())}}),W=()=>{const e=K.value.substring(0,K.value.lastIndexOf("/"));K.value=""===e?"/":e,M()},{loading:Z,setLoading:J}=p(),M=async()=>{try{J(!0),R.data=[],H.value=[];const{message:e}=await r({path:K.value});if(s(e)){const l=[],a=c(e,"DIR",[]),i=c(e,"FILES",[]);a.forEach((e=>{l.push(N(e,"dir"))})),i.forEach((e=>{l.push(N(e,"file"))})),K.value=e.PATH,R.data=l,G.value=c(e,"DISK",[])}}finally{J(!1)}},N=(e,l)=>{const a=e.split(";"),i=a[0],n=u(a[2]),t=a[3],s=a[4];return{path:("/"!==K.value?K.value+"/":"")+i,filename:i,time:n,permission:t,owner:s,type:l}};return M(),v({onConfirm:({hide:e})=>{const l=H.value.length>0?H.value[0]:"",a=("/"!==K.value?K.value+"/":"")+l,i=R.data.find((e=>e.filename===l));A?.(a,i),e()}}),(e,a)=>{const n=o,s=d,c=i;return m(),h("div",l,[g(s,{class:"items-center h-50px px-12px","b-b":"1 solid #aaa"},{default:b((()=>[g(n,{onClick:W},{default:b((()=>[k(j(e.$t("Public.File.index_1")),1)])),_:1}),_("div",D,j(e.$t("Public.File.index_2"))+": "+j(w(K)),1)])),_:1}),_("div",S,[_("div",z,[(m(!0),h(P,null,C(w(G),(e=>(m(),h("div",{key:e.path,class:"flex items-center p-8px pl-16px hover:bg-#ececec cursor-pointer transition-colors",onClick:l=>{return a=e.path,K.value=a,void M();var a}},[g(t,{name:"file-disk",size:"18",color:"#666"}),_("div",I,j(e.path)+" "+j(e.size[2]?`(${e.size[2]})`:""),1)],8,E)))),128))]),_("div",T,[g(c,{loading:w(Z),"loading-num":10,bordered:!1,"virtual-scroll":!0,"max-height":456,data:w(R).data,columns:w(U),"row-props":V},null,8,["loading","data","columns"])])])])}}}))}}}));
