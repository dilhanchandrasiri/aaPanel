System.register(["./index-legacy96.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./index-legacy187.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./setting-legacy.js?v=1732601582185","./site-legacy3.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185"],(function(e,l){"use strict";var i,a,t,c,n,s,o,d,_,u,r,f,x,p,m,v,g,b,y,C,S,W,w,$,h,j,U,k,P,E,N,O,R,T,A;return{setters:[e=>{i=e._},e=>{a=e._},e=>{t=e._},e=>{c=e.d,n=e.W,s=e.t,o=e.r,d=e.e,_=e.j,u=e.$,r=e.O,f=e.P,x=e.M,p=e.Y,m=e.Q,v=e.R,g=e.k,b=e.Z,y=e.v,C=e.c,S=e.F},e=>{W=e.f,w=e.m,$=e.I},e=>{h=e.a},e=>{j=e.d},e=>{U=e.f,k=e.h,P=e.i,E=e.j},e=>{N=e.bL,O=e.bG,R=e.bl,T=e.aa,A=e.bU},null,null],execute:function(){const l={class:"p-20px"},B={class:"flex-1"},D={class:"w-160px"},F={class:"w-160px mr-8px"},G={class:"text-#666"},H={class:"mb-4px"},I={class:"mb-10px"},J={class:"mb-4px"},L={class:"mb-10px"},M={class:"mb-4px"},Q={class:"mb-10px"},Y={class:"mb-4px"},Z={class:"w-160px mr-8px"},q={class:"text-desc"},z={class:"w-160px mr-8px"},K={class:"text-desc"},V={class:"w-160px mr-8px"},X={class:"text-desc"},ee={class:"w-160px"},le={class:"w-240px"},ie={class:"flex-1"},ae={class:"w-160px"},te={class:"text-error"},ce={class:"text-error"},ne={class:"text-error"},se={class:"text-error"},oe={class:"text-error"},de={class:"text-error"},_e={class:"text-error"};e("default",c({__name:"index",props:{siteName:{},config:{}},emits:["refresh"],setup(e,{expose:c,emit:ue}){const re=e,fe=ue,{t:xe}=n(),pe=s(re,"siteName"),me=o(null),ve=d((()=>void 0===pe.value)),ge=_({cc_mode:1,cc_type_status:2,cycle:60,limit:120,endtime:1800,is_cc_url:1,cc_enhance_mode:1,increase_wu_heng:1,country:[],cc_increase_type:"js"}),be={cycle:{trigger:["blur","input"],validator:()=>ge.cycle?!(ge.cycle<30)||new Error(xe("Waf.Site.Config.index_35")):new Error(xe("Waf.Site.Config.index_34"))},limit:{trigger:["blur","input"],validator:()=>ge.limit?!(ge.limit<30)||new Error(xe("Waf.Site.Config.index_35")):new Error(xe("Waf.Site.Config.index_36"))},endtime:{trigger:["blur","input"],validator:()=>!!ge.endtime||new Error(xe("Waf.Site.Config.index_37"))}},ye=[{label:xe("Waf.Site.Config.index_38"),value:1},{label:xe("Waf.Site.Config.index_39"),value:2}],Ce=[{label:xe("Waf.Site.Config.index_40"),value:1},{label:xe("Waf.Site.Config.index_41"),value:2},{label:xe("Waf.Site.Config.index_42"),value:3},{label:xe("Waf.Site.Config.index_43"),value:4}],Se=[{label:xe("Public.Status.Enable"),value:1},{label:xe("Public.Status.Disable"),value:0}],We=o([{label:xe("Waf.Site.Config.index_46"),value:"browser"},{label:xe("Waf.Site.Config.index_47"),value:"js"},{label:xe("Waf.Site.Config.index_48"),value:"code"},{label:xe("Waf.Site.Config.index_49"),value:"renji"},{label:xe("Waf.Site.Config.index_50"),value:"huadong"}]),we=o([]),$e=()=>{ge.country=we.value.map((e=>`${e.value}`))},he=()=>{ge.country=[]};let je=!1;const Ue=async e=>{if("renji"===e&&!je){const{message:e}=await U();je=!0,W(e)&&e.result&&(ge.cc_increase_type="js",We.value[3].disabled=!0,We.value[4].disabled=!0,w.error(xe("Waf.Site.Config.index_51")))}},ke=async()=>{const{close:e}=w.loading(xe("Waf.Site.Config.index_52",[ve.value?xe("Waf.Site.Config.index_99"):xe("Waf.Site.Config.index_100")]));try{const e=(()=>{const e=1===ge.cc_mode?{country:ge.country.join(","),is_cc_url:ge.is_cc_url}:{};return{cc_mode:1===ge.cc_mode?1:ge.cc_enhance_mode?3:4,cycle:ge.cycle,limit:ge.limit,endtime:ge.endtime,is_open_global:void 0===pe.value?1:0,increase:0===ge.cc_enhance_mode?0:1,increase_wu_heng:ge.increase_wu_heng,cc_increase_type:ge.cc_increase_type,cc_type_status:ge.cc_type_status,...e}})();3!==e.cc_mode&&await P(),ve.value?await j(e):await E({...e,siteName:pe.value||""}),fe("refresh")}finally{e()}};return(async()=>{const{message:e}=await k();$(e)&&(we.value=e.map((e=>({label:e,value:e}))))})(),(()=>{const{config:e}=re;e&&(ge.cc_mode=e.cc_mode<=1?1:2,ge.cc_type_status=e.cc_type_status,ge.cycle=e.cc.cycle,ge.limit=e.cc.limit,ge.endtime=e.cc.endtime,ge.is_cc_url=e.cc.is_cc_url?1:0,ge.cc_increase_type=e.cc.cc_increase_type||"js",ge.country=Object.keys(e.cc.countrys))})(),c({onConfirm:async({hide:e})=>{if(await(me.value?.validate()),2===ge.cc_mode)return h({title:xe("Public.Confirm.Title"),content:()=>x(S,null,[xe("Waf.Site.Config.desc_9"),x("br",null,null),xe("Waf.Site.Config.desc_10"),x("br",null,null),xe("Waf.Site.Config.desc_11")]),onConfirm:async({hide:l})=>(await ke(),l(),e(),!1)}),!1;await ke()}}),(e,c)=>{const n=N,s=O,o=t,d=R,_=T,S=A,W=a,w=u("i18n-t"),$=i;return r(),f("div",l,[x(W,{ref_key:"formRef",ref:me,model:v(ge),rules:be,"label-width":"160"},{default:p((()=>[x(s,{label:e.$t("Waf.Site.Config.index_11")},{default:p((()=>[m("div",B,[m("div",D,[x(n,{value:v(ge).cc_mode,"onUpdate:value":c[0]||(c[0]=e=>v(ge).cc_mode=e),options:ye},null,8,["value"])]),g(m("div",{class:"w-320px mt-6px text-desc leading-20px"},b(e.$t("Waf.Site.Config.index_12")),513),[[y,2===v(ge).cc_mode]])])])),_:1},8,["label"]),x(s,{label:e.$t("Waf.Site.Config.index_13")},{default:p((()=>[m("div",F,[x(n,{value:v(ge).cc_type_status,"onUpdate:value":c[1]||(c[1]=e=>v(ge).cc_type_status=e),options:Ce,"consistent-menu-width":!1},null,8,["value"])]),x(o,null,{default:p((()=>[m("div",G,[m("div",H,[m("b",null,b(e.$t("Waf.Site.Config.desc_1")),1)]),m("div",I,b(e.$t("Waf.Site.Config.desc_2")),1),m("div",J,[m("b",null,b(e.$t("Waf.Site.Config.desc_3")),1)]),m("div",L,b(e.$t("Waf.Site.Config.desc_4")),1),m("div",M,[m("b",null,b(e.$t("Waf.Site.Config.desc_5")),1)]),m("div",Q,b(e.$t("Waf.Site.Config.desc_6")),1),m("div",Y,[m("b",null,b(e.$t("Waf.Site.Config.desc_7")),1)]),m("div",null,b(e.$t("Waf.Site.Config.desc_8")),1)])])),_:1})])),_:1},8,["label"]),x(s,{label:e.$t("Waf.Site.Config.index_14"),path:"cycle"},{default:p((()=>[m("div",Z,[x(d,{value:v(ge).cycle,"onUpdate:value":c[2]||(c[2]=e=>v(ge).cycle=e),min:30,"show-button":!1},null,8,["value"])]),m("span",q,b(e.$t("Public.Unit.Second",v(ge).cycle)),1)])),_:1},8,["label"]),x(s,{label:e.$t("Waf.Site.Config.index_16"),path:"limit"},{default:p((()=>[m("div",z,[x(d,{value:v(ge).limit,"onUpdate:value":c[3]||(c[3]=e=>v(ge).limit=e),min:30,"show-button":!1},null,8,["value"])]),m("span",K,b(e.$t("Public.Unit.Time",v(ge).limit)),1)])),_:1},8,["label"]),x(s,{label:e.$t("Waf.Site.Config.index_18"),path:"endtime"},{default:p((()=>[m("div",V,[x(d,{value:v(ge).endtime,"onUpdate:value":c[4]||(c[4]=e=>v(ge).endtime=e),min:1,"show-button":!1},null,8,["value"])]),m("span",X,b(e.$t("Public.Unit.Second",v(ge).endtime)),1)])),_:1},8,["label"]),g(m("div",null,[x(s,{label:e.$t("Waf.Site.Config.index_19")},{default:p((()=>[m("div",ee,[x(n,{value:v(ge).is_cc_url,"onUpdate:value":c[5]||(c[5]=e=>v(ge).is_cc_url=e),options:Se},null,8,["value"])])])),_:1},8,["label"]),x(s,{label:e.$t("Waf.Site.Config.index_20"),"show-feedback":!1},{default:p((()=>[m("div",le,[x(n,{value:v(ge).country,"onUpdate:value":c[6]||(c[6]=e=>v(ge).country=e),options:v(we),multiple:!0,filterable:!0,"max-tag-count":"responsive",":placeholder":e.$t("Waf.Site.Config.index_21")},{header:p((()=>[x(S,{class:"w-full"},{default:p((()=>[x(_,{class:"flex-1",onClick:$e},{default:p((()=>[C(b(e.$t("Public.All")),1)])),_:1}),x(_,{class:"flex-1",onClick:he},{default:p((()=>[C(b(e.$t("Public.Btn.Cancel")),1)])),_:1})])),_:1})])),_:1},8,["value","options",":placeholder"])])])),_:1},8,["label"])],512),[[y,1===v(ge).cc_mode]]),g(m("div",null,[x(s,{label:e.$t("Waf.Site.Config.index_22"),"show-feedback":!1},{default:p((()=>[m("div",ie,[m("div",ae,[x(n,{value:v(ge).cc_increase_type,"onUpdate:value":[c[7]||(c[7]=e=>v(ge).cc_increase_type=e),Ue],options:v(We)},null,8,["value","options"])]),g(m("div",{class:"mt-6px text-error"},b(e.$t("Waf.Site.Config.index_23")),513),[[y,"code"===v(ge).cc_increase_type]])])])),_:1},8,["label"])],512),[[y,2===v(ge).cc_mode]])])),_:1},8,["model"]),x($,{class:"mt-20px"},{default:p((()=>[m("li",te,b(e.$t("Waf.Site.Config.index_24")),1),g(m("li",{class:"text-error"},b(e.$t("Waf.Site.Config.index_102")),513),[[y,2===v(ge).cc_mode]]),x(w,{tag:"li",keypath:"Waf.Site.Config.index_97",scope:"global"},{index_1:p((()=>[m("span",ce,b(v(ge).limit),1)])),index_2:p((()=>[m("span",ne,b(v(ge).cycle),1)])),index_3:p((()=>[m("span",se,b(v(ge).endtime),1)])),_:1}),g(m("li",{class:"text-error"},b(e.$t("Waf.Site.Config.index_29")),513),[[y,1===v(ge).cc_mode]]),x(w,{tag:"li",keypath:"Waf.Site.Config.index_98",scope:"global"},{index_1:p((()=>c[8]||(c[8]=[m("span",{class:"text-error"},"JS",-1)]))),index_2:p((()=>[m("span",oe,b(v(ge).cycle),1)])),index_3:p((()=>[m("span",de,b(e.config.retry),1)])),index_4:p((()=>[m("span",_e,b(v(ge).endtime),1)])),_:1})])),_:1})])}}}))}}}));
