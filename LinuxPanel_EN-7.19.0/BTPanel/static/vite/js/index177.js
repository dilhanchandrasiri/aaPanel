import{_ as t}from"./index.js?v=1732601582185";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{f as s,I as i,a4 as l}from"./page_layout.js?v=1732601582185";import{b as o,d as n,f as p,h as d}from"./public.js?v=1732601582185";import{ab as r,ac as u}from"./mail.js?v=1732601582185";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import{d as _,W as c,j as y,M as g,O as f,P as w,Y as h,R as b,ak as v,F as M,c as x,Z as k}from"./vue.js?v=1732601582185";import{bq as j,bP as P,bQ as z}from"./naive.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";const S={class:"p-20px"},U=_({__name:"details",props:{id:{},type:{},row:{}},setup(t){const p=t,{t:d}=c(),u=y({task_id:p.id,type:p.type,value:"domain"===p.type?p.row.domain:p.row.status,page:1,size:10}),{loading:_,setLoading:M}=o(),{table:x,columns:k}=n([{key:"recipient",title:d("Mail.Mass.index_50"),width:160,render:t=>g(j,{class:t.tooltip?"":"break-all!","line-clamp":t.tooltip?999:1,tooltip:!1},{default:()=>[t.recipient]})},{key:"dsn",title:"Dsn",width:60},{key:"delay",title:d("Mail.Mass.index_51"),width:70},{key:"delays",title:d("Mail.Mass.index_52"),width:150},{key:"relay",title:d("Mail.Mass.index_53"),width:200,render:t=>g(j,{class:t.tooltip?"":"break-all!","line-clamp":t.tooltip?9999:1,tooltip:!1},{default:()=>[t.relay]})},{key:"err_info",title:d("Public.Btn.Details"),render:t=>g(j,{class:t.tooltip?"":"break-all!","line-clamp":t.tooltip?9999:1,tooltip:!1},{default:()=>[t.err_info]})}]),P=t=>({onMousemove:()=>{t.tooltip=!0},onMouseleave:()=>{t.tooltip=!1}}),z=async()=>{try{M(!0);const{message:t}=await r(v(u));s(t)&&(x.data=i(t.data)?t.data.map((t=>({...t,tooltip:!1}))):[],x.total=l(t.page))}finally{M(!1)}};return"domain"===u.type&&k.value.push({key:"status",title:d("Public.Table.Status"),width:100,ellipsis:{tooltip:!0},render:t=>t.status}),"status"===u.type&&k.value.unshift({key:"domain",title:d("Mail.Mass.index_45"),width:120,ellipsis:{tooltip:!0},render:t=>t.domain}),z(),(t,s)=>{const i=e,l=m,o=a;return f(),w("div",S,[g(o,null,{table:h((()=>[g(i,{loading:b(_),data:b(x).data,columns:b(k),"row-props":P},null,8,["loading","data","columns"])])),pageRight:h((()=>[g(l,{page:b(u).page,"onUpdate:page":s[0]||(s[0]=t=>b(u).page=t),"page-size":b(u).size,"onUpdate:pageSize":s[1]||(s[1]=t=>b(u).size=t),"item-count":b(x).total,onRefresh:z},null,8,["page","page-size","item-count"])])),_:1})])}}}),D={class:"p-20px"},L=_({__name:"index",props:{row:{}},setup(s){const l=s,{t:r}=c(),m=y({task_id:l.row.id,type:"domain"}),{loading:_,setLoading:j}=o(),{table:S,columns:L}=n([{key:"domain",title:()=>g(M,null,["domain"===m.type?r("Mail.Mass.index_45"):r("Public.Table.Status")]),render:t=>"domain"===m.type?t.domain:t.status},{key:"count",title:r("Mail.Mass.index_46")},p({width:120,options:t=>[{label:r("Public.Btn.Details"),onClick:()=>{T(t)}}]})]),R=d(""),T=t=>{R.data.id=l.row.id,R.data.type=m.type,R.data.row=t,R.title=r("Mail.Mass.index_49",["domain"===m.type?t.domain:t.status]),R.show=!0},B=async()=>{try{j(!0);const{message:t}=await u(v(m));S.data=i(t)?t:[]}finally{j(!1)}};return B(),(s,i)=>{const l=P,o=z,n=e,p=a,d=t;return f(),w("div",D,[g(p,null,{toolsLeft:h((()=>[g(o,{value:b(m).type,"onUpdate:value":[i[0]||(i[0]=t=>b(m).type=t),B]},{default:h((()=>[g(l,{value:"domain"},{default:h((()=>[x(k(s.$t("Mail.Mass.index_45")),1)])),_:1}),g(l,{value:"status"},{default:h((()=>[x(k(s.$t("Public.Table.Status")),1)])),_:1})])),_:1},8,["value"])])),table:h((()=>[g(n,{"max-height":340,loading:b(_),data:b(S).data,columns:b(L)},null,8,["loading","data","columns"])])),_:1}),g(d,{show:b(R).show,"onUpdate:show":i[1]||(i[1]=t=>b(R).show=t),title:b(R).title,data:b(R).data,width:980,"min-height":152,component:U},null,8,["show","title","data"])])}}});export{L as default};
