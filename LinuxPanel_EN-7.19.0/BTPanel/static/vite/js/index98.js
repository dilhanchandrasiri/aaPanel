import{d as e,r as t,O as o,X as n,R as a,W as s,M as p,c as l,i,V as c,P as r,Q as u,Z as d,F as x,L as m}from"./vue.js?v=1732601582185";import{X as v,G as f,cc as C,cd as b,k as _}from"./page_layout.js?v=1732601582185";import{a as y}from"./public.js?v=1732601582185";import{bK as w,bL as h}from"./naive.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./common.js?v=1732601582185";function j(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!i(e)}const g=e({__name:"time",props:{endtime:{default:0}},setup(e){const i=e,c=t(0),r=e=>e.toString().padStart(2,"0"),u=({hours:e,minutes:t,seconds:o})=>{let n,a,i;const{t:c}=s();return p("div",{class:"flex justify-center items-center text-default text-16px"},[p("span",null,[c("Component.Coupon.index_10")]),p(w,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},j(n=r(e))?n:{default:()=>[n]}),p("span",null,[l(":")]),p(w,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},j(a=r(t))?a:{default:()=>[a]}),p("span",null,[l(":")]),p(w,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},j(i=r(o))?i:{default:()=>[i]})])};return c.value=1e3*i.endtime-Math.floor(Date.now()),(e,t)=>{const s=v;return o(),n(s,{duration:a(c),render:u},null,8,["duration"])}}}),D={class:"coupon-box"},k={class:"pt-24px bg-#fff rounded-4px"},$={class:"px-36px"},L={class:"text-20px text-[#FFB04C]"},S={class:"coupon-list"},M={class:"decoration"},z={class:"coupon-amount"},F={class:"coupon-price"},O={class:"text-34px"},P={class:"coupon-info"},R={class:"coupon-name"},T={class:"coupon-time"},U={class:"text-error text-20px"},X={class:"pt-14px px-36px pb-10px"},B={class:"mt-24px text-center"},G={class:"w-200px mt-10px mx-auto"},H=_(e({__name:"index",props:{couponList:{default:()=>[]}},emits:["close","receive"],setup(e,{emit:n}){const{t:l}=s(),i=n,v=f(),{receiveCoupon:_}=c(v),w=e=>Math.floor(e/86400),j=t(null),H=[{label:l("Component.Coupon.index_6"),value:"today"},{label:l("Component.Coupon.index_7"),value:"week"},{label:l("Component.Coupon.index_8"),value:"forver"}],I=async()=>{await C({obtain_id:"".concat(_.value.obtain_id)}),v.getReceiveCoupon(),i("close"),i("receive")},K=(e,t)=>{y({title:l("Public.Confirm.Title"),content:"".concat(l("Component.Coupon.index_9",[t.label])),onConfirm:async()=>{let t=0;switch(e){case"today":t=new Date((new Date).toLocaleDateString()).getTime()+864e5-1;break;case"week":t=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;break;case"forver":t=-100}t=Math.floor(t>0?t/1e3:t),await b({limit_time:t}),v.getReceiveCoupon(),i("close")}})};return(e,t)=>{const n=h;return o(),r("div",D,[u("div",k,[u("div",$,[u("div",L,d(e.$t("Component.Coupon.index_1")),1),u("div",S,[(o(!0),r(x,null,m(e.couponList,((n,a)=>(o(),r("div",{key:"".concat(a),class:"coupon-item"},[u("div",M,d(e.$t("Component.Coupon.index_2")),1),u("div",z,[u("div",F,[t[0]||(t[0]=u("span",{class:"text-20px mr-4px"},"$",-1)),u("span",O,d(n.deduct_amount),1)])]),u("div",P,[u("div",R,d(n.title),1),u("div",T,[u("span",null,d(e.$t("Component.Coupon.index_3")),1),u("span",U,d(w(n.expires)),1),u("span",null,d(e.$t("Public.Unit.Day",w(n.expires))),1)])])])))),128))])])]),u("div",X,[u("div",B,[p(g,{endtime:a(_).end_time},null,8,["endtime"])]),u("div",{class:"coupon-btn",onClick:I},d(e.$t("Component.Coupon.index_5")),1),u("div",G,[p(n,{value:a(j),options:H,"consistent-menu-width":!1,placeholder:e.$t("Component.Coupon.index_13"),"onUpdate:value":K},null,8,["value","placeholder"])])])])}}}),[["__scopeId","data-v-e427219c"]]);export{H as default};
