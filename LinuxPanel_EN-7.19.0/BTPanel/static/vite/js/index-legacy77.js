System.register(["./page_layout-legacy.js?v=1732601582185","./index-legacy121.js?v=1732601582185","./index-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1732601582185","./index-legacy119.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./site-legacy4.js?v=1732601582185","./public-legacy.js?v=1732601582185","./site-legacy.js?v=1732601582185","./utils-legacy3.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1732601582185","./php-legacy.js?v=1732601582185","./useModal-legacy2.js?v=1732601582185"],(function(e,t){"use strict";var a,n,i,l,o,d,s,r,c,u,p,h,_,m,y,w,g,v,P,x,f,k,b,S,H,j,C,$,B,U,O,W,R,M,I,D,L,z,K,V,T,E,Y,q,J,N,Q,X,Z,A,F,G,ee,te,ae,ne,ie,le,oe,de,se,re,ce,ue,pe,he,_e,me,ye,we;return{setters:[e=>{a=e.j,n=e.bk,i=e.k,l=e.i,o=e.c,d=e.s,s=e.f,r=e.I,c=e.bd,u=e.a4},e=>{p=e._},e=>{h=e._},e=>{_=e._},e=>{m=e._},e=>{y=e._},e=>{w=e._},e=>{g=e._},e=>{v=e._},e=>{P=e.d,x=e.t,f=e.r,k=e.e,b=e.O,S=e.X,H=e.Y,j=e.M,C=e.c,$=e.Z,B=e.R,U=e.Q,O=e.ac,W=e.a6,R=e.af,M=e.W,I=e.i,D=e.aa,L=e.P,z=e.V,K=e.j,V=e.w,T=e.ak,E=e.n,Y=e.ao},e=>{q=e.l},e=>{J=e.u,N=e._,Q=e.b,X=e.h,Z=e.d,A=e.a,F=e.k,G=e.l,ee=e.f,te=e.n},e=>{ae=e.s,ne=e.c,ie=e.d,le=e.e,oe=e.f,de=e.h},e=>{se=e.o,re=e.a},e=>{ce=e.bm,ue=e.aa,pe=e.bU,he=e.bL,_e=e.bJ},e=>{me=e.Y,ye=e.j,we=e.c},null,null,null,null],execute:function(){var ge=document.createElement("style");ge.textContent=".n-date-panel[data-v-0f7e7fa2]{margin:0}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-calendar{padding:6px 0 12px}.n-date-panel[data-v-0f7e7fa2] .n-date-panel--month .n-date-panel-footer{display:none}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-footer{padding:12px 0 6px}\n",document.head.appendChild(ge);const ve={class:"flex justify-end"},Pe=i(P({__name:"index",props:{row:{}},setup(e){const t=x(e,"row"),i=f(null),l=f(null),o=new Date;o.setHours(0,0,0,0);const d=k((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&me(e,o)})),s=k((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&me(e,ye(o,7))})),r=e=>me(e,ye(o,1)),c=()=>{i.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},u=async()=>{await ae({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",l.value?.setShow(!1)},p=async()=>{if(null===i.value)return;const e=we(i.value,"yyyy-MM-dd");await ae({id:t.value.id,edate:e}),t.value.edate=e,l.value?.setShow(!1)};return(e,o)=>{const h=a,_=ue,m=pe,y=n,w=ce;return b(),S(w,{ref_key:"popoverRef",ref:l,placement:"bottom",trigger:"click"},{trigger:H((()=>[j(h,{type:B(d)?"error":B(s)?"warning":"primary",onClick:c},{default:H((()=>[C($("0000-00-00"===B(t).edate?e.$t("Site.PHP.index_34"):B(d)?e.$t("Site.PHP.index_28"):B(t).edate),1)])),_:1},8,["type"])])),default:H((()=>[j(y,{value:B(i),"onUpdate:value":o[0]||(o[0]=e=>O(i)?i.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":r},{footer:H((()=>[U("div",ve,[j(m,{size:"small"},{default:H((()=>[j(_,{onClick:u},{default:H((()=>[C($(e.$t("Site.PHP.index_34")),1)])),_:1}),j(_,{disabled:null===B(i),onClick:p},{default:H((()=>[C($(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:xe}=l.global;function fe(e){J({title:1===e.length?`${xe("Site.Cert.index_56")} [${e[0].name}]`:`${xe("Site.Cert.index_57")}`,width:480,minHeight:248,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./index-legacy203.js?v=1732601582185")),void 0)))})}const ke=P({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=R();return{goPath:()=>{d("Path",e.path),t.push("/files")}}},render(){return j("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}}),be=({row:e})=>j("a",{href:"javascript:;",class:"bt-link"},[e.name]),Se=({row:e})=>j(N,{value:e.status},null),He=({row:e})=>{const{t:n}=M();return j(a,{type:e.backup_count>0?"primary":"warning",onClick:()=>{J({title:n("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:W((()=>o((()=>t.import("./index-legacy204.js?v=1732601582185")),void 0)))})}},{default:()=>[e.backup_count>0?n("Site.PHP.index_31",[e.backup_count]):n("Site.PHP.index_32")]})},je=({row:e})=>j(ke,{path:e.path},null),Ce=({row:e})=>j(a,null,{default:()=>[e.php_version]}),$e=({row:e})=>{let t;const{t:n}=M(),{ssl:i}=e;return s(i)?j(a,{type:i.endtime<0?"error":"primary"},{default:()=>[i.endtime<0?n("Site.PHP.index_28"):n("Site.PHP.index_29",[i.endtime])]}):j(a,{type:"warning"},"function"==typeof(l=t=n("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(l)&&!I(l)?t:{default:()=>[t]});var l},Be=({row:e})=>j(a,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Ue={class:"w-160px"},Oe=P({__name:"index",props:{value:{default:null}},setup(e){const{t:a}=M(),n=W((()=>o((()=>t.import("./set-legacy3.js?v=1732601582185")),void 0))),i=D(e,"value"),{loading:l,setLoading:d}=Q(),s=f([]),c=e=>{sessionStorage.setItem("typeValue",e)},u=X(a("Site.PHP.index_44"),{setOptions:(e,t)=>{t===i.value&&(i.value=-1),s.value=e.map((e=>({label:e.name,value:e.id}))),_()}}),p=()=>{u.show=!0},_=()=>{s.value.unshift({label:a("Site.PHP.index_45"),value:-1})};return _(),(async()=>{try{d(!0);const{message:e}=await ne();r(e)?s.value=e.map((e=>({label:e.name,value:e.id}))):s.value=[],_()}finally{d(!1);const e=sessionStorage.getItem("typeValue");i.value=e?Number(e):-1}})(),(e,t)=>{const a=ue,o=he,d=h;return b(),L("div",Ue,[j(o,{value:B(i),"onUpdate:value":t[0]||(t[0]=e=>O(i)?i.value=e:null),loading:B(l),options:B(s),onUpdateValue:c},{action:H((()=>[j(a,{block:"",onClick:p},{default:H((()=>[C($(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),j(d,{show:B(u).show,"onUpdate:show":t[1]||(t[1]=e=>B(u).show=e),width:350,title:B(u).title,data:B(u).data,component:B(n)},null,8,["show","title","data","component"])])}}});e("default",P({__name:"index",setup(e){const n=W((()=>o((()=>t.import("./index-legacy205.js?v=1732601582185")),void 0))),i=W((()=>o((()=>t.import("./index-legacy206.js?v=1732601582185")),void 0))),l=W((()=>o((()=>t.import("./index-legacy207.js?v=1732601582185")),void 0))),d=W((()=>o((()=>t.import("./index-legacy208.js?v=1732601582185")),void 0))),P=W((()=>o((()=>t.import("./index-legacy209.js?v=1732601582185").then((e=>e.i))),void 0))),{t:x}=M(),k=c(),{web:R,webserver:I}=z(k),D=f(!1),L=X(x("Site.PHP.index_9")),N=()=>{L.show=!0},ae=X(x("Site.PHP.index_10")),ne=()=>{ae.show=!0},ce=X(x("Site.PHP.index_11")),pe=()=>{ce.show=!0},he=X(x("Site.PHP.index_12")),me=()=>{he.show=!0},ye=K({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),we=(e,t={})=>{ye.title=x("Site.PHP.index_13",[e.name,e.addtime]),ye.data.siteInfo=e,ye.data.config=Object.assign({menu:"",subMenu:""},t),ye.show=!0},{keys:ge,table:ve,columns:xe}=Z([{type:"selection",width:40},{key:"name",title:x("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>j(be,{row:e,onClick:()=>{we(e)}},null)},{key:"status",title:x("Public.Table.Status"),width:"8%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>j(Se,{row:e,onClick:t=>{A({title:`${x("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")} ${x("Site.PHP.index_21_1",[e.name])}`,content:x("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await ie("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:x("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>j(He,{row:e},null)},{key:"path",title:x("Site.PHP.index_20"),minWidth:130,ellipsis:{tooltip:!0},render:e=>j(je,{row:e},null)},F({type:"site",width:"6%",minWidth:70,callback:()=>{Ie()}}),{key:"edate",title:x("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>j(Pe,{row:e},null)},G({width:"8%",onBlur:async(e,t)=>{await de({id:t.id,ps:e})}}),{key:"php_version",title:x("Site.PHP.index_26"),width:70,render:e=>j(Ce,{row:e,onClick:()=>{we(e,{menu:"php"})}},null)},{key:"site_ssl",title:x("Site.PHP.index_27"),width:"9%",minWidth:110,sorter:!0,sortOrder:!1,render:e=>j($e,{row:e,onClick:()=>{we(e,{menu:"ssl"})}},null)},{key:"attack",title:x("Site.PHP.index_24"),width:"6%",minWidth:60,render:e=>j(Be,{row:e,onClick:()=>{we(e,{menu:"logs",subMenu:"security"})}},null)},ee({title:x("Public.Table.Operation"),minWidth:160,maxWidth:200,options:e=>[{label:x("Site.PHP.index_14"),onClick:()=>{se()}},{label:x("Site.PHP.index_15"),show:"nginx"===k.webserver||"apache"===k.webserver,onClick:async()=>{re(e)}},{label:x("Site.PHP.index_16"),onClick:()=>{we(e)}},{label:x("Public.Btn.Del"),onClick:()=>{fe([e])}}]})]),ke=e=>{xe.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?We.order=`${e.columnKey} ${"descend"===e.order?"desc":"asc"}`:We.order="",Ie()},Ue=[{key:"enable",type:"confirm",label:x("Site.Batch.index_1"),confirm:{title:x("Site.Batch.index_2"),desc:x("Site.Batch.index_3"),columns:[xe.value[1]],api:e=>ie(!0,{id:e.id,name:e.name},!1),done:()=>{Ie()}}},{key:"disable",type:"confirm",label:x("Site.Batch.index_4"),confirm:{title:x("Site.Batch.index_5"),desc:x("Site.Batch.index_6"),columns:[xe.value[1]],api:e=>ie(!1,{id:e.id,name:e.name},!1),done:()=>{Ie()}}},{key:"backup",type:"confirm",label:x("Site.Batch.index_7"),confirm:{title:x("Site.Batch.index_8"),desc:x("Site.Batch.index_9"),columns:[xe.value[1]],api:e=>le({id:e.id},!1),done:()=>{Ie()}}},{key:"expired",label:x("Site.PHP.index_70"),onBatch:e=>{J({title:x("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./batch-legacy2.js?v=1732601582185")),void 0)))})}},{key:"php",label:x("Site.PHP.index_66"),onBatch:e=>{J({title:x("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./batch-legacy3.js?v=1732601582185")),void 0)))})}},{key:"category",label:x("Crontab.Planned.index_19"),onBatch:e=>{J({title:x("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./batch-legacy4.js?v=1732601582185")),void 0)))})}},{key:"delete",label:x("Site.Batch.index_10"),onBatch:e=>{fe(e)}}],We=K({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Re,setLoading:Me}=Q(!0),Ie=async()=>{try{Me(!0);const e={...T(We)},{message:t}=await oe(e);s(t)?(ve.data=r(t.data)?t.data:[],ve.total=u(t.page)):(ve.data=[],ve.total=0)}finally{ge.value=[],Me(!1)}};return V((()=>k.isRefresh),(e=>{e&&(k.setRefresh(!1),Ie())})),(async()=>{try{await k.getConfig(),Me(!1),await E(),Me(!0),k.web.setup?(D.value=!0,Ie()):(D.value=!1,Me(!1),q())}catch{Me(!1)}})(),(e,t)=>{const o=a,s=ue,r=v,c=g,u=w,x=y,f=m,k=_,W=h,M=p,z=_e;return b(),S(z,null,{default:H((()=>[j(M,{install:B(R).setup},{desc:H((()=>[U("span",null,$(e.$t("Site.PHP.index_1")),1),j(o,{class:"ml-4px",onClick:t[0]||(t[0]=e=>B(te)("nginx"))},{default:H((()=>[C($(e.$t("Site.PHP.index_2")),1)])),_:1}),t[13]||(t[13]=U("span",{class:"mx-4px"},"|",-1)),j(o,{onClick:t[1]||(t[1]=e=>B(te)("apache"))},{default:H((()=>[C($(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:H((()=>[j(k,{class:"p-16px",feedback:!0},{toolsLeft:H((()=>[j(s,{type:"primary",class:"add-site-btn",onClick:N},{default:H((()=>[C($(e.$t("Site.PHP.index_4")),1)])),_:1}),j(s,{onClick:ne},{default:H((()=>[C($(e.$t("Site.PHP.index_5")),1)])),_:1}),j(s,{class:"default-site-btn",onClick:pe},{default:H((()=>[C($(e.$t("Site.PHP.index_6")),1)])),_:1}),j(s,{class:"php-version-btn",onClick:me},{default:H((()=>[C($(e.$t("Site.PHP.index_7")),1)])),_:1}),B(D)?(b(),S(r,{key:0,"soft-name":B(I)},null,8,["soft-name"])):Y("",!0)])),toolsRight:H((()=>[j(Oe,{value:B(We).type,"onUpdate:value":[t[2]||(t[2]=e=>B(We).type=e),Ie]},null,8,["value"]),j(c,{value:B(We).search,"onUpdate:value":t[3]||(t[3]=e=>B(We).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:Ie},null,8,["value","placeholder"])])),table:H((()=>[j(u,{"checked-row-keys":B(ge),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>O(ge)?ge.value=e:null),loading:B(Re),data:B(ve).data,columns:B(xe),"onUpdate:sorter":ke},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:H((()=>[j(x,{"checked-row-keys":B(ge),"onUpdate:checkedRowKeys":t[5]||(t[5]=e=>O(ge)?ge.value=e:null),data:B(ve).data,options:Ue},null,8,["checked-row-keys","data"])])),pageRight:H((()=>[j(f,{page:B(We).p,"onUpdate:page":t[6]||(t[6]=e=>B(We).p=e),"page-size":B(We).limit,"onUpdate:pageSize":t[7]||(t[7]=e=>B(We).limit=e),"item-count":B(ve).total,"store-key":"site-php-page",onRefresh:Ie},null,8,["page","page-size","item-count"])])),_:1}),j(W,{show:B(L).show,"onUpdate:show":t[8]||(t[8]=e=>B(L).show=e),title:B(L).title,width:640,height:540,footer:!0,component:B(n)},null,8,["show","title","component"]),j(W,{show:B(ae).show,"onUpdate:show":t[9]||(t[9]=e=>B(ae).show=e),title:B(ae).title,width:820,"min-height":608,component:B(i)},null,8,["show","title","component"]),j(W,{show:B(ce).show,"onUpdate:show":t[10]||(t[10]=e=>B(ce).show=e),title:B(ce).title,width:560,footer:!0,component:B(l)},null,8,["show","title","component"]),j(W,{show:B(he).show,"onUpdate:show":t[11]||(t[11]=e=>B(he).show=e),title:B(he).title,width:560,"min-height":148,footer:!0,component:B(d)},null,8,["show","title","component"]),j(W,{show:B(ye).show,"onUpdate:show":t[12]||(t[12]=e=>B(ye).show=e),title:B(ye).title,data:B(ye).data,width:860,height:700,component:B(P)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}))}}}));
