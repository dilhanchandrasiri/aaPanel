const __vite__fileDeps=["js/index121.js?v=1723125373998","js/index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998","js/vue.js?v=1723125373998","js/index.js?v=1723125373998","js/pinia.js?v=1723125373998","css/index42.css?v=1723125373998","js/mail.js?v=1723125373998","js/data.js?v=1723125373998","js/Select.js?v=1723125373998","js/Tag.js?v=1723125373998","js/Empty.js?v=1723125373998","js/Switch.js?v=1723125373998"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{n as t,aw as a,g as e,N as s,h as i,j as o,k as n,m as l,r,B as c,q as d,v as m}from"./index.js?v=1723125373998";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import{u as _,_ as h}from"./useTableData.js?v=1723125373998";import{ao as g,l as b,ad as w,f,P as y,q as v,S as j,U as k,V as x,ae as P,t as C,W as M,a1 as A}from"./vue.js?v=1723125373998";import{f as E,b as S}from"./useTableColumns.js?v=1723125373998";import{e as z,l as T,b as U,c as W,h as q}from"./mail.js?v=1723125373998";import{_ as D}from"./Switch.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Checkbox.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./Progress.js?v=1723125373998";const V=b({__name:"index",setup(b){const V=A((()=>m((()=>import("./index121.js?v=1723125373998")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])))),{t:R}=w(),B=P(),L=f({p:1,size:10}),I=e("Add Mailbox",{isEdit:!1,row:void 0,onRefresh:()=>{Y()}}),O=()=>{I.data.isEdit=!1,I.data.row=void 0,I.title="Add Mailbox",I.show=!0},G=()=>{window.open("".concat(X.ssl_status?"https":"http","://").concat(X.site_name))},{table:N,columns:Q}=_([{key:"username",title:"Username",ellipsis:{tooltip:!0}},E({width:160}),{key:"info",title:"Login info",width:180,render:t=>y("a",{class:"bt-link",href:"javascript:;",onClick:()=>{F(t)}},[v("Copy")])},{key:"quota",title:"Quota",render:t=>s(t.quota)},{key:"is_admin",title:"Type",render:t=>1===t.is_admin?"Admin":"General user"},{key:"active",title:"Active",render:t=>y(D,{value:t.active,size:"small",checkedValue:1,uncheckedValue:0,onUpdateValue:async a=>{await z({username:t.username,full_name:t.full_name,quota:s(t.quota),active:a,is_admin:t.is_admin}),t.active=a}},null)},S({width:150,options:t=>[{label:"WebMail",onClick:()=>{if(X.status)H(t);else{const{hide:t}=i({title:"WebMail is not activated",content:()=>y("div",null,[v('WebMail is not activated yet. Please go to "'),y("a",{class:"bt-link",href:"javascript:;",onClick:()=>{B.push("/mail/setting"),t()}},[v("Mail Server > Setting")]),v('" to activate and install it')]),onConfirm:()=>{B.push("/mail/setting")}})}}},{label:R("Public.Btn.Edit"),onClick:()=>{J(t)}},{label:R("Public.Btn.Del"),onClick:()=>{K(t)}}]})]),F=e=>{(async e=>{const{copy:s,isSupported:i}=g({legacy:!0});i.value?(s(e),t.success(a.global.t("Public.Components.index_4"))):t.error(a.global.t("Public.Components.index_5"))})("WebMail: ".concat(X.ssl_status?"https":"http","://").concat(X.site_name,"\nUsername: ").concat(e.username,"\nPassword: ").concat(e.password,"\nPOP service [ Address：").concat(e.mx," Port：110/995 ]\nIMAP service [ Address：").concat(e.mx," Port：143/993 ]\nSMTP service [ Address：").concat(e.mx," Port：25/465/587 ]\n"))},H=async t=>{const{message:a}=await T({rc_user:t.username,rc_pass:t.password});o(a)&&window.open("".concat(X.ssl_status?"https":"http","://").concat(a.result))},J=t=>{I.data.isEdit=!0,I.data.row=t,I.title="Edit Mailbox",I.show=!0},K=async t=>{i({title:"Delete mailbox",content:"Whether to delete the [".concat(t.username,"] member?"),onConfirm:async()=>{await U({username:t.username}),Y()}})},X=f({id:0,site_name:"",status:!1,ssl_status:!1}),Y=async()=>{try{N.loading=!0;const{message:t}=await W(C(L));o(t)&&(N.data=n(t.data)?t.data:[],N.total=l(t.page))}finally{N.loading=!1}};return(async()=>{try{N.loading=!0,await(async()=>{const{message:t}=await q();o(t)&&(X.id=t.id,X.status=t.status,X.site_name=t.site_name,X.ssl_status=t.ssl_status)})(),await Y()}finally{N.loading=!1}})(),(t,a)=>{const e=c,s=h,i=u,o=p,n=d,l=r;return j(),k(l,{class:"p-16px"},{default:x((()=>[y(o,null,{toolsLeft:x((()=>[y(e,{type:"primary",onClick:O},{default:x((()=>[v("Add Mailbox")])),_:1}),y(e,{onClick:G},{default:x((()=>[v("WebMail")])),_:1})])),table:x((()=>[y(s,{loading:M(N).loading,data:M(N).data,columns:M(Q)},null,8,["loading","data","columns"])])),pageRight:x((()=>[y(i,{page:M(L).p,"onUpdate:page":a[0]||(a[0]=t=>M(L).p=t),"page-size":M(L).size,"onUpdate:pageSize":a[1]||(a[1]=t=>M(L).size=t),"item-count":M(N).total,onRefresh:Y},null,8,["page","page-size","item-count"])])),_:1}),y(n,{show:M(I).show,"onUpdate:show":a[2]||(a[2]=t=>M(I).show=t),title:M(I).title,data:M(I).data,width:480,"min-height":236,footer:!0,component:M(V)},null,8,["show","title","data","component"])])),_:1})}}});export{V as default};
