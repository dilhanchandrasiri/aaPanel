import{_ as a}from"./index171.js?v=1732601582185";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{m as t,f as s,_ as l,k as n}from"./page_layout.js?v=1732601582185";import{n as i,b as o,m as r}from"./planned.js?v=1732601582185";import{b as d,a as c}from"./public.js?v=1732601582185";import{aV as u,aa as m,bo as p,bG as _,bl as f,bM as v,bN as b,bm as g,bU as x,bh as y}from"./naive.js?v=1732601582185";import{d as C,W as j,j as w,r as P,n as k,G as I,O as h,P as S,M as N,Y as $,R as O,X as J,Q as L,Z as U,ao as G,c as M}from"./vue.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";const R={class:"p-20px h-500px"},W={class:"color-#20a53a"},A=n(C({__name:"index",props:{data:{}},setup(n){const{t:C}=j(),A=w({active:!1,time:3}),D=n,{id:E,getList:F}=D.data,H={time:{trigger:["blur","input"],validator:(a,e)=>e<3?(q(),new Error(C("Crontab.Planned.index_91"))):(V&&(Y.value=e,X.value=100,q()),Z(),!0)}},Q=()=>{c({title:C("Public.Confirm.Title"),content:C("Crontab.Planned.index_26"),onConfirm:async()=>{await i({id:E}),ea()}})},T=a=>{a?(V&&q(),Z(),t.success(C("Crontab.Planned.index_92"))):(q(),sessionStorage.setItem("timer".concat(E),JSON.stringify({...A,id:E})),t.success(C("Crontab.Planned.index_93")))};let V;const X=P(100),Y=P(A.time),Z=()=>{V=setInterval((()=>{X.value-=100/A.time,Y.value-=1,X.value<=0&&(X.value=100,Y.value=A.time,ea())}),1e3),sessionStorage.setItem("timer".concat(E),JSON.stringify({...A,id:E}))},q=()=>{clearInterval(V),V=void 0},z=async()=>{await o({id:E}),null==F||F()},{loading:B,setLoading:K}=d(),aa=P("None"),ea=async()=>{K(!0);const{message:a}=await r({id:E});s(a)&&(aa.value=a.result?a.result:"None"),K(!1)};return ea(),k((()=>{const a=sessionStorage.getItem("timer".concat(E));if(a){const e=JSON.parse(a);A.time=e.time,Y.value=e.time,A.active=e.active,Z()}})),I((()=>{q()})),(t,s)=>{const n=u,i=m,o=l,r=p,d=_,c=f,C=v,j=b,w=e,P=g,k=x,I=y,D=a;return h(),S("div",R,[N(I,{class:"mb-10px"},{default:$((()=>[N(k,null,{default:$((()=>[N(i,{class:"refresh-logs-btn",onClick:ea},{default:$((()=>[O(A).active?(h(),J(n,{key:0,type:"circle",percentage:O(X),unit:""},{default:$((()=>[L("span",W,U(O(Y)),1)])),_:1},8,["percentage"])):G("",!0),M(" "+U(t.$t("Ftp.Analysis.Index_32")),1)])),_:1}),N(P,{trigger:"click",placement:"bottom",class:"min-w-250px"},{trigger:$((()=>[N(i,null,{default:$((()=>[N(o,{name:"down"})])),_:1})])),default:$((()=>[N(w,{ref:"formRef",model:O(A),rules:H,"label-width":"120px"},{default:$((()=>[N(d,{label:t.$t("Crontab.Planned.index_89")},{default:$((()=>[N(r,{value:O(A).active,"onUpdate:value":[s[0]||(s[0]=a=>O(A).active=a),T]},null,8,["value"])])),_:1},8,["label"]),O(A).active?(h(),J(d,{key:0,label:t.$t("Crontab.Planned.index_90"),path:"time"},{default:$((()=>[N(j,null,{default:$((()=>[N(c,{class:"w-50px!",value:O(A).time,"onUpdate:value":s[1]||(s[1]=a=>O(A).time=a),"show-button":!1,placeholder:""},null,8,["value"]),N(C,null,{default:$((()=>[M(U(t.$t("Waf.Setting.config_53")),1)])),_:1})])),_:1})])),_:1},8,["label"])):G("",!0)])),_:1},8,["model"])])),_:1})])),_:1}),N(i,{class:"empty-logs-btn",onClick:Q},{default:$((()=>[M(U(t.$t("Crontab.Planned.index_25")),1)])),_:1}),N(i,{onClick:z},{default:$((()=>[M(U(t.$t("Docker.LocalImage.pull.index_12")),1)])),_:1})])),_:1}),N(D,{loading:O(B),log:O(aa)},null,8,["loading","log"])])}}}),[["__scopeId","data-v-a8de5712"]]);export{A as default};
