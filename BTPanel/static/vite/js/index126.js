import{_ as t,c as e,G as i,a,S as n,e as o,l as s,u as r,s as l,i as u,g as h,n as p,Z as c,b as d,d as m,f as g,t as y,h as f,r as v,j as b,k as S,m as _,o as x,p as I,q as w,v as D,w as M,P as A,x as N,y as P,z as k,A as L,B as O,C,D as T,E as z,F as E,H as G,I as V,J as R,K as X,L as Y,M as F,N as H,O as B,Q as W,R as U,T as j,U as Z,V as q,W as J,X as K,Y as $,$ as Q,a0 as tt,a1 as et,a2 as it,a3 as at,a4 as nt,a5 as ot,a6 as st,a7 as rt}from"./installCanvasRenderer.js?v=1723125373998";import{b7 as lt}from"./index.js?v=1723125373998";import{l as ut,r as ht,w as pt,n as ct,az as dt,x as mt,y as gt,S as yt,Z as ft,$ as vt,W as bt}from"./vue.js?v=1723125373998";import"./pinia.js?v=1723125373998";var St=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.type=o.type,t.hasSymbolVisual=!0,t}return t(o,n),o.prototype.getInitialData=function(t){return e(null,this,{useEncodeDefaulter:!0})},o.prototype.getLegendIcon=function(t){var e=new i,n=a("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(n),n.setStyle(t.lineStyle);var o=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),r="none"===o?"circle":o,l=.8*t.itemHeight,u=a(r,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(u),u.setStyle(t.itemStyle);var h="inherit"===t.iconRotate?s:t.iconRotate||0;return u.rotation=h*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),r.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),e},o.type="series.line",o.dependencies=["grid","polar"],o.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},o}(n),_t=function(e){function i(t,i,a,n){var o=e.call(this)||this;return o.updateData(t,i,a,n),o}return t(i,e),i.prototype._createSymbol=function(t,e,i,n,o){this.removeAll();var s=a(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),s.drift=xt,this._symbolType=t,this.add(s)},i.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},i.prototype.getSymbolType=function(){return this._symbolType},i.prototype.getSymbolPath=function(){return this.childAt(0)},i.prototype.highlight=function(){o(this.childAt(0))},i.prototype.downplay=function(){s(this.childAt(0))},i.prototype.setZ=function(t,e){var i=this.childAt(0);i.zlevel=t,i.z=e},i.prototype.setDraggable=function(t,e){var i=this.childAt(0);i.draggable=t,i.cursor=!e&&t?"move":i.cursor},i.prototype.updateData=function(t,e,a,n){this.silent=!1;var o=t.getItemVisual(e,"symbol")||"circle",s=t.hostModel,h=i.getSymbolSize(t,e),p=o!==this._symbolType,c=n&&n.disableAnimation;if(p){var d=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(o,t,e,h,d)}else{(g=this.childAt(0)).silent=!1;var m={scaleX:h[0]/2,scaleY:h[1]/2};c?g.attr(m):r(g,m,s,e),l(g)}if(this._updateCommon(t,e,h,a,n),p){var g=this.childAt(0);if(!c){m={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:g.style.opacity}};g.scaleX=g.scaleY=0,g.style.opacity=0,u(g,m,s,e)}}c&&this.childAt(0).stopAnimation("leave")},i.prototype._updateCommon=function(t,e,i,a,n){var o,s,r,l,u,f,v,b,S,_=this.childAt(0),x=t.hostModel;if(a&&(o=a.emphasisItemStyle,s=a.blurItemStyle,r=a.selectItemStyle,l=a.focus,u=a.blurScope,v=a.labelStatesModels,b=a.hoverScale,S=a.cursorStyle,f=a.emphasisDisabled),!a||t.hasItemOption){var I=a&&a.itemModel?a.itemModel:t.getItemModel(e),w=I.getModel("emphasis");o=w.getModel("itemStyle").getItemStyle(),r=I.getModel(["select","itemStyle"]).getItemStyle(),s=I.getModel(["blur","itemStyle"]).getItemStyle(),l=w.get("focus"),u=w.get("blurScope"),f=w.get("disabled"),v=h(I),b=w.getShallow("scale"),S=I.getShallow("cursor")}var D=t.getItemVisual(e,"symbolRotate");_.attr("rotation",(D||0)*Math.PI/180||0);var M=p(t.getItemVisual(e,"symbolOffset"),i);M&&(_.x=M[0],_.y=M[1]),S&&_.attr("cursor",S);var A=t.getItemVisual(e,"style"),N=A.fill;if(_ instanceof c){var P=_.style;_.useStyle(d({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},A))}else _.__isEmptyBrush?_.useStyle(d({},A)):_.useStyle(A),_.style.decal=null,_.setColor(N,n&&n.symbolInnerColor),_.style.strokeNoScale=!0;var k=t.getItemVisual(e,"liftZ"),L=this._z2;null!=k?null==L&&(this._z2=_.z2,_.z2+=k):null!=L&&(_.z2=L,this._z2=null);var O=n&&n.useNameLabel;m(_,v,{labelFetcher:x,labelDataIndex:e,defaultText:function(e){return O?t.getName(e):g(t,e)},inheritColor:N,defaultOpacity:A.opacity}),this._sizeX=i[0]/2,this._sizeY=i[1]/2;var C=_.ensureState("emphasis");C.style=o,_.ensureState("select").style=r,_.ensureState("blur").style=s;var T=null==b||!0===b?Math.max(1.1,3/this._sizeY):isFinite(b)&&b>0?+b:1;C.scaleX=this._sizeX*T,C.scaleY=this._sizeY*T,this.setSymbolScale(1),y(this,l,u,f)},i.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},i.prototype.fadeOut=function(t,e,i){var a=this.childAt(0),n=f(this).dataIndex,o=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var s=a.getTextContent();s&&v(s,{style:{opacity:0}},e,{dataIndex:n,removeOpt:o,cb:function(){a.removeTextContent()}})}else a.removeTextContent();v(a,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:n,cb:t,removeOpt:o})},i.getSymbolSize=function(t,e){return b(t.getItemVisual(e,"symbolSize"))},i}(i);function xt(t,e){this.parent.drift(t,e)}function It(t,e,i,a){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(a.isIgnore&&a.isIgnore(i))&&!(a.clipShape&&!a.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(i,"symbol")}function wt(t){return null==t||_(t)||(t={isIgnore:t}),t||{}}function Dt(t){var e=t.hostModel,i=e.getModel("emphasis");return{emphasisItemStyle:i.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:i.get("focus"),blurScope:i.get("blurScope"),emphasisDisabled:i.get("disabled"),hoverScale:i.get("scale"),labelStatesModels:h(e),cursorStyle:e.get("cursor")}}var Mt=function(){function t(t){this.group=new i,this._SymbolCtor=t||_t}return t.prototype.updateData=function(t,e){this._progressiveEls=null,e=wt(e);var i=this.group,a=t.hostModel,n=this._data,o=this._SymbolCtor,s=e.disableAnimation,l=Dt(t),u={disableAnimation:s},h=e.getSymbolPoint||function(e){return t.getItemLayout(e)};n||i.removeAll(),t.diff(n).add((function(a){var n=h(a);if(It(t,n,a,e)){var s=new o(t,a,l,u);s.setPosition(n),t.setItemGraphicEl(a,s),i.add(s)}})).update((function(p,c){var d=n.getItemGraphicEl(c),m=h(p);if(It(t,m,p,e)){var g=t.getItemVisual(p,"symbol")||"circle",y=d&&d.getSymbolType&&d.getSymbolType();if(!d||y&&y!==g)i.remove(d),(d=new o(t,p,l,u)).setPosition(m);else{d.updateData(t,p,l,u);var f={x:m[0],y:m[1]};s?d.attr(f):r(d,f,a)}i.add(d),t.setItemGraphicEl(p,d)}else i.remove(d)})).remove((function(t){var e=n.getItemGraphicEl(t);e&&e.fadeOut((function(){i.remove(e)}),a)})).execute(),this._getSymbolPoint=h,this._data=t},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl((function(e,i){var a=t._getSymbolPoint(i);e.setPosition(a),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Dt(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,i){function a(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],i=wt(i);for(var n=t.start;n<t.end;n++){var o=e.getItemLayout(n);if(It(e,o,n,i)){var s=new this._SymbolCtor(e,n,this._seriesScope);s.traverse(a),s.setPosition(o),this.group.add(s),e.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},t.prototype.eachRendered=function(t){S(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,i=this._data;i&&t?i.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}),i.hostModel)})):e.removeAll()},t}();function At(t,e,i){var a=t.getBaseAxis(),n=t.getOtherAxis(a),o=function(t,e){var i=0,a=t.scale.getExtent();"start"===e?i=a[0]:"end"===e?i=a[1]:w(e)&&!isNaN(e)?i=e:a[0]>0?i=a[0]:a[1]<0&&(i=a[1]);return i}(n,i),s=a.dim,r=n.dim,l=e.mapDimension(r),u=e.mapDimension(s),h="x"===r||"radius"===r?1:0,p=x(t.dimensions,(function(t){return e.mapDimension(t)})),c=!1,d=e.getCalculationInfo("stackResultDimension");return I(e,p[0])&&(c=!0,p[0]=d),I(e,p[1])&&(c=!0,p[1]=d),{dataDimsForPoint:p,valueStart:o,valueAxisDim:r,baseAxisDim:s,stacked:!!c,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Nt(t,e,i,a){var n=NaN;t.stacked&&(n=i.get(i.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=t.valueStart);var o=t.baseDataOffset,s=[];return s[o]=i.get(t.baseDim,a),s[1-o]=n,e.dataToPoint(s)}var Pt=Math.min,kt=Math.max;function Lt(t,e){return isNaN(t)||isNaN(e)}function Ot(t,e,i,a,n,o,s,r,l){for(var u,h,p,c,d,m,g=i,y=0;y<a;y++){var f=e[2*g],v=e[2*g+1];if(g>=n||g<0)break;if(Lt(f,v)){if(l){g+=o;continue}break}if(g===i)t[o>0?"moveTo":"lineTo"](f,v),p=f,c=v;else{var b=f-u,S=v-h;if(b*b+S*S<.5){g+=o;continue}if(s>0){for(var _=g+o,x=e[2*_],I=e[2*_+1];x===f&&I===v&&y<a;)y++,g+=o,x=e[2*(_+=o)],I=e[2*_+1],b=(f=e[2*g])-u,S=(v=e[2*g+1])-h;var w=y+1;if(l)for(;Lt(x,I)&&w<a;)w++,x=e[2*(_+=o)],I=e[2*_+1];var D=.5,M=0,A=0,N=void 0,P=void 0;if(w>=a||Lt(x,I))d=f,m=v;else{M=x-u,A=I-h;var k=f-u,L=x-f,O=v-h,C=I-v,T=void 0,z=void 0;if("x"===r){var E=M>0?1:-1;d=f-E*(T=Math.abs(k))*s,m=v,N=f+E*(z=Math.abs(L))*s,P=v}else if("y"===r){var G=A>0?1:-1;d=f,m=v-G*(T=Math.abs(O))*s,N=f,P=v+G*(z=Math.abs(C))*s}else T=Math.sqrt(k*k+O*O),d=f-M*s*(1-(D=(z=Math.sqrt(L*L+C*C))/(z+T))),m=v-A*s*(1-D),P=v+A*s*D,N=Pt(N=f+M*s*D,kt(x,f)),P=Pt(P,kt(I,v)),N=kt(N,Pt(x,f)),m=v-(A=(P=kt(P,Pt(I,v)))-v)*T/z,d=Pt(d=f-(M=N-f)*T/z,kt(u,f)),m=Pt(m,kt(h,v)),N=f+(M=f-(d=kt(d,Pt(u,f))))*z/T,P=v+(A=v-(m=kt(m,Pt(h,v))))*z/T}t.bezierCurveTo(p,c,d,m,f,v),p=N,c=P}else t.lineTo(f,v)}u=f,h=v,g+=o}return y}var Ct=function(){return function(){this.smooth=0,this.smoothConstraint=!0}}(),Tt=function(e){function i(t){var i=e.call(this,t)||this;return i.type="ec-polyline",i}return t(i,e),i.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},i.prototype.getDefaultShape=function(){return new Ct},i.prototype.buildPath=function(t,e){var i=e.points,a=0,n=i.length/2;if(e.connectNulls){for(;n>0&&Lt(i[2*n-2],i[2*n-1]);n--);for(;a<n&&Lt(i[2*a],i[2*a+1]);a++);}for(;a<n;)a+=Ot(t,i,a,n,n,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},i.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i,a,n=this.path.data,o=N.CMD,s="x"===e,r=[],l=0;l<n.length;){var u=void 0,h=void 0,p=void 0,c=void 0,d=void 0,m=void 0,g=void 0;switch(n[l++]){case o.M:i=n[l++],a=n[l++];break;case o.L:if(u=n[l++],h=n[l++],(g=s?(t-i)/(u-i):(t-a)/(h-a))<=1&&g>=0){var y=s?(h-a)*g+a:(u-i)*g+i;return s?[t,y]:[y,t]}i=u,a=h;break;case o.C:u=n[l++],h=n[l++],p=n[l++],c=n[l++],d=n[l++],m=n[l++];var f=s?M(i,u,p,d,t,r):M(a,h,c,m,t,r);if(f>0)for(var v=0;v<f;v++){var b=r[v];if(b<=1&&b>=0){y=s?P(a,h,c,m,b):P(i,u,p,d,b);return s?[t,y]:[y,t]}}i=d,a=m}}},i}(A),zt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i}(Ct),Et=function(e){function i(t){var i=e.call(this,t)||this;return i.type="ec-polygon",i}return t(i,e),i.prototype.getDefaultShape=function(){return new zt},i.prototype.buildPath=function(t,e){var i=e.points,a=e.stackedOnPoints,n=0,o=i.length/2,s=e.smoothMonotone;if(e.connectNulls){for(;o>0&&Lt(i[2*o-2],i[2*o-1]);o--);for(;n<o&&Lt(i[2*n],i[2*n+1]);n++);}for(;n<o;){var r=Ot(t,i,n,o,o,1,e.smooth,s,e.connectNulls);Ot(t,a,n+r-1,r,o,-1,e.stackedOnSmooth,s,e.connectNulls),n+=r+1,t.closePath()}},i}(A);function Gt(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function Vt(t){for(var e=1/0,i=1/0,a=-1/0,n=-1/0,o=0;o<t.length;){var s=t[o++],r=t[o++];isNaN(s)||(e=Math.min(s,e),a=Math.max(s,a)),isNaN(r)||(i=Math.min(r,i),n=Math.max(r,n))}return[[e,i],[a,n]]}function Rt(t,e){var i=Vt(t),a=i[0],n=i[1],o=Vt(e),s=o[0],r=o[1];return Math.max(Math.abs(a[0]-s[0]),Math.abs(a[1]-s[1]),Math.abs(n[0]-r[0]),Math.abs(n[1]-r[1]))}function Xt(t){return w(t)?t:t?.5:0}function Yt(t,e,i,a){var n=e.getBaseAxis(),o="x"===n.dim||"radius"===n.dim?0:1,s=[],r=0,l=[],u=[],h=[],p=[];if(a){for(r=0;r<t.length;r+=2)isNaN(t[r])||isNaN(t[r+1])||p.push(t[r],t[r+1]);t=p}for(r=0;r<t.length-2;r+=2)switch(h[0]=t[r+2],h[1]=t[r+3],u[0]=t[r],u[1]=t[r+1],s.push(u[0],u[1]),i){case"end":l[o]=h[o],l[1-o]=u[1-o],s.push(l[0],l[1]);break;case"middle":var c=(u[o]+h[o])/2,d=[];l[o]=d[o]=c,l[1-o]=u[1-o],d[1-o]=h[1-o],s.push(l[0],l[1]),s.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=h[1-o],s.push(l[0],l[1])}return s.push(t[r++],t[r++]),s}function Ft(t,e,i){var a=t.getVisual("visualMeta");if(a&&a.length&&t.count()&&"cartesian2d"===e.type){for(var n,o,s=a.length-1;s>=0;s--){var r=t.getDimensionInfo(a[s].dimension);if("x"===(n=r&&r.coordDim)||"y"===n){o=a[s];break}}if(o){var l=e.getAxis(n),u=x(o.stops,(function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}})),h=u.length,p=o.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),p.reverse());var c=function(t,e){var i,a,n=[],o=t.length;function s(t,e,i){var a=t.coord,n=(i-a)/(e.coord-a);return{coord:i,color:j(n,[t.color,e.color])}}for(var r=0;r<o;r++){var l=t[r],u=l.coord;if(u<0)i=l;else{if(u>e){a?n.push(s(a,l,e)):i&&n.push(s(i,l,0),s(i,l,e));break}i&&(n.push(s(i,l,0)),i=null),n.push(l),a=l}}return n}(u,"x"===n?i.getWidth():i.getHeight()),d=c.length;if(!d&&h)return u[0].coord<0?p[1]?p[1]:u[h-1].color:p[0]?p[0]:u[0].color;var m=c[0].coord-10,g=c[d-1].coord+10,y=g-m;if(y<.001)return"transparent";Y(c,(function(t){t.offset=(t.coord-m)/y})),c.push({offset:d?c[d-1].offset:.5,color:p[1]||"transparent"}),c.unshift({offset:d?c[0].offset:.5,color:p[0]||"transparent"});var f=new F(0,0,0,0,c,!0);return f[n]=m,f[n+"2"]=g,f}}}function Ht(t,e,i){var a=t.get("showAllSymbol"),n="auto"===a;if(!a||n){var o=i.getAxesByScale("ordinal")[0];if(o&&(!n||!function(t,e){var i=t.getExtent(),a=Math.abs(i[1]-i[0])/t.scale.count();isNaN(a)&&(a=0);for(var n=e.count(),o=Math.max(1,Math.round(n/5)),s=0;s<n;s+=o)if(1.5*_t.getSymbolSize(e,s)[t.isHorizontal()?1:0]>a)return!1;return!0}(o,e))){var s=e.mapDimension(o.dim),r={};return Y(o.getViewLabels(),(function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);r[e]=1})),function(t){return!r.hasOwnProperty(e.get(s,t))}}}}function Bt(t,e){return[t[2*e],t[2*e+1]]}function Wt(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<H.length;e++)if(t.get([H[e],"endLabel","show"]))return!0;return!1}function Ut(t,e,i,a){if(B(e,"cartesian2d")){var n=a.getModel("endLabel"),o=n.get("valueAnimation"),s=a.getData(),r={lastFrameIndex:0},l=Wt(a)?function(i,a){t._endLabelOnDuring(i,a,s,r,o,n,e)}:null,u=e.getBaseAxis().isHorizontal(),h=W(e,i,a,(function(){var e=t._endLabel;e&&i&&null!=r.originalX&&e.attr({x:r.originalX,y:r.originalY})}),l);if(!a.get("clip",!0)){var p=h.shape,c=Math.max(p.width,p.height);u?(p.y-=c,p.height+=2*c):(p.x-=c,p.width+=2*c)}return l&&l(1,h),h}return U(e,i,a)}var jt=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t(a,e),a.prototype.init=function(){var t=new i,e=new Mt;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},a.prototype.render=function(t,e,i){var a=this,n=t.coordinateSystem,o=this.group,s=t.getData(),r=t.getModel("lineStyle"),l=t.getModel("areaStyle"),h=s.getLayout("points")||[],p="polar"===n.type,c=this._coordSys,d=this._symbolDraw,m=this._polyline,g=this._polygon,v=this._lineGroup,b=!e.ssr&&t.get("animation"),S=!l.isEmpty(),_=l.get("origin"),x=At(n,s,_),I=S&&function(t,e,i){if(!i.valueDim)return[];for(var a=e.count(),n=D(2*a),o=0;o<a;o++){var s=Nt(i,t,e,o);n[2*o]=s[0],n[2*o+1]=s[1]}return n}(n,s,x),w=t.get("showSymbol"),M=t.get("connectNulls"),A=w&&!p&&Ht(t,s,n),N=this._data;N&&N.eachItemGraphicEl((function(t,e){t.__temp&&(o.remove(t),N.setItemGraphicEl(e,null))})),w||d.remove(),o.add(v);var P,C=!p&&t.get("step");n&&n.getArea&&t.get("clip",!0)&&(null!=(P=n.getArea()).width?(P.x-=.1,P.y-=.1,P.width+=.2,P.height+=.2):P.r0&&(P.r0-=.5,P.r+=.5)),this._clipShapeForSymbol=P;var T=Ft(s,n,i)||s.getVisual("style")[s.getVisual("drawType")];if(m&&c.type===n.type&&C===this._step){S&&!g?g=this._newPolygon(h,I):g&&!S&&(v.remove(g),g=this._polygon=null),p||this._initOrUpdateEndLabel(t,n,k(T));var z=v.getClipPath();if(z){var E=Ut(this,n,!1,t);u(z,{shape:E.shape},t)}else v.setClipPath(Ut(this,n,!0,t));w&&d.updateData(s,{isIgnore:A,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),Gt(this._stackedOnPoints,I)&&Gt(this._points,h)||(b?this._doUpdateAnimation(s,I,n,i,C,_,M):(C&&(h=Yt(h,n,C,M),I&&(I=Yt(I,n,C,M))),m.setShape({points:h}),g&&g.setShape({points:h,stackedOnPoints:I})))}else w&&d.updateData(s,{isIgnore:A,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[h[2*t],h[2*t+1]]}}),b&&this._initSymbolLabelAnimation(s,n,P),C&&(h=Yt(h,n,C,M),I&&(I=Yt(I,n,C,M))),m=this._newPolyline(h),S?g=this._newPolygon(h,I):g&&(v.remove(g),g=this._polygon=null),p||this._initOrUpdateEndLabel(t,n,k(T)),v.setClipPath(Ut(this,n,!0,t));var G=t.getModel("emphasis"),V=G.get("focus"),R=G.get("blurScope"),X=G.get("disabled");(m.useStyle(L(r.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"})),O(m,t,"lineStyle"),m.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(m.getState("emphasis").style.lineWidth=+m.style.lineWidth+1);f(m).seriesIndex=t.seriesIndex,y(m,V,R,X);var Y=Xt(t.get("smooth")),F=t.get("smoothMonotone");if(m.setShape({smooth:Y,smoothMonotone:F,connectNulls:M}),g){var H=s.getCalculationInfo("stackedOnSeries"),B=0;g.useStyle(L(l.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),H&&(B=Xt(H.get("smooth"))),g.setShape({smooth:Y,stackedOnSmooth:B,smoothMonotone:F,connectNulls:M}),O(g,t,"areaStyle"),f(g).seriesIndex=t.seriesIndex,y(g,V,R,X)}var W=function(t){a._changePolyState(t)};s.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=W)})),this._polyline.onHoverStateChange=W,this._data=s,this._coordSys=n,this._stackedOnPoints=I,this._points=h,this._step=C,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,m),g&&this.packEventData(t,g))},a.prototype.packEventData=function(t,e){f(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},a.prototype.highlight=function(t,e,i,a){var n=t.getData(),o=C(n,a);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var s=n.getLayout("points"),r=n.getItemGraphicEl(o);if(!r){var l=s[2*o],u=s[2*o+1];if(isNaN(l)||isNaN(u))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,u))return;var h=t.get("zlevel")||0,p=t.get("z")||0;(r=new _t(n,o)).x=l,r.y=u,r.setZ(h,p);var c=r.getSymbolPath().getTextContent();c&&(c.zlevel=h,c.z=p,c.z2=this._polyline.z2+1),r.__temp=!0,n.setItemGraphicEl(o,r),r.stopSymbolAnimation(!0),this.group.add(r)}r.highlight()}else T.prototype.highlight.call(this,t,e,i,a)},a.prototype.downplay=function(t,e,i,a){var n=t.getData(),o=C(n,a);if(this._changePolyState("normal"),null!=o&&o>=0){var s=n.getItemGraphicEl(o);s&&(s.__temp?(n.setItemGraphicEl(o,null),this.group.remove(s)):s.downplay())}else T.prototype.downplay.call(this,t,e,i,a)},a.prototype._changePolyState=function(t){var e=this._polygon;z(this._polyline,t),e&&z(e,t)},a.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Tt({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},a.prototype._newPolygon=function(t,e){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Et({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},a.prototype._initSymbolLabelAnimation=function(t,e,i){var a,n,o=e.getBaseAxis(),s=o.inverse;"cartesian2d"===e.type?(a=o.isHorizontal(),n=!1):"polar"===e.type&&(a="angle"===o.dim,n=!0);var r=t.hostModel,l=r.get("animationDuration");E(l)&&(l=l(null));var u=r.get("animationDelay")||0,h=E(u)?u(null):u;t.eachItemGraphicEl((function(t,o){var r=t;if(r){var p=[t.x,t.y],c=void 0,d=void 0,m=void 0;if(i)if(n){var g=i,y=e.pointToCoord(p);a?(c=g.startAngle,d=g.endAngle,m=-y[1]/180*Math.PI):(c=g.r0,d=g.r,m=y[0])}else{var f=i;a?(c=f.x,d=f.x+f.width,m=t.x):(c=f.y+f.height,d=f.y,m=t.y)}var v=d===c?0:(m-c)/(d-c);s&&(v=1-v);var b=E(u)?u(o):l*v+h,S=r.getSymbolPath(),_=S.getTextContent();r.attr({scaleX:0,scaleY:0}),r.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),_&&_.animateFrom({style:{opacity:0}},{duration:300,delay:b}),S.disableLabelAnimation=!0}}))},a.prototype._initOrUpdateEndLabel=function(t,e,i){var a=t.getModel("endLabel");if(Wt(t)){var n=t.getData(),o=this._polyline,s=n.getLayout("points");if(!s)return o.removeTextContent(),void(this._endLabel=null);var r=this._endLabel;r||((r=this._endLabel=new G({z2:200})).ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var l=function(t){for(var e,i,a=t.length/2;a>0&&(e=t[2*a-2],i=t[2*a-1],isNaN(e)||isNaN(i));a--);return a-1}(s);l>=0&&(m(o,h(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:l,defaultText:function(t,e,i){return null!=i?V(n,i):g(n,t)},enableTextSetter:!0},function(t,e){var i=e.getBaseAxis(),a=i.isHorizontal(),n=i.inverse,o=a?n?"right":"left":"center",s=a?"middle":n?"top":"bottom";return{normal:{align:t.get("align")||o,verticalAlign:t.get("verticalAlign")||s}}}(a,e)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},a.prototype._endLabelOnDuring=function(t,e,i,a,n,o,s){var r=this._endLabel,l=this._polyline;if(r){t<1&&null==a.originalX&&(a.originalX=r.x,a.originalY=r.y);var u=i.getLayout("points"),h=i.hostModel,p=h.get("connectNulls"),c=o.get("precision"),d=o.get("distance")||0,m=s.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,f=e.shape,v=y?g?f.x:f.y+f.height:g?f.x+f.width:f.y,b=(g?d:0)*(y?-1:1),S=(g?0:-d)*(y?-1:1),_=g?"x":"y",x=function(t,e,i){for(var a,n,o=t.length/2,s="x"===i?0:1,r=0,l=-1,u=0;u<o;u++)if(n=t[2*u+s],!isNaN(n)&&!isNaN(t[2*u+1-s]))if(0!==u){if(a<=e&&n>=e||a>=e&&n<=e){l=u;break}r=u,a=n}else a=n;return{range:[r,l],t:(e-a)/(n-a)}}(u,v,_),I=x.range,w=I[1]-I[0],D=void 0;if(w>=1){if(w>1&&!p){var M=Bt(u,I[0]);r.attr({x:M[0]+b,y:M[1]+S}),n&&(D=h.getRawValue(I[0]))}else{(M=l.getPointOn(v,_))&&r.attr({x:M[0]+b,y:M[1]+S});var A=h.getRawValue(I[0]),N=h.getRawValue(I[1]);n&&(D=R(i,c,A,N,x.t))}a.lastFrameIndex=I[0]}else{var P=1===t||a.lastFrameIndex>0?I[0]:0;M=Bt(u,P);n&&(D=h.getRawValue(P)),r.attr({x:M[0]+b,y:M[1]+S})}if(n){var k=X(r);"function"==typeof k.setLabelText&&k.setLabelText(D)}}},a.prototype._doUpdateAnimation=function(t,e,i,a,n,o,s){var l=this._polyline,u=this._polygon,h=t.hostModel,p=function(t,e,i,a,n,o,s,r){for(var l=function(t,e){var i=[];return e.diff(t).add((function(t){i.push({cmd:"+",idx:t})})).update((function(t,e){i.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){i.push({cmd:"-",idx:t})})).execute(),i}(t,e),u=[],h=[],p=[],c=[],d=[],m=[],g=[],y=At(n,e,s),f=t.getLayout("points")||[],v=e.getLayout("points")||[],b=0;b<l.length;b++){var S=l[b],_=!0,x=void 0,I=void 0;switch(S.cmd){case"=":x=2*S.idx,I=2*S.idx1;var w=f[x],M=f[x+1],A=v[I],N=v[I+1];(isNaN(w)||isNaN(M))&&(w=A,M=N),u.push(w,M),h.push(A,N),p.push(i[x],i[x+1]),c.push(a[I],a[I+1]),g.push(e.getRawIndex(S.idx1));break;case"+":var P=S.idx,k=y.dataDimsForPoint,L=n.dataToPoint([e.get(k[0],P),e.get(k[1],P)]);I=2*P,u.push(L[0],L[1]),h.push(v[I],v[I+1]);var O=Nt(y,n,e,P);p.push(O[0],O[1]),c.push(a[I],a[I+1]),g.push(e.getRawIndex(P));break;case"-":_=!1}_&&(d.push(S),m.push(m.length))}m.sort((function(t,e){return g[t]-g[e]}));var C=u.length,T=D(C),z=D(C),E=D(C),G=D(C),V=[];for(b=0;b<m.length;b++){var R=m[b],X=2*b,Y=2*R;T[X]=u[Y],T[X+1]=u[Y+1],z[X]=h[Y],z[X+1]=h[Y+1],E[X]=p[Y],E[X+1]=p[Y+1],G[X]=c[Y],G[X+1]=c[Y+1],V[b]=d[R]}return{current:T,next:z,stackedOnCurrent:E,stackedOnNext:G,status:V}}(this._data,t,this._stackedOnPoints,e,this._coordSys,0,this._valueOrigin),c=p.current,d=p.stackedOnCurrent,m=p.next,g=p.stackedOnNext;if(n&&(c=Yt(p.current,i,n,s),d=Yt(p.stackedOnCurrent,i,n,s),m=Yt(p.next,i,n,s),g=Yt(p.stackedOnNext,i,n,s)),Rt(c,m)>3e3||u&&Rt(d,g)>3e3)return l.stopAnimation(),l.setShape({points:m}),void(u&&(u.stopAnimation(),u.setShape({points:m,stackedOnPoints:g})));l.shape.__points=p.current,l.shape.points=c;var y={shape:{points:m}};p.current!==c&&(y.shape.__points=p.next),l.stopAnimation(),r(l,y,h),u&&(u.setShape({points:c,stackedOnPoints:d}),u.stopAnimation(),r(u,{shape:{stackedOnPoints:g}},h),l.shape.points!==u.shape.points&&(u.shape.points=l.shape.points));for(var f=[],v=p.status,b=0;b<v.length;b++){if("="===v[b].cmd){var S=t.getItemGraphicEl(v[b].idx1);S&&f.push({el:S,ptIdx:b})}}l.animators&&l.animators.length&&l.animators[0].during((function(){u&&u.dirtyShape();for(var t=l.shape.__points,e=0;e<f.length;e++){var i=f[e].el,a=2*f[e].ptIdx;i.x=t[a],i.y=t[a+1],i.markRedraw()}}))},a.prototype.remove=function(t){var e=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl((function(t,a){t.__temp&&(e.remove(t),i.setItemGraphicEl(a,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},a.type="line",a}(T);K([$,Q,tt,et,it,at,nt,function(t){t.registerChartView(jt),t.registerSeriesModel(St),t.registerLayout({seriesType:"line",plan:Z(),reset:function(t){var e=t.getData(),i=t.coordinateSystem;if(t.pipelineContext,i){var a=x(i.dimensions,(function(t){return e.mapDimension(t)})).slice(0,2),n=a.length,o=e.getCalculationInfo("stackResultDimension");I(e,a[0])&&(a[0]=o),I(e,a[1])&&(a[1]=o);var s=e.getStore(),r=e.getDimensionIndex(a[0]),l=e.getDimensionIndex(a[1]);return n&&{progress:function(t,e){for(var a=t.end-t.start,o=D(a*n),u=[],h=[],p=t.start,c=0;p<t.end;p++){var d=void 0;if(1===n){var m=s.get(r,p);d=i.dataToPoint(m,null,h)}else u[0]=s.get(r,p),u[1]=s.get(l,p),d=i.dataToPoint(u,null,h);o[c++]=d[0],o[c++]=d[1]}e.setLayout("points",o)}}}}}),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",i)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,q("line"))},ot,st,rt]);const Zt=ut({__name:"index",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"200px"},dataZoom:{type:Boolean,default:!1},option:{type:Object,required:!0}},setup(t){const e=t,i=ht(null);function a(){if(null===i.value)return;let t=J.getInstanceByDom(i.value);null==t&&(t=J.init(i.value)),t.setOption(e.option,!0)}pt((()=>e.option),(t=>{t&&ct((()=>{a()}))}),{immediate:!0,deep:!0});const n=dt((function(){var t;null!==i.value&&(null==(t=J.getInstanceByDom(i.value))||t.resize())}),300,{maxWait:800});return mt((()=>{ct((()=>{a(),window.addEventListener("resize",n)}))})),gt((()=>{var t;i.value&&(null==(t=J.getInstanceByDom(i.value))||t.dispose(),window.removeEventListener("resize",n))})),(e,a)=>(yt(),ft("div",{ref_key:"chartRef",ref:i,style:vt({width:bt(lt)(t.width),height:bt(lt)(t.height)})},null,4))}});export{Zt as default};
