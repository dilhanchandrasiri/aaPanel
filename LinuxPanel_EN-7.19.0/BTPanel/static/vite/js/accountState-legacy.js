System.register(["./vue-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185"],(function(e,t){"use strict";var a,o,l,c,n,u,i,s,r,d,m,p,_,b,g,k,h,A,v,y,w,x,f,F,S,V,D,q,H,L,j,U,P,C,M;return{setters:[e=>{a=e.a3,o=e.W,l=e.M,c=e.F,n=e.j,u=e.u,i=e.r,s=e.d,r=e.f,d=e.w,m=e.t,p=e.i,_=e.c},e=>{b=e.b,g=e.a,k=e.f},e=>{h=e.bR,A=e.f,v=e.bS,y=e.bT,w=e.h,x=e.m,f=e.bU,F=e.bV,S=e.bW,V=e.bX,D=e.i,q=e.bk},e=>{H=e.bo,L=e.bl,j=e.bV,U=e.bG,P=e._,C=e.bL,M=e.ad}],execute:function(){var t=document.createElement("style");t.textContent=".inline-item{width:100%;display:flex;align-items:center;justify-content:space-between}.inline-item .left-item{flex:1;margin-right:20px}\n",document.head.appendChild(t),e("b",B);const N=e("a",a("accountStore",(()=>{const e=W(),{t:t}=o(),a=async()=>{try{u(!0);const{message:t}=await h(e.search);A(t)&&(e.table.data=t.list,e.table.total=t.page.count)}finally{u(!1)}},{loading:n,setLoading:u}=b(),i=async()=>{const{message:t}=await v();A(t)&&(e.packageSourceList=t.list,e.packageList=t.list.map((e=>({label:e.package_name,value:e.package_id}))),t.list.length>0&&(e.expendFormState.package_id=t.list[0].package_id,r(e.expendFormState.package_id)))},s=async()=>{const a=await y();if(A(a)){let o={};e.diskMountSourceList=a.message,e.diskMountPointList=a.message.map((e=>(e.is_default&&(o=e),{label:`${e.mountpoint} (${w(e.used)}/${w(e.total)}) ${t("Account.Account.whm_account_533924-7")}:${e.is_group_quota?t("Account.Account.whm_account_533924-5"):t("Account.Account.whm_account_533924-6")}`,value:e.mountpoint}))),a.message.length>0&&(e.expendFormState.mountpoint=o.mountpoint||a.message[0].mountpoint,e.currentChangeDisk=0===Object.keys(o).length?a.message[0]:o)}},r=async t=>{const a=e.packageSourceList.find((e=>e.package_id===t));if(a){const{package_name:t,disk_space_quota:o,monthly_bandwidth_limit:l,max_site_limit:c,max_database:n,php_start_children:u,php_max_children:i,remark:s}=a;e.wpForData.package_name=t,e.wpForData.disk_space_quota=0==o?{value:"",unlimited:!0}:{value:o/1024/1024,unlimited:!1},e.wpForData.monthly_bandwidth_limit=0==l?{value:"",unlimited:!0}:{value:l/1024/1024,unlimited:!1},e.wpForData.max_site_limit=0===c?{value:"",unlimited:!0}:{value:c,unlimited:!1},e.wpForData.max_database=0==n?{value:"",unlimited:!0}:{value:n,unlimited:!1},e.wpForData.php_start_children=u,e.wpForData.php_max_children=i,e.wpForData.remark=s}},d=()=>{e.acForData.username="",e.acForData.password="",e.acForData.email="",e.acForData.expire_date="0000-00-00",e.expendFormState.package_id=void 0,m()},m=()=>{e.wpForData.package_name="",e.wpForData.disk_space_quota={value:"",unlimited:!1},e.wpForData.monthly_bandwidth_limit={value:"",unlimited:!1},e.wpForData.max_site_limit={value:"",unlimited:!1},e.wpForData.max_database={value:"",unlimited:!1},e.wpForData.php_start_children=1,e.wpForData.php_max_children=1,e.wpForData.remark=""};return{init:a,addHost:async()=>{if(console.log(e.table.total,"xx"),e.table.total>=30)return x.error(t("Account.Account.whm_account_533924-9",[30])),!1;d(),await i(),await s(),e.addVisible=!0,e.isEdit=!1},setLoading:u,loading:n,onLogin:async e=>{const{message:t}=await f({account_id:e});A(t)&&window.open(t.login_url+"?token="+t.token)},modifyStatus:async e=>{const{status:a,username:o}=e;g({title:`${t(0===a?"Site.PHP.index_21_2":"Site.PHP.index_21_3")} ${t("Account.Account.whm_account_533924-0",[o])}`,content:t(0===a?"Account.Account.whm_account_533924-1":"Account.Account.whm_account_533924-2"),onConfirm:async()=>{await F({...e,status:0===a?1:0}),e.status=0===a?1:0}})},removeAccount:async e=>{g({title:t("Account.Account.account_673836-0",[e.username]),content:()=>l(c,null,[l("div",null,[t("Account.Account.account_673836-1")])]),onConfirm:async()=>{await V({account_id:e.account_id,is_del_resources:!0}),a()}})},form_save:async()=>{await(e.accountFormRef?.validate());const o=function(){const{package_id:t,mountpoint:a}=e.expendFormState,{username:o,password:l,email:c,expire_date:n,remark:u}=e.acForData,{disk_space_quota:i,monthly_bandwidth_limit:s,max_site_limit:r,max_database:d,php_start_children:m,php_max_children:p}=e.wpForData;return Object.assign({},{username:o,password:l,email:c,expire_date:n,package_id:t,mountpoint:a,disk_space_quota:i.unlimited?0:String(1024*Number(i.value)*1024),monthly_bandwidth_limit:s.unlimited?0:String(1024*Number(s.value)*1024),max_site_limit:r.unlimited?0:r.value,max_email_account:0,max_database:d.unlimited?0:d.value,php_start_children:m,php_max_children:p,remark:u})}();if(Number(o.disk_space_quota)>0&&!e.isEdit){const{is_group_quota:a,free:l}=e.currentChangeDisk;if(!a)return x.error(t("Account.Account.whm_account_533924-3")),!1;if(l<Number(o.disk_space_quota))return x.error(t("Account.Account.whm_account_533924-4")),!1}try{e.isEdit?(delete o.mountpoint,await F({account_id:e.current_account_id,...o}),d(),a()):(await S(o),d(),a())}catch(l){return Promise.reject(l)}},form_reset:d,package_form_reset:m,getPackageList:i,getDiskList:s,changePackage:r}}))),O=s({props:{options:Array,modelValue:Object,rules:Object,exclude:Array},setup(e,{attrs:t,slots:a,expose:o}){const s=i(null),d=n({});return o(d),r((()=>{Object.assign(d,{validate:s.value?.validate,restoreValidation:s.value?.restoreValidation})})),()=>l(c,null,[l(j,u(t,{model:e.modelValue,ref:s,rules:e.rules}),{default:()=>l(c,null,[e.options?.filter((t=>!e.exclude?.includes(t.key))).map((o=>function(e,t,a,o){const{label:c,key:n,type:i,options:s}=e;switch(i){case"input":return l(U,u({label:c,path:n},a),{default:()=>[l(M,{value:t[n],"onUpdate:value":e=>t[n]=e},null)]});case"select":return l(U,u({label:c,path:e.key},a),{default:()=>[l(C,{options:s,value:t[n],"onUpdate:value":e=>t[n]=e},null)]});case"checkbox":return l(U,u({label:c,path:e.key},a),{default:()=>[l(P,{checked:t[n],"onUpdate:checked":e=>t[n]=e},null)]});case"date-picker":return l(U,u({label:c,path:e.key},a),{default:()=>[l(q,{"formatted-value":t[n],"onUpdate:formatted-value":e=>t[n]=e,type:"date","value-format":"yyyy-MM-dd"},null)]});case"input-number":return l(U,u({label:c,path:e.key},a),{default:()=>[l(R,{value:t[n],"onUpdate:value":e=>t[n]=e},null)]});case"custom-item":return l(U,u({label:c,path:e.key},a,{disabled:a.disabled}),{default:()=>[e.slots?.default(a)]});case"custom-slot":return l(U,u({label:c,path:e.key},a,{disabled:a.disabled}),{default:()=>[o&&o[e.key]?.()]})}}(o,e.modelValue,t,a)))])})])}});function E(){const e=[{type:"input",label:D.global.t("Account.Account.FormHooks-122755-1"),key:"username"},{type:"input",label:D.global.t("Account.Account.FormHooks-122755-2"),key:"password"},{type:"input",label:D.global.t("Account.Account.FormHooks-122755-4"),key:"email"},{type:"custom-slot",label:D.global.t("Account.Account.FormHooks-122755-5"),key:"expire_date"},{type:"input",label:D.global.t("Account.Account.FormHooks-122755-14"),key:"remark"}],t=n({username:"",password:"",email:"",expire_date:"0000-00-00",remark:""}),a=n({username:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-7"),trigger:"blur"}],password:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-8"),trigger:"blur"}],email:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-10"),trigger:"blur"}]});return[s({props:{isEdit:Boolean},setup(o,{attrs:c,expose:s,slots:d}){const m=i(),_=n({});return s(_),r((()=>{Object.assign(_,{validate:m.value?.validate,restoreValidation:m.value?.restoreValidation})})),()=>{return l(O,u({options:e,modelValue:t,"onUpdate:modelValue":e=>t=e,"label-placement":"left","label-width":"130px"},c,{rules:a,ref:m}),"function"==typeof(o=d)||"[object Object]"===Object.prototype.toString.call(o)&&!p(o)?d:{default:()=>[d]});var o}}}),t]}const $=s({props:{modelValue:Object},setup(e,{attrs:t}){const a=n({value:e.modelValue?.value?e.modelValue?.value:0,unlimited:!!e.modelValue?.unlimited&&e.modelValue?.unlimited});return d(a,(t=>{e.modelValue.value=t.value,e.modelValue.unlimited=t.unlimited})),()=>l("div",{class:"inline-item"},[l("div",{class:"left-item"},[l(R,{value:a.value,"onUpdate:value":e=>a.value=e,disabled:e.modelValue?.unlimited||t.disabled},null)]),l("div",{class:"right-item"},[l(H,{value:a.unlimited,"onUpdate:value":e=>a.unlimited=e,disabled:t.disabled},{checked:()=>D.global.t("Account.Account.FormHooks-122755-12"),unchecked:()=>D.global.t("Account.Account.FormHooks-122755-12")})])])}});function B(){const e=[{type:"input",label:D.global.t("Account.Account.FormHooks-122755-13"),key:"package_name"},{type:"input",label:D.global.t("Account.Account.FormHooks-122755-14"),key:"remark"},{type:"custom-item",label:D.global.t("Account.Account.FormHooks-122755-15"),key:"disk_space_quota",slots:{default:e=>l($,u({modelValue:t.disk_space_quota,"onUpdate:modelValue":e=>t.disk_space_quota=e},e),null)}},{type:"custom-item",label:D.global.t("Account.Account.FormHooks-122755-16"),key:"monthly_bandwidth_limit",slots:{default:e=>l($,u({modelValue:t.monthly_bandwidth_limit,"onUpdate:modelValue":e=>t.monthly_bandwidth_limit=e},e),null)}},{type:"custom-item",label:D.global.t("Account.Account.FormHooks-122755-17"),key:"max_site_limit",slots:{default:e=>l($,u({modelValue:t.max_site_limit,"onUpdate:modelValue":e=>t.max_site_limit=e},e),null)}},{type:"input-number",label:D.global.t("Account.Account.FormHooks-122755-18"),key:"php_start_children"},{type:"input-number",label:D.global.t("Account.Account.FormHooks-122755-19"),key:"php_max_children"},{type:"custom-item",label:D.global.t("Account.Account.FormHooks-122755-21"),key:"max_database",slots:{default:e=>l($,u({modelValue:t.max_database,"onUpdate:modelValue":e=>t.max_database=e},e),null)}}],t=n({package_name:"",remark:"",disk_space_quota:{value:0,unlimited:!0},monthly_bandwidth_limit:{value:0,unlimited:!0},max_site_limit:{value:0,unlimited:!0},php_start_children:1,php_max_children:3,max_database:{value:0,unlimited:!0}}),a=n({package_name:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-22"),trigger:"blur"}],disk_space_quota:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-24"),trigger:"blur",validator:(e,t)=>!!t.unlimited||!!(t.value&&t.value>0)}],monthly_bandwidth_limit:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-25"),trigger:"blur",validator:(e,t)=>!!t.unlimited||!!(t.value&&t.value>0)}],max_site_limit:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-26"),trigger:"blur",validator:(e,t)=>!!t.unlimited||!!(t.value&&t.value>0)}],php_start_children:[{required:!0,validator:(e,t)=>!!t||new Error(D.global.t("Account.Account.FormHooks-122755-27"))}],php_max_children:[{required:!0,validator:(e,t)=>t>0||new Error(D.global.t("Account.Account.FormHooks-122755-28"))}],max_database:[{required:!0,message:D.global.t("Account.Account.FormHooks-122755-30"),trigger:"blur",validator:(e,t)=>!!t.unlimited||!!(t.value&&t.value>0)}]}),o=i();return[s({props:{isDisable:Boolean,exclude:Array},setup(u,{expose:s}){const m=n({}),p=i(!1);return s(m),r((()=>{Object.assign(m,{validate:o.value?.validate,restoreValidation:o.value?.restoreValidation})})),d(u,(e=>{"isDisable"in e&&(p.value=e.isDisable)}),{immediate:!0}),()=>l(c,null,[l(O,{exclude:u.exclude,options:e,modelValue:t,"onUpdate:modelValue":e=>t=e,"label-placement":"left","label-width":"130px",rules:a,ref:o,disabled:p.value},null)])}}),t]}const R=s({props:{value:Number},emits:["update:value"],setup(e,{emit:t,attrs:a}){const o=m(e,"value"),c=i(e.value);function n(e){isNaN(Number(e))?(c.value=0,t("update:value",1)):(c.value=Math.round(e),t("update:value",Number(Math.floor(e))))}return d(o,(e=>{c.value=e})),()=>l(L,u(a,{value:c.value,clearable:!0,"onUpdate:value":n,min:1}),null)}}),T=e("q","data:image/svg+xml,%3csvg%20class='icon'%20style='vertical-align:%20bottom;'%20viewBox='0%200%201300%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4324'%20width='16'%20height='16'%3e%3cpath%20d='M1126.4%20512c0-113.152-91.648-204.8-204.8-204.8-61.952%200-115.2%2029.184-153.6%2082.432-38.4-53.248-91.136-82.432-153.6-82.432-113.152%200-204.8%2091.648-204.8%20204.8s91.648%20204.8%20204.8%20204.8c62.464%200%20115.2-29.184%20153.6-82.432%2038.4%2053.248%2091.648%2082.432%20153.6%2082.432%20113.152%200%20204.8-91.648%20204.8-204.8m102.4-307.2v614.4c0%2084.992-68.608%20153.6-153.6%20153.6H460.8c-84.992%200-153.6-68.608-153.6-153.6V204.8c0-84.992%2068.608-153.6%20153.6-153.6h614.4c84.992%200%20153.6%2068.608%20153.6%20153.6M614.4%20409.6c-56.32%200-102.4%2046.08-102.4%20102.4s46.08%20102.4%20102.4%20102.4c55.296%200%2084.992-52.736%20100.352-102.4-15.36-49.664-45.056-102.4-100.352-102.4m409.6%20102.4c0%2056.32-46.08%20102.4-102.4%20102.4-55.296%200-84.992-52.736-100.352-102.4%2015.36-49.664%2045.056-102.4%20100.352-102.4%2056.32%200%20102.4%2046.08%20102.4%20102.4'%20fill='%2320a53a'%20p-id='4325'%3e%3c/path%3e%3c/svg%3e"),W=e("u",a("accountStateStore",(()=>{const e=N(),{t:t}=o(),a=i(!1),c=i(!1),u=i(null),s=n({data:[],total:0,loading:!1}),r=i([{title:t("Account.Account.accountState-721844-0"),key:"username",width:130,render:t=>l("span",{class:"text-primary cursor-pointer",onClick:()=>e.onLogin(t.account_id)},[t.username])},{title:t("Account.Account.accountState-721844-1"),key:"package_name",width:100},{title:t("Account.Account.accountState-721844-2"),key:"email"},{key:"quota",title:t("Account.Account.accountState-721844-3"),render:e=>l("span",{class:0===e.disk_space_status?"text-error":""},[0===e.disk_space_used&&0===e.disk_space_quota?"-":w(e.disk_space_used,!0,0),_(" /")," ",0===e.disk_space_quota?l("img",{class:"icon",title:"",src:T},null):w(e.disk_space_quota,!0,0)])},{key:"bandwidth",title:t("Account.Account.accountState-721844-7"),render:e=>l("span",{class:0===e.monthly_bandwidth_status?"text-error":""},[w(e.monthly_bandwidth_used,!0,0),_(" /")," ",0===e.monthly_bandwidth_limit?l("img",{class:"icon",title:"",src:T},null):w(e.monthly_bandwidth_limit,!0,0)])},{title:t("Account.Account.accountState-721844-8"),key:"status",width:68,render:a=>{const o=new Map([[-1,t("Account.Account.accountState-721844-9")],[0,t("Account.Account.accountState-721844-10")],[1,t("Account.Account.accountState-721844-11")],[2,t("Account.Account.accountState-721844-12")]]);return l("span",{onClick:()=>e.modifyStatus(a),class:"cursor-pointer "+(1===a.status||-1===a.status?"text-primary":"text-error")},[o.get(a.status)])}},{title:t("Account.Account.accountState-721844-13"),key:"expire_date",width:106,render:e=>"0000-00-00"===e.expire_date?t("Account.Account.whm_account_index_10"):e.expire_date},{title:t("Account.Account.accountState-721844-14"),key:"remark",render:e=>e.remark?e.remark:"--"},k({title:t("Public.Table.Action"),align:"right",width:200,options:o=>[{label:t("Account.Account.accountState-721844-15"),onClick:async()=>{e.onLogin(o.account_id)}},{label:t("Account.Account.accountState-721844-16"),onClick:async()=>{await e.getPackageList(),await e.getDiskList(),p.value=Number(o.account_id),c.value=!0,y.username=o.username,y.password=o.init_password,y.email=o.email,y.expire_date=o.expire_date,y.remark=o.remark,x.value.package_id=Number(o.package_id),x.value.mountpoint=o.mountpoint,e.changePackage(o.package_id),a.value=!0}},{label:t("Account.Account.accountState-721844-17"),onClick:async()=>{e.removeAccount(o)}}]})]),d=i([]),m=n({p:1,rows:10,type_id:-1,search_value:""}),p=i(null),b=i([]),g=i([]),h=i([]),A=i([]),[v,y]=E(),x=i({package_id:-1,mountpoint:""}),f=i(),[F,S]=B();return{addVisible:a,search:m,table:s,columns:r,keys:d,isEdit:c,accountFormRef:u,acForData:y,expendFormState:x,wpForData:S,packageList:b,packageSourceList:g,diskMountPointList:h,diskMountSourceList:A,current_account_id:p,currentChangeDisk:f,initAccountForm:()=>v,initPackageForm:()=>F}})))}}}));
