import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import{u as a,_ as i}from"./useTableData.js?v=1723125373998";import{u as s,N as o,h as l,dG as n,cM as p,dH as r,dI as m,j as d,k as u,m as c,t as _,B as f}from"./index.js?v=1723125373998";import{u as g}from"./useLoading.js?v=1723125373998";import{b as j}from"./useTableColumns.js?v=1723125373998";import{l as y,f as b,t as h,S as k,Z as w,P as v,V as x,q as C,W as D}from"./vue.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Checkbox.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./Switch.js?v=1723125373998";const z={class:"p-20px"},R=y({__name:"index",props:{data:{}},setup(y){const R=y,{row:S}=R.data,T=s(),B=async()=>{await _(T.type,{id:S.id}),U(),T.setRefresh(!0)},L=b({p:1,limit:10,search:S.id}),{table:E,columns:F}=a([{key:"filename",title:"File name",ellipsis:{tooltip:{width:"trigger"}}},{key:"size",title:"File size",width:90,render:e=>o(e.size)},{key:"addtime",title:"Backup time",width:146},j({width:154,options:e=>[{label:"Repair",onClick:()=>{l({title:"Import Database",content:"Database will be overwritten, continue?",onConfirm:async({hide:t})=>{await n(T.type,{file:e.filename,name:S.name}),T.setRefresh(!0),t()}})}},{label:"Download",onClick:()=>{p(e.filename,e.name)}},{label:"Del",onClick:()=>{l({title:"Delete backup file",content:"Are you sure to delete backup file?",onConfirm:async({hide:t})=>{await r({id:e.id}),U(),T.setRefresh(!0),t()}})}}]})]),{loading:I,setLoading:P}=g(),U=async()=>{try{P(!0);const{message:e}=await m(h(L));d(e)?(E.data=u(e.data)?e.data:[],E.total=c(e.page)):(E.data=[],E.total=0),S.backup_count=E.total}finally{P(!1)}};return U(),(a,s)=>{const o=f,l=i,n=t,p=e;return k(),w("div",z,[v(p,null,{toolsLeft:x((()=>[v(o,{type:"primary",onClick:B},{default:x((()=>[C("Backup")])),_:1})])),table:x((()=>[v(l,{loading:D(I),"loading-num":6,data:D(E).data,columns:D(F)},null,8,["loading","data","columns"])])),pageRight:x((()=>[v(n,{page:D(L).p,"onUpdate:page":s[0]||(s[0]=e=>D(L).p=e),"page-size":D(L).limit,"onUpdate:pageSize":s[1]||(s[1]=e=>D(L).limit=e),"item-count":D(E).total,onRefresh:U},null,8,["page","page-size","item-count"])])),_:1})])}}});export{R as default};
