import{u as e,e as s,a as t,b as a,d as n,s as i,_ as o,R as l}from"./tableColumns.js?v=1732601582185";import{bu as r,f as p,bl as u,bo as m,k as _,bv as d,bp as c,bq as f,a4 as v,j as g}from"./page_layout.js?v=1732601582185";import{aa as x,bJ as y}from"./naive.js?v=1732601582185";import{d as w,r as h,O as b,X as j,Y as k,M as S,m as C,R,ac as $,P as z,Q as U,Z as L,c as P,W as B,w as H,ak as q}from"./vue.js?v=1732601582185";import{e as F,i as I,u as M,a as N,c as W,o as A}from"./utils2.js?v=1732601582185";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{d as Q,f as T,v as X,s as Y,a as Z,b as E}from"./public.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import"./soft.js?v=1732601582185";import"./index.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";const G=w({__name:"index",emits:["finish"],setup(e,{emit:s}){const t=s,a=h([]),n=async({file:e})=>{try{const s=new FormData;e.file&&s.append("plugin_zip",e.file);const{message:a}=await r(s);p(a)&&t("finish",a)}finally{a.value=[]}};return(e,s)=>{const t=x,i=u;return b(),j(i,{ref:"upload",class:"w-auto",action:"","file-list":R(a),"onUpdate:fileList":s[0]||(s[0]=e=>$(a)?a.value=e:null),"show-file-list":!1,multiple:!1,"custom-request":n},{default:k((()=>[S(t,{type:"primary"},{default:k((()=>[C(e.$slots,"default")])),_:3})])),_:3},8,["file-list"])}}}),K={class:"box"},V=_(w({__name:"index",setup(e){const s=m(),t=e=>{F(e,(()=>{s.setRefresh(!0)}))},a=()=>{window.open("https://www.aapanel.com/forum","_blank")};return(e,s)=>{const n=x;return b(),z("div",K,[U("span",null,L(e.$t("Soft.index_22")),1),S(n,{type:"primary",class:"mx-10px",size:"small",onClick:a},{default:k((()=>[P(L(e.$t("Soft.index_23")),1)])),_:1}),S(G,{onFinish:t},{default:k((()=>[P(L(e.$t("Soft.index_24")),1)])),_:1})])}}}),[["__scopeId","data-v-86e313fd"]]),ee=w({__name:"index",setup(o){const{t:l}=B(),r=m(),{keys:u,table:_,columns:x}=Q([e(),{key:"name",title:l("Soft.index_9"),width:"100",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.author?e.author:l("Soft.index_11")},{key:"name",title:l("Soft.index_10"),minWidth:"200",render:e=>S("span",{innerHTML:e.ps},null)},{key:"name",title:l("Soft.index_12"),width:"80",render:e=>"0.00"===e.price||0===e.price?S("span",null,[l("Soft.index_13")]):S("span",{class:"color-#fc6d26"},["$".concat(e.price)])},s(),t(),a(),n(),T({width:200,align:"right",options:e=>[{label:l("Home.index_5"),show:I(e),onClick:()=>{const s=M(e),t={name:e.name,title:e.title,m_version:e.versions[s].m_version,version:e.versions[s].version,update_msg:e.versions[s].update_msg};N(t,(()=>{h()}))}},{label:l("Layout.Sider.mail_12"),show:e.setup&&!W(e),onClick:()=>{X(e)}},{label:-1===e.endtime?l("Component.Auth.index_3"):l("Soft.index_18"),show:W(e),onClick:()=>{const s={source:-1===e.endtime?31:32,plugin:{name:e.title,pid:e.pid,type:e.type,plugin:!0,renew:e.endtime,ps:e.ps}};Y(s)}},{label:l("Public.Btn.Install"),show:!e.setup&&!W(e),onClick:()=>{Z({title:l("Soft.index_25"),content:l("Soft.index_38",[e.title]),onConfirm:async()=>{const{message:s}=await d({sName:e.name,version:e.manager_version,type:0});F(s,(()=>{h()}))}})}},{label:l("Public.Btn.Uninstall"),show:e.setup,onClick:()=>{Z({title:l("Public.Btn.Uninstall"),content:l("Soft.index_15",[e.title,e.version]),onConfirm:async()=>{e.version=e.name.includes("php-")?e.versions[0].m_version:e.version,await c({sName:e.name,version:e.version}),h()}})}}]})]),{loading:y,setLoading:w}=E();H((()=>r.isRefresh),(e=>{e&&(r.setRefresh(!1),h())}));const h=async()=>{try{w(!0);const{message:e}=await f(q({...i,type:10}),!!i.force);p(e)&&(_.data=e.list.data,_.total=v(e.list.page))}finally{u.value=[],i.force=0,w(!1)}};return h(),(e,s)=>{const t=g,a=O,n=J,o=D;return b(),j(o,{class:"py-16px"},{table:k((()=>[S(a,{"row-key":"name",loading:R(y),data:R(_).data,columns:R(x)},{empty:k((()=>[S(t,{onClick:R(A)},{default:k((()=>[P(L(e.$t("Soft.index_26")),1)])),_:1},8,["onClick"])])),_:1},8,["loading","data","columns"])])),pageRight:k((()=>[S(n,{page:R(i).p,"onUpdate:page":s[0]||(s[0]=e=>R(i).p=e),"page-size":R(i).row,"onUpdate:pageSize":s[1]||(s[1]=e=>R(i).row=e),"item-count":R(_).total,onRefresh:h},null,8,["page","page-size","item-count"])])),_:1})}}}),se=w({__name:"index",setup:e=>(e,s)=>{const t=y;return b(),j(t,{class:"p-16px"},{default:k((()=>[S(o),S(l),S(V),S(ee)])),_:1})}});export{se as default};
