System.register(["./page_layout-legacy.js?v=1732601582185","./index-legacy.js?v=1732601582185","./index-legacy96.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./public-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1732601582185"],(function(t,e){"use strict";var i,a,n,s,o,l,d,c,u,r,_,m,y,p,f,g,h,x,C,b,w,W,j,v,k,E,O,$,B,P,S,D;return{setters:[t=>{i=t.bD,a=t.bE,n=t.bF,s=t.g,o=t.bG,l=t.bH,d=t.f,c=t.c},t=>{u=t._},t=>{r=t._},t=>{_=t._},t=>{m=t._},t=>{y=t.h,p=t.d,f=t.i,g=t.f,h=t.a},t=>{x=t.bK,C=t.bJ,b=t.aa},t=>{w=t.d,W=t.W,j=t.M,v=t.O,k=t.X,E=t.Y,O=t.i,$=t.c,B=t.Z,P=t.R,S=t.Q,D=t.a6},null,null,null],execute:function(){t("default",w({__name:"index",setup(t){const w=D((()=>c((()=>e.import("./index-legacy201.js?v=1732601582185")),void 0))),{t:H}=W(),L=i(),M=y("",{isEdit:!1,onRefresh:()=>{J()}}),R=()=>{M.data.isEdit=!1,M.data.row=void 0,M.title=H("Waf.Custom.index_4"),M.show=!0},{table:V,columns:z,setLoading:A}=p([{key:"name",title:H("Waf.Custom.index_6"),minWidth:160,ellipsis:{tooltip:!0}},{key:"servers",title:H("Waf.Custom.index_7"),width:"20%",minWidth:260,ellipsis:{tooltip:!0},render:({servers:t})=>L.getSiteName(t)},f({width:"10%",minWidth:100,status:t=>({checkedValue:1,uncheckedValue:0,onClick:async e=>{await a({id:t.id,status:e}),t.status=e}})}),{key:"hit",title:H("Waf.Custom.index_8"),width:"10%",minWidth:100,render:({hit:t})=>{return j(x,{size:"small",type:t>0?"success":"default",bordered:!1},"function"==typeof(e=t)||"[object Object]"===Object.prototype.toString.call(e)&&!O(e)?t:{default:()=>[t]});var e}},{key:"root",title:H("Waf.Custom.index_9"),width:"20%",minWidth:160,render:({root:t})=>L.getMatchCondition(t)},{key:"action",title:H("Waf.Custom.index_10"),width:"20%",minWidth:160,render:({action:t})=>L.getExecuteAction(t.type,t.response?.type||"")},g({width:110,options:t=>[{label:H("Public.Btn.Copy"),onClick:()=>{F(t)}},{label:H("Public.Btn.Edit"),onClick:()=>{(t=>{M.data.isEdit=!0,M.data.row=t,M.title=H("Waf.Custom.index_5",[t.name]),M.show=!0})(t)}},{label:H("Public.Btn.Del"),onClick:()=>{G(t)}}]})]),F=t=>{h({title:H("Waf.Custom.index_11",[t.name]),content:H("Waf.Custom.index_12"),onConfirm:async()=>{await n({name:`${t.name}_copy_${s(6)}`,servers:t.servers?t.servers:[],status:1,is_global:0,priority:0,root:t.root,action:{type:t.action.type,response:Object.assign({},t.action.response,{headers:{}})}}),J()}})},G=t=>{h({title:H("Waf.Custom.index_13",[t.name]),content:H("Waf.Custom.index_14"),onConfirm:async()=>{await o({id:t.id}),J()}})},J=async()=>{try{A(!0);const{message:t}=await l();d(t)&&t.rules&&(V.data=Object.entries(t.rules).map((([t,e])=>({...e,id:t}))))}finally{A(!1)}};return(async()=>{try{A(!0),await L.getConfig(),await J()}finally{A(!1)}})(),(t,e)=>{const i=b,a=m,n=_,s=r,o=u,l=C;return v(),k(l,{class:"p-16px"},{default:E((()=>[j(n,null,{toolsLeft:E((()=>[j(i,{type:"primary",onClick:R},{default:E((()=>[$(B(t.$t("Waf.Custom.index_1")),1)])),_:1})])),table:E((()=>[j(a,{loading:P(V).loading,data:P(V).data,columns:P(z)},null,8,["loading","data","columns"])])),_:1}),j(s,{class:"mt-20px"},{default:E((()=>[S("li",null,B(t.$t("Waf.Custom.index_2")),1),S("li",null,B(t.$t("Waf.Custom.index_3")),1)])),_:1}),j(o,{show:P(M).show,"onUpdate:show":e[0]||(e[0]=t=>P(M).show=t),title:P(M).title,data:P(M).data,width:800,"min-height":448,footer:!0,component:P(w)},null,8,["show","title","data","component"])])),_:1})}}}))}}}));
