System.register(["./index-legacy73.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1723125373998","./index-legacy.js?v=1723125373998","./useLoading-legacy.js?v=1723125373998","./site-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy14.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./pinia-legacy.js?v=1723125373998","./Progress-legacy.js?v=1723125373998","./DataTable-legacy.js?v=1723125373998","./Checkbox-legacy.js?v=1723125373998","./Ellipsis-legacy.js?v=1723125373998","./Empty-legacy.js?v=1723125373998","./omit-legacy.js?v=1723125373998","./Tag-legacy.js?v=1723125373998"],(function(e,t){"use strict";var s,n,l,a,i,r,o,u,c,d,g,_,p,v,y,m,P,j,x,S,f,h,b,w;return{setters:[e=>{s=e._},e=>{n=e._,l=e.a},e=>{a=e.cV,i=e.k,r=e.j,o=e.L,u=e.n},e=>{c=e.u},e=>{d=e.ao,g=e.b2},e=>{_=e._},e=>{p=e.l,v=e.ad,y=e.f,m=e.r,P=e.S,j=e.Z,x=e.P,S=e.V,f=e._,h=e.W,b=e.a3},e=>{w=e._},null,null,null,null,null,null,null,null],execute:function(){const t={class:"p-20px"},H={class:"w-200px"};e("default",p({__name:"batch",props:{data:{}},setup(e,{expose:p}){const{t:E}=v(),$=e,{rows:k}=$.data,L=a(),T=y({version:null}),q={version:{trigger:"change",validator:()=>null!==T.version||new Error(E("Site.PHP.add_site_27"))}},C=m([]),{loading:M,setLoading:R}=c();(async()=>{try{R(!0);const{message:e}=await d();i(e)&&e.length>0?(C.value=e.map((e=>({label:e.name,value:e.version}))),T.version=e[0].version):(T.version=null,C.value=[])}finally{R(!1)}})();const V=()=>{const{version:e}=T;if(null===e)throw u.error(E("Site.PHP.index_67")),new Error(E("Site.PHP.index_67"));return{version:e,sites_id:k.map((e=>e.id)).join(",")}};return p({onConfirm:async({hide:e})=>{const{message:t}=await g(V());L.setRefresh(!0),r(t)&&(e=>{const{success:t,error:s}=e,n=[];t.forEach((e=>{const t=k.find((t=>t.name===e));t&&n.push({name:t.name,batchStatus:"success",reqMsg:E("Site.PHP.index_64")})})),Object.entries(s).forEach((([e,t])=>{const s=k.find((t=>t.name===e));s&&n.push({name:s.name,batchStatus:"error",reqMsg:t})})),o({title:E("Site.PHP.index_65"),width:440,footer:!0,component:_,data:{title:E("Site.PHP.index_66"),data:n,status:"done",columns:[{key:"name",title:E("Site.TableRow.SiteName"),ellipsis:{tooltip:{width:"trigger"}}}]}})})(t),e()}}),(e,a)=>{const i=w,r=n,o=l,u=s;return P(),j("div",t,[x(o,{model:h(T),rules:q},{default:S((()=>[x(r,{label:e.$t("Site.PHP.add_site_21"),path:"version"},{default:S((()=>[f("div",H,[x(i,{value:h(T).version,"onUpdate:value":a[0]||(a[0]=e=>h(T).version=e),loading:h(M),options:h(C)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"]),x(u,{class:"mt-8px"},{default:S((()=>[f("li",null,b(e.$t("Site.PHP.index_61")),1),f("li",null,b(e.$t("Site.PHP.index_62")),1),f("li",null,b(e.$t("Site.PHP.index_63")),1)])),_:1})])}}}))}}}));
