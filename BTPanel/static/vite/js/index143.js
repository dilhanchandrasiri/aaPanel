import{_ as e}from"./index73.js?v=1723125373998";import{_ as t,a as r}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1723125373998";import{_ as l}from"./index105.js?v=1723125373998";import{b as s}from"./check.js?v=1723125373998";import{bd as o}from"./site.js?v=1723125373998";import{l as i,ad as p,r as d,f as n,x as u,S as _,Z as x,P as m,V as y,_ as h,W as v,a3 as c,U as f,q as P}from"./vue.js?v=1723125373998";import{_ as g}from"./Select.js?v=1723125373998";import{ae as S,G as $,bt as b}from"./index.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998";import"./InputGroupLabel.js?v=1723125373998";import"./InputGroup.js?v=1723125373998";import"./use-theme-vars.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./pinia.js?v=1723125373998";const j={class:"m-15px"},k={class:"w-440px"},w={class:"list-none!"},H={class:"list-none!"},U={class:"list-none!"},q=i({__name:"index",emits:["refresh"],setup(i,{expose:q,emit:E}){const{t:G}=p(),I=E,C=()=>{"2"===T.proxy_type?T.proxy_host="$http_host":T.proxy_host=""},L=e=>{if("2"===T.proxy_type)return void(T.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),T.proxy_host=t},N=d(null),R=[{label:G("Site.Proxy.index_11"),value:"1"},{label:G("Site.Proxy.index_12"),value:"2"}],T=n({domains:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:""}),V={domains:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error(G("Site.PHP.add_site_23"));const r=t.trim().split("\n")[0].split(":")[1];return!(r&&(!s(r)||Number(r)<100))||new Error(G("Site.Proxy.index_13"))}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error(G("Site.Proxy.index_14"));let r=t.replace(/^http[s]?:\/\//,"");return r=r.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(r)?T.proxy_host="$http_host":T.proxy_host=r,!0}},unx:{required:!0,message:G("Site.PHP.add_site_26"),trigger:["blur","change"]},proxy_host:{required:!0,message:G("Site.PHP.add_site_26"),trigger:["blur","change"]}},W=e=>{const t=e.trim().split("\n")[0].split(":")[0];t&&(T.remark=t)};return u((()=>{})),q({onConfirm:async()=>{var e;await(null==(e=N.value)?void 0:e.validate());let t={remark:T.remark,proxy_type:"1"==T.proxy_type,proxy_pass:"1"==T.proxy_type?T.url:T.unx,domains:T.domains,proxy_host:T.proxy_host};await o(t),I("refresh")}}),(s,o)=>{const i=l,p=t,d=g,n=S,u=a,q=$,E=b,G=r,I=e;return _(),x("div",j,[m(G,{ref_key:"formRef",ref:N,model:v(T),rules:V},{default:y((()=>[m(p,{label:s.$t("Site.PHP.add_site_4"),path:"domains"},{default:y((()=>[h("div",k,[m(i,{value:v(T).domains,"onUpdate:value":[o[0]||(o[0]=e=>v(T).domains=e),W]},{default:y((()=>[h("p",null,c(s.$t("Site.PHP.add_site_5")),1),h("p",null,c(s.$t("Site.PHP.add_site_6")),1),h("p",null,c(s.$t("Site.PHP.add_site_7")),1)])),_:1},8,["value"])])])),_:1},8,["label"]),m(q,null,{default:y((()=>[m(p,{label:s.$t("Site.Proxy.index_1")},{default:y((()=>[m(d,{value:v(T).proxy_type,"onUpdate:value":[o[1]||(o[1]=e=>v(T).proxy_type=e),C],options:R,class:"w-120px"},null,8,["value"])])),_:1},8,["label"]),"1"==v(T).proxy_type?(_(),f(p,{key:0,path:"url",class:"w-310px"},{default:y((()=>[m(n,{value:v(T).url,"onUpdate:value":o[2]||(o[2]=e=>v(T).url=e),onInput:L},null,8,["value"])])),_:1})):(_(),f(p,{key:1,path:"unx",class:"w-310px"},{default:y((()=>[m(u,{"checked-type":["dir","file"],value:v(T).unx,"onUpdate:value":o[3]||(o[3]=e=>v(T).unx=e),onChange:L},null,8,["value"])])),_:1}))])),_:1}),m(p,{label:s.$t("Site.Proxy.index_2"),path:"proxy_host",class:"w-570px"},{default:y((()=>[m(E,{trigger:"hover"},{trigger:y((()=>[m(n,{value:v(T).proxy_host,"onUpdate:value":o[4]||(o[4]=e=>v(T).proxy_host=e)},null,8,["value"])])),default:y((()=>[P(" "+c(s.$t("Site.Proxy.index_4")),1)])),_:1})])),_:1},8,["label"]),m(p,{label:s.$t("Site.Proxy.index_3"),class:"w-570px"},{default:y((()=>[m(n,{value:v(T).remark,"onUpdate:value":o[5]||(o[5]=e=>v(T).remark=e),placeholder:s.$t("Site.Proxy.index_5")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),m(I,{class:"mt-16px"},{default:y((()=>[h("li",null,c(s.$t("Site.Proxy.index_6")),1),h("li",null,c(s.$t("Site.Proxy.index_7")),1),h("li",w,c(s.$t("Site.Proxy.index_8")),1),h("li",H,c(s.$t("Site.Proxy.index_9")),1),h("li",U,c(s.$t("Site.Proxy.index_10")),1)])),_:1})])}}});export{q as default};
