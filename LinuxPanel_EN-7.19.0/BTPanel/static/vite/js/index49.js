import{_ as e}from"./index96.js?v=1732601582185";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{b as t}from"./page_layout.js?v=1732601582185";import{H as l}from"./mail.js?v=1732601582185";import{_ as s}from"./index.vue_vue_type_script_setup_true_lang16.js?v=1732601582185";import{bJ as i,bG as r,ad as n,aa as o}from"./naive.js?v=1732601582185";import{d,W as u,r as _,j as c,f as p,o as m,O as v,X as f,Y as x,M as b,Q as j,R as h,c as g,Z as w}from"./vue.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./public.js?v=1732601582185";const M=()=>CKEDITOR.instances.editor.getData(),S={class:"w-350px"},y={class:"w-760px"},E={class:"w-760px"},R={class:"text-error"},$=d({__name:"index",setup(d){const{t:$}=u(),k=_(),C=_(null),D=c({sender:null,mail_to:"",subject:"",content:""}),O={mail_to:{trigger:["blur","input"],validator:()=>""!==D.mail_to.trim()||new Error($("Mail.Send.index_9"))},subject:{trigger:["blur","input"],validator:()=>""!==D.subject.trim()||new Error($("Mail.Send.index_10"))},content:{validator:()=>""!==M()||new Error($("Mail.Send.index_11"))}},I=async()=>{var e;await(null==(e=C.value)?void 0:e.validate());const a={mail_from:D.sender||"",mail_to:JSON.stringify(D.mail_to.split(",")),subject:D.subject,content:M(),subtype:"html",smtp_server:"localhost"};var t;await l(a),D.mail_to="",D.subject="",t="",CKEDITOR.instances.editor.setData(t)};return p((()=>{(async e=>{await t("/static/ckeditor/ckeditor.js?v=1732601582185"),CKEDITOR.replace(e,{customConfig:"/static/ckeditor/config.js?v1.0"})})("editor"),k.value.getList()})),m((()=>{CKEDITOR.remove(CKEDITOR.instances.editor)})),(t,l)=>{const d=r,u=n,_=o,c=a,p=e,m=i;return v(),f(m,{class:"p-16px"},{default:x((()=>[b(c,{ref_key:"formRef",ref:C,class:"pt-8px",model:h(D),rules:O},{default:x((()=>[b(d,{label:t.$t("Mail.Send.index_1"),path:"sender"},{default:x((()=>[j("div",S,[b(s,{ref_key:"senderRef",ref:k,value:h(D).sender,"onUpdate:value":l[0]||(l[0]=e=>h(D).sender=e),placeholder:t.$t("Mail.Send.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(d,{label:t.$t("Mail.Send.index_3"),path:"mail_to"},{default:x((()=>[j("div",y,[b(u,{value:h(D).mail_to,"onUpdate:value":l[1]||(l[1]=e=>h(D).mail_to=e),placeholder:t.$t("Mail.Send.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(d,{label:t.$t("Mail.Send.index_5"),path:"subject"},{default:x((()=>[j("div",E,[b(u,{value:h(D).subject,"onUpdate:value":l[2]||(l[2]=e=>h(D).subject=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),b(d,{label:t.$t("Mail.Send.index_6"),path:"content"},{default:x((()=>l[3]||(l[3]=[j("div",{class:"w-760px h-392px"},[j("textarea",{class:"hidden",name:"editor",id:"editor",rows:"10"})],-1)]))),_:1},8,["label"]),b(d,{label:" ","show-feedback":!1},{default:x((()=>[b(_,{type:"primary",size:"large",onClick:I},{default:x((()=>[g(w(t.$t("Mail.Send.index_7")),1)])),_:1})])),_:1})])),_:1},8,["model"]),b(p,{class:"ml-24px mt-24px"},{default:x((()=>[j("li",R,w(t.$t("Mail.Send.index_8")),1)])),_:1})])),_:1})}}});export{$ as default};
