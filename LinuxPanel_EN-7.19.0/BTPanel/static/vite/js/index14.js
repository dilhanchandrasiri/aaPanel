const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index123.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang.js?v=1732601582185","js/naive.js?v=1732601582185","js/vue.js?v=1732601582185","js/__commonjsHelpers__.js?v=1732601582185","js/common.js?v=1732601582185","js/page_layout.js?v=1732601582185","js/public.js?v=1732601582185","css/public.css?v=1732601582185","css/page_layout.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang2.js?v=1732601582185","js/index97.js?v=1732601582185","css/index10.css?v=1732601582185","js/index120.js?v=1732601582185","js/index121.js?v=1732601582185","css/index17.css?v=1732601582185"])))=>i.map(i=>d[i]);
import{i as a,j as e,ag as t,ah as s,f as o,o as n,ai as i,aa as l,ab as d,ac as r,af as u,I as p,a4 as _,ae as c,l as m,c as b,m as h,n as g}from"./page_layout.js?v=1732601582185";import{_ as x}from"./index.js?v=1732601582185";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import{j as D,b as j,h as C,d as R,l as U,f as $,a as z}from"./public.js?v=1732601582185";import{a as I,b as W,c as B,u as L,d as P,_ as O,e as H,g as S}from"./index120.js?v=1732601582185";import{g as E}from"./hooks.js?v=1732601582185";import{M as G,c as K,i as q,d as A,W as J,r as M,j as Q,O as T,P as V,Y as X,Q as Y,R as Z,ak as F,Z as N,w as aa,X as ea,ac as ta,a6 as sa}from"./vue.js?v=1732601582185";import{_ as oa}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{_ as na}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1732601582185";import{bG as ia,bo as la,aa as da,bJ as ra}from"./naive.js?v=1732601582185";import{_ as ua}from"./index96.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";import"./index121.js?v=1732601582185";import"./index97.js?v=1732601582185";const{t:pa}=a.global;const _a={class:"px-20px pt-24px pb-8px"},ca={class:"w-320px"},ma=A({__name:"index",setup(a,{expose:e}){const{t:i}=J(),l=M(null),d=Q({password:""}),r={password:{required:!0,message:i("Database.tools.index_65"),trigger:"blur"}},{loading:u,setLoading:p}=j();return(async()=>{try{p(!0);const{message:a}=await s();o(a)&&(d.password=n(a.root)?a.root:"")}finally{p(!1)}})(),e({onConfirm:async({hide:a})=>{var e;try{await(null==(e=l.value)?void 0:e.validate()),await t(F(d)),a()}catch(s){console.error(s)}}}),(a,e)=>{const t=na,s=ia,o=oa;return T(),V("div",_a,[G(o,{ref_key:"formRef",ref:l,model:Z(d),rules:r},{default:X((()=>[G(s,{label:a.$t("Database.index_2"),path:"password"},{default:X((()=>[Y("div",ca,[G(t,{value:Z(d).password,"onUpdate:value":e[0]||(e[0]=a=>Z(d).password=a),loading:Z(u),default:!1},null,8,["value","loading"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),ba={class:"px-20px py-24px"},ha=A({__name:"index",props:{data:{}},setup(a){const e=a,{status:t,getInfo:s}=e.data,o=Q({status:t}),n=async()=>{await i(F(o)),null==s||s()};return(a,e)=>{const t=la,s=ia,i=oa,l=ua;return T(),V("div",ba,[G(i,{"label-width":"160"},{default:X((()=>[G(s,{label:a.$t("Database.mongo.index_1"),"show-feedback":!1},{default:X((()=>[G(t,{value:Z(o).status,"onUpdate:value":[e[0]||(e[0]=a=>Z(o).status=a),n],"checked-value":1},null,8,["value"])])),_:1},8,["label"])])),_:1}),G(l,{class:"mt-16px"},{default:X((()=>[Y("li",null,N(a.$t("Database.mongo.index_2")),1)])),_:1})])}}}),ga={class:"p-16px"},xa=A({__name:"index",setup(a){const{t:t}=J(),n=sa((()=>b((()=>import("./index123.js?v=1732601582185")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))),i=l(),A=C(t("Database.mongo.index_4"),{status:!1}),M=()=>{A.data.status="enabled"===fa.authorization,A.show=!0},V=C(t("Database.tools.index_70")),oa=()=>{"enabled"===fa.authorization?V.show=!0:(ia(),h.warning(t("Database.mongo.index_5")))},na=C(t("Database.mongo.index_1"),{status:0}),ia=()=>{na.data.status="enabled"===fa.authorization?1:0,na.data.getInfo=wa,na.show=!0},la=()=>{S()},ua=async()=>{await d(i.type,{ids:[]}),Da()},{keys:_a,table:ca,columns:ba}=R([{type:"selection",width:40},{key:"name",title:pa("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:pa("Database.form.index_3"),width:"12%",minWidth:120},{key:"password",title:pa("Database.index_14"),minWidth:150,render:a=>G(D,{value:a.password},null)},{key:"backup_count",title:pa("Database.index_16"),width:"12%",render:a=>{let t;return G("div",{class:"flex items-center"},[G(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{I(a)}},{default:()=>[a.backup_count>0?"".concat(pa("Database.mongo.index_7"),"(").concat(a.backup_count,")"):pa("Database.index_18")]}),G("span",{class:"mx-4px"},[K("|")]),G(e,{onClick:()=>{W(a)}},(s=t=pa("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!q(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:pa("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>E(a)},U({onBlur:async(a,e)=>{await c({id:e.id,ps:a})}}),$({width:100,options:a=>[{label:"CHG PW",onClick:()=>{L(a)}},{label:t("Public.Btn.Del"),onClick:()=>{B([a])}}]})]),xa=[{key:"sync",label:t("Database.index_24"),onBatch:a=>{z({title:t("Database.index_25"),content:t("Database.mongo.index_6"),onConfirm:async({hide:e})=>{await d(i.type,{ids:a.map((a=>a.id))}),e()}})}},{key:"backup",type:"confirm",label:t("Database.index_27"),confirm:{title:t("Database.index_28"),desc:t("Database.index_29"),api:a=>r(i.type,{id:a.id},!1),done:()=>{Da()},columns:[{key:"name",title:t("Database.index_12")}]}},{key:"delete",label:t("Database.index_30"),onBatch:a=>{B(a)}}],fa=Q({authorization:"",msg:"",port:"",root:""}),wa=async()=>{const{message:a}=await s();o(a)&&(fa.authorization=a.authorization,fa.msg=a.msg,fa.port=a.port,fa.root=a.root)},{loading:ya,setLoading:va}=j(),ka=Q({p:1,limit:10,sid:-1,search:""}),Da=async()=>{try{va(!0);const{message:a}=await u(i.type,(()=>{const a={...F(ka)};return-1===a.sid&&delete a.sid,a})());o(a)?(ca.data=p(a.data)?a.data:[],ca.total=_(a.page)):(ca.data=[],ca.total=0)}finally{_a.value=[],va(!1)}};aa((()=>i.isRefresh),(a=>{a&&(i.setRefresh(!1),i.delRemoteId===ka.sid&&(ka.sid=-1),Da())}));return(async()=>{await i.getRemote(),i.install?(Da(),wa()):m()})(),(a,e)=>{const t=da,s=g,o=k,i=v,l=y,d=w,r=f,u=x,p=ra;return T(),ea(Z(H),null,{default:X((()=>[G(p,null,{default:X((()=>[Y("div",ga,[G(r,null,{toolsLeft:X((()=>[G(t,{type:"primary",onClick:M},{default:X((()=>[K(N(a.$t("Database.index_1")),1)])),_:1}),G(t,{onClick:oa},{default:X((()=>[K(N(a.$t("Database.index_2")),1)])),_:1}),G(t,{onClick:ia},{default:X((()=>[K(N(a.$t("Database.mongo.index_1")),1)])),_:1}),G(t,{onClick:la},{default:X((()=>[K(N(a.$t("Database.index_4")),1)])),_:1}),G(s,{class:"mx-0!",vertical:""}),G(t,{onClick:ua},{default:X((()=>[K(N(a.$t("Database.index_5")),1)])),_:1}),G(t,{onClick:Z(P)},{default:X((()=>[K(N(a.$t("Database.index_6")),1)])),_:1},8,["onClick"])])),toolsRight:X((()=>[G(Z(O),{value:Z(ka).sid,"onUpdate:value":e[0]||(e[0]=a=>Z(ka).sid=a),"store-key":"database-mongo-page",onChange:Da},null,8,["value"]),G(o,{value:Z(ka).search,"onUpdate:value":e[1]||(e[1]=a=>Z(ka).search=a),placeholder:a.$t("Database.mongo.index_3"),onSearch:Da},null,8,["value","placeholder"])])),table:X((()=>[G(i,{"checked-row-keys":Z(_a),"onUpdate:checkedRowKeys":e[2]||(e[2]=a=>ta(_a)?_a.value=a:null),loading:Z(ya),data:Z(ca).data,columns:Z(ba)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:X((()=>[G(l,{"checked-row-keys":Z(_a),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>ta(_a)?_a.value=a:null),data:Z(ca).data,options:xa},null,8,["checked-row-keys","data"])])),pageRight:X((()=>[G(d,{page:Z(ka).p,"onUpdate:page":e[4]||(e[4]=a=>Z(ka).p=a),"page-size":Z(ka).limit,"onUpdate:pageSize":e[5]||(e[5]=a=>Z(ka).limit=a),"store-key":"database-mongo-page","item-count":Z(ca).total,onRefresh:Da},null,8,["page","page-size","item-count"])])),_:1}),G(u,{show:Z(A).show,"onUpdate:show":e[6]||(e[6]=a=>Z(A).show=a),title:Z(A).title,width:540,minHeight:176,footer:!0,data:Z(A).data,component:Z(n)},null,8,["show","title","data","component"]),G(u,{show:Z(V).show,"onUpdate:show":e[7]||(e[7]=a=>Z(V).show=a),title:Z(V).title,width:520,footer:!0,component:ma},null,8,["show","title"]),G(u,{show:Z(na).show,"onUpdate:show":e[8]||(e[8]=a=>Z(na).show=a),title:Z(na).title,width:400,data:Z(na).data,component:ha},null,8,["show","title","data"])])])),_:1})])),_:1})}}});export{xa as default};
