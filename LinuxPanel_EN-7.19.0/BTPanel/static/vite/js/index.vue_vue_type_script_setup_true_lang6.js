import{an as e,o as a,ao as s,J as l,Y as t}from"./page_layout.js?v=1732601582185";import{bk as o,bR as i}from"./naive.js?v=1732601582185";import{d as u,ap as p,aq as r,W as n,aw as g,r as d,e as c,ar as m,j as f,M as v,w as h,O as y,X as w,Y as x,m as P,u as S,R as z,ak as k,n as _}from"./vue.js?v=1732601582185";const K=u({__name:"index",props:p({data:{default:()=>[]},rowKey:{default:"id"},loading:{type:Boolean,default:!1},loadingNum:{default:10},isPage:{type:Boolean,default:!1},maxHeight:{},columns:{default:()=>[]},rowProps:{},storeKey:{}},{page:{default:()=>({page:1,pageSize:10})},pageModifiers:{}}),emits:["update:page"],setup(u){const p=u,K=r(u,"page"),{t:b}=n(),{columns:j,data:$}=g(p),B=()=>o(k(j.value)),C=d(B()),E=B(),H=c((()=>{const{rowKey:e}=p;return a(e)?a=>a[e]:e})),J=c((()=>{const{storeKey:e}=p;return e?"".concat(e,"-page"):""})),M=d([]),N=m(),R=f({style:{width:"100%"},showSizePicker:!0,showQuickJumper:!0,pageSizes:[10,20,50,100],prefix:()=>{var e;return null==(e=N.pagePrefix)?void 0:e.call(N)},suffix:e=>v("span",{class:"text-13px text-default"},[b("Public.Table.Page.index_4",[e.itemCount])]),onChange:e=>{K.value.page=e},onUpdatePageSize:a=>{K.value.page=1,K.value.pageSize=a,J.value&&e(J.value,String(a))}});(()=>{if(J.value){const e=s(J.value);e&&(K.value.pageSize=l(e))}})();const Y=c((()=>({...R,page:K.value.page,pageSize:K.value.pageSize})));return h((()=>$.value),(e=>{p.loading||(M.value=e)}),{deep:!0}),h((()=>p.loading),(e=>{if(e){if(C.value.forEach((e=>{"selection"!==e.type&&(e.ellipsis&&delete e.ellipsis,e.render=()=>v(t,null,null))})),0===$.value.length)for(let s=0;s<p.loadingNum;s++){const e={},{rowKey:l}=p;e[a(l)?l:"id"]=s,M.value.push(e)}}else M.value=[],_((()=>{C.value.forEach(((e,a)=>{if("selection"===e.type)return;const s=E[a];s.ellipsis&&(e.ellipsis=s.ellipsis),e.render=s.render})),M.value=$.value}))}),{immediate:!0}),h((()=>p.columns),(()=>{C.value=B(),E.splice(0,E.length),E.push(...B())}),{deep:!0}),(e,a)=>{const s=i;return y(),w(s,S(e.$attrs,{data:z(M),"max-height":e.maxHeight,"row-key":z(H),columns:z(C),pagination:!!e.isPage&&z(Y),"row-props":e.rowProps}),{empty:x((()=>[P(e.$slots,"empty")])),default:x((()=>[P(e.$slots,"pagePrefix")])),_:3},16,["data","max-height","row-key","columns","pagination","row-props"])}}});export{K as _};
