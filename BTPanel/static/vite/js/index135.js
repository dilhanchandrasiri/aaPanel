import{N as e,j as t,_ as a,bb as l,a as s,cV as i,G as n,cG as o,L as r}from"./index.js?v=1723125373998";import{b4 as d,b5 as u}from"./site.js?v=1723125373998";import{a as p,_ as m}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1723125373998";import{c}from"./file2.js?v=1723125373998";import{l as v,ad as S,r as x,k as f,S as _,Z as h,_ as g,P as b,a3 as D,F as y,ag as w,V as C,q as $,W as T,af as j,aj as k,a5 as P,a6 as z,b as M,$ as R,az as H}from"./vue.js?v=1723125373998";import{_ as I}from"./Ellipsis.js?v=1723125373998";import{u as U}from"./use-theme-vars.js?v=1723125373998";import{_ as E,a as G}from"./Checkbox.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";const N=e=>(P("data-v-3ba7049b"),e=e(),z(),e),V={class:"p-24px"},q={class:"flex"},B={class:"flex-1 ml-14px pt-6px"},F={class:"text-19px font-bold text-#111"},L={class:"site-content mt-24px"},O={class:"site-size"},W={class:"site-title"},Z={class:"site-path"},A={class:"value"},J=N((()=>g("span",null,"(",-1))),K={class:"font-bold text-error"},Q=N((()=>g("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))),X={key:1},Y=N((()=>g("span",null,")",-1))),ee={key:0},te={class:"site-time"},ae={key:0,class:"site-db"},le={class:"db-name"},se={class:"db-size"},ie={class:"db-time"},ne={class:"mt-24px text-13px text-error"},oe={key:0},re=N((()=>g("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),de={key:1,class:"mt-6px"},ue=N((()=>g("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),pe={key:2,class:"mt-6px text-#333"},me={class:"text-error font-bold"},ce={key:3,class:"mt-6px"},ve=s(v({__name:"verify",props:{data:{}},emits:["setConfirm"],setup(s,{expose:i,emit:n}){const{t:o}=S(),r=s,u=n,{rows:p,type:m,delSite:v}=r.data,P=x(!0),z=x(!0),M=f((()=>!!m.find((e=>"database"===e)))),R=f((()=>!!m.find((e=>"path"===e)))),H=x([]),U=x(5);return(()=>{u("setConfirm",{type:"error",disabled:!0,text:o("Site.DelSite.ContentText16",[U.value])});const e=setInterval((()=>{U.value--,u("setConfirm",{text:o("Site.DelSite.ContentText16",[U.value])}),0===U.value&&(clearInterval(e),u("setConfirm",{disabled:!1,text:o("Site.DelSite.ContentText16")}))}),1e3)})(),(async()=>{const{message:e}=await d({ids:p.map((e=>e.id))});t(e)&&(H.value=e.data.map((e=>{const{database:a}=e;return t(a)&&(a.addtime_show=a.addtime.split(" ")[0],a.is_time_rule=Math.round(Date.now()/1e3)-a.st_time>2592e3&&a.total>10240),{...e,addtime_show:e.addtime.split(" ")[0],is_time_rule:Math.round(Date.now()/1e3)-e.st_time>2592e3&&e.total>10240}})))})(),(async()=>{const{message:e}=await c();t(e)&&(P.value=e.status,z.value=e.status_db)})(),i({onConfirm:async({hide:e})=>{await(null==v?void 0:v(e))}}),(s,i)=>{const n=a,o=I,r=l;return _(),h("div",V,[g("div",q,[b(n,{name:"base-warning",size:"34",color:"#f0a020"}),g("div",B,[g("div",F,D(s.$t("Site.DelSite.ContentText7")),1)])]),g("div",L,[(_(!0),h(y,null,w(T(H),(a=>(_(),h("div",{key:a.name,class:"content-item"},[g("div",O,[g("div",W,[b(o,null,{default:C((()=>[$(D(s.$t("Site.DelSite.Site"))+": "+D(a.name),1)])),_:2},1024)]),b(r,{trigger:"hover"},{trigger:C((()=>[g("div",Z,[g("div",null,D(s.$t("Site.DelSite.Path"))+":",1),g("div",A,D(a.path),1),g("div",null,[J,a.limit?(_(),h(y,{key:0},[g("span",K,D(s.$t("Site.DelSite.More50")),1),Q],64)):(_(),h("span",X,D(T(e)(a.total)),1)),Y])])])),default:C((()=>[g("div",null,[a.limit?(_(),h("p",ee,D(s.$t("Site.DelSite.ContentText8")),1)):j("",!0),g("p",null,[g("span",null,D(s.$t("Site.DelSite.Directory"))+": "+D(a.path),1),g("span",null," ("+D((a.limit?"greater than ":"")+T(e)(a.total))+")",1)])])])),_:2},1024),g("div",te,[b(r,{trigger:"hover",disabled:!a.is_time_rule},{trigger:C((()=>[g("div",null,[g("span",null,D(s.$t("Site.DelSite.Create"))+": ",1),g("span",{class:k({"text-error":a.is_time_rule})},D(a.addtime_show),3)])])),default:C((()=>[g("div",null,[g("p",null,D(s.$t("Site.DelSite.ContentText9")),1),g("p",null,D(s.$t("Site.DelSite.Time"))+": "+D(a.addtime_show),1)])])),_:2},1032,["disabled"])])]),T(M)&&T(t)(a.database)?(_(),h("div",ae,[g("div",le,[b(o,null,{default:C((()=>[$(D(s.$t("Site.DelSite.DB"))+": "+D(a.name),1)])),_:2},1024)]),g("div",se,[b(r,{trigger:"hover"},{trigger:C((()=>[$(D(s.$t("Site.DelSite.Size"))+": "+D(T(e)(a.database.total)),1)])),default:C((()=>[g("div",null,[g("p",null,D(s.$t("Site.DelSite.ContentText10")),1),g("p",null,D(s.$t("Site.DelSite.Database"))+": "+D(T(e)(a.database.total)),1)])])),_:2},1024)]),g("div",ie,[b(r,{trigger:"hover",disabled:!a.database.is_time_rule},{trigger:C((()=>[g("div",null,[g("span",null,D(s.$t("Site.DelSite.Create"))+": ",1),g("span",{class:k({"text-error":a.database.is_time_rule})},D(a.addtime_show),3)])])),default:C((()=>[g("div",null,[g("p",null,D(s.$t("Site.DelSite.ContentText11")),1),g("p",null,D(s.$t("Site.DelSite.Time"))+": "+D(a.database.addtime_show),1)])])),_:2},1032,["disabled"])])])):j("",!0)])))),128))]),g("div",ne,[T(M)&&!T(z)?(_(),h("div",oe,[re,g("span",null,D(s.$t("Site.DelSite.ContentText12")),1)])):j("",!0),T(R)&&!T(P)?(_(),h("div",de,[ue,g("span",null,D(s.$t("Site.DelSite.ContentText13")),1)])):j("",!0),T(U)>0?(_(),h("div",pe,[g("span",null,D(s.$t("Site.DelSite.ContentText14")),1),g("span",me,D(T(U)),1),g("span",null,D(s.$t("Site.DelSite.Second")),1)])):(_(),h("div",ce,D(s.$t("Site.DelSite.ContentText15")),1))])])}}}),[["__scopeId","data-v-3ba7049b"]]),Se={class:"p-24px"},xe={class:"flex pl-12px"},fe={class:"flex-1 ml-14px pt-8px"},_e={class:"text-16px font-bold text-#111"},he={class:"mt-20px"},ge={class:"mr-8px"},be=g("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1),De={class:"flex items-center h-40px mt-24px mx-12px pl-48px bg-#f0f0f0 text-14px"},ye={class:"mx-12px"},we=g("span",null,"=",-1),Ce={class:"w-80px ml-12px"},$e=v({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:s}=S(),d=e,{rows:c}=d.data,v=U(),y=i(),w=x(null),j=x([]),k=f((()=>1===j.value.length&&"ftp"===j.value[0])),P=x(0),z=x(0),I=x(null),N=x(!1),V=x("");let q=null;const B=e=>{H((()=>{(e=>{var t;V.value=e,N.value=!0,null==(t=w.value)||t.focus(),q&&clearTimeout(q),q=window.setTimeout((()=>{N.value=!1}),3e3)})(e)}))()},F=async e=>{1===c.length?(await L(c[0],!0),y.setRefresh(!0),null==e||e()):O(e)},L=async(e,t=!1)=>{const a=j.value.reduce(((e,t)=>(e[t]=1,e)),{});return await u(Object.assign({id:e.id,webname:e.name},a),t)},O=e=>{r({title:s("Site.Cert.DelSite"),hideClose:!0,component:p,data:{title:s("Site.Cert.DelSite"),api:L,data:c,callback:t=>{e(),W(t)}}})},W=e=>{y.setRefresh(!0),r({title:s("Site.DelSite.DelSiteResult"),width:440,footer:!0,component:m,data:{title:s("Site.Cert.DelSite"),data:e,status:"done",columns:[{key:"name",title:s("Site.TableRow.SiteName"),ellipsis:{tooltip:{width:"trigger"}}}]}})};return I.value=null,P.value=Math.round(9*Math.random()+1),z.value=Math.round(9*Math.random()+1),t({onConfirm:async({hide:e})=>null==I.value||null==I.value?(B(s("Site.DelSite.ContentText5")),!1):I.value!==P.value+z.value?(B(s("Site.DelSite.ContentText6")),!1):void(0===j.value.length||k.value?await F(e):(r({title:1===c.length?"".concat(s("Site.DelSite.ContentText3")," [").concat(c[0].name,"]"):s("Site.DelSite.ContentText4"),width:740,footer:!0,data:{rows:c,type:j.value,delSite:F},component:ve}),e()))}),(e,t)=>{const s=a,i=E,r=n,d=G,u=o,p=l;return _(),h("div",Se,[g("div",xe,[b(s,{name:"base-warning",size:"34",color:"#f0a020"}),g("div",fe,[g("div",_e,[g("div",null,D(e.$t("Site.PHP.index_59")),1),g("div",he,D(e.$t("Site.PHP.index_60")),1)]),b(d,{value:T(j),"onUpdate:value":t[0]||(t[0]=e=>M(j)?j.value=e:null)},{default:C((()=>[b(r,{size:32,class:"items-center h-24px mt-24px"},{default:C((()=>[b(i,{value:"ftp"},{default:C((()=>[$(D(e.$t("Site.PHP.add_site_10")),1)])),_:1}),b(i,{value:"database"},{default:C((()=>[g("span",ge,D(e.$t("Site.PHP.add_site_16")),1),be])),_:1}),b(i,{value:"path"},{default:C((()=>[$(D(e.$t("Site.PHP.index_20")),1)])),_:1})])),_:1})])),_:1},8,["value"])])]),g("div",De,[g("span",null,D(e.$t("Site.DelSite.Result"))+":",1),g("span",ye,D(T(P))+" + "+D(T(z)),1),we,g("div",Ce,[b(p,{show:T(N),"onUpdate:show":t[2]||(t[2]=e=>M(N)?N.value=e:null),trigger:"manual",placement:"top-start","arrow-point-to-center":!0,style:R({"--n-color":T(v).errorColor,"--n-text-color":"#fff"})},{trigger:C((()=>[b(u,{ref_key:"inputRef",ref:w,value:T(I),"onUpdate:value":t[1]||(t[1]=e=>M(I)?I.value=e:null),size:"small","show-button":!1,placeholder:""},null,8,["value"])])),default:C((()=>[g("div",null,D(T(V)),1)])),_:1},8,["show","style"])])])])}}});export{$e as default};
