import{a3 as t,W as s,r as a,j as o,M as i,c as e,F as n}from"./vue.js?v=1732601582185";import{h as c,b$ as u,a1 as l,c0 as r,bT as d,f as _}from"./page_layout.js?v=1732601582185";import{b as k,f as m,z as p,a as h}from"./public.js?v=1732601582185";import{aV as w}from"./naive.js?v=1732601582185";const f=t("diskStore",(()=>{const{t:t}=s(),{loading:f,setLoading:y}=k(),g=a({device:"",mountpoint:"",fstype:"",total:0,used:0,free:0,used_percent:0,inodes_total:0,inodes_used:0,inodes_free:0,inodes_used_percent:0,is_group_quota:!1,is_user_quota:!1,is_default:!1,account_allocate:0,account_percent:0}),D=o({data:[]}),v=a(!1),A=a([{title:t("Account.Disk.whm_disk_810348-0"),key:"mountpoint"},{title:t("Account.Disk.whm_disk_810348-1"),key:"device"},{title:t("Account.Disk.whm_disk_810348-9"),key:"is_group_quota",render:s=>s.is_user_quota?i("span",null,[t("Account.Disk.whm_disk_810348-10")]):i("div",null,[i("span",{class:"text-warning"},[t("Account.Disk.whm_disk_810348-11")]),e(" | "),i("span",{class:"text-primary cursor-pointer",onClick:()=>async function(t){await r(t),j()}(s.mountpoint)},[t("Account.Disk.whm_disk_810348-12")])])},{title:t("Account.Disk.whm_disk_810348-2"),key:"total",width:120,render:t=>c(t.total)},{title:t("Account.Disk.whm_disk_810348-3"),key:"used",render:t=>{const s=Math.round(t.used_percent);return i(n,null,[i("div",{class:"mb-[.2rem]"},[s,e("% / "),c(t.used)]),i(w,{height:10,color:C(s),percentage:s,showIndicator:!1},null)])}},m({title:t("Public.Table.Action"),align:"right",width:200,options:s=>[{label:t("Account.Disk.whm_disk_810348-4"),show:s.is_default&&!v.value,disabled:!0},{label:"重启服务",show:s.is_default&&v.value,type:"warning",onClick:async()=>p()},{label:t("Account.Disk.whm_disk_810348-5"),show:!s.is_default,onClick:async()=>{h({title:t("Account.Disk.whm_disk_810348-6"),content:t("Account.Disk.whm_disk_810348-7",[s.mountpoint]),onConfirm:async()=>{await u({mountpoint:s.mountpoint}),v.value=!0,j()}})}}]})]),b=l();const C=t=>{const s=Math.round(t);return s>80?b.value.errorColor:s>60?b.value.warningColor:b.value.primaryColor},j=async()=>{try{y(!0);const t=await d();if(_(t)){D.data=t.message;const s=t.message.find((t=>t.is_default));if(s){const t={...s};t.account_percent=Math.round(t.account_allocate/t.total*100),g.value=t}}}finally{y(!1)}};return{loading:f,DefaultDisk:g,init:j,columns:A,table:D,diskColor:C}}));export{f as u};
