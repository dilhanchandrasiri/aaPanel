System.register(["./index-legacy96.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./setting-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185"],(function(e,l){"use strict";var a,t,n,i,s,u,c,r,o,d,p,g,f,m,y,_,v,V,x,h,b,S,j,w,W,k,E,C,P,B,$;return{setters:[e=>{a=e._},e=>{t=e._},e=>{n=e.I,i=e.m},e=>{s=e.d,u=e.f,c=e.a},e=>{r=e.f,o=e.m,d=e.h,p=e.i,g=e.j},e=>{f=e.ad,m=e.bo,y=e.aa},e=>{_=e.d,v=e.t,V=e.W,x=e.j,h=e.r,b=e.M,S=e.F,j=e.n,w=e.O,W=e.P,k=e.Q,E=e.R,C=e.Y,P=e.c,B=e.Z,$=e.ak},null,null],execute:function(){const l={class:"p-20px"},N={class:"flex mb-12px"},U={class:"flex-1 mr-12px"},z={class:"w-150px mr-12px"},D={class:"text-error"};e("default",_({__name:"index",props:{type:{}},setup(e,{expose:_}){const R=v(e,"type"),{t:A}=V(),F=x({ruleValue:"",ps:""}),H=async()=>{""!==F.ruleValue.trim()?(await g({...$(F),ruleName:R.value}),J(),F.ruleValue="",F.ps=""):i.error(A("Waf.Setting.config_194"))},I=h(null),L=h(null),{table:M,columns:O,setLoading:Q}=s([{key:"rule",title:A("Waf.Setting.config_82"),render:e=>b(S,null,[e.isEdit?b(f,{ref:I,value:e.ruleVal,size:"small",type:"textarea",autosize:{minRows:2,maxRows:2},placeholder:"",onUpdateValue:l=>{e.ruleVal=l}},null):e.rule])},{key:"ps",title:A("Waf.Setting.config_190"),width:150,render:e=>b(S,null,[e.isEdit?b(f,{ref:L,value:e.psVal,size:"small",placeholder:"",onUpdateValue:l=>{e.psVal=l}},null):e.ps])},{key:"status",title:A("Waf.Setting.config_82"),width:60,render:(e,l)=>b(m,{value:e.status,size:"small",checkedValue:1,uncheckedValue:0,onUpdateValue:async a=>{await r({index:l,ruleName:R.value}),e.status=a}},null)},u({width:100,options:(e,l)=>e.isEdit?[{label:A("Public.Btn.Save"),onClick:()=>{Z(e,l)}},{label:A("Public.Btn.Cancel"),onClick:()=>{q(e)}}]:[{label:A("Public.Btn.Edit"),onClick:()=>{Y(e)}},{label:A("Public.Btn.Del"),show:e.isDel,onClick:()=>{G(e,l)}}]})]),Y=e=>{e.isEdit=!0,j((()=>{I.value?.focus()}))},Z=async(e,l)=>{e.isEdit=!1,await o({index:l,ruleBody:e.ruleVal,rulePs:e.psVal,ruleName:R.value}),e.rule=e.ruleVal,e.ps=e.psVal},q=e=>{e.isEdit=!1,e.ruleVal=e.rule,e.psVal=e.ps},G=async(e,l)=>{c({title:A("Waf.Setting.config_195",[e.rule]),content:A("Waf.Setting.config_196"),onConfirm:async()=>{await d({index:l,ruleName:R.value}),J()}})},J=async()=>{try{Q(!0);const{message:e}=await p({ruleName:R.value});n(e)&&(M.data=e.map((e=>({rule:e[1],ruleVal:e[1],ps:e[2],psVal:e[2],status:e[0],isEdit:!1,isDel:1===e[3]}))))}finally{Q(!1)}};return J(),_({init:J}),(e,n)=>{const i=y,s=t,u=a;return w(),W("div",l,[k("div",N,[k("div",U,[b(E(f),{value:E(F).ruleValue,"onUpdate:value":n[0]||(n[0]=e=>E(F).ruleValue=e),placeholder:e.$t("Waf.Setting.config_189")},null,8,["value","placeholder"])]),k("div",z,[b(E(f),{value:E(F).ps,"onUpdate:value":n[1]||(n[1]=e=>E(F).ps=e),placeholder:e.$t("Waf.Setting.config_190")},null,8,["value","placeholder"])]),b(i,{type:"primary",onClick:H},{default:C((()=>[P(B(e.$t("Public.Btn.Add")),1)])),_:1})]),b(s,{"max-height":340,loading:E(M).loading,data:E(M).data,columns:E(O)},null,8,["loading","data","columns"]),b(u,{class:"mt-16px"},{default:C((()=>[k("li",D,B(e.$t("Waf.Setting.config_191")),1),k("li",null,B(e.$t("Waf.Setting.config_192")),1),k("li",null,B(e.$t("Waf.Setting.config_193")),1)])),_:1})])}}}))}}}));
