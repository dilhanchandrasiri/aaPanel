System.register(["./page_layout-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185"],(function(t,e){"use strict";var n,a,l,i,o,c,s,u,r,d,p,m,f,h,b,v,g,x,y,k,w,C,_,j,P,S,W,B,V,q,z,L,M,R,T,$,O,N,Q,A,F,H,U,D,E,I,G,J,X,Y,Z,K,tt,et,nt,at,lt,it,ot,ct,st,ut,rt,dt,pt;return{setters:[t=>{n=t.g,a=t.m,l=t.l,i=t.a,o=t.b,c=t._,s=t.c,u=t.i,r=t.d,d=t.u,p=t.e,m=t.f,f=t.h,h=t.j,b=t.k,v=t.n,g=t.s,x=t.o,y=t.p,k=t.q},t=>{w=t.bb,C=t.bl,_=t.ad,j=t.be,P=t.aV,S=t.bm,W=t.$,B=t.bh,V=t.bn,q=t.bo,z=t.bp,L=t.bq},t=>{M=t.r,R=t.d,T=t.W,$=t.f,O=t.n,N=t.M,Q=t.c,A=t.a9,F=t.j,H=t.a6,U=t.e,D=t.R,E=t.O,I=t.X,G=t.Y,J=t.Z,X=t.P,Y=t.Q,Z=t.aa,K=t.k,tt=t.ab,et=t.ac,nt=t.ad,at=t.F,lt=t.i,it=t.ae,ot=t.af,ct=t.V,st=t.ag,ut=t.y,rt=t.ah,dt=t.o,pt=t.G},null],execute:function(){var mt=document.createElement("style");mt.textContent=".bt-table-input[data-v-04feea87]{width:100%;height:22px;padding:0;outline-offset:2px;border:1px solid transparent;background:transparent;white-space:pre-line;color:#666}.bt-table-input[data-v-04feea87]:hover,.bt-table-input[data-v-04feea87]:focus{border:1px solid #20a53a;background-color:#fff}\n",document.head.appendChild(mt),t({A:function(t,e=3){let n=null,a=!1,l=0;const i=()=>{a||l>=3?o():n=window.setTimeout((async()=>{try{await t(),l=0}catch{l++}finally{i()}}),1e3*e)},o=()=>{n&&(clearTimeout(n),n=null)};return dt((()=>{a=!0,o()})),{loop:i,clearTimer:o}},B:function(t=100){const e=M(0);let n=null;return function a(){n=requestAnimationFrame((()=>{e.value++,e.value>=t||a()}))}(),pt((()=>{n&&cancelAnimationFrame(n)})),{defer:function(t){return e.value>=t}}},C:function(){$((()=>{setTimeout((()=>{l()}),1e3)}))},D:function(t={}){const e=t.key||"password";return{key:e,title:t.title||u.global.t("Public.Table.Password"),width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,render:t=>{const n=t[e];return N(Rt,{value:x(n)?n:""},null)}}},E:function(t){const{key:e="status"}=t;return{key:t.key||"Caching(nginx)",title:t.title||"Caching(nginx)",width:t.width,minWidth:70,render:n=>N(Vt,{disabled:!!t.disabled&&t.disabled(n),tips:t.tips,value:n[e],onClick:e=>{t.onClick(e,n)}},null)}},F:async function(t){const{message:e}=await p({sName:t});if(m(e)&&!e.status)return gt(t),Promise.reject(!1)},J:async function(t,e){await vt(),soft.input_zip(t.name,t.tmp_path,t.title,(function(){e?.()}))},b:function(t=!1){const e=M(t);return{loading:e,setLoading:(t,n=!0)=>{n&&(e.value=t)}}},c:Ct,d:function(t){const e=M([]),n=F({data:[],total:0,loading:!1}),a=M(t);return{keys:e,table:n,columns:a,setLoading:(t,e=!0)=>{e&&(n.loading=t)}}},f:function(t){return{key:t.key||"action",title:t.title||u.global.t("Public.Table.Action"),align:t.align||"right",width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,render:(e,n)=>N(Bt,{options:t.options?.(e,n)||[]},null)}},h:function(t="",e={}){return F({show:!1,title:t,data:e})},i:function(t){const{key:e="status"}=t;return{key:e,title:t.title||u.global.t("Public.Table.Status"),width:t.width||"8%",minWidth:t.minWidth||80,render:n=>{const a=t.status(n);return N(Wt,{value:n[e],"checked-label":a.checkedLabel,"checked-value":a.checkedValue,"unchecked-label":a.uncheckedLabel,"unchecked-value":a.uncheckedValue,onClick:t=>{a.onClick?.(t)}},null)}}},k:function(t={}){return{key:t.key||"quota",title:t.title||u.global.t("Component.Quota.index_1"),width:t.width||"8%",minWidth:t.minWidth||100,maxWidth:t.maxWidth||120,render:e=>N(Pt,{type:t.type||"",data:e,callback:t.callback},null)}},l:function(t){const{key:e="ps"}=t;return{key:e,title:t.title||u.global.t("Public.Table.Note"),width:t.width,minWidth:t.minWidth||120,render:n=>N(St,{value:n[e],onBlur:async(a,l)=>{const i=n[e];if(i!==a)try{await t.onBlur(a,n),n[e]=a}catch(o){l.target.value=i,console.error(o)}}},null)}},m:async function(){await vt(),bt.soft.get_soft_find("pgsql_manager",(function(t){for(let e=0;e<t.versions.length;e++){if(1==t.versions[e].setup){bt.soft.set_lib_config("pgsql_manager","PostgreSQL manager");break}bt.soft.install("pgsql_manager");break}}))},n:gt,o:function(t){const e=M("auto"),n=d(),{mainHeight:a}=ct(n),{top:l,bottom:i}=st(t);return ut((()=>{if(0===a.value)return;const t=document.querySelector("#layout-main"),n=t?.children[0],o=n?.getBoundingClientRect(),c=(o?.bottom||0)-i.value;e.value=a.value-l.value-c+"px"})),{height:e}},p:function(t,e={}){const n={},a=rt(function(){const{host:e,protocol:n}=window.location;return("http:"===n?"ws://":"wss://")+e+"/v2"+t}(),{autoReconnect:{retries:0,delay:500},immediate:e.immediate,onConnected:()=>{!function(){const t={};t["x-http-token"]=document.getElementById("request_token_head")?.getAttribute("token"),e.verifyData&&Object.assign(t,e.verifyData),l(t)}(),i()},onMessage:(t,a)=>{if(y(a.data)){const e=JSON.parse(a.data),l=e.callback||e.ws_callback||e.def_name;l&&n[l]&&n[l].callback(t,a)}e.onMessage?.(t,a)},onDisconnected:e.onDisconnected}),l=t=>{(t=>a.status.value===t)("OPEN")&&a.send(m(t)?JSON.stringify(t):t)},i=()=>{Object.entries(n).forEach((([,t])=>{l(t.data)}))};return{...a,send:(t,e)=>{if(e)n[e.action]={data:t,callback:e.callback};else{const e=k(10);n[e]={data:t,callback:()=>{}}}l(t)},close:()=>{Object.keys(n).forEach((t=>{delete n[t]})),a.close()}}},r:function(t){const e=d(),{mainHeight:n}=ct(e),{top:a,bottom:l}=st(t);return{height:U((()=>{if(0===n.value)return"auto";const t=document.querySelector("#layout-main"),e=t?.children[0],i=e?.getBoundingClientRect(),o=(i?.bottom||0)-l.value;return n.value-a.value-o+"px"}))}},s:_t,v:async function(t){await vt(),t.admin?bt.soft.set_lib_config(t.name,t.title,t.version):soft.set_soft_config(t.name,t.title)},w:function(t){return new Promise(((e,n)=>{if(d().isFree)return _t(t),void n(!1);e(!0)}))},x:function(t){const{key:e="status"}=t;return{key:t.key||"status",title:t.title||u.global.t("Public.Table.Status"),width:t.width,minWidth:70,render:n=>N(Wt,{value:n[e],"checked-title":t.checkedLabel||u.global.t("Public.Status.Running"),"unchecked-title":t.uncheckedLabel||u.global.t("Public.Status.Stop"),checkedValue:t.checkedValue,uncheckedValue:t.uncheckedValue,onClick:e=>{t.confirm&&wt(t.confirm(e,n))}},null)}},y:function(t={}){const e=ot();return{key:t.key||"path",title:t.title||u.global.t("Public.Table.Path"),width:t.width,minWidth:t.minWidth||120,ellipsis:{tooltip:!0},render:t=>N("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{g("Path",t.path),e.push("/files")}},[t.path])}},z:function(){kt({title:u.global.t("Home.index_8"),width:350,minHeight:110,component:H((()=>s((()=>e.import("./index-legacy95.js?v=1732601582185")),void 0)))})}});const ft={dynamicModals:M([]),modalInstRefs:{}},ht=t("g",(()=>ft));async function vt(){const t=a.loading("Loading, please wait...");try{await l(),await i(),await o("/static/ace/ace.js?v=1732601582185"),await o("/static/vite/oldjs/soft.js?v=1732601582185")}finally{t.close()}}async function gt(t,e){await vt(),bt.soft.install(t,(function(){e?.()}))}const xt=R({name:"BtModal",props:{data:{type:Object}},setup(t){const{t:e}=T(),n=M(0),l=M(0),i=M(null),o=M(null);return o.value=null,n.value=Math.round(9*Math.random()+1),l.value=Math.round(9*Math.random()+1),$((()=>{O((()=>{i.value&&i.value.focus()}))})),{sum:o,addend1:n,addend2:l,inputRef:i,onConfirm:async i=>(o.value===n.value+l.value?(await(t.data?.onConfirm?.(i)),i.hide()):a.error(e("Component.Confirm.index_5")),!1)}},render(){const{t:t}=T();return N("div",{class:"p-20px"},[N("div",{class:"flex items-center"},[N("div",{class:"flex-1 text-12px leading-20px"},[w(this.data?.content)])]),N("div",{class:"confirm-calc-box flex items-center h-48px mt-12px px-12px bg-#f0f0f0"},[N("div",null,[t("Component.Confirm.index_4")]),N("div",{class:"confirm-calc-num mx-10px"},[this.addend1,Q(" + "),this.addend2]),N("div",{class:"mr-10px"},[Q("=")]),N("div",{class:"w-90px"},[N(C,{ref:"inputRef",size:"small",placeholder:"",inputProps:{name:"sum"},value:this.sum,showButton:!1,onUpdateValue:t=>{this.sum=t}},null)])])])}}),yt=R({name:"BtModal",props:{data:{type:Object}},setup(t){const{t:e}=T(),n=M(null),l=M(""),i=M(t.data?.text||"");return $((()=>{O((()=>{n.value&&n.value.focus()}))})),{text:i,result:l,inputRef:n,onConfirm:async n=>(l.value===i.value?(await(t.data?.onConfirm?.(n)),n.hide()):a.error(e("Component.Confirm.index_2")),!1)}},render(){return N("div",{class:"p-20px"},[N("div",{class:"flex items-center"},[N(c,{name:"base-warning",size:"30",color:"#f0a020"},null),N("div",{class:"flex-1  ml-12px text-13px leading-20px"},[w(this.data?.content)])]),N("div",{class:"mt-16px p-12px bg-#e6e6e6"},[N(A,{tag:"div",keypath:"Component.Confirm.index_1",scope:"global"},{text_:N("span",{class:"text-error"},[this.text])}),N(_,{ref:"inputRef",size:"small",class:"mt-8px",placeholder:"",inputProps:{name:"confirm_text"},value:this.result,onUpdateValue:t=>{this.result=t}},null)])])}}),kt=t("u",(function(t){const e=n(),a=ht();return a.dynamicModals.value.push({...t,key:e,destroy:()=>{a.modalInstRefs[`modal-${e}`].hide()}}),{hide:()=>{a.modalInstRefs[`modal-${e}`].hide()}}})),wt=t("a",(({title:t,content:e,width:n=350,onConfirm:a=()=>{},onPublicClose:l=()=>{}})=>kt({title:t,width:n,footer:!0,onConfirm:a,onPublicClose:l,content:()=>N("div",{class:"flex p-20px"},[N(c,{name:"base-warning",size:"30",color:"#f0a020"},null),N("div",{class:"confirm-content flex-1 ml-10px pt-4px text-14px leading-22px"},[w(e)])])})));function Ct(){kt({title:u.global.t("Component.BindAccount.index_6"),width:400,minHeight:340,component:H((()=>s((()=>e.import("./index-legacy94.js?v=1732601582185")),void 0)))})}async function _t(t){try{const{message:n}=await r(),a=j(n,"data.username","");kt({width:1024,height:660,data:{username:a,...t},component:H((()=>s((()=>e.import("./index-legacy92.js?v=1732601582185")),void 0)))})}catch{Ct()}}t("q",(({title:t,content:e,width:n=350,onConfirm:a=()=>{}})=>{kt({title:t,width:n,footer:!0,data:{content:e,onConfirm:a},component:xt})})),t("I",(({text:t,title:e,content:n,width:a=470,onConfirm:l=()=>{}})=>{kt({title:e,width:a,footer:!0,data:{text:t,content:n,onConfirm:l},component:yt})})),t("t",(({title:t="",desc:n="",data:a=[],columns:l=[],api:i,done:o})=>{kt({title:t,width:440,footer:!0,data:{title:t,desc:n,data:a,columns:l,api:i,done:o},component:H((()=>s((()=>e.import("./index-legacy93.js?v=1732601582185")),void 0)))})}));const jt={class:"leading-20px"},Pt=R({__name:"index",props:{type:{default:"site"},data:{},callback:{}},setup(t){const{t:n}=T(),a=t,l=U((()=>{const{data:t}=a,{quota:e}=t;return!e.size})),i=U((()=>{if(l.value)return 0;const{data:t}=a,e=j(t,"quota.used",0);let n=j(t,"quota.size",0);return n=1024*n*1024,0===n?0:e/n*100})),o=U((()=>{const{data:t}=a,e=j(t,"quota.used",0);return f(e)})),c=U((()=>{const{data:t}=a;return`${j(t,"quota.size",0).toFixed(2)} MB`})),u=U((()=>i.value<90?"success":"error")),r=new Map([["site","Site"],["ftp","FTP"],["database","Database"]]),d=()=>{kt({title:`${n("Component.Quota.index_5",[a.data.name,r.get(a.type)||"--"])}`,width:480,minHeight:222,footer:!0,data:{type:a.type,info:a.data,callback:a.callback},component:H((()=>s((()=>e.import("./quota-config-legacy.js?v=1732601582185")),void 0)))})};return(t,e)=>{const n=h,a=P,s=S;return D(l)?(E(),I(n,{key:0,onClick:d},{default:G((()=>[Q(J(t.$t("Component.Quota.index_2")),1)])),_:1})):(E(),X("div",{key:1,class:"cursor-pointer",onClick:d},[N(s,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:G((()=>[N(a,{type:"line",status:D(u),percentage:D(i),height:12,"border-radius":2,"show-indicator":!1},null,8,["status","percentage"])])),default:G((()=>[Y("div",jt,[Y("p",null,J(t.$t("Component.Quota.index_3",[D(o)])),1),Y("p",null,J(t.$t("Component.Quota.index_12",[D(c)])),1),Y("p",null,J(t.$t("Component.Quota.index_4")),1)])])),_:1})]))}}}),St=b(R({__name:"index",props:{value:{default:""},onUpdateValue:{},onBlur:{}},setup(t){const e=t,n=Z(e,"value"),a=t=>{const n=t.target;e?.onBlur?.(n.value||"",t)};return(t,e)=>K((E(),X("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>et(n)?n.value=t:null),class:"bt-table-input",onBlur:a},null,544)),[[tt,D(n)]])}}),[["__scopeId","data-v-04feea87"]]),Wt=t("_",R({__name:"index",props:{value:{type:[Number,String,Boolean,null],default:"1"},checkedValue:{type:[Number,String,Boolean],default:"1"},uncheckedValue:{type:[Number,String,Boolean],default:"0"},checkedLabel:{default:""},uncheckedLabel:{default:""},onClick:{default:void 0}},setup(t){const e=t,n=()=>{const{value:t,checkedValue:n,uncheckedValue:a,onClick:l}=e;l&&W(l,t===n?a:n)};return(t,e)=>{const a=B;return E(),I(a,{class:nt(["items-center cursor-pointer",t.value===t.checkedValue?"text-primary":"text-error"]),size:0,inline:!0,onClick:n},{default:G((()=>[Y("span",null,J(t.value===t.checkedValue?t.checkedLabel||t.$t("Public.Status.Running"):t.uncheckedLabel||t.$t("Public.Status.Stopped")),1),Y("span",{class:nt(["iconfont mt-1px","icon-"+(t.value===t.checkedValue?"start":"stop")])},null,2)])),_:1},8,["class"])}}})),Bt=t("H",R({name:"BtLinkGroup",props:{options:{type:Array,default:()=>[]}},render(){let t;return N(B,{class:"items-center",justify:"end",inline:!0,size:0},"function"==typeof(e=t=this.options.filter((t=>void 0===t.show||t.show)).map(((t,e)=>{const n=t.linkType||"default";return N(at,null,[0!==e?N(v,{class:"mx-4px!",vertical:!0},null):"","default"===n?N(h,{disabled:t.disabled||!1,class:t.class,type:t.type,width:t.width||"auto",onClick:()=>{t.onClick?.()}},{default:()=>[t.label]}):"","dropdown"===n?N(V,t.dropdown||{},{default:()=>[N(h,{disabled:t.disabled||!1,onClick:()=>{t.onClick?.()}},{default:()=>[t.label,N(c,{name:"base-arrow-bottom",size:"13"},null)]})]}):""])})))||"[object Object]"===Object.prototype.toString.call(e)&&!lt(e)?t:{default:()=>[t]});var e}})),Vt=t("G",R({__name:"index",props:{disabled:{type:Boolean,default:!1},tips:{},value:{type:[Boolean,String,Number],default:!1},onClick:{}},setup(t){let e=M(!0);const n=t;"string"==typeof n.value||"number"==typeof n.value?e.value=!!n.value:e.value=n.value;const a=()=>{const{onClick:t}=n;t&&W(t,e.value)};return(t,n)=>{const l=q,i=z;return E(),I(i,{trigger:"hover",disabled:!(t.disabled&&D(e))},{trigger:G((()=>[N(l,{size:"small",value:D(e),"onUpdate:value":[n[0]||(n[0]=t=>et(e)?e.value=t:e=t),a],disabled:t.disabled&&D(e)},null,8,["value","disabled"])])),default:G((()=>[Q(" "+J(t.tips),1)])),_:1},8,["disabled"])}}})),qt=t("e",(async t=>{const{copy:e,isSupported:n}=it({legacy:!0});n.value?(e(t),a.success(u.global.t("Utils.Copy.index_1"))):a.error(u.global.t("Utils.Copy.index_2"))})),zt={class:"flex"},Lt={class:"w-0 flex-1 flex items-center"},Mt={class:"min-w-0"},Rt=t("j",R({__name:"index",props:{value:{default:""}},setup(t){const e=t,n=M(!1),a=U((()=>n.value?e.value:"**********")),l=U((()=>n.value?"icon-eye-close":"icon-browse")),i=()=>{n.value=!n.value},o=async()=>{qt(`${e.value}`)};return(t,e)=>{const n=L,s=c;return E(),X("div",zt,[Y("div",Lt,[Y("div",Mt,[N(n,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"200px"}}},{default:G((()=>[Q(J(D(a)),1)])),_:1})]),Y("div",{class:"ml-6px text-15px cursor-pointer",title:"Show",onClick:i},[Y("i",{class:nt(["iconfont",D(l)])},null,2)]),Y("button",{class:"reset ml-6px text-15px cursor-pointer text-#333",title:"Copy",onClick:o},[N(s,{name:"common-copy"})])])])}}}))}}}));
