const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index158.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185","js/page_layout.js?v=1732601582185","js/vue.js?v=1732601582185","js/__commonjsHelpers__.js?v=1732601582185","js/naive.js?v=1732601582185","js/common.js?v=1732601582185","js/public.js?v=1732601582185","css/public.css?v=1732601582185","css/page_layout.css?v=1732601582185","js/file.js?v=1732601582185"])))=>i.map(i=>d[i]);
import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{I as e,f as l,c as t,S as u,o as i}from"./page_layout.js?v=1732601582185";import{a as s,u as n,d as o,f as c,b as p}from"./public.js?v=1732601582185";import{I as d,J as r,K as _,L as v,M as m,N as b,O as k}from"./mail.js?v=1732601582185";import{d as f,aq as w,W as h,O as y,X as x,Y as M,Q as U,M as B,k as P,v as g,c as j,Z as T,r as $,j as C,R as S,ac as z,a6 as L,ak as D,P as I}from"./vue.js?v=1732601582185";import{bL as O,bl as W,bM as E,bN as H,bh as J,bJ as N,bo as R,bG as q,aa as A}from"./naive.js?v=1732601582185";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{o as K}from"./upload.js?v=1732601582185";import{d as Q}from"./file.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";const V={class:"w-100px"},X={class:"w-120px"},Y=f({__name:"period",props:{value:{default:()=>({cycle:"week",week:"1",hour:1,minute:30})},valueModifiers:{}},emits:["update:value"],setup(a){const e=w(a,"value"),{t:l}=h(),t=[{label:l("Public.Unit.Weekly"),value:"week"},{label:l("Public.Unit.Daily"),value:"day"}],u=[{label:l("Public.Unit.Monday"),value:"1"},{label:l("Public.Unit.Tuesday"),value:"2"},{label:l("Public.Unit.Wednesday"),value:"3"},{label:l("Public.Unit.Thursday"),value:"4"},{label:l("Public.Unit.Friday"),value:"5"},{label:l("Public.Unit.Saturday"),value:"6"},{label:l("Public.Unit.Sunday"),value:"0"}];return(a,l)=>{const i=O,s=W,n=E,o=H,c=J;return y(),x(c,{size:20},{default:M((()=>[U("div",V,[B(i,{value:e.value.cycle,"onUpdate:value":l[0]||(l[0]=a=>e.value.cycle=a),options:t},null,8,["value"])]),P(U("div",X,[B(i,{value:e.value.week,"onUpdate:value":l[1]||(l[1]=a=>e.value.week=a),options:u},null,8,["value"])],512),[[g,"week"===e.value.cycle]]),B(o,{class:"w-100px"},{default:M((()=>[B(s,{value:e.value.hour,"onUpdate:value":l[2]||(l[2]=a=>e.value.hour=a),min:0,"show-button":!1},null,8,["value"]),B(n,null,{default:M((()=>[j(T(a.$t("Public.Unit.Hour",e.value.hour)),1)])),_:1})])),_:1}),B(o,{class:"w-120px"},{default:M((()=>[B(s,{value:e.value.minute,"onUpdate:value":l[3]||(l[3]=a=>e.value.minute=a),min:0,"show-button":!1},null,8,["value"]),B(n,null,{default:M((()=>[j(T(a.$t("Public.Unit.Minute",e.value.minute)),1)])),_:1})])),_:1})])),_:1})}}}),Z={class:"p-20px"},aa={class:"flex-1"},ea={class:"w-140px"},la=f({__name:"plan",setup(t){const{t:u}=h(),i=$(!1),n=C({open:!1,cycle:"week",week:"1",hour:1,minute:30,backupTo:"localhost",save:3}),o=$([]),c=async()=>{await _({type:n.cycle,hour:n.hour,minute:n.minute,backupTo:n.backupTo,save:n.save,..."week"===n.cycle?{week:n.week}:{}}),b()},p=a=>{i.value&&!1===a&&s({title:u("Mail.Backup.index_6"),content:u("Mail.Backup.index_7"),onConfirm:async()=>{await v(),n.open=!1},onPublicClose:()=>{n.open=!a}})},m=()=>{o.value.unshift({label:u("Mail.Backup.index_8"),value:"localhost"})},b=async()=>{try{const{message:a}=await r();l(a)&&(i.value=!0,n.open=!0,n.cycle=a.type,n.week=a.where1,n.hour=a.where_hour,n.minute=a.where_minute,n.backupTo=a.backupTo,n.save=a.save)}catch(a){i.value=!1,n.open=!1,console.error(a)}};return b(),(async()=>{m();const{message:a}=await d();e(a)&&(o.value=a.map((a=>({label:a.name,value:a.value})))),m()})(),(e,l)=>{const t=R,u=q,i=O,s=W,d=E,r=H,_=J,v=A,m=a,b=N;return y(),x(b,{class:"mb-16px",title:e.$t("Mail.Backup.index_1")},{default:M((()=>[U("div",Z,[B(m,{model:S(n)},{default:M((()=>[B(u,{label:e.$t("Mail.Backup.index_2")},{default:M((()=>[B(t,{value:S(n).open,"onUpdate:value":[l[0]||(l[0]=a=>S(n).open=a),p]},null,8,["value"])])),_:1},8,["label"]),B(u,{label:e.$t("Mail.Backup.index_3")},{default:M((()=>[U("div",aa,[B(Y,{value:S(n),"onUpdate:value":l[1]||(l[1]=a=>z(n)?n.value=a:null)},null,8,["value"])])])),_:1},8,["label"]),B(_,{size:24},{default:M((()=>[B(u,{label:e.$t("Mail.Backup.index_4")},{default:M((()=>[U("div",ea,[B(i,{value:S(n).backupTo,"onUpdate:value":l[2]||(l[2]=a=>S(n).backupTo=a),options:S(o)},null,8,["value","options"])])])),_:1},8,["label"]),B(u,{label:e.$t("Mail.Backup.index_5"),"label-width":"auto"},{default:M((()=>[B(r,{class:"w-100px"},{default:M((()=>[B(s,{value:S(n).save,"onUpdate:value":l[3]||(l[3]=a=>S(n).save=a),"show-button":!1},null,8,["value"]),B(d,null,{default:M((()=>[j(T(e.$t("Public.Unit.Part",S(n).save)),1)])),_:1})])),_:1})])),_:1},8,["label"])])),_:1}),B(u,{label:" ","show-feedback":!1},{default:M((()=>[B(v,{type:"primary",onClick:c},{default:M((()=>[j(T(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["title"])}}}),ta={class:"px-20px py-16px"},ua=f({__name:"import",setup(a){const{t:d}=h(),r=C({path:"/www/backup/path/vmail/"}),_=()=>{K({path:r.path,uploadData:{accept:".gz,.tar,.tar.gz,.zip",multiple:!0},onUploadSuccess:()=>{I()}})},v=()=>{var a;n({title:"Select directory",width:720,height:540,footer:!0,data:{path:(a={checkedType:["file"],onCheckedSuccess:async a=>{await m({file_path:a})}}).path||"/www/wwwroot",checkedType:a.checkedType||["dir"],callback:a.onCheckedSuccess},component:L((()=>t((()=>import("./index158.js?v=1732601582185")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))))})},{table:f,columns:w}=o([{key:"name",title:d("Mail.Backup.index_11"),ellipsis:!0},{key:"mtime",title:d("Mail.Backup.index_12"),render:a=>u(a.mtime)},c({width:120,options:a=>[{label:d("Mail.Backup.index_13"),onClick:()=>{P(a)}},{label:d("Public.Btn.Delete"),onClick:()=>{g(a)}}]})]),P=a=>{s({title:d("Mail.Backup.index_14"),content:d("Mail.Backup.index_15"),onConfirm:async()=>{await m({file_path:"".concat(r.path,"/").concat(a.name)})}})},g=a=>{s({title:d("Mail.Backup.index_16"),content:d("Mail.Backup.index_17"),onConfirm:async()=>{await Q({path:"".concat(r.path,"/").concat(a.name)}),I()}})},{loading:$,setLoading:z}=p(),I=async()=>{try{z(!0),await(async()=>{const{message:a}=await k();l(a)&&(r.path=i(a.result)?a.result:"")})();const{message:a}=await b(D(r));f.data=e(a)?a:[]}finally{z(!1)}};return I(),(a,e)=>{const l=A,t=G,u=F,i=N;return y(),x(i,{title:a.$t("Mail.Backup.index_18")},{default:M((()=>[U("div",ta,[B(u,null,{toolsLeft:M((()=>[B(l,{onClick:_},{default:M((()=>[j(T(a.$t("Mail.Backup.index_9")),1)])),_:1}),B(l,{onClick:v},{default:M((()=>[j(T(a.$t("Mail.Backup.index_10")),1)])),_:1})])),table:M((()=>[B(t,{"max-height":340,bordered:!0,loading:S($),data:S(f).data,columns:S(w)},null,8,["loading","data","columns"])])),_:1})])])),_:1},8,["title"])}}}),ia=f({__name:"index",setup:a=>(a,e)=>(y(),I("div",null,[B(la),B(ua)]))});export{ia as default};
