System.register(["./index-legacy.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./useTableColumns-legacy.js?v=1723125373998","./file-legacy2.js?v=1723125373998","./Upload-legacy2.js?v=1723125373998","./use-theme-vars-legacy.js?v=1723125373998","./Progress-legacy.js?v=1723125373998","./DataTable-legacy.js?v=1723125373998","./pinia-legacy.js?v=1723125373998","./Switch-legacy.js?v=1723125373998","./Ellipsis-legacy.js?v=1723125373998","./Image-legacy.js?v=1723125373998","./_createCompounder-legacy.js?v=1723125373998","./Checkbox-legacy.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./Tag-legacy.js?v=1723125373998","./Empty-legacy.js?v=1723125373998","./omit-legacy.js?v=1723125373998"],(function(e,l){"use strict";var a,t,n,o,s,i,p,d,r,c,u,m,f,g,x,y,h,_,v,C,j,b,U,w,F,z,k;return{setters:[e=>{a=e.N,t=e.n,n=e.B,o=e._,s=e.a},e=>{i=e.l,p=e.ad,d=e.r,r=e.k,c=e.P,u=e.S,m=e.Z,f=e._,g=e.V,x=e.q,y=e.a3,h=e.W,_=e.b,v=e.U,C=e.aw},e=>{j=e.b},e=>{b=e.u},e=>{U=e._,w=e.a},e=>{F=e.u},e=>{z=e._},e=>{k=e.N},null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".n-upload-dragger[data-v-751e0eae]{--n-dragger-border-hover: 1px dashed #ccc;height:360px;padding:10px}.drag-text[data-v-751e0eae]{margin-top:20px;font-size:16px}.drag-suffix[data-v-751e0eae]{margin-top:12px;color:#777;font-size:14px}.n-data-table[data-v-751e0eae]{--n-th-color-modal: transparent;--n-td-color-modal: transparent;--n-th-color-hover-modal: transparent;--n-td-color-hover-modal: transparent;--n-border-color-modal: transparent}\n",document.head.appendChild(l);const S={class:"p-16px"},D={class:"flex items-center mb-12px"},B={key:1,class:"flex-center flex-col h-300px"},E={class:"drag-text"},$={class:"drag-suffix"},P=i({__name:"index",props:{path:{default:""},size:{default:100},uploadData:{default:()=>({multiple:!1})}},emits:["setConfirm","uploadSuccess"],setup(e,{expose:l,emit:s}){const i=e,P=s,{path:T,uploadData:I}=i,{t:L}=p(),N=F(),q=d([]),V=r((()=>(I.accept||"").split(",").map((e=>`'${e}'`)).join(", "))),W=e=>{const{file:l}=e,{size:a}=i;return(l.file?.size??0)>1048576*a?(t.error(L("Component.UploadFile.index_7",[l.name,a])),!1):(I.multiple||(q.value=[]),!0)},Z=d([{key:"name",title:L("Component.UploadFile.index_3"),ellipsis:!0},{key:"size",title:L("Component.UploadFile.index_4"),width:100,render:e=>a(e.file?.size)},{key:"status",title:L("Component.UploadFile.index_5"),width:140,render:e=>"pending"===e.status?L("Component.UploadFile.index_8"):"finished"===e.status?c("span",{class:"text-primary"},[L("Component.UploadFile.index_9")]):c(z,{type:"line",color:N.value.primaryColor,"indicator-placement":"outside",processing:!0,percentage:e.percentage||0},null)},j({width:70,options:(e,l)=>[{label:L("Public.Btn.Del"),type:"error",show:"uploading"!==e.status,onClick:()=>{q.value.splice(l,1)}}]})]);return l({onConfirm:async()=>{const e=q.value.filter((e=>"pending"===e.status));if(0===e.length)return t.error(L("Component.UploadFile.index_10")),!1;P("setConfirm",{disabled:!0}),e.forEach((e=>{e.status="uploading"}));for(let l of e){const e=new FormData;e.append("f_path",T),e.append("f_name",l.name),e.append("f_start","0"),l.file&&(e.append("f_size",l.file.size.toString()),e.append("blob",l.file)),await b(e,(e=>{l.percentage=100*(e.progress||0)})),l.status="finished"}t.success(L("Component.UploadFile.index_9")),P("setConfirm",{disabled:!1}),P("uploadSuccess",e)}}),(e,l)=>{const a=n,t=U,s=k,i=o,p=w;return u(),m("div",S,[f("div",D,[c(t,{ref:"upload",class:"w-auto","file-list":h(q),"onUpdate:fileList":l[0]||(l[0]=e=>_(q)?q.value=e:null),accept:h(I).accept,multiple:h(I).multiple,"default-upload":!1,"show-file-list":!1,onBeforeUpload:W},{default:g((()=>[c(a,{type:"primary"},{default:g((()=>[x(y(e.$t("Component.UploadFile.index_6")),1)])),_:1})])),_:1},8,["file-list","accept","multiple"])]),c(t,{ref:"upload",class:"w-auto","file-list":h(q),"onUpdate:fileList":l[2]||(l[2]=e=>_(q)?q.value=e:null),accept:h(I).accept,multiple:h(I).multiple,"default-upload":!1,"show-file-list":!1,onBeforeUpload:W},{default:g((()=>[c(p,null,{default:g((()=>[h(q).length>0?(u(),v(s,{key:0,"max-height":300,bordered:!1,data:h(q),columns:h(Z),onClick:l[1]||(l[1]=C((()=>{}),["stop"]))},null,8,["data","columns"])):(u(),m("div",B,[c(i,{name:"base-upload",size:"48",class:"text-#999"}),f("div",E,y(e.$t("Component.UploadFile.index_1")),1),f("div",$,y(e.$t("Component.UploadFile.index_2",[h(V)])),1)]))])),_:1})])),_:1},8,["file-list","accept","multiple"])])}}});e("default",s(P,[["__scopeId","data-v-751e0eae"]]))}}}));
