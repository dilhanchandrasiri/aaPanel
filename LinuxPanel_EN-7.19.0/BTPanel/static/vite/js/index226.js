import{_ as e}from"./index.js?v=1732601582185";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import{_ as s}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import{I as l,m as n,cb as o,f as d,n as r,k as p}from"./page_layout.js?v=1732601582185";import{n as u,p as _,q as c,s as m,r as h,t as x,u as y,v as g,x as w,y as v,z as f}from"./index87.js?v=1732601582185";import{d as k,b,E as j,f as S,h as P,a as W}from"./public.js?v=1732601582185";import{_ as R}from"./index96.js?v=1732601582185";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{d as $,W as U,r as z,j as L,O as T,P as B,M as I,Y as O,Q as q,R as D,Z as H,ac as K,ax as A,c as E,ak as G}from"./vue.js?v=1732601582185";import{ad as J,bG as M,aa as N}from"./naive.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";import"./index121.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import"./site4.js?v=1732601582185";import"./site.js?v=1732601582185";import"./index215.js?v=1732601582185";import"./index99.js?v=1732601582185";import"./index102.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1732601582185";import"./index97.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang14.js?v=1732601582185";import"./theme-chrome.js?v=1732601582185";import"./file.js?v=1732601582185";import"./refersh.js?v=1732601582185";import"./php.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1732601582185";import"./index171.js?v=1732601582185";const Q={class:"p-20px"},Y={class:"w-280px"},Z=$({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=U(),s=e,{getList:i}=s.data,l=z(null),n=L({name:""}),o={name:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=l.value)?void 0:t.validate()),await u({...n}),null==i||i(),e()}}),(e,t)=>{const a=J,s=M,i=C,d=R;return T(),B("div",Q,[I(i,{ref_key:"formRef",ref:l,model:D(n),rules:o},{default:O((()=>[I(s,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:O((()=>[q("div",Y,[I(a,{type:"text",value:D(n).name,"onUpdate:value":t[0]||(t[0]=e=>D(n).name=e),placeholder:e.$t("WP.Sets.index_11")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),I(d,{class:"mt-4px"},{default:O((()=>[q("li",null,H(e.$t("WP.Sets.index_12")),1)])),_:1})])}}}),F={class:"p-20px"},V=$({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=U(),i=e,{id:o}=i.data,{keys:d,table:r,columns:p}=k([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2")}]),{loading:u,setLoading:m}=b();(async()=>{try{m(!0);const{message:e}=await _();l(e)&&(r.data=e)}finally{d.value=[],m(!1)}})();return t({onConfirm:async()=>{if(!d.value.length)return n.error(a("WP.Sets.index_18")),!1;const e=d.value.join(",");await c({set_id:o,site_ids:e})}}),(e,t)=>{const a=s,i=R;return T(),B("div",F,[I(a,{"checked-row-keys":D(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>K(d)?d.value=e:null),"row-key":"id",loading:D(u),data:D(r).data,"max-height":220,columns:D(p)},null,8,["checked-row-keys","loading","data","columns"]),I(i,{class:"mt-16px"},{default:O((()=>[q("li",null,H(e.$t("WP.Sets.index_17")),1),q("li",null,H(e.$t("WP.Sets.index_19")),1)])),_:1})])}}}),X={class:"p-20px"},ee=p($({__name:"index",props:{data:{}},setup(e){const{t:a}=U(),p=z(),u=e,{id:_}=u.data,{type:c}=u.data,{getList:v}=u.data,{keys:f,table:P,columns:W}=k([{key:"title",title:a("Site.TableRow.index_2"),width:"70%"},j({key:"state",title:a("WP.TableRow.index_9"),minWidth:100,onClick:async(e,t)=>{await m({item_ids:t.id,state:e?1:0,type:c}),V()}}),S({width:80,options:e=>[{label:a("Public.Btn.Del"),onClick:async()=>{await h({item_ids:e.id,type:c}),V(),null==v||v()}}]})]),{keys:C,table:$,columns:J}=k([{type:"selection",width:40,disabled:e=>e.is_in_set},{key:"name",title:a("Site.TableRow.index_2"),width:"60%"},{key:"title",title:a("WP.index_19"),render:e=>I(o,{size:"small",readonly:!0,color:"#4fb233",value:e.rating/20},null)}]),M=L({p:1,p_size:999,keyword:"",set_id:_}),Q=async()=>{var e;if(!C.value.length)return n.error(a("WP.Sets.index_14")),void(null==(e=p.value)||e.focus());const t=$.data.filter((e=>C.value.includes(e.slug))).map((e=>({slug:e.slug,title:e.name,description:1===c?e.short_description:e.description})));await y({set_id:_,items:JSON.stringify(t),type:c}),V(),null==v||v()},Y=async()=>{if(M.keyword)try{const{message:e}=1===c?await g(G(M),!0):await w(G(M),!0);d(e)&&($.total=e.total,l(e.list)?($.data=e.list,$.data.length||n.error(a("WP.Sets.index_16"))):($.data=[],$.total=0))}finally{C.value=[]}else n.error(a("WP.Sets.index_15"))},{loading:Z,setLoading:F}=b(),V=async()=>{try{F(!0);const{message:e}=await x({set_id:_,type:c});l(e)&&(P.data=e)}finally{f.value=[],F(!1)}};return V(),(e,a)=>{const l=N,n=i,o=s,d=t,u=r,_=R;return T(),B("div",X,[I(d,null,A({toolsLeft:O((()=>[I(l,{type:"primary",onClick:Q},{default:O((()=>[E(H(e.$t("Public.Btn.Add")),1)])),_:1})])),toolsRight:O((()=>[I(n,{ref_key:"seachRef",ref:p,value:D(M).keyword,"onUpdate:value":a[0]||(a[0]=e=>D(M).keyword=e),placeholder:e.$t("Public.Btn.Search"),onSearch:Y},null,8,["value","placeholder"])])),_:2},[D($).data.length?{name:"table",fn:O((()=>[I(o,{class:"custom-table",bordered:!1,"checked-row-keys":D(C),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>K(C)?C.value=e:null),"row-key":"slug","max-height":150,data:D($).data,columns:D(J)},null,8,["checked-row-keys","data","columns"])])),key:"0"}:void 0]),1024),I(u,{class:"my-20px!"}),I(o,{loading:D(Z),data:D(P).data,columns:D(W),"max-height":150},null,8,["loading","data","columns"]),I(_,{class:"mt-16px"},{default:O((()=>[q("li",null,H(e.$t("WP.Sets.index_13")),1)])),_:1})])}}}),[["__scopeId","data-v-0607cdd4"]]),te={class:"p-20px"},ae=$({__name:"index",setup(l,{expose:n}){const{t:o}=U(),r=P(o("WP.Sets.index_2")),p=L({p:1,p_size:10,keyword:""}),u=()=>{R.show=!0},_=()=>{p.p=1,w()},c=(e,t,a)=>{j.title=t,j.data.id=e.id,j.data.type=a,j.show=!0},{keys:m,table:h,columns:x}=k([{key:"name",title:o("Site.TableRow.index_2"),width:"40%",ellipsis:{tooltip:{width:"trigger"}}},S({title:o("WP.Sets.index_3"),align:"center",options:e=>[{label:o("WP.Sets.index_4",[e.plugins.length]),onClick:()=>{c(e,o("WP.Sets.index_5"),1)}}]}),S({title:o("WP.Sets.index_6"),align:"center",options:e=>[{label:o("WP.Sets.index_7",[e.themes.length]),onClick:()=>{c(e,o("WP.Sets.index_8"),2)}}]}),S({width:100,align:"center",options:e=>[{label:o("WP.TableRow.index_13"),disabled:!e.plugins.length&&!e.themes.length,onClick:()=>{r.data.id=e.id,r.show=!0}},{label:o("Public.Btn.Del"),onClick:()=>{W({title:"".concat(o("Site.TableOP.index_6")," [").concat(e.name,"]"),content:o("WP.Sets.index_9"),onConfirm:async({hide:t})=>{await v({set_id:e.id}),w(),t()}})}}]})]),{loading:y,setLoading:g}=b(),w=async()=>{try{g(!0);const{message:e}=await f(G(p));d(e)&&(h.data=e.list,h.total=e.total)}finally{m.value=[],g(!1)}},j=P(o("WP.Sets.index_5"),{getList:w}),R=P(o("WP.Sets.index_10"),{getList:w});return w(),n({init:w}),(l,n)=>{const o=N,d=i,c=s,m=a,g=t,v=e;return T(),B("div",te,[I(g,null,{toolsLeft:O((()=>[I(o,{type:"primary",onClick:u},{default:O((()=>[E(H(l.$t("WP.Sets.index_1")),1)])),_:1})])),toolsRight:O((()=>[I(d,{value:D(p).keyword,"onUpdate:value":n[0]||(n[0]=e=>D(p).keyword=e),placeholder:l.$t("Security.History.Index_14"),onSearch:_},null,8,["value","placeholder"])])),table:O((()=>[I(c,{"max-height":250,loading:D(y),data:D(h).data,columns:D(x)},null,8,["loading","data","columns"])])),pageRight:O((()=>[I(m,{page:D(p).p,"onUpdate:page":n[1]||(n[1]=e=>D(p).p=e),"page-size":D(p).p_size,"onUpdate:pageSize":n[2]||(n[2]=e=>D(p).p_size=e),"item-count":D(h).total,onRefresh:w},null,8,["page","page-size","item-count"])])),_:1}),I(v,{show:D(R).show,"onUpdate:show":n[3]||(n[3]=e=>D(R).show=e),title:D(R).title,data:D(R).data,width:480,footer:!0,component:Z},null,8,["show","title","data"]),I(v,{show:D(j).show,"onUpdate:show":n[4]||(n[4]=e=>D(j).show=e),title:D(j).title,data:D(j).data,width:600,"min-height":350,footer:!1,component:ee},null,8,["show","title","data"]),I(v,{show:D(r).show,"onUpdate:show":n[5]||(n[5]=e=>D(r).show=e),title:D(r).title,data:D(r).data,width:480,"min-height":350,footer:!0,"confirm-text":l.$t("WP.TableRow.index_13"),component:V},null,8,["show","title","data","confirm-text"])])}}});export{ae as default};
