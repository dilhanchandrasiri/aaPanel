import{_ as e}from"./index73.js?v=1723125373998";import{_ as a,a as l}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import{u as s,dQ as t,ae as d,cG as i,n as r}from"./index.js?v=1723125373998";import{l as u,r as n,f as o,S as v,Z as p,P as m,V as b,_ as f,W as _,q as c,t as x}from"./vue.js?v=1723125373998";import{_ as D}from"./Select.js?v=1723125373998";import{_ as B}from"./InputGroupLabel.js?v=1723125373998";import{_ as w}from"./InputGroup.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";const y={class:"py-20px"},h={class:"w-260px"},j={class:"w-260px"},g={class:"w-260px"},P={class:"w-260px"},I=f("li",null,"A validity period of 0 means permanent",-1),R=u({__name:"index",props:{data:{}},setup(u,{expose:R}){const k=u,{row:U,sid:q,dbIdx:E,isEdit:G}=k.data,A=s(),S=n(null),T=o({db_idx:0,name:"",val:"",endtime:void 0}),V=n([{label:"DB0",value:0},{label:"DB1",value:1},{label:"DB2",value:2},{label:"DB3",value:3},{label:"DB4",value:4},{label:"DB5",value:5},{label:"DB6",value:6},{label:"DB7",value:7},{label:"DB8",value:8},{label:"DB9",value:9},{label:"DB10",value:10},{label:"DB11",value:11},{label:"DB12",value:12},{label:"DB13",value:13},{label:"DB14",value:14},{label:"DB15",value:15}]),z={name:{required:!0,message:"Please enter key",trigger:"blur"},val:{required:!0,message:"Please enter value",trigger:"blur"}};return T.db_idx=E,G&&U&&(T.name=U.name,T.val=U.val,T.endtime=U.endtime?U.endtime:void 0),R({onConfirm:async({hide:e})=>{var a;try{await(null==(a=S.value)?void 0:a.validate());const l=(()=>{if(null===q)throw r.error("Please select remote database!"),new Error("sid is null");const e={...x(T),sid:q};return void 0===e.endtime&&delete e.endtime,e})();await t(l),A.setRefresh(!0),A.setAddRedisId(l.db_idx),e()}catch(l){console.error(l)}}}),(s,t)=>{const r=D,u=a,n=d,o=i,x=B,R=w,k=l,U=e;return v(),p("div",y,[m(k,{ref_key:"formRef",ref:S,model:_(T),rules:z},{default:b((()=>[m(u,{label:"Database",path:"db_idx"},{default:b((()=>[f("div",h,[m(r,{value:_(T).db_idx,"onUpdate:value":t[0]||(t[0]=e=>_(T).db_idx=e),options:_(V),disabled:_(G)},null,8,["value","options","disabled"])])])),_:1}),m(u,{label:"Key",path:"name"},{default:b((()=>[f("div",j,[m(n,{value:_(T).name,"onUpdate:value":t[1]||(t[1]=e=>_(T).name=e),disabled:_(G),placeholder:"Please enter key"},null,8,["value","disabled"])])])),_:1}),m(u,{label:"Value",path:"val"},{default:b((()=>[f("div",g,[m(n,{value:_(T).val,"onUpdate:value":t[2]||(t[2]=e=>_(T).val=e),type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"Please enter value"},null,8,["value"])])])),_:1}),m(u,{label:"Term of validity","show-feedback":!1},{default:b((()=>[f("div",P,[m(R,null,{default:b((()=>[m(o,{value:_(T).endtime,"onUpdate:value":t[3]||(t[3]=e=>_(T).endtime=e),class:"flex-1",min:0,"show-button":!1,placeholder:"If it is empty, it never expires"},null,8,["value"]),m(x,null,{default:b((()=>[c("sec")])),_:1})])),_:1})])])),_:1})])),_:1},8,["model"]),m(U,{class:"mt-24px px-20px"},{default:b((()=>[I])),_:1})])}}});export{R as default};
