System.register(["./index-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./mail-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1732601582185"],(function(e,a){"use strict";var l,t,i,n,s,o,u,d,r,p,c,_,m,v,x,f,h,b,g,w,M,y,B,$,k,j,q,P,U,C,E,z,A,S,R,G,W,D,L,T,I,V,Z,J,O,F,H,Q,X,Y,K;return{setters:[e=>{l=e._},e=>{t=e._},e=>{i=e._},e=>{n=e._},e=>{s=e._},e=>{o=e.u,u=e.f,d=e.k,r=e.I,p=e.h,c=e.J,_=e.a4},e=>{m=e.s,v=e.h,x=e.d,f=e.D,h=e.f,b=e.e,g=e.a,w=e.u},e=>{M=e.l,y=e.e,B=e.c,$=e.h,k=e.i,j=e.j,q=e.k},e=>{P=e.aa,U=e.ad,C=e.bG,E=e.bl,z=e.bL,A=e.bo,S=e.bJ},e=>{R=e.d,G=e.t,W=e.O,D=e.P,L=e.M,T=e.Y,I=e.Q,V=e.Z,Z=e.c,J=e.W,O=e.r,F=e.j,H=e.R,Q=e.X,X=e.af,Y=e.a9},e=>{K=e._},null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".n-button[data-v-6ff1f026]{padding:0 24px;--n-height: 40px;--n-border-radius: 2px;--n-color: #eee;--n-text-color: #333;--n-border: none;--n-color-hover: #20a53a;--n-border-hover: 1px solid #20a53a;--n-text-color-hover: #fff;--n-color-focus: #20a53a;--n-text-color-focus: #fff;--n-border-focus: 1px solid #20a53a}.bg-recommend[data-v-6ff1f026]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n",document.head.appendChild(a);const N={class:"flex justify-center p-32px"},ee=d(R({__name:"login",props:{row:{},info:{}},setup(e){const a=e,l=G(a,"row"),t=G(a,"info"),i=o(),n=async()=>{if(i.isFree)return void m({source:221});const{message:e}=await M({rc_user:l.value.username,rc_pass:l.value.password});u(e)&&window.open(`${t.value.ssl_status?"https":"http"}://${e.result}`)},s=()=>{window.open(`${t.value.ssl_status?"https":"http"}://${t.value.site_name}`)};return(e,a)=>{const l=P;return W(),D("div",N,[L(l,{onClick:n},{default:T((()=>[I("span",null,V(e.$t("Database.PhpAdmin.index_11")),1),a[0]||(a[0]=I("span",{class:"bg-recommend"},null,-1))])),_:1}),L(l,{class:"ml-32px",onClick:s},{default:T((()=>[Z(V(e.$t("Database.PhpAdmin.index_6")),1)])),_:1})])}}}),[["__scopeId","data-v-6ff1f026"]]),ae={class:"p-20px"},le={class:"w-280px"},te={class:"w-100px ml-10px"},ie={class:"w-280px"},ne={class:"w-130px"},se={class:"w-140px ml-10px"},oe={class:"w-280px"},ue=R({__name:"index",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(e,{expose:a,emit:l}){const t=e,i=l,{isEdit:n}=t,{t:s}=J(),o=O(null),u=F({full_name:"",domain:null,quota:5,quota_unit:"GB",is_admin:0,username:"",password:"",active:1}),d=O([]),_=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],m=[{label:s("Mail.MailBox.index_19"),value:0},{label:s("Mail.MailBox.index_20"),value:1}],v={full_name:{trigger:["blur","input"],validator:()=>""!==u.full_name.trim()||new Error(s("Mail.MailBox.index_21"))},username:{trigger:["blur","input"],validator:()=>""!==u.username.trim()||new Error(s("Mail.MailBox.index_22"))},quota:{trigger:["blur","input"],validator:()=>(console.log(u.quota),!!u.quota||new Error(s("Mail.MailBox.index_23")))},password:{trigger:["blur","input"],validator:()=>{if(n){if(u.password&&u.password.trim().length<8)return new Error(s("Mail.MailBox.index_26"));const e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/;if(u.password&&!e.test(u.password))return new Error(s("Mail.MailBox.index_27"))}else{if(u.password.trim().length<8)return new Error(s("Mail.MailBox.index_24"));if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(u.password))return new Error(s("Mail.MailBox.index_25"))}return!0}}},x=()=>({full_name:u.full_name,quota:u.quota+" "+u.quota_unit,is_admin:u.is_admin,username:u.username+"@"+u.domain,password:u.password,active:u.active});return(async()=>{const{message:e}=await $();r(e)&&(d.value=e.map((e=>({label:e,value:e}))),null===u.domain&&(u.domain=e[0]))})(),(()=>{const{row:e,isEdit:a}=t;if(a&&e){u.full_name=e.full_name,u.is_admin=e.is_admin,u.username=e.username.split("@")[0],u.active=e.active;const[a,l]=e.username.split("@");u.username=a,u.domain=l;const t=p(e.quota),[i,n]=t.split(" ");u.quota=c(i),u.quota_unit=n}})(),a({onConfirm:async()=>{await(o.value?.validate()),n?await y(x()):await B(x()),i("refresh")}}),(e,a)=>{const l=U,t=C,i=E,s=z,r=A,p=K;return W(),D("div",ae,[L(p,{ref_key:"formRef",ref:o,model:H(u),rules:v},{default:T((()=>[L(t,{label:e.$t("Mail.MailBox.index_10"),path:"full_name"},{default:T((()=>[I("div",le,[L(l,{value:H(u).full_name,"onUpdate:value":a[0]||(a[0]=e=>H(u).full_name=e),placeholder:e.$t("Mail.MailBox.index_11")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(t,{label:e.$t("Mail.MailBox.index_3"),path:"quota"},{default:T((()=>[L(i,{value:H(u).quota,"onUpdate:value":a[1]||(a[1]=e=>H(u).quota=e),class:"w-170px",min:0,"show-button":!1,placeholder:e.$t("Mail.MailBox.index_12")},null,8,["value","placeholder"]),I("div",te,[L(s,{value:H(u).quota_unit,"onUpdate:value":a[2]||(a[2]=e=>H(u).quota_unit=e),options:_},null,8,["value"])])])),_:1},8,["label"]),L(t,{label:e.$t("Mail.MailBox.index_13"),path:"is_admin"},{default:T((()=>[I("div",ie,[L(s,{value:H(u).is_admin,"onUpdate:value":a[3]||(a[3]=e=>H(u).is_admin=e),options:m},null,8,["value"])])])),_:1},8,["label"]),L(t,{label:e.$t("Mail.MailBox.index_14"),path:"username"},{default:T((()=>[I("div",ne,[L(l,{value:H(u).username,"onUpdate:value":a[4]||(a[4]=e=>H(u).username=e),disabled:H(n),placeholder:e.$t("Mail.MailBox.index_15")},null,8,["value","disabled","placeholder"])]),I("div",se,[L(s,{value:H(u).domain,"onUpdate:value":a[5]||(a[5]=e=>H(u).domain=e),disabled:H(n),filterable:!0,options:H(d)},null,8,["value","disabled","options"])])])),_:1},8,["label"]),L(t,{label:e.$t("Mail.MailBox.index_16"),path:"password"},{default:T((()=>[I("div",oe,[L(l,{value:H(u).password,"onUpdate:value":a[6]||(a[6]=e=>H(u).password=e),placeholder:H(n)?e.$t("Mail.MailBox.index_17"):e.$t("Mail.MailBox.index_18")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(t,{label:e.$t("Public.Table.Status"),path:"active","show-feedback":!1},{default:T((()=>[L(r,{value:H(u).active,"onUpdate:value":a[7]||(a[7]=e=>H(u).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),de={class:"w-220px mr-8px"};e("default",R({__name:"index",setup(e){const{t:a}=J(),o=X(),d=O([]),c=()=>{d.value.unshift({label:a("Public.All"),value:"all"})},m=({option:e})=>`${a("Mail.MailBox.index_29")}${e.label}`,M=F({p:1,size:10,domain:"all",search:""}),B=v("",{isEdit:!1,row:void 0,onRefresh:()=>{le()}}),U=()=>{B.data.isEdit=!1,B.data.row=void 0,B.title=a("Mail.MailBox.index_1"),B.show=!0},C=()=>{window.open(`${ae.ssl_status?"https":"http"}://${ae.site_name}`)},{table:E,columns:R}=x([{key:"username",title:a("Public.Table.Username"),ellipsis:{tooltip:!0}},f({width:160}),{key:"info",title:a("Mail.MailBox.index_2"),width:180,render:e=>L("a",{class:"bt-link",href:"javascript:;",onClick:()=>{G(e)}},[a("Public.Btn.Copy")])},{key:"quota",title:a("Mail.MailBox.index_3"),render:e=>p(e.quota)},{key:"is_admin",title:a("Mail.MailBox.index_4"),render:e=>1===e.is_admin?"Admin":"General user"},{key:"active",title:a("Public.Table.Status"),render:e=>L(A,{value:e.active,size:"small",checkedValue:1,uncheckedValue:0,onUpdateValue:async a=>{await y({username:e.username,full_name:e.full_name,quota:p(e.quota),active:a,is_admin:e.is_admin}),e.active=a}},null)},h({width:150,options:e=>[{label:"WebMail",onClick:()=>{if(ae.status)D(e);else{const{hide:e}=g({title:a("Mail.MailBox.index_5"),content:()=>L(Y,{tag:"div",keypath:"Mail.MailBox.index_6",scope:"global"},{link_1:()=>L("a",{class:"bt-link",href:"javascript:;",onClick:()=>{o.push("/mail/setting"),e()}},[a("Layout.Sider.mail_1"),Z(" > "),a("Layout.Sider.mail_12")])}),onConfirm:()=>{o.push("/mail/setting")}})}}},{label:a("Public.Btn.Edit"),onClick:()=>{K(e)}},{label:a("Public.Btn.Del"),onClick:()=>{N(e)}}]})]),G=e=>{b(`WebMail: ${ae.ssl_status?"https":"http"}://${ae.site_name}\nUsername: ${e.username}\nPassword: ${e.password}\nPOP service [ Address: ${e.mx} Port: 110/995 ]\nIMAP service [ Address: ${e.mx} Port: 143/993 ]\nSMTP service [ Address: ${e.mx} Port: 25/465/587 ]\n`)},D=async e=>{w({title:"WebMail",width:400,data:{row:e,info:ae},component:ee})},K=e=>{B.data.isEdit=!0,B.data.row=e,B.title=a("Mail.MailBox.index_7"),B.show=!0},N=async e=>{g({title:a("Mail.MailBox.index_8"),content:a("Mail.MailBox.index_9",[e.username]),onConfirm:async()=>{await k({username:e.username}),le()}})},ae=F({id:0,site_name:"",status:!1,ssl_status:!1}),le=async()=>{try{E.loading=!0;const{message:e}=await j({p:M.p,size:M.size,search:M.search,..."all"!==M.domain?{domain:M.domain}:{}});u(e)&&(E.data=r(e.data)?e.data:[],E.total=_(e.page))}finally{E.loading=!1}},te=()=>{M.p=1,le()};return c(),(async()=>{const{message:e}=await $();r(e)&&(d.value=e.map((e=>({label:e,value:e}))),c())})(),(async()=>{try{E.loading=!0,await(async()=>{const{message:e}=await q();u(e)&&(ae.id=e.id,ae.status=e.status,ae.site_name=e.site_name,ae.ssl_status=e.ssl_status)})(),await le()}finally{E.loading=!1}})(),(e,a)=>{const o=P,u=z,r=s,p=n,c=i,_=t,v=l,x=S;return W(),Q(x,{class:"p-16px"},{default:T((()=>[L(_,null,{toolsLeft:T((()=>[L(o,{type:"primary",onClick:U},{default:T((()=>[Z(V(e.$t("Mail.MailBox.index_1")),1)])),_:1}),L(o,{onClick:C},{default:T((()=>a[5]||(a[5]=[Z("WebMail")]))),_:1})])),toolsRight:T((()=>[I("div",de,[L(u,{value:H(M).domain,"onUpdate:value":[a[0]||(a[0]=e=>H(M).domain=e),te],options:H(d),"render-tag":m,filterable:!0},null,8,["value","options"])]),L(r,{value:H(M).search,"onUpdate:value":a[1]||(a[1]=e=>H(M).search=e),width:"280",placeholder:e.$t("Mail.MailBox.index_28"),onSearch:te},null,8,["value","placeholder"])])),table:T((()=>[L(p,{loading:H(E).loading,data:H(E).data,columns:H(R)},null,8,["loading","data","columns"])])),pageRight:T((()=>[L(c,{page:H(M).p,"onUpdate:page":a[2]||(a[2]=e=>H(M).p=e),"page-size":H(M).size,"onUpdate:pageSize":a[3]||(a[3]=e=>H(M).size=e),"item-count":H(E).total,onRefresh:le},null,8,["page","page-size","item-count"])])),_:1}),L(v,{show:H(B).show,"onUpdate:show":a[4]||(a[4]=e=>H(B).show=e),title:H(B).title,data:H(B).data,width:480,"min-height":236,footer:!0,component:ue},null,8,["show","title","data"])])),_:1})}}}))}}}));
