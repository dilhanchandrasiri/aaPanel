System.register(["./page_layout-legacy.js?v=1732601582185","./index-legacy215.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./index-legacy99.js?v=1732601582185","./site-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./index-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1732601582185","./index-legacy102.js?v=1732601582185","./index-legacy96.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy14.js?v=1732601582185","./index-legacy121.js?v=1732601582185","./refersh-legacy.js?v=1732601582185","./php-legacy.js?v=1732601582185","./form.vue_vue_type_script_setup_true_lang-legacy2.js?v=1732601582185","./index-legacy171.js?v=1732601582185","./logs.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185"],(function(e,t){"use strict";var a,l,i,n,s,o,d,r,u,c,p,m,_,v,h,x,f,y,w,g,b,S,k,C,$,P,R,U,L,T,E,j,B,I,N,D,H,O,q,A,M,K,V,z,W,X,F,G,Y,Z,Q,J,ee,te,ae,le,ie,ne,se,oe,de,re,ue,ce,pe,me,_e,ve,he,xe,fe,ye,we,ge,be,Se,ke,Ce,$e,Pe,Re,Ue,Le,Te,Ee,je,Be,Ie,Ne,De,He,Oe,qe,Ae,Me,Ke,Ve,ze,We,Xe,Fe,Ge,Ye,Ze,Qe,Je,et,tt,at,lt,it,nt,st,ot,dt,rt,ut,ct,pt,mt,_t,vt,ht,xt,ft,yt,wt,gt,bt,St,kt,Ct,$t,Pt,Rt,Ut,Lt,Tt,Et,jt,Bt,It,Nt,Dt,Ht;return{setters:[e=>{a=e.i,l=e.j,i=e.I,n=e.m,s=e.c,o=e.f,d=e.n,r=e.a7,u=e.o,c=e.bd,p=e.bP,m=e.k,_=e.u,v=e.ca,h=e.a0},e=>{x=e._},e=>{f=e.p,y=e.a,w=e.M,g=e.d,b=e.W,S=e.r,k=e.O,C=e.P,$=e.Q,P=e.Y,R=e.Z,U=e.R,L=e.ac,T=e.c,E=e.j,j=e.a6,B=e.F,I=e.ao,N=e.ak,D=e.X,H=e.f,O=e.ax,q=e.L,A=e.e,M=e.n,K=e.V},e=>{V=e._},e=>{z=e._},e=>{W=e._},e=>{X=e._},e=>{F=e.Y,G=e.Z,Y=e._,Z=e.aQ,Q=e.aR,J=e.aS,ee=e.aT,te=e.aU,ae=e.$,le=e.a0,ie=e.a1,ne=e.a2,se=e.a3,oe=e.a4,de=e.a5,re=e.a6,ue=e.av,ce=e.aw,pe=e.ax,me=e.ay,_e=e.az,ve=e.aA,he=e.aB,xe=e.aC,fe=e.ak,ye=e.al,we=e.am,ge=e.aV,be=e.aW,Se=e.an,ke=e.ao,Ce=e.ap,$e=e.aq,Pe=e.ar,Re=e.as,Ue=e.at,Le=e.au,Te=e.aX,Ee=e.aY,je=e.aZ,Be=e.a_,Ie=e.a$,Ne=e.b0,De=e.b1,He=e.a7,Oe=e.a8,qe=e.a9,Ae=e.aa,Me=e.ab,Ke=e.ac,Ve=e.ad,ze=e.ae,We=e.af,Xe=e.ag,Fe=e.ah,Ge=e.ai,Ye=e.aj,Ze=e.aE,Qe=e.aF,Je=e.aG,et=e.g,tt=e.aH},e=>{at=e.a,lt=e.H,it=e.d,nt=e.b,st=e.h,ot=e.f,dt=e.s,rt=e._,ut=e.u},e=>{ct=e.aa,pt=e.be,mt=e.ad,_t=e.bh,vt=e.bL,ht=e.bG,xt=e.bo,ft=e._,yt=e.bl,wt=e.c0,gt=e.bM,bt=e.bN,St=e.aV},e=>{kt=e._},e=>{Ct=e._},e=>{$t=e._},e=>{Pt=e._},e=>{Rt=e._},e=>{Ut=e._},e=>{Lt=e._},e=>{Tt=e._,Et=e.a,jt=e.b},e=>{Bt=e.a,It=e.b},e=>{Nt=e._},e=>{Dt=e._},e=>{Ht=e._}],execute:function(){var Ot=document.createElement("style");Ot.textContent=".warning[data-v-b2f1026f]{padding:8px;border-radius:4px;background-color:#fdf6ec;color:#e6a23c}\n",document.head.appendChild(Ot),e("u",At);const qt=Symbol("site-config");function At(){return y(qt)}const{t:Mt}=a.global;function Kt(){return{key:"name",title:Mt("Site.TableRow.index_19"),render:e=>w(l,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})}}function Vt(){return{key:"port",title:Mt("Site.TableRow.index_16"),width:100}}function zt(){return{key:"action",title:Mt("Public.Table.Action"),width:80,align:"right",render:()=>w("span",{class:"text-default"},[Mt("Config.Panel.index_82")])}}function Wt({delDomain:e}){return{key:"action",title:Mt("Public.Table.Action"),width:80,align:"right",render:t=>w(lt,{options:[{label:Mt("Public.Btn.Del"),class:"delete-btn",onClick:()=>{at({title:`${Mt("Site.Batch.index_12")}[${t.name}]`,content:Mt("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const Xt={class:"flex justify-between items-center mb-24px"},Ft={class:"w-400px"},Gt={class:"pr-40px"},Yt=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:l}=At(),s=S(""),o=async()=>{""!==s.value.trim()?(await Y({id:l.id,webname:l.name,domain:s.value.trim().split("\n").join(",")}),s.value="",v()):n.error(a("Site.RulesError.index_31"))},d=async e=>{await F({id:l.id,webname:l.name,domain:e.name,port:e.port}),v()},{keys:r,table:u,columns:c}=it([{type:"selection",width:40},Kt(),Vt(),Wt({delDomain:d})]),p=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>F({id:l.id,webname:l.name,domain:e.name,port:e.port},!1),done:()=>{v()},columns:[{key:"name",title:a("Site.Cert.index_29"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:m,setLoading:_}=nt(),v=async()=>{try{_(!0);const e={id:l.id},{message:t}=await G(e);u.data=i(t)?t:[],u.data.length>1?c.value[c.value.length-1]=Wt({delDomain:d}):c.value[c.value.length-1]=zt()}finally{r.value=[],_(!1)}};return v(),t({init:v}),(e,t)=>{const a=X,l=ct,i=W,n=z,d=V;return k(),C("div",null,[$("div",Xt,[$("div",Ft,[w(a,{value:U(s),"onUpdate:value":t[0]||(t[0]=e=>L(s)?s.value=e:null),name:"domain"},{default:P((()=>[$("p",null,R(e.$t("Site.Config.index_30")),1),$("p",null,R(e.$t("Site.Config.index_31")),1),$("p",null,R(e.$t("Site.Config.index_32")),1)])),_:1},8,["value"])]),$("div",Gt,[w(l,{class:"add-domain-btn",type:"primary",onClick:o},{default:P((()=>[T(R(e.$t("Site.Cert.index_62")),1)])),_:1})])]),w(d,null,{table:P((()=>[w(i,{"checked-row-keys":U(r),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>L(r)?r.value=e:null),loading:U(m),"max-height":400,data:U(u).data,columns:U(c)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[w(n,{"checked-row-keys":U(r),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>L(r)?r.value=e:null),data:U(u).data,options:p},null,8,["checked-row-keys","data"])])),_:1})])}}}),Zt={class:"w-140px"},Qt={class:"w-120px"},Jt=g({__name:"index",setup(e,{expose:a}){const l=j((()=>s((()=>t.import("./rewrite-legacy.js?v=1732601582185")),void 0))),{t:d}=b(),{data:r}=At(),u=E({domain:"",dirName:null}),c=S([]),p=async()=>{const e=u.dirName;""!==u.domain.trim()?null!==e?(await Q({id:r.id,domain:u.domain,dirName:e}),B()):n.error(d("Site.RulesError.index_32")):n.error(d("Site.RulesError.index_31"))},m=st(d("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),_=e=>{m.data.filename=e.filename,m.data.fileContent=e.data,m.data.rlist=e.rlist,m.show=!0},{keys:v,table:h,columns:x}=it([{type:"selection",width:40},{key:"domain",title:d("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:d("Site.TableRow.index_16"),width:80},{key:"path",title:d("Site.Config.index_33"),width:120,ellipsis:{tooltip:{width:"trigger"}}},ot({width:130,options:e=>[{label:d("Site.TableOP.index_10"),onClick:()=>{(async e=>{try{const{message:t}=await J({id:e.id});o(t)&&_(t)}catch(t){const a=pt(t,"meesage.result","");a?n.error(a):at({title:d("Site.Cert.index_40"),content:d("Site.PHP.index_80"),onConfirm:async({hide:t})=>{const{message:a}=await ee({id:e.id});o(a)&&_(a),t()}})}})(e)}},{label:d("Public.Btn.Del"),onClick:()=>{at({title:`${d("Ftp.Table.index_10")} ${e.path}`,content:d("Site.Config.index_34"),onConfirm:async({hide:t})=>{await Z({id:e.id}),B(),t()}})}}]})]),f=[{key:"del",type:"confirm",label:d("Site.Batch.index_20"),confirm:{title:d("Site.Batch.index_21"),desc:d("Site.Batch.index_11"),api:e=>Z({id:e.id},!1),done:()=>{B()},columns:[{key:"domain",title:d("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:y,setLoading:g}=nt(),B=()=>{u.domain="",u.dirName=null,(async()=>{try{g(!0);const{message:e}=await te({id:r.id});if(o(e)){const{dirs:t,binding:a}=e;i(t)&&t.length>0?(c.value=t.map((e=>({label:e,value:e}))),u.dirName=t[0]):(c.value=[],u.dirName=null),h.data=i(a)?a:[]}}finally{v.value=[],g(!1)}})()};return B(),a({init:B}),(e,t)=>{const a=mt,i=_t,n=vt,s=ct,o=W,d=z,r=V,_=kt;return k(),C("div",null,[w(i,{class:"items-center",size:16},{default:P((()=>[w(i,{class:"items-center"},{default:P((()=>[$("div",null,R(e.$t("Site.TableRow.index_19")),1),$("div",Zt,[w(a,{value:U(u).domain,"onUpdate:value":t[0]||(t[0]=e=>U(u).domain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])])),_:1}),w(i,{class:"items-center"},{default:P((()=>[$("div",null,R(e.$t("Site.Config.index_33")),1),$("div",Qt,[w(n,{value:U(u).dirName,"onUpdate:value":t[1]||(t[1]=e=>U(u).dirName=e),options:U(c)},null,8,["value","options"])])])),_:1}),w(s,{class:"add-domain-btn",type:"primary",onClick:p},{default:P((()=>[T(R(e.$t("Site.Cert.index_62")),1)])),_:1})])),_:1}),w(r,{class:"mt-16px"},{table:P((()=>[w(o,{"checked-row-keys":U(v),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>L(v)?v.value=e:null),loading:U(y),"max-height":440,data:U(h).data,columns:U(x)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[w(d,{"checked-row-keys":U(v),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>L(v)?v.value=e:null),data:U(h).data,options:f},null,8,["checked-row-keys","data"])])),_:1}),w(_,{show:U(m).show,"onUpdate:show":t[4]||(t[4]=e=>U(m).show=e),title:U(m).title,data:U(m).data,width:600,"min-height":488,component:U(l)},null,8,["show","title","data","component"])])}}}),ea={class:"pt-16px"},ta={class:"flex-1"},aa={class:"w-240px"},la={class:"mt-8px text-desc"},ia={class:"flex-1"},na={class:"w-240px"},sa={class:"mt-12px text-desc"},oa={class:"my-16px"},da={class:"text-desc"},ra={class:"my-20px"},ua={class:"w-240px"},ca={class:"w-240px"},pa={class:"w-240px"},ma=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:l}=At(),i=S(""),s=async()=>{if(""!==i.value.trim())try{await ae({id:l.id,name:l.name,path:i.value}),g()}catch(e){console.warn(e)}else n.error(a("Site.RulesError.index_13"))},r=S(null),u=S([]),c=async()=>{null!==r.value?(await le({id:l.id,runPath:r.value}),g()):n.error(a("Site.RulesError.index_15"))},p=S(!1),m=async()=>{await ie({id:l.id,path:l.path}),g()},_=S(!1),v=async()=>{await ne({id:l.id}),g()},h=S(!1),x=E({username_get:"",password_get_1:"",password_get_2:""}),f=async e=>{e||(await se({id:l.id}),g())},y=async()=>{""!==x.username_get.trim()?""!==x.password_get_1.trim()?""!==x.password_get_2.trim()?x.username_get.trim().length<3||x.password_get_1.trim().length<3?n.error(a("Site.RulesError.index_35")):x.password_get_1.trim()===x.password_get_2.trim()?(await oe({id:l.id,username:x.username_get,password:x.password_get_1}),x.username_get="",x.password_get_1="",x.password_get_2="",g()):n.error(a("Site.RulesError.index_38")):n.error(a("Site.RulesError.index_37")):n.error(a("Site.RulesError.index_36")):n.error(a("Site.RulesError.index_34"))},g=()=>{(async()=>{const{message:e}=await de({id:l.id});o(e)&&(i.value=e.result||"/www")})(),(async()=>{const{message:e}=await re({id:l.id,path:l.path});if(o(e)){r.value=pt(e,"runPath.runPath",null),p.value=pt(e,"userini",!1),_.value=pt(e,"logs.result",!1),h.value=pt(e,"pass.result",!1);const t=pt(e,"runPath.dirs",[]);u.value=t.map((e=>({label:e,value:e})))}})()};return g(),t({init:g}),(e,t)=>{const a=$t,l=ct,n=_t,o=ht,g=vt,b=d,S=xt,E=mt,j=Ct;return k(),C("div",ea,[w(j,{"label-width":"140"},{default:P((()=>[w(o,{label:e.$t("Site.Lable.index_2"),"show-feedback":!1},{default:P((()=>[$("div",ta,[w(n,null,{default:P((()=>[$("div",aa,[w(a,{value:U(i),"onUpdate:value":t[0]||(t[0]=e=>L(i)?i.value=e:null),"input-props":{name:"directory"}},null,8,["value"])]),w(l,{class:"save-dir-btn",type:"primary",onClick:s},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1}),$("div",la,R(e.$t("Site.Config.index_35")),1)])])),_:1},8,["label"]),w(o,{class:"mt-16px",label:e.$t("Site.Lable.index_3"),"show-feedback":!1},{default:P((()=>[$("div",ia,[w(n,null,{default:P((()=>[$("div",na,[w(g,{value:U(r),"onUpdate:value":t[1]||(t[1]=e=>L(r)?r.value=e:null),class:"run-select",options:U(u)},null,8,["value","options"])]),w(l,{class:"save-run-btn",type:"primary",onClick:c},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1}),$("div",sa,R(e.$t("Site.Config.index_36")),1)])])),_:1},8,["label"]),$("div",oa,[w(b,{dashed:""})]),w(o,{label:e.$t("Site.Lable.index_4"),"show-feedback":!1},{default:P((()=>[w(n,{class:"items-center"},{default:P((()=>[w(S,{value:U(p),"onUpdate:value":[t[2]||(t[2]=e=>L(p)?p.value=e:null),m]},null,8,["value"]),$("div",da,R(e.$t("Site.Config.index_37")),1)])),_:1})])),_:1},8,["label"]),w(o,{class:"mt-16px",label:e.$t("Site.Lable.index_5"),"show-feedback":!1},{default:P((()=>[w(n,{class:"items-center"},{default:P((()=>[w(S,{value:U(_),"onUpdate:value":[t[3]||(t[3]=e=>L(_)?_.value=e:null),v]},null,8,["value"]),t[8]||(t[8]=$("div",{class:"text-desc"},null,-1))])),_:1})])),_:1},8,["label"]),$("div",ra,[w(b,{dashed:""})]),w(o,{label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:P((()=>[w(n,{class:"items-center"},{default:P((()=>[w(S,{value:U(h),"onUpdate:value":[t[4]||(t[4]=e=>L(h)?h.value=e:null),f]},null,8,["value"]),t[9]||(t[9]=$("div",{class:"text-desc"},null,-1))])),_:1})])),_:1},8,["label"]),U(h)?(k(),C(B,{key:0},[w(o,{class:"mt-16px",label:e.$t("Site.Lable.index_17"),"show-feedback":!1},{default:P((()=>[$("div",ua,[w(E,{value:U(x).username_get,"onUpdate:value":t[5]||(t[5]=e=>U(x).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),w(o,{class:"mt-16px",label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:P((()=>[$("div",ca,[w(E,{value:U(x).password_get_1,"onUpdate:value":t[6]||(t[6]=e=>U(x).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),w(o,{class:"mt-16px",label:e.$t("Site.Lable.index_18"),"show-feedback":!1},{default:P((()=>[$("div",pa,[w(E,{value:U(x).password_get_2,"onUpdate:value":t[7]||(t[7]=e=>U(x).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),w(o,{class:"mt-16px",label:" ","show-feedback":!1},{default:P((()=>[w(l,{type:"primary",onClick:y},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})],64)):I("",!0)])),_:1})])}}}),_a={class:"p-20px"},va={class:"w-280px"},ha={class:"w-280px"},xa={class:"w-280px"},fa={class:"w-280px"},ya=g({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{t:l}=b(),{isEdit:i,siteId:n,row:s,getList:o}=a.data,d=S(null),r=E({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:l("Site.RulesError.index_16"),trigger:["blur","input"]},site_dir:{required:!0,message:l("Site.RulesError.index_17"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return i&&s&&(r.name=s.name,r.site_dir=s.site_dir),t({onConfirm:async({hide:e})=>{await(d.value?.validate()),i?await ue({id:n,name:r.name,username:r.username,password:r.password}):await ce({...N(r),id:n}),o?.(),e()}}),(e,t)=>{const a=mt,l=ht,n=Ct,s=Rt;return k(),C("div",_a,[w(n,{ref_key:"formRef",ref:d,model:U(r),rules:u},{default:P((()=>[w(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:P((()=>[$("div",va,[w(a,{value:U(r).name,"onUpdate:value":t[0]||(t[0]=e=>U(r).name=e),disabled:U(i),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])])),_:1},8,["label"]),w(l,{label:e.$t("Site.TableRow.index_15"),path:"site_dir"},{default:P((()=>[$("div",ha,[w(a,{value:U(r).site_dir,"onUpdate:value":t[1]||(t[1]=e=>U(r).site_dir=e),disabled:U(i),placeholder:e.$t("Site.Config.Limit.index_5"),"input-props":{name:"site_dir"}},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),w(l,{label:e.$t("Site.Lable.index_24"),path:"username"},{default:P((()=>[$("div",xa,[w(a,{value:U(r).username,"onUpdate:value":t[2]||(t[2]=e=>U(r).username=e),placeholder:"","input-props":{name:"username"}},null,8,["value"])])])),_:1},8,["label"]),w(l,{label:e.$t("Site.Lable.index_27"),path:"password"},{default:P((()=>[$("div",fa,[w(a,{value:U(r).password,"onUpdate:value":t[3]||(t[3]=e=>U(r).password=e),placeholder:"","input-props":{name:"password"}},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),w(s,{class:"mt-4px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_40")),1),$("li",null,R(e.$t("Site.Config.index_41")),1)])),_:1})])}}}),wa=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:l}=At(),{keys:i,table:n,columns:s}=it([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},ot({width:130,options:e=>[{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{_(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{at({title:`${a("Site.Config.Limit.index_1",[e.name])}`,content:a("Site.Config.Limit.index_2"),onConfirm:async({hide:t})=>{await pe({id:l.id,name:e.name}),c(),t()}})}}]})]),d=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[s.value[1]],api:e=>pe({id:l.id,name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=nt(),c=async()=>{try{u(!0);const{message:e}=await me({id:l.id});if(o(e)){n.data=[];for(const[t,a]of Object.entries(e))if(l.name===t){n.data=a;break}}}finally{i.value=[],u(!1)}},p=st(a("Site.Config.index_38"),{row:void 0,siteId:l.id,isEdit:!1,getList:c}),m=()=>{p.data.isEdit=!1,p.title=a("Site.Config.index_38"),p.show=!0},_=e=>{p.data.row=e,p.data.isEdit=!0,p.title=a("Site.Config.index_39"),p.show=!0};return c(),t({init:c}),(e,t)=>{const a=ct,l=W,o=z,u=V,c=Rt,_=kt;return k(),C("div",null,[w(u,null,{toolsLeft:P((()=>[w(a,{class:"add-limit-btn",type:"primary",onClick:m},{default:P((()=>[T(R(e.$t("Site.Config.index_38")),1)])),_:1})])),table:P((()=>[w(l,{"checked-row-keys":U(i),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>L(i)?i.value=e:null),"row-key":"name",loading:U(r),"max-height":440,data:U(n).data,columns:U(s)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[w(o,{"checked-row-keys":U(i),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>L(i)?i.value=e:null),"row-key":"name",data:U(n).data,options:d},null,8,["checked-row-keys","data"])])),_:1}),w(c,{class:"mt-16px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_40")),1),$("li",null,R(e.$t("Site.Config.index_41")),1)])),_:1}),w(_,{show:U(p).show,"onUpdate:show":t[2]||(t[2]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:480,footer:!0,component:ya},null,8,["show","title","data"])])}}}),ga={class:"p-20px"},ba={class:"w-280px"},Sa={class:"w-280px"},ka={class:"w-280px"},Ca=g({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{isEdit:l,siteName:i,row:n,getList:s}=a.data,{t:o}=b(),d=S(null),r=E({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:o("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:o("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:o("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...N(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),t({onConfirm:async({hide:e})=>{await(d.value?.validate()),l?await _e(c()):await ve(c()),s?.(),e()}}),(e,t)=>{const a=mt,i=ht,n=Ct,s=Rt;return k(),C("div",ga,[w(n,{ref_key:"formRef",ref:d,model:U(r),rules:u},{default:P((()=>[w(i,{label:e.$t("Site.TableRow.index_2"),path:"deny_name"},{default:P((()=>[$("div",ba,[w(a,{value:U(r).deny_name,"onUpdate:value":t[0]||(t[0]=e=>U(r).deny_name=e),disabled:U(l),placeholder:e.$t("Site.Placeholder.Index_1"),"input-props":{name:"name"}},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),w(i,{label:e.$t("Site.TableRow.index_18"),path:"suffix"},{default:P((()=>[$("div",Sa,[w(a,{value:U(r).suffix,"onUpdate:value":t[1]||(t[1]=e=>U(r).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2"),"input-props":{name:"suffix"}},null,8,["value","placeholder"])])])),_:1},8,["label"]),w(i,{label:e.$t("Site.TableRow.index_15"),path:"dir"},{default:P((()=>[$("div",ka,[w(a,{value:U(r).dir,"onUpdate:value":t[2]||(t[2]=e=>U(r).dir=e),placeholder:e.$t("Site.Placeholder.Index_3"),"input-props":{name:"dir"}},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),w(s,{class:"mt-4px"},{default:P((()=>[$("li",null,R(e.$t("Site.PHP.index_72")),1),$("li",null,R(e.$t("Site.PHP.index_73")),1),$("li",null,R(e.$t("Site.PHP.index_74")),1),$("li",null,R(e.$t("Site.PHP.index_75")),1),$("li",null,R(e.$t("Site.PHP.index_76")),1)])),_:1})])}}}),$a=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:l}=At(),{keys:n,table:s,columns:o}=it([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:a("Site.TableRow.index_18"),ellipsis:{tooltip:{width:"trigger"}}},ot({width:130,options:e=>[{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{_(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{at({title:`${a("Site.TableOP.index_6")} [${e.name}]`,content:a("Site.Batch.index_13"),onConfirm:async({hide:t})=>{await he({website:l.name,deny_name:e.name}),c(),t()}})}}]})]),d=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[o.value[1]],api:e=>he({website:l.name,deny_name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=nt(),c=async()=>{try{u(!0);const{message:e}=await xe({website:l.name});s.data=i(e)?e:[]}finally{n.value=[],u(!1)}},p=st(a("Site.Config.index_38"),{row:void 0,siteName:l.name,isEdit:!1,getList:c}),m=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=a("Site.Config.index_38"),p.show=!0},_=e=>{p.data.row=e,p.data.isEdit=!0,p.title=a("Site.Config.index_39"),p.show=!0};return c(),t({init:c}),(e,t)=>{const a=ct,l=W,i=z,u=V,c=Rt,_=kt;return k(),C("div",null,[w(u,null,{toolsLeft:P((()=>[w(a,{class:"add-deny-btn",type:"primary",onClick:m},{default:P((()=>[T(R(e.$t("Site.Config.index_38")),1)])),_:1})])),table:P((()=>[w(l,{"checked-row-keys":U(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>L(n)?n.value=e:null),"row-key":"name",loading:U(r),"max-height":440,data:U(s).data,columns:U(o)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[w(i,{"checked-row-keys":U(n),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>L(n)?n.value=e:null),"row-key":"name",data:U(s).data,options:d},null,8,["checked-row-keys","data"])])),_:1}),w(c,{class:"mt-16px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_42"))+" |",1),$("li",null,R(e.$t("Site.Config.index_43")),1),$("li",null,R(e.$t("Site.Config.index_44")),1),$("li",null,R(e.$t("Site.Config.index_45")),1)])),_:1}),w(_,{show:U(p).show,"onUpdate:show":t[2]||(t[2]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:480,footer:!0,component:Ca},null,8,["show","title","data"])])}}}),Pa=g({__name:"index",setup(e){const{t:t}=b(),a=S("limit"),l=[{key:"limit",label:t("Site.Config.index_5"),component:wa},{key:"deny",label:t("Site.Config.index_14"),component:$a}];return(e,t)=>{const i=Pt;return k(),D(i,{value:U(a),"onUpdate:value":t[0]||(t[0]=e=>L(a)?a.value=e:null),options:l},null,8,["value"])}}}),Ra={class:"pt-8px"},Ua={class:"w-200px"},La={class:"flex flex-col"},Ta={class:"w-200px"},Ea={class:"mt-8px text-desc"},ja={class:"flex flex-col"},Ba={class:"w-200px"},Ia={class:"mt-8px text-desc"},Na={class:"flex flex-col"},Da={class:"w-200px"},Ha={class:"mt-8px text-desc"},Oa=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:l}=At(),i=S(null),n=E({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),s={perserver:{trigger:["blur","change"],validator:()=>!!n.perserver||new Error(a("Site.RulesError.index_318"))},perip:{trigger:["blur","change"],validator:()=>!!n.perip||new Error(a("Site.RulesError.index_319"))},limit_rate:{trigger:["blur","change"],validator:()=>!!n.limit_rate||new Error(a("Site.RulesError.index_320"))}},d=S([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?m():(await fe({id:l.id}),_())},c=(e,t)=>{const{items:a}=t;o(a)&&p(a)},p=e=>{n.perserver=e.perserver,n.perip=e.perip,n.limit_rate=e.limit_rate},m=async()=>{await(i.value?.validate()),await ye({id:l.id,perserver:n.perserver,perip:n.perip,limit_rate:n.limit_rate}),_()},_=async()=>{const{message:e}=await we({id:l.id});o(e)&&(n.status=0!=e.perserver,p(d.value[0].items),r(e.perserver)&&0!=e.perserver&&(n.perserver=e.perserver),r(e.perip)&&0!=e.perip&&(n.perip=e.perip),r(e.limit_rate)&&0!=e.limit_rate&&(n.limit_rate=e.limit_rate))};return _(),t({init:_}),(e,t)=>{const a=ft,l=ht,o=vt,r=yt,p=ct,_=Ct;return k(),C("div",Ra,[w(_,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:U(n),rules:s},{default:P((()=>[w(l,{label:" "},{default:P((()=>[w(a,{checked:U(n).status,"onUpdate:checked":[t[0]||(t[0]=e=>U(n).status=e),u]},{default:P((()=>[T(R(e.$t("Site.PHP.index_82")),1)])),_:1},8,["checked"])])),_:1}),w(l,{label:e.$t("Site.Lable.index_40"),path:"type"},{default:P((()=>[$("div",Ua,[w(o,{value:U(n).type,"onUpdate:value":[t[1]||(t[1]=e=>U(n).type=e),c],options:U(d)},null,8,["value","options"])])])),_:1},8,["label"]),w(l,{label:e.$t("Site.Lable.index_41"),path:"perserver"},{default:P((()=>[$("div",La,[$("div",Ta,[w(r,{value:U(n).perserver,"onUpdate:value":t[2]||(t[2]=e=>U(n).perserver=e),"show-button":!1,min:0},null,8,["value"])]),$("div",Ea,R(e.$t("Site.PHP.index_83")),1)])])),_:1},8,["label"]),w(l,{label:e.$t("Site.Lable.index_45"),path:"perip"},{default:P((()=>[$("div",ja,[$("div",Ba,[w(r,{value:U(n).perip,"onUpdate:value":t[3]||(t[3]=e=>U(n).perip=e),"show-button":!1,min:0},null,8,["value"])]),$("div",Ia,R(e.$t("Site.PHP.index_84")),1)])])),_:1},8,["label"]),w(l,{label:e.$t("Site.Config.index_6"),path:"limit_rate"},{default:P((()=>[$("div",Na,[$("div",Da,[w(r,{value:U(n).limit_rate,"onUpdate:value":t[4]||(t[4]=e=>U(n).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),$("div",Ha,R(e.$t("Site.PHP.index_85")),1)])])),_:1},8,["label"]),w(l,{label:" "},{default:P((()=>[w(p,{type:"primary",onClick:m},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),qa={class:"w-420px"},Aa={class:"mt-8px"},Ma=g({__name:"index",setup(e,{expose:t}){const{data:a}=At(),l=S(""),i=async()=>{const{message:e}=await ge({id:a.id});o(e)&&(l.value=u(e.result)?e.result.split(",").join("\n"):"")},n=async()=>{await be({id:a.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),t({init:i}),(e,t)=>{const a=X,i=ct,s=Rt;return k(),C("div",null,[$("div",qa,[w(a,{value:U(l),"onUpdate:value":t[0]||(t[0]=e=>L(l)?l.value=e:null),rows:12,name:"content",placeholder:""},null,8,["value"])]),$("div",Aa,[w(i,{class:"save-btn",type:"primary",onClick:n},{default:P((()=>[T(R(e.$t("Public.Btn.Save")),1)])),_:1})]),w(s,{class:"mt-16px"},{default:P((()=>[$("li",null,R(e.$t("Site.PHP.index_79")),1)])),_:1})])}}}),Ka={class:"mt-8px"},Va=g({__name:"index",setup(e,{expose:t}){const{data:a}=At(),l=c(),i=S(null),n=S((()=>{const{webserver:e}=l;return`/www/server/panel/vhost/${"openlitespeed"===e?`${e}/detail`:e}/${a.name}.conf`})()),s=async()=>{i.value?.getContent()},o=()=>{i.value?.saveFile()};return H((()=>{s()})),t({init:s}),(e,t)=>{const a=ct,l=Rt;return k(),C("div",null,[w(Ut,{ref_key:"configRef",ref:i,path:U(n),"onUpdate:path":t[0]||(t[0]=e=>L(n)?n.value=e:null),height:"500"},null,8,["path"]),$("div",Ka,[w(a,{type:"primary",onClick:o},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})]),w(l,{class:"mt-16px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_59")),1),$("li",null,R(e.$t("Site.Config.index_60")),1)])),_:1})])}}}),za={class:"p-8"},Wa=g({__name:"form",setup(e,{expose:t}){const a=S(null),l=S(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=E({path:"",operation:[]}),s=(e,t)=>{"dir"===t.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return t({onConfirm:async()=>{await(a.value?.validate())}}),(e,t)=>{const o=$t,d=ht,r=ft,u=p,c=wt,m=Ct,_=_t,v=Rt;return k(),C("div",za,[w(_,null,{default:P((()=>[w(m,{ref_key:"formRef",ref:a,model:U(n),rules:i},{default:P((()=>[w(d,{label:"Detection path",path:"path"},{default:P((()=>[w(o,{disabled:"",value:U(n).path,"onUpdate:value":t[0]||(t[0]=e=>U(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])])),_:1}),w(d,{label:"Alert operation",path:"operation"},{default:P((()=>[w(c,{value:U(n).operation,"onUpdate:value":t[1]||(t[1]=e=>U(n).operation=e)},{default:P((()=>[w(u,null,{default:P((()=>[w(r,{value:0},{default:P((()=>t[2]||(t[2]=[T(" Read ")]))),_:1}),w(r,{value:1,disabled:U(l)},{default:P((()=>t[3]||(t[3]=[T(" delete ")]))),_:1},8,["disabled"]),w(r,{value:2,disabled:U(l)},{default:P((()=>t[4]||(t[4]=[T(" Modify/increase ")]))),_:1},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),w(v,{class:"mt-16px"},{default:P((()=>t[5]||(t[5]=[$("li",null,"Directory temporarily only supports reading alarm operation",-1)]))),_:1})])}}}),Xa={class:"p-5"},Fa={class:"mt-16px"},Ga=g({__name:"monitor",setup(e){const t=S(!1),a=S(!1),l=S([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=S([]);return(e,n)=>{const s=ct,o=_t,d=W,r=Rt,u=kt;return k(),C("div",Xa,[$("div",null,[w(o,{justify:"space-between"},{default:P((()=>[w(s,{type:"primary",onClick:n[0]||(n[0]=e=>t.value=!0)},{default:P((()=>n[2]||(n[2]=[T(" Add monitor ")]))),_:1}),w(s,null,{icon:P((()=>n[3]||(n[3]=[$("img",{src:Tt,class:"w-5"},null,-1)]))),_:1})])),_:1})]),$("div",Fa,[w(d,{loading:U(a),"loading-num":6,data:U(i),columns:U(l)},null,8,["loading","data","columns"])]),$("div",null,[w(r,{class:"mt-16px"},{default:P((()=>[n[5]||(n[5]=$("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1)),n[6]||(n[6]=$("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1)),$("li",null,[w(s,{text:"",class:"color-#20a53a"},{default:P((()=>n[4]||(n[4]=[T("Tutorial")]))),_:1})])])),_:1})]),w(u,{show:U(t),"onUpdate:show":n[1]||(n[1]=e=>L(t)?t.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:Wa},null,8,["show"])])}}}),Ya=m({},[["render",function(e,t){return k(),C("div",null,"555")}]]),Za={class:"box mt-16px"},Qa={key:0,class:"items-center warning"},Ja={class:"warning"},el={class:"color-#f23836"},tl=g({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=c(),a=S(!1),i=S(!1),n=S(!1),s=e,o=_(),d=()=>{dt({source:114})},r=()=>{const e=a.value?"Open the site security alarm":"Close the site security alarm",t=a.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";at({title:e,content:t,onConfirm:async()=>{const e=Bt(a.value);console.log(e,"result")},onPublicClose:()=>{a.value=!a.value}})};return(e,u)=>{const c=xt,p=_t,m=ct,_=Rt,v=l,h=Lt,x=kt;return k(),C(B,null,[$("div",Za,[w(h,{install:U(o).isPro,class:"install"},O({default:P((()=>[w(p,{class:"items-center color-#666"},{default:P((()=>[u[8]||(u[8]=$("div",null,"Site protection",-1)),$("div",null,[w(c,{value:U(a),"onUpdate:value":[u[0]||(u[0]=e=>L(a)?a.value=e:null),r]},null,8,["value"])]),u[9]||(u[9]=$("div",null,"today: 0",-1)),u[10]||(u[10]=$("div",null,"Total alarm: 0",-1)),U(a)?I("",!0):(k(),C("div",Qa,[u[7]||(u[7]=$("img",{src:jt,class:"h-8"},null,-1)),$("span",Ja,[u[5]||(u[5]=T(" Please open ")),$("span",el,"PHP-"+R(s.phpVersion),1),u[6]||(u[6]=T(" protection first "))])]))])),_:1}),w(p,{class:"mt-16px"},{default:P((()=>[w(m,{onClick:u[1]||(u[1]=e=>i.value=!0)},{default:P((()=>u[11]||(u[11]=[T("Monitor")]))),_:1}),w(m,{onClick:u[2]||(u[2]=e=>n.value=!0)},{default:P((()=>u[12]||(u[12]=[T("Trigger log")]))),_:1})])),_:1}),w(_,{class:"mt-16px"},{default:P((()=>u[13]||(u[13]=[$("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1),$("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1)]))),_:1})])),_:2},[s.isInstall?{name:"desc",fn:P((()=>[w(p,{class:"items-center"},{default:P((()=>[u[16]||(u[16]=$("img",{src:Et,class:"h-10"},null,-1)),$("span",null,[u[15]||(u[15]=T("If you need to use the [PHP website security alarm] function, please buy first ")),w(v,{onClick:d},{default:P((()=>u[14]||(u[14]=[T("click to buy")]))),_:1})])])),_:1})])),key:"0"}:{name:"desc",fn:P((()=>[w(p,{class:"items-center"},{default:P((()=>[u[19]||(u[19]=$("img",{src:Et,class:"h-10"},null,-1)),$("span",null,[u[18]||(u[18]=T("Currently not installed [PHP website security alarm], ")),w(v,null,{default:P((()=>u[17]||(u[17]=[T("Click to install")]))),_:1})])])),_:1})])),key:"1"}]),1032,["install"])]),w(x,{show:U(i),"onUpdate:show":u[3]||(u[3]=e=>L(i)?i.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:Ga},null,8,["show"]),w(x,{show:U(n),"onUpdate:show":u[4]||(u[4]=e=>L(n)?n.value=e:null),title:`[${U(t).siteName}] Site security log`,width:1e3,"min-height":148,footer:!1,component:Ya},null,8,["show","title"])],64)}}}),al=m(tl,[["__scopeId","data-v-b2f1026f"]]),ll={class:"w-140px"},il={class:"my-16px"},nl={key:0,class:"my-16px"},sl=g({__name:"index",setup(e,{expose:t}){const{data:a}=At(),l=c(),s=S(null),r=S(!1),u=S(!1);let p="";const m=S([]),_=async()=>{null!==s.value?(await Se({siteName:a.name,version:s.value,other:p}),l.setRefresh(!0),f()):n.error("Please select a PHP version")},h=async()=>{const{message:e}=await Pe({id:a.id});o(e)&&(r.value=e.result)},x=async e=>{await ke({id:a.id,act:e?1:0}),h()},f=()=>{(async()=>{const{message:e}=await It();o(e)&&(u.value=e.php_status)})(),h(),(async()=>{const{message:e}=await $e();i(e)&&(m.value=e.reverse().map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await Ce({siteName:a.name});o(e)&&(s.value=e.phpversion,p=e.php_other||"")})()};return f(),t({init:f}),(e,t)=>{const a=vt,l=ct,i=_t,n=Rt,o=d,c=xt;return k(),C("div",null,[w(i,{class:"items-center"},{default:P((()=>[$("div",null,R(e.$t("Site.Lable.index_22")),1),$("div",ll,[w(a,{value:U(s),"onUpdate:value":t[0]||(t[0]=e=>L(s)?s.value=e:null),options:U(m)},null,8,["value","options"])]),$("div",null,[w(l,{type:"primary",onClick:_},{default:P((()=>[T(R(e.$t("Site.Cert.index_61")),1)])),_:1})])])),_:1}),w(n,{class:"mt-16px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_65")),1),$("li",null,R(e.$t("Site.Config.index_66")),1),$("li",null,R(e.$t("Site.Config.index_67")),1),$("li",null,R(e.$t("Site.Config.index_68")),1),$("li",null,R(e.$t("Site.Config.index_69")),1),$("li",null,R(e.$t("Site.Config.index_70")),1)])),_:1}),$("div",il,[w(o,{dashed:""})]),w(i,{class:"items-center"},{default:P((()=>[$("div",null,R(e.$t("Site.Config.index_64")),1),$("div",null,[w(c,{value:U(r),"onUpdate:value":[t[1]||(t[1]=e=>L(r)?r.value=e:null),x]},null,8,["value"])])])),_:1}),w(n,{class:"mt-16px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_71")),1),$("li",null,R(e.$t("Site.Config.index_72")),1)])),_:1}),U(v)?(k(),C("div",nl,[w(o,{dashed:""}),w(al,{isInstall:U(u),phpVersion:U(s)},null,8,["isInstall","phpVersion"])])):I("",!0)])}}}),ol={class:"mr-16px text-#777"},dl={key:1,class:"text-#777"},rl={class:"w-200px mr-8px"},ul={class:"w-200px mr-8px"},cl=g({__name:"index",setup(e,{expose:t}){const a=c(),{data:l}=At(),s=S(!1),d=S("--"),r=S("--"),u=S(l.cache_status),p=S(null),m=S([]),_=S(""),v=async()=>{await Re({s_id:l.id,version:r.value}),y()},h=async e=>{await Ue({version:l.php_version,sitename:l.name,act:e}),l.cache_status=e,a.setRefresh(!0)},x=async()=>{await Le({s_id:l.id})},f=async()=>{p.value?""!==_.value.trim()?await Te({s_id:l.id,user:p.value,new_pass:_.value}):n.error("Please enter new password"):n.error("Please select user")},y=async()=>{const e=n.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await Ee({s_id:l.id});o(e)&&(d.value=e.local_v,r.value=e.online_v,s.value=e.update)})(),await(async()=>{const{message:e}=await je({s_id:l.id});i(e)&&e.length>0?(m.value=e.map((e=>({label:e,value:e}))),p.value=e[0]):(m.value=[],p.value=null)})()}finally{e.close()}};return y(),t({init:y}),(e,t)=>{const a=ct,l=ht,i=ft,n=vt,o=mt,c=Ct;return k(),C("div",null,[w(c,null,{default:P((()=>[w(l,{label:"WP Version"},{default:P((()=>[U(s)?(k(),C(B,{key:0},[$("div",ol,"The current version is: "+R(U(d)),1),w(a,{type:"primary",onClick:v},{default:P((()=>[T("Upgrade to "+R(U(r)),1)])),_:1})],64)):(k(),C("span",dl,"The latest version"))])),_:1}),w(l,{label:"Cache"},{default:P((()=>[w(i,{checked:U(u),"onUpdate:checked":[t[0]||(t[0]=e=>L(u)?u.value=e:null),h],class:"mr-16px"},{default:P((()=>t[3]||(t[3]=[T(" Open cache ")]))),_:1},8,["checked"]),w(a,{type:"primary",onClick:x},{default:P((()=>t[4]||(t[4]=[T("Purge all cache")]))),_:1})])),_:1}),w(l,{label:"Reset password"},{default:P((()=>[$("div",rl,[w(n,{value:U(p),"onUpdate:value":t[1]||(t[1]=e=>L(p)?p.value=e:null),options:U(m)},null,8,["value","options"])]),$("div",ul,[w(o,{value:U(_),"onUpdate:value":t[2]||(t[2]=e=>L(_)?_.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),w(a,{type:"primary",onClick:f},{default:P((()=>t[5]||(t[5]=[T("Save password")]))),_:1})])),_:1})])),_:1})])}}}),pl={class:"pt-8px"},ml={class:"w-180px mr-8px"},_l={class:"w-180px"},vl={class:"w-180px"},hl={class:"w-280px"},xl={class:"w-180px"},fl={class:"w-180px"},yl={class:"w-280px"},wl={class:"flex-1"},gl={key:0,class:"mb-16px text-error"},bl={key:1,class:"mb-16px text-error"},Sl=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:i}=At(),n=E({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),s=S([]),d=[{label:a("Docker.App.index_4"),value:"install"},{label:a("Docker.App.index_3"),value:"update"}],r=[{label:a("Site.Lable.index_8"),value:"repos.packagist"}],c=[{label:a("Site.Lable.index_9"),value:"www"},{label:a("Site.Lable.index_10"),value:"root"}],p=S(""),m=S(""),_=async()=>{await Be({repo:n.repo}),f()},v=async()=>{await Ie({path:i.path}),f()},h=()=>{at({title:a("Site.PHP.index_77"),content:a("Site.PHP.index_78"),onConfirm:async()=>{await Ne({php_version:n.php_version,composer_args:n.composer_args,composer_cmd:n.composer_cmd,repo:n.repo,path:n.composer_path,user:n.composer_user}),f()}})},x=()=>{s.value.unshift({label:a("Site.Lable.index_12"),value:"auto"})},f=async()=>{const{message:e}=await De({path:i.path});o(e)&&(n.composer_version=e.result,e.comp_json&&(p.value=e.comp_json),u(e.comp_lock)&&(m.value=e.comp_lock),s.value=e.php_versions.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),x())};return x(),f(),t({init:f}),(e,t)=>{const a=mt,i=ct,o=ht,u=vt,x=$t,f=l,y=Ct;return k(),C("div",pl,[w(y,{class:"px-8px"},{default:P((()=>[w(o,{label:e.$t("Site.TableRow.index_3"),path:"composer_version"},{default:P((()=>[$("div",ml,[w(a,{value:U(n).composer_version,"onUpdate:value":t[0]||(t[0]=e=>U(n).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),w(i,{onClick:_},{default:P((()=>[T(R(e.$t("Docker.App.index_3")),1)])),_:1})])),_:1},8,["label"]),w(o,{label:e.$t("Site.TableRow.index_27"),path:"php_version"},{default:P((()=>[$("div",_l,[w(u,{value:U(n).php_version,"onUpdate:value":t[1]||(t[1]=e=>U(n).php_version=e),options:U(s)},null,8,["value","options"])])])),_:1},8,["label"]),w(o,{label:e.$t("Site.TableRow.index_28"),path:"composer_args"},{default:P((()=>[$("div",vl,[w(u,{value:U(n).composer_args,"onUpdate:value":t[2]||(t[2]=e=>U(n).composer_args=e),options:d},null,8,["value"])])])),_:1},8,["label"]),w(o,{label:e.$t("Site.TableRow.index_29"),path:"composer_cmd"},{default:P((()=>[$("div",hl,[w(a,{value:U(n).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>U(n).composer_cmd=e),placeholder:e.$t("Site.Cert.index_67")},null,8,["value","placeholder"])])])),_:1},8,["label"]),w(o,{label:e.$t("Site.Lable.index_32"),path:"repo"},{default:P((()=>[$("div",xl,[w(u,{value:U(n).repo,"onUpdate:value":t[4]||(t[4]=e=>U(n).repo=e),options:r},null,8,["value"])])])),_:1},8,["label"]),w(o,{label:e.$t("Ftp.Analysis.Index_27"),path:"composer_user"},{default:P((()=>[$("div",fl,[w(u,{value:U(n).composer_user,"onUpdate:value":t[5]||(t[5]=e=>U(n).composer_user=e),options:c},null,8,["value"])])])),_:1},8,["label"]),w(o,{label:e.$t("Site.Lable.index_26"),path:"composer_path"},{default:P((()=>[$("div",yl,[w(x,{value:U(n).composer_path,"onUpdate:value":t[6]||(t[6]=e=>U(n).composer_path=e)},null,8,["value"])])])),_:1},8,["label"]),w(o,{label:" ","show-feedback":!1},{default:P((()=>[$("div",wl,[U(p)?(k(),C("div",gl,R(U(p)),1)):I("",!0),U(m)?(k(),C("div",bl,[$("span",null,R(U(m)),1),w(f,{onClick:v},{default:P((()=>[T("["+R(e.$t("Site.TableOP.index_6"))+"]",1)])),_:1})])):I("",!0),w(i,{type:"primary",onClick:h},{default:P((()=>[T(R(e.$t("Site.Lable.index_11")),1)])),_:1})])])),_:1})])),_:1})])}}}),kl={class:"px-20px py-24px"},Cl={class:"w-120px"},$l={class:"w-120px"},Pl={class:"w-200px"},Rl={class:"w-200px"},Ul={class:"w-200px"},Ll=g({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=b(),l=e,{isEdit:n,siteId:s,siteName:o,row:d,getList:r}=l.data,u=S(null),c=E({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),p={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(a("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(a("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(a("Site.RulesError.index_25"))}},m=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],_=[{label:"301",value:"301"},{label:"302",value:"302"}],v=S([]),h=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:x,setLoading:f}=nt();return n&&d&&(c.redirectname=d.redirectname,c.type=d.type,c.holdpath=d.holdpath,c.redirecttype=d.redirecttype,c.redirectpath=d.redirectpath,c.domainorpath=d.domainorpath,c.redirectdomain=d.redirectdomain,c.tourl=d.tourl),(async()=>{try{f(!0);const{message:e}=await G({id:s});v.value=i(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{f(!1)}})(),t({onConfirm:async({hide:e})=>{await(u.value?.validate());const t={...N(c),sitename:o};n?await Oe(t):await He(t),r?.(),e()}}),(e,t)=>{const a=xt,l=ht,i=_t,n=vt,s=mt,o=Ct,d=Rt;return k(),C("div",kl,[w(o,{ref_key:"formRef",ref:u,model:U(c),rules:p},{default:P((()=>[w(i,{size:60},{default:P((()=>[w(l,{label:e.$t("Site.Lable.index_34")},{default:P((()=>[w(a,{value:U(c).type,"onUpdate:value":t[0]||(t[0]=e=>U(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),w(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:P((()=>[w(a,{value:U(c).holdpath,"onUpdate:value":t[1]||(t[1]=e=>U(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),w(i,{size:30},{default:P((()=>[w(l,{label:e.$t("Site.TableRow.index_11")},{default:P((()=>[$("div",Cl,[w(n,{value:U(c).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>U(c).domainorpath=e),h],class:"type-select",options:m},null,8,["value"])])])),_:1},8,["label"]),w(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:P((()=>[$("div",$l,[w(n,{value:U(c).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>U(c).redirecttype=e),class:"mode-select",options:_},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===U(c).domainorpath?(k(),D(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:P((()=>[$("div",Pl,[w(n,{value:U(c).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>U(c).redirectdomain=e),class:"domain-select",multiple:!0,loading:U(x),options:U(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):I("",!0),"path"===U(c).domainorpath?(k(),D(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:P((()=>[$("div",Rl,[w(s,{value:U(c).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>U(c).redirectpath=e),placeholder:"","input-props":{name:"path"}},null,8,["value"])])])),_:1},8,["label"])):I("",!0),w(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:P((()=>[$("div",Ul,[w(s,{value:U(c).tourl,"onUpdate:value":t[6]||(t[6]=e=>U(c).tourl=e),placeholder:"","input-props":{name:"url"}},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),w(d,{class:"mt-12px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_77")),1),$("li",null,R(e.$t("Site.Config.index_78")),1),$("li",null,R(e.$t("Site.Config.index_79")),1),$("li",null,R(e.$t("Site.Config.index_80")),1),$("li",null,R(e.$t("Site.Config.index_81")),1),$("li",null,R(e.$t("Site.Config.index_82")),1)])),_:1})])}}}),Tl={class:"p-20px"},El={class:"mt-12px"},jl=g({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:s}=a.data,d=t,r=c(),u=S(""),p=S(""),m=S(""),_=async()=>{const{message:e}=await Ae({path:m.value,data:u.value,encoding:p.value});o(e)&&n.success(e.msg),s?.(),d("close")};return(async()=>{const{message:e}=await qe({sitename:i,redirectname:l.redirectname,webserver:r.webserver});o(e)&&(m.value=e.file,u.value=e.data,p.value=e.encoding)})(),(e,t)=>{const a=ct,l=Rt;return k(),C("div",Tl,[w(Ut,{value:U(u),"onUpdate:value":t[0]||(t[0]=e=>L(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),$("div",El,[w(a,{type:"primary",onClick:_},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})]),w(l,{class:"mt-24px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),Bl=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:n}=At(),s=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:d,columns:r}=it([{type:"selection",width:40},{key:"sitename",title:a("Site.TableRow.index_11"),ellipsis:{tooltip:{width:"trigger"}},render:e=>"path"===e.domainorpath?e.redirectpath:e.sitename},{key:"redirecttype",title:a("Site.TableRow.index_12"),width:90},{key:"holdpath",title:a("Site.TableRow.index_13"),width:140,render:e=>w(l,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Me({...s(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?a("Config.Alarm.index_18"):a("Public.Status.TurnOff")]})},{key:"type",title:a("Config.Safe.index_156"),width:100,render:e=>w(rt,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":a("Public.Status.Running"),"unchecked-title":a("Public.Status.Paused"),onClick:async t=>{await Me({...s(e),type:t,holdpath:e.holdpath,status:e.type}),e.type=t}},null)},ot({width:140,options:e=>[{label:a("Site.TableOP.index_2"),class:"config-btn",onClick:()=>{f(e)}},{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{at({title:a("Site.Config.Redirect.index_1",[e.redirectname]),content:a("Site.Config.Redirect.index_2"),onConfirm:async()=>{await Ke({sitename:n.name,redirectname:e.redirectname}),m()}})}}]})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[r.value[1]],api:e=>Ke({sitename:n.name,redirectname:e.redirectname},!1),done:()=>{m()}}}],{loading:c,setLoading:p}=nt(),m=async()=>{try{p(!0);const{message:e}=await Ve({sitename:n.name});d.data=i(e)?e:[]}finally{o.value=[],p(!1)}},_=st(a("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:m}),v=()=>{_.data.row=void 0,_.data.isEdit=!1,_.title=a("Site.Config.index_74"),_.show=!0},h=e=>{_.data.row=e,_.data.isEdit=!0,_.title=`${a("Site.Config.index_75")} [${e.redirectname}]`,_.show=!0},x=st("",{row:void 0,siteName:n.name,getList:m}),f=e=>{x.data.row=e,x.title=`${a("Site.Config.index_76")} [${e.redirectname}]`,x.show=!0};return m(),t({init:m}),(e,t)=>{const a=ct,l=W,i=z,n=V,s=kt;return k(),C("div",null,[w(n,null,{toolsLeft:P((()=>[w(a,{class:"add-btn",type:"primary",onClick:v},{default:P((()=>[T(R(e.$t("Site.Config.index_73")),1)])),_:1})])),table:P((()=>[w(l,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>L(o)?o.value=e:null),"row-key":"redirectname",loading:U(c),"max-height":440,data:U(d).data,columns:U(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[w(i,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>L(o)?o.value=e:null),"row-key":"redirectname",data:U(d).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),w(s,{show:U(_).show,"onUpdate:show":t[2]||(t[2]=e=>U(_).show=e),title:U(_).title,data:U(_).data,width:660,footer:!0,component:Ll},null,8,["show","title","data"]),w(s,{show:U(x).show,"onUpdate:show":t[3]||(t[3]=e=>U(x).show=e),title:U(x).title,data:U(x).data,width:580,component:jl},null,8,["show","title","data"])])}}}),Il={class:"px-20px py-24px"},Nl={class:"w-220px"},Dl={class:"w-220px"},Hl={class:"w-220px"},Ol={class:"w-220px"},ql={class:"w-220px"},Al={class:"w-220px"},Ml={class:"w-220px"},Kl=g({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=b(),i=e,{isEdit:n,siteName:s,row:o,getList:d}=i.data,r=S(null),u=E({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:s}),c={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error(a("Site.RulesError.index_26"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error(a("Site.RulesError.index_27"))},proxydir:{trigger:["blur","input"],validator:()=>1!==u.advanced||""!==u.proxydir.trim()||new Error(a("Site.RulesError.index_28"))},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error(a("Site.RulesError.index_25"))},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error(a("Site.RulesError.index_29"))}},p=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?u.todomain="$host":u.todomain=e},m=S([]),_=()=>{m.value.length>=3||m.value.push({sub1:"",sub2:""})};return _(),(()=>{if(n&&o){u.type=o.type,u.cache=o.cache,u.advanced=o.advanced,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename;const e=o.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(m.value=e)}})(),t({onConfirm:async({hide:e})=>{await(r.value?.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach(((e,t)=>{m.value.length-1<t||(e.sub1=m.value[t].sub1,e.sub2=m.value[t].sub2)})),{...N(u),subfilter:e}})();n?await We(t):await ze(t),d?.(),e()}}),(e,t)=>{const a=xt,i=ht,s=_t,o=mt,d=yt,v=gt,h=bt,x=l,f=ct,y=Ct,g=Rt;return k(),C("div",Il,[w(y,{ref_key:"formRef",ref:r,model:U(u),rules:c},{default:P((()=>[w(s,{size:32},{default:P((()=>[w(i,{label:e.$t("Site.Lable.index_46")},{default:P((()=>[w(a,{value:U(u).type,"onUpdate:value":t[0]||(t[0]=e=>U(u).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),w(i,{label:e.$t("Site.Lable.index_47"),"label-width":"100"},{default:P((()=>[w(a,{value:U(u).cache,"onUpdate:value":t[1]||(t[1]=e=>U(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),w(i,{label:e.$t("Site.Lable.index_35"),"label-width":"126"},{default:P((()=>[w(a,{value:U(u).advanced,"onUpdate:value":t[2]||(t[2]=e=>U(u).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),w(i,{label:e.$t("Site.Lable.index_38"),path:"proxyname"},{default:P((()=>[$("div",Nl,[w(o,{value:U(u).proxyname,"onUpdate:value":t[3]||(t[3]=e=>U(u).proxyname=e),disabled:U(n),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])])),_:1},8,["label"]),1===U(u).cache?(k(),D(i,{key:0,label:e.$t("Site.Lable.index_39"),path:"cachetime"},{default:P((()=>[$("div",Dl,[w(h,null,{default:P((()=>[w(d,{value:U(u).cachetime,"onUpdate:value":t[4]||(t[4]=e=>U(u).cachetime=e),min:1,"show-button":!1,placeholder:"","input-props":{name:"time"}},null,8,["value"]),w(v,{class:"w-70px text-center"},{default:P((()=>[T(R(U(u).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1},8,["label"])):I("",!0),1===U(u).advanced?(k(),D(i,{key:1,label:e.$t("Site.TableRow.index_17"),path:"proxydir"},{default:P((()=>[$("div",Hl,[w(o,{value:U(u).proxydir,"onUpdate:value":t[5]||(t[5]=e=>U(u).proxydir=e),placeholder:"","input-props":{name:"dir"}},null,8,["value"])])])),_:1},8,["label"])):I("",!0),w(i,{label:e.$t("Site.Lable.index_33")},{default:P((()=>[$("div",Ol,[w(o,{value:U(u).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>U(u).proxysite=e),p],placeholder:"","input-props":{name:"url"}},null,8,["value"])])])),_:1},8,["label"]),w(i,{label:e.$t("Site.Lable.index_36")},{default:P((()=>[$("div",ql,[w(o,{value:U(u).todomain,"onUpdate:value":t[7]||(t[7]=e=>U(u).todomain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])])),_:1},8,["label"]),w(i,{label:e.$t("Site.Lable.index_37")},{default:P((()=>[w(s,{class:"flex-1",vertical:""},{default:P((()=>[(k(!0),C(B,null,q(U(m),((t,a)=>(k(),D(s,{key:`${a+1}`,class:"sub-rows items-center"},{default:P((()=>[$("div",Al,[w(o,{value:t.sub1,"onUpdate:value":e=>t.sub1=e,placeholder:e.$t("Site.Placeholder.index_20"),"input-props":{name:"sub1"}},null,8,["value","onUpdate:value","placeholder"])]),$("div",Ml,[w(o,{value:t.sub2,"onUpdate:value":e=>t.sub2=e,placeholder:e.$t("Site.Placeholder.index_21"),"input-props":{name:"sub2"}},null,8,["value","onUpdate:value","placeholder"])]),$("div",null,[w(x,{type:"error",disabled:0===a&&1===U(m).length,onClick:e=>(e=>{m.value.length<=1||m.value.splice(e,1)})(a)},{default:P((()=>[T(R(e.$t("Public.Btn.Del")),1)])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),$("div",null,[w(f,{type:"primary",class:"add-content-btn",disabled:U(m).length>=3,onClick:_},{default:P((()=>[$("span",null,R(e.$t("Site.Config.index_87")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["label"])])),_:1},8,["model"]),w(g,{class:"mt-12px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_88")),1),$("li",null,R(e.$t("Site.Config.index_89")),1),$("li",null,R(e.$t("Site.Config.index_90")),1),$("li",null,R(e.$t("Site.Config.index_91")),1)])),_:1})])}}}),Vl={class:"p-20px"},zl={class:"mt-12px"},Wl=g({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:s}=a.data,d=t,r=c(),u=S(""),p=S(""),m=S(""),_=async()=>{const{message:e}=await Fe({path:m.value,data:u.value,encoding:p.value});o(e)&&n.success(e.msg),s?.(),d("close")};return(async()=>{const{message:e}=await Xe({sitename:i,proxyname:l.proxyname,webserver:r.webserver});o(e)&&(m.value=e.file,u.value=e.data,p.value=e.encoding)})(),(e,t)=>{const a=ct,l=Rt;return k(),C("div",Vl,[w(Ut,{value:U(u),"onUpdate:value":t[0]||(t[0]=e=>L(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),$("div",zl,[w(a,{type:"primary",onClick:_},{default:P((()=>[T(R(e.$t("Site.Cert.index_60")),1)])),_:1})]),w(l,{class:"mt-24px"},{default:P((()=>[$("li",null,R(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),Xl=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{data:n}=At(),s=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:o,table:d,columns:r}=it([{type:"selection",width:40},{key:"proxyname",title:a("Site.TableRow.index_2"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:a("Site.TableRow.index_17"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:a("Site.Lable.index_33"),ellipsis:{tooltip:{width:"trigger"}},render:e=>w("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:a("Site.Lable.index_31"),width:90,render:e=>w(l,{type:1===e.cache?"primary":"error",onClick:async()=>{await We({...s(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:a("Site.TableRow.index_14"),width:90,render:e=>w(rt,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await We({...s(e),type:t,cache:e.cache}),e.type=t}},null)},ot({width:120,options:e=>[{label:a("Site.TableOP.index_2"),onClick:()=>{f(e)}},{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{at({title:a("Site.Config.Proxy.index_1",[e.proxyname]),content:a("Site.Config.Proxy.index_2"),onConfirm:async()=>{await Ge({sitename:n.name,proxyname:e.proxyname}),m()}})}}]})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>Ge({sitename:n.name,proxyname:e.proxyname},!1),done:()=>{m()},columns:[{key:"proxyname",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=nt(),m=async()=>{try{p(!0);const{message:e}=await Ye({sitename:n.name});d.data=i(e)?e:[]}finally{o.value=[],p(!1)}},_=st(a("Site.Config.index_86"),{row:void 0,siteName:n.name,isEdit:!1,getList:m}),v=()=>{_.data.row=void 0,_.data.isEdit=!1,_.title=a("Site.Config.index_86"),_.show=!0},h=e=>{_.data.row=e,_.data.isEdit=!0,_.title=`${a("Site.Config.index_75")} [${e.proxyname}]`,_.show=!0},x=st("",{row:void 0,siteName:n.name,getList:m}),f=e=>{x.data.row=e,x.title=`${a("Site.Config.index_76")} [${e.proxyname}]`,x.show=!0};return m(),t({init:m}),(e,t)=>{const a=ct,l=W,i=z,n=V,s=kt;return k(),C("div",null,[w(n,null,{toolsLeft:P((()=>[w(a,{class:"add-btn",type:"primary",onClick:v},{default:P((()=>[T(R(e.$t("Site.Config.index_85")),1)])),_:1})])),table:P((()=>[w(l,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>L(o)?o.value=e:null),"row-key":"proxyname",loading:U(c),"max-height":440,data:U(d).data,columns:U(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[w(i,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>L(o)?o.value=e:null),"row-key":"proxyname",data:U(d).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),w(s,{show:U(_).show,"onUpdate:show":t[2]||(t[2]=e=>U(_).show=e),title:U(_).title,data:U(_).data,width:660,footer:!0,component:Kl},null,8,["show","title","data"]),w(s,{show:U(x).show,"onUpdate:show":t[3]||(t[3]=e=>U(x).show=e),title:U(x).title,data:U(x).data,width:580,component:Wl},null,8,["show","title","data"])])}}}),Fl={class:"pt-8px"},Gl=g({__name:"index",setup(e,{expose:t}){const{data:a}=At(),l=S();return t({init:()=>{l.value.init()}}),(e,t)=>(k(),C("div",Fl,[w(Nt,{ref_key:"formRef",ref:l,site:U(a)},null,8,["site"])]))}}),Yl=g({__name:"index",setup(e,{expose:t}){const{data:a}=At(),l=S("None"),{loading:i,setLoading:n}=nt(),s=async()=>{try{n(!0);const{message:e}=await Ze({siteName:a.name});o(e)&&(l.value=u(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=Dt,n=h;return k(),D(n,{class:"h-560px",show:U(i)},{default:P((()=>[w(a,{log:U(l)},null,8,["log"])])),_:1},8,["show"])}}}),Zl=g({__name:"index",setup(e,{expose:t}){const{data:a}=At(),l=S("None"),{loading:i,setLoading:n}=nt(),s=async()=>{try{n(!0);const{message:e}=await Qe({siteName:a.name});o(e)&&(l.value=u(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=Dt,n=h;return k(),D(n,{class:"h-560px",show:U(i)},{default:P((()=>[w(a,{log:U(l)},null,8,["log"])])),_:1},8,["show"])}}}),Ql={class:"text-error"},Jl={class:"w-400px p-20px"},ei={class:"mb-16px"},ti=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),i=c(),{data:s}=At(),d=A((()=>{let e="";switch(i.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${s.name}${e}`})),r=A((()=>{const e=d.value.split("/");return e[e.length-1]})),u=()=>{at({title:a("Site.Config.index_104"),content:`${a("Site.Config.index_105")} [${r.value}] ${a("Site.Config.index_106")}`,onConfirm:async({hide:e})=>{await Je({path:d.value}),e(),_()}})},p=S(!1),m=S(0),_=async()=>{p.value=!0,v()},v=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await et({path:d.value});o(e)&&(m.value=e.result,m.value>=100?(n.success(a("Site.Config.index_107")),p.value=!1,m.value=0,E(),clearTimeout(t)):v(1e3))}),e)},h=e=>{ut({title:`[${e}] ${a("Site.Config.index_103")}`,data:{type:e,path:d.value},component:Ht})},{table:x,columns:f}=it([{key:"start_time",title:a("Site.Cert.index_68")},{key:"time",title:a("Site.DelSite.index_6"),render:e=>`${e.time.substring(0,4)} s`},{key:"xss",title:a("Site.TableRow.index_4"),render:e=>e.xss>0?w("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:a("Site.TableRow.index_5"),render:e=>e.sql>0?w("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:a("Site.TableRow.index_6"),render:e=>e.san>0?w("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:a("Site.TableRow.index_27"),render:e=>e.php>0?w("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:a("Site.TableRow.index_7"),render:e=>e.ip>0?w(l,{onClick:()=>{h("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:a("Site.TableRow.index_8"),render:e=>e.url>0?w(l,{onClick:()=>{h("url")}},{default:()=>[e.url]}):e.url}]),{loading:y,setLoading:g}=nt(),E=async()=>{try{g(!0);const{message:e}=await tt({path:d.value});o(e)&&(x.data=[e])}finally{g(!1)}},j=()=>{E()};return j(),t({init:j}),(e,t)=>{const a=ct,i=W,n=V,s=Rt,o=St,d=kt;return k(),C("div",null,[w(n,null,{toolsLeft:P((()=>[w(a,{type:"primary",onClick:u},{default:P((()=>[T(R(e.$t("Site.Config.index_104")),1)])),_:1})])),table:P((()=>[w(i,{loading:U(y),"loading-num":1,data:U(x).data,columns:U(f)},null,8,["loading","data","columns"])])),_:1}),w(s,{class:"mt-16px"},{default:P((()=>[$("li",null,[T(R(e.$t("Site.Config.index_108"))+" ",1),$("span",Ql,R(e.$t("Site.Config.index_109")),1)]),$("li",null,R(e.$t("Site.Config.index_110")),1),$("li",null,R(e.$t("Site.Config.index_111")),1),$("li",null,R(e.$t("Site.Config.index_112")),1),$("li",null,[w(l,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:P((()=>[T(R(e.$t("Site.Config.index_113")),1)])),_:1}),T(" "+R(e.$t("Site.Config.index_114")),1)])])),_:1}),w(d,{show:U(p),"onUpdate:show":t[0]||(t[0]=e=>L(p)?p.value=e:null)},{default:P((()=>[$("div",Jl,[$("div",ei,R(e.$t("Site.Config.index_115")),1),w(o,{type:"line",status:"success",height:24,percentage:U(m),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),ai=g({__name:"index",setup(e,{expose:t}){const{t:a}=b(),{config:l}=At(),i=S("access"),n=S(),s=[{key:"access",label:a("Site.Config.index_100"),component:Yl},{key:"error",label:a("Site.Config.index_101"),component:Zl},{key:"security",label:a("Site.Config.index_102"),component:ti}];return i.value=l.subMenu||"access",l.subMenu="",t({init:()=>{i.value="access",M((()=>{n.value?.init()}))}}),(e,t)=>{const a=Pt;return k(),D(a,{value:U(i),"onUpdate:value":t[0]||(t[0]=e=>L(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),li={class:"h-full"},ii=g({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=b(),l=c(),{siteName:i}=K(l),n=j((()=>s((()=>t.import("./index-legacy236.js?v=1732601582185")),void 0))),o=j((()=>s((()=>t.import("./old-legacy4.js?v=1732601582185")),void 0))),d=e,{siteInfo:r,config:u}=d;i.value=d.siteInfo.name;const p=S();r&&f(qt,{data:r,config:u});const m=S("domain"),_=[{key:"domain",label:a("Site.Config.index_1"),component:Yt},{key:"subdirectory",label:a("Site.Config.index_3"),component:Jt},{key:"directory",label:a("Site.Config.index_4"),component:ma},{key:"access",label:a("Site.Config.index_5"),component:Pa},{key:"traffic",label:a("Site.Config.index_6"),component:Oa},{key:"rewrite",label:a("Site.Config.index_7"),component:n},{key:"document",label:a("Site.Config.index_9"),component:Ma},{key:"config",label:a("Site.Config.index_10"),component:Va},{key:"ssl",label:()=>w(B,null,[a("Site.Config.index_11")]),component:o},{key:"php",label:a("Site.Config.index_12"),component:sl},{key:"wordpress",label:"Wordpress Setting",show:"WP"===r?.project_type,component:cl},{key:"composer",label:a("Site.Config.index_20"),component:Sl},{key:"redirect",label:a("Site.Config.index_21"),component:Bl},{key:"proxy",label:a("Site.Config.index_23"),component:Xl},{key:"hotlink",label:a("Site.Config.index_24"),component:Gl},{key:"logs",label:a("Site.Config.index_25"),component:ai}];return m.value=u.menu||"domain",u.menu="",H((()=>{window.siteConfigInit=p.value.init})),(e,t)=>{const a=x;return k(),C("div",li,[w(a,{value:U(m),"onUpdate:value":t[0]||(t[0]=e=>L(m)?m.value=e:null),ref_key:"tabsRef",ref:p,data:_},null,8,["value"])])}}}),ni=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"}));e("i",ni)}}}));
