const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index115.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang.js?v=1732601582185","js/naive.js?v=1732601582185","js/vue.js?v=1732601582185","js/__commonjsHelpers__.js?v=1732601582185","js/common.js?v=1732601582185","js/page_layout.js?v=1732601582185","js/public.js?v=1732601582185","css/public.css?v=1732601582185","css/page_layout.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang2.js?v=1732601582185","js/index97.js?v=1732601582185","css/index10.css?v=1732601582185","js/index120.js?v=1732601582185","js/index121.js?v=1732601582185","css/index17.css?v=1732601582185","js/index116.js?v=1732601582185","js/index215.js?v=1732601582185","css/index47.css?v=1732601582185","js/index96.js?v=1732601582185","js/site.js?v=1732601582185","css/index57.css?v=1732601582185","js/index117.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185","css/index14.css?v=1732601582185","js/index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185","js/index118.js?v=1732601582185"])))=>i.map(i=>d[i]);
import{j as a,aa as e,ab as t,ac as s,ad as i,f as n,I as o,a4 as l,ae as d,l as r,c as p,m as _,_ as c,n as m}from"./page_layout.js?v=1732601582185";import{_ as u}from"./index.js?v=1732601582185";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import{_ as f}from"./index119.js?v=1732601582185";import{j as k,h as g,d as D,k as v,l as j,f as C,a as R,b as U}from"./public.js?v=1732601582185";import{u as $,a as W,b as E,c as O,d as I,_ as L,e as P,f as z,g as B}from"./index120.js?v=1732601582185";import{M as A,W as T,a9 as V,c as q,i as S,d as K,r as H,j as J,w as M,O as Q,X,Y,R as Z,af as F,ak as G,$ as N,Q as aa,Z as ea,ao as ta,ac as sa,a6 as ia}from"./vue.js?v=1732601582185";import{g as na}from"./hooks.js?v=1732601582185";import{aa as oa,bO as la,bJ as da}from"./naive.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";import"./php.js?v=1732601582185";import"./index121.js?v=1732601582185";const ra=({row:a})=>{if(a.password)return A(k,{value:a.password},null);const{t:e}=T();return A("div",{class:"text-desc cursor-pointer",onClick:()=>{$(a)}},[A(V,{keypath:"Database.index_15.index_1",tag:"span",scope:"global"},{error:()=>A("span",{class:"text-error"},[e("Database.index_15.index_2")])})])},pa=({row:e})=>{let t;const{t:s}=T();return A("div",{class:"flex items-center"},[A(a,{type:e.backup_count>0?"primary":"warning",class:"backup-btn",onClick:()=>{W(e)}},{default:()=>[e.backup_count>0?s("Database.index_17",[e.backup_count]):s("Database.index_18")]}),A("span",{class:"mx-4px"},[q("|")]),A(a,{onClick:()=>{E(e)}},(i=t=s("Public.Btn.Import"),"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!S(i)?t:{default:()=>[t]}))]);var i},_a={class:"p-16px"},ca={class:"flex items-center flex-wrap"},ma=K({__name:"index",setup(a){const k=ia((()=>p((()=>import("./index115.js?v=1732601582185")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))),W=ia((()=>p((()=>import("./index116.js?v=1732601582185")),__vite__mapDeps([16,17,3,4,2,5,6,7,8,9,18,19,20,1,21])))),E=ia((()=>p((()=>import("./index117.js?v=1732601582185")),__vite__mapDeps([22,19,6,3,4,2,5,7,8,9,23,24,25,26])))),V=ia((()=>p((()=>import("./index118.js?v=1732601582185")),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9])))),{t:S}=T(),K=e(),ma=H(!1),ua=g(),ha=g(S("Database.index_3"),{row:void 0}),ba=()=>{ua.show=!0},xa=()=>{z()},wa=a=>{K.phpmyadmin.setup?(a?(ha.data.row=a,ha.title=S("Database.index_8",[a.name])):(ha.data.row=void 0,ha.title=S("Database.index_3")),ha.show=!0):_.error(S("Database.index_9"))},ya=()=>{B()},fa=g(),ka=g(),ga=async()=>{await t(K.type,{ids:[]}),Oa()},Da=F(),va=()=>{Da.push("/crontab/task")},{keys:ja,table:Ca,columns:Ra}=D([{type:"selection",width:40},{key:"name",title:S("Database.index_12"),width:"10%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:S("Database.index_13"),width:"10%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:S("Database.index_14"),width:"12%",minWidth:150,render:a=>A(ra,{row:a},null)},v({type:"database",width:"7%",minWidth:100,callback:()=>{Oa()}}),{key:"backup_count",title:S("Database.index_16"),width:"10%",minWidth:130,render:a=>A(pa,{row:a},null)},{key:"sid",title:S("Database.index_19"),width:"9%",minWidth:100,ellipsis:{tooltip:!0},render:a=>na(a)},j({minWidth:90,onBlur:async(a,e)=>{await d({id:e.id,ps:a})}}),C({width:"26%",minWidth:280,options:a=>[{label:S("Database.index_20"),show:0===a.db_type,onClick:()=>{wa(a)}},{label:S("Database.index_21"),class:"permission-btn",onClick:()=>{(a=>{ka.data.row=a,ka.title=S("Database.index_11",[a.name]),ka.show=!0})(a)}},{label:S("Database.index_22"),class:"tools-btn",onClick:()=>{(a=>{fa.data.row=a,fa.title=S("Database.index_10",[a.name]),fa.show=!0})(a)}},{label:S("Database.index_23"),class:"change-btn",onClick:()=>{$(a)}},{label:S("Public.Btn.Del"),class:"delete-btn",onClick:()=>{O([a])}}]})]),Ua=[{key:"sync",label:S("Database.index_24"),onBatch:a=>{R({title:S("Database.index_25"),content:S("Database.index_26"),onConfirm:async()=>{await t(K.type,{ids:a.map((a=>a.id))})}})}},{key:"backup",type:"confirm",label:S("Database.index_27"),confirm:{title:S("Database.index_28"),desc:S("Database.index_29"),api:a=>s(K.type,{id:a.id},!1),done:()=>{Oa()},columns:[{key:"name",title:S("Database.index_12")}]}},{key:"delete",label:S("Database.index_30"),onBatch:a=>{O(a)}}],{loading:$a,setLoading:Wa}=U(!0),Ea=J({p:1,limit:20,sid:-1,search:""}),Oa=async()=>{try{Wa(!0);const{message:a}=await i((()=>{const a={...G(Ea)};return-1===a.sid&&delete a.sid,a})());n(a)?(Ca.data=o(a.data)?a.data:[],Ca.total=l(a.page)):(Ca.data=[],Ca.total=0)}finally{ja.value=[],Wa(!1)}};M((()=>K.isRefresh),(a=>{a&&(K.setRefresh(!1),K.delRemoteId===Ea.sid&&(Ea.sid=-1),Oa())}));return(async()=>{try{await K.getRemote(),K.install?(ma.value=!0,Oa()):(ma.value=!1,r())}finally{Wa(!1)}})(),(a,e)=>{const t=c,s=oa,i=N("i18n-t"),n=la,o=m,l=f,d=y,r=w,p=x,_=b,g=h,D=u,v=da;return Q(),X(Z(P),null,{default:Y((()=>[A(v,null,{default:Y((()=>[aa("div",_a,[A(n,{"show-icon":!1,closable:!1},{default:Y((()=>[aa("div",ca,[A(t,{name:"base-info",size:"18",class:"mr-8px"}),A(i,{tag:"span",keypath:"Database.index_7.index_1",scope:"global"},{btn_:Y((()=>[A(s,{class:"px-8px h-24px",size:"small",type:"primary",onClick:va},{default:Y((()=>[q(ea(a.$t("Database.index_7.index_2")),1)])),_:1})])),_:1})])])),_:1}),A(g,{class:"mt-16px",feedback:!0},{toolsLeft:Y((()=>[A(s,{class:"add-db-btn",type:"primary",onClick:ba},{default:Y((()=>[q(ea(a.$t("Database.index_1")),1)])),_:1}),A(s,{class:"set-root-btn",onClick:xa},{default:Y((()=>[q(ea(a.$t("Database.index_2")),1)])),_:1}),A(s,{onClick:e[0]||(e[0]=a=>wa())},{default:Y((()=>[q(ea(a.$t("Database.index_3")),1)])),_:1}),A(s,{onClick:ya},{default:Y((()=>[q(ea(a.$t("Database.index_4")),1)])),_:1}),A(o,{class:"mx-0!",vertical:""}),A(s,{onClick:ga},{default:Y((()=>[q(ea(a.$t("Database.index_5")),1)])),_:1}),A(s,{onClick:Z(I)},{default:Y((()=>[q(ea(a.$t("Database.index_6")),1)])),_:1},8,["onClick"]),Z(ma)?(Q(),X(l,{key:0,"soft-name":"mysql"})):ta("",!0)])),toolsRight:Y((()=>[A(Z(L),{ref:"remoteRef",value:Z(Ea).sid,"onUpdate:value":e[1]||(e[1]=a=>Z(Ea).sid=a),"store-key":"mysql-remote",onChange:Oa},null,8,["value"]),A(d,{value:Z(Ea).search,"onUpdate:value":e[2]||(e[2]=a=>Z(Ea).search=a),placeholder:a.$t("Database.mongo.index_3"),width:"180",onSearch:Oa},null,8,["value","placeholder"])])),table:Y((()=>[A(r,{"checked-row-keys":Z(ja),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>sa(ja)?ja.value=a:null),loading:Z($a),data:Z(Ca).data,columns:Z(Ra)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Y((()=>[A(p,{"checked-row-keys":Z(ja),"onUpdate:checkedRowKeys":e[4]||(e[4]=a=>sa(ja)?ja.value=a:null),data:Z(Ca).data,options:Ua},null,8,["checked-row-keys","data"])])),pageRight:Y((()=>[A(_,{page:Z(Ea).p,"onUpdate:page":e[5]||(e[5]=a=>Z(Ea).p=a),"page-size":Z(Ea).limit,"onUpdate:pageSize":e[6]||(e[6]=a=>Z(Ea).limit=a),"store-key":"database-mysql-page","item-count":Z(Ca).total,onRefresh:Oa},null,8,["page","page-size","item-count"])])),_:1}),A(D,{show:Z(ua).show,"onUpdate:show":e[7]||(e[7]=a=>Z(ua).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":334,footer:!0,component:Z(k)},null,8,["show","title","component"]),A(D,{show:Z(ha).show,"onUpdate:show":e[8]||(e[8]=a=>Z(ha).show=a),title:Z(ha).title,data:Z(ha).data,width:740,height:580,component:Z(W)},null,8,["show","title","data","component"]),A(D,{show:Z(ka).show,"onUpdate:show":e[9]||(e[9]=a=>Z(ka).show=a),data:Z(ka).data,title:Z(ka).title,width:480,"min-height":132,footer:!0,component:Z(V)},null,8,["show","data","title","component"]),A(D,{show:Z(fa).show,"onUpdate:show":e[10]||(e[10]=a=>Z(fa).show=a),data:Z(fa).data,title:Z(fa).title,width:870,"min-height":359,component:Z(E)},null,8,["show","data","title","component"])])])),_:1})])),_:1})}}});export{ma as default};
