import{s as e,o as s,u as t,a,b as n,c as i,d as o,_ as r,R as l}from"./tableColumns.js?v=1732601582185";import{bo as p,k as u,u as _,aT as c,bp as m,bq as d,f,a4 as v,j as x}from"./page_layout.js?v=1732601582185";import{d as g,r as y,O as b,X as h,Y as k,Q as j,Z as w,P as S,L as C,ad as R,R as $,F as z,V as H,M as I,c as L,W as P,w as U,ak as B}from"./vue.js?v=1732601582185";import{bh as M,aa as N,bJ as T}from"./naive.js?v=1732601582185";import{s as W,d as q,f as A,v as E,a as F,b as J}from"./public.js?v=1732601582185";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1732601582185";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{i as X,u as Y,a as Z,c as D,b as G,d as K,o as ee}from"./utils2.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import"./soft.js?v=1732601582185";import"./index.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";const se={class:"w-80px inline-block"},te=["onClick"],ae=u(g({__name:"app-sort",setup(t){const a=p(),n=y(e.type);return(()=>{const s=Number(localStorage.getItem("soft-app"));s&&(n.value=s,e.type=s)})(),(t,i)=>{const o=M;return b(),h(o,{class:"py-16px items-center"},{default:k((()=>[j("span",se,w(t.$t("Soft.index_7")),1),(b(!0),S(z,null,C($(s),(s=>(b(),S("div",{class:R(["list",{active:$(n)===s.value}]),key:s.value,onClick:t=>{return i=s.value,n.value=i,e.p=1,e.type=i,localStorage.setItem("soft-app",i.toString()),void a.setRefresh(!0);var i}},w(s.label),11,te)))),128))])),_:1})}}}),[["__scopeId","data-v-bea40fc8"]]),ne={class:"box"},ie={key:0,class:"mr-15px"},oe={key:1,class:"mr-10px"},re=u(g({__name:"index",setup(e){const s=_(),{isPro:t,authExpired:a}=H(s);return(e,s)=>{const n=N;return b(),S("div",ne,[$(t)?(b(),S("span",ie,w(e.$t("Soft.index_16",[$(a)])),1)):(b(),S("span",oe,w(e.$t("Soft.index_17")),1)),I(n,{type:"primary",size:"small",onClick:s[0]||(s[0]=e=>{W({source:t.value?30:29})})},{default:k((()=>[L(w($(t)?e.$t("Soft.index_18"):e.$t("Home.index_22")),1)])),_:1})])}}}),[["__scopeId","data-v-a955f0b1"]]),le=g({__name:"index",setup(s){const{t:r}=P(),l=p(),{keys:u,table:_,columns:g}=q([t(),{key:"name",title:r("Soft.index_9"),width:"100",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.author?e.author:r("Soft.index_11")},{key:"name",title:r("Soft.index_10"),minWidth:"200",render:e=>I("span",{innerHTML:e.ps},null)},{key:"name",title:r("Soft.index_12"),width:"60",render:e=>"0.00"===e.price||0===e.price?I("span",null,[r("Soft.index_13")]):I("span",{class:"color-#fc6d26"},["$".concat(e.price)])},a(),n(),i(),o(),A({width:180,align:"right",options:e=>[{label:r("Home.index_5"),show:X(e),onClick:()=>{const s=Y(e),t={name:e.name,title:e.title,m_version:e.versions[s].m_version,version:e.versions[s].version,update_msg:e.versions[s].update_msg};Z(t,(()=>{S()}))}},{label:r("Layout.Sider.mail_12"),show:e.setup&&!D(e),onClick:()=>{E(e)}},{label:-1===e.endtime?r("Component.Auth.index_3"):r("Soft.index_18"),show:D(e),onClick:()=>{const s={source:-1===e.endtime?31:32,plugin:{name:e.title,pid:e.pid,type:e.type,plugin:!0,renew:e.endtime,ps:e.ps}};W(s)}},{label:G(e),show:!e.setup&&!D(e),onClick:()=>{if("1"!==e.task)return S(),void c();K(e.name,(()=>{S()}))}},{label:r("Public.Btn.Uninstall"),show:e.setup,onClick:()=>{F({title:r("Public.Btn.Uninstall"),content:r("Soft.index_15",[e.title,e.version]),onConfirm:async()=>{e.version=e.name.includes("php-")?e.versions[0].m_version:e.version,await m({sName:e.name,version:e.version}),S()}})}}]})]),{loading:y,setLoading:j}=J();U((()=>l.isRefresh),(e=>{e&&(l.setRefresh(!1),S())}));const S=async()=>{try{j(!0);const{message:s}=await d(B(e),!!e.force);f(s)&&(_.data=s.list.data,_.total=v(s.list.page))}finally{u.value=[],e.force=0,j(!1)}};return S(),(s,t)=>{const a=x,n=V,i=Q,o=O;return b(),h(o,{class:"py-16px"},{table:k((()=>[I(n,{"row-key":"name",loading:$(y),data:$(_).data,columns:$(g)},{empty:k((()=>[I(a,{onClick:$(ee)},{default:k((()=>[L(w(s.$t("Soft.index_26")),1)])),_:1},8,["onClick"])])),_:1},8,["loading","data","columns"])])),pageRight:k((()=>[I(i,{page:$(e).p,"onUpdate:page":t[0]||(t[0]=s=>$(e).p=s),"page-size":$(e).row,"onUpdate:pageSize":t[1]||(t[1]=s=>$(e).row=s),"item-count":$(_).total,onRefresh:S},null,8,["page","page-size","item-count"])])),_:1})}}}),pe=g({__name:"index",setup:e=>(e,s)=>{const t=T;return b(),h(t,{class:"p-16px"},{default:k((()=>[I(r),I(l),I(ae),I(re),I(le)])),_:1})}});export{pe as default};
