System.register(["./index-legacy.js?v=1723125373998","./index-legacy70.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1723125373998","./useTableData-legacy.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1723125373998","./pinia-legacy.js?v=1723125373998","./site-legacy2.js?v=1723125373998","./useLoading-legacy.js?v=1723125373998","./useTableColumns-legacy.js?v=1723125373998","./site-legacy.js?v=1723125373998","./vue-legacy.js?v=1723125373998","./index-legacy144.js?v=1723125373998","./index-legacy105.js?v=1723125373998","./index-legacy77.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy13.js?v=1723125373998","./Select-legacy.js?v=1723125373998","./Switch-legacy.js?v=1723125373998","./index-legacy73.js?v=1723125373998","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1723125373998","./InputGroupLabel-legacy.js?v=1723125373998","./InputGroup-legacy.js?v=1723125373998","./Checkbox-legacy.js?v=1723125373998","./refersh-legacy.js?v=1723125373998","./php-legacy.js?v=1723125373998","./Space-legacy.js?v=1723125373998","./Alert-legacy.js?v=1723125373998","./index-legacy145.js?v=1723125373998","./Spin-legacy.js?v=1723125373998","./Progress-legacy.js?v=1723125373998","./Tag-legacy.js?v=1723125373998","./Image-legacy.js?v=1723125373998"],(function(e,t){"use strict";var a,l,i,n,s,o,r,d,u,c,p,m,h,g,f,v,_,w,y,b,x,k,S,C,P,$,T,R,L,W,U,E,D,M,q,j,O,A,B,I,H,z,N,V,K,F,X,G,Z,J,Q,Y,ee,te,ae,le,ie,ne,se,oe,re,de,ue,ce,pe,me,he,ge,fe,ve,_e,we,ye,be,xe,ke,Se,Ce,Pe,$e,Te,Re,Le,We,Ue,Ee,De,Me,qe,je,Oe,Ae,Be,Ie,He,ze,Ne,Ve,Ke,Fe,Xe,Ge,Ze,Je,Qe,Ye,et,tt,at,lt,it,nt,st,ot,rt,dt,ut,ct,pt,mt,ht,gt,ft,vt,_t,wt,yt,bt,xt,kt,St,Ct,Pt,$t,Tt,Rt,Lt,Wt,Ut,Et,Dt,Mt,qt,jt,Ot,At,Bt,It,Ht,zt,Nt,Vt,Kt,Ft,Xt,Gt,Zt,Jt,Qt,Yt,ea,ta,aa,la,ia,na,sa,oa,ra,da,ua,ca;return{setters:[e=>{a=e.aK,l=e.aE,i=e.aC,n=e.aH,s=e.aG,o=e.aW,r=e.aM,d=e.aN,u=e.bN,c=e.aX,p=e.aP,m=e.aT,h=e.aU,g=e.b5,f=e.aZ,v=e.aw,_=e.ax,w=e.L,y=e.j,b=e.e,x=e.v,k=e.h,S=e.k,C=e.n,P=e.B,$=e.G,T=e.p,R=e.ae,L=e.ao,W=e.d0,U=e.g,E=e.q,D=e.cG,M=e.bh,q=e.a,j=e.au,O=e.b8,A=e.d1,B=e.cz,I=e._,H=e.bt,z=e.z,N=e.m,V=e.I,K=e.r},e=>{F=e._},e=>{X=e._},e=>{G=e._},e=>{Z=e._},e=>{J=e.u,Q=e._},e=>{Y=e._},e=>{ee=e.s},e=>{te=e.l},e=>{ae=e.u},e=>{le=e.B,ie=e.g,ne=e.b,se=e.h,oe=e.d,re=e.e},e=>{de=e.W,ue=e.X,ce=e.Y,pe=e.Z,me=e._,he=e.$,ge=e.a0,fe=e.a1,ve=e.a2,_e=e.a3,we=e.a4,ye=e.a5,be=e.a6,xe=e.a7,ke=e.a8,Se=e.a9,Ce=e.aa,Pe=e.ab,$e=e.ac,Te=e.ad,Re=e.ae,Le=e.af,We=e.ag,Ue=e.ah,Ee=e.ai,De=e.aj,Me=e.ak,qe=e.al,je=e.am,Oe=e.an,Ae=e.ao,Be=e.ap,Ie=e.aq,He=e.ar,ze=e.as,Ne=e.at,Ve=e.au,Ke=e.av,Fe=e.aw,Xe=e.ax,Ge=e.ay,Ze=e.az,Je=e.aA,Qe=e.aB,Ye=e.aC,et=e.S,tt=e.aD,at=e.aE,lt=e.aF,it=e.aG,nt=e.aH,st=e.aI,ot=e.b},e=>{rt=e.p,dt=e.l,ut=e.d,ct=e.r,pt=e.k,mt=e.ag,ht=e.a1,gt=e.P,ft=e.s,vt=e.ad,_t=e.A,wt=e.a,yt=e.S,bt=e.Z,xt=e._,kt=e.V,St=e.a3,Ct=e.W,Pt=e.b,$t=e.q,Tt=e.f,Rt=e.F,Lt=e.af,Wt=e.x,Ut=e.U,Et=e.t,Dt=e.n,Mt=e.al,qt=e.a5,jt=e.a6,Ot=e.ai,At=e.w},e=>{Bt=e._},e=>{It=e._},e=>{Ht=e._},e=>{zt=e._,Nt=e.a},e=>{Vt=e._},e=>{Kt=e._},e=>{Ft=e._},e=>{Xt=e._},e=>{Gt=e._},e=>{Zt=e._},e=>{Jt=e._},e=>{Qt=e._,Yt=e.a},e=>{ea=e._,ta=e.a,aa=e.b},e=>{la=e.a,ia=e.b},e=>{na=e._},e=>{sa=e._},e=>{oa=e._},e=>{ra=e._},e=>{da=e._},e=>{ua=e._},e=>{ca=e._}],execute:function(){var pa=document.createElement("style");pa.textContent=".warning[data-v-43bec92c]{padding:8px;border-radius:4px;background-color:#fdf6ec;color:#e6a23c}.ul-style[data-v-b49ea418]{margin:0 auto;display:flex;align-items:center;justify-content:center;gap:20px;font-size:16px}.ul-style li[data-v-b49ea418]{display:flex;align-items:center}\n",document.head.appendChild(pa),e("y",Ua);const ma={name:"Rate",common:a,self:e=>{const{railColor:t}=e;return{itemColor:t,itemColorActive:"#FFCC33",sizeSmall:"16px",sizeMedium:"20px",sizeLarge:"24px"}}},ha=rt("svg",{viewBox:"0 0 512 512"},rt("path",{d:"M394 480a16 16 0 01-9.39-3L256 383.76 127.39 477a16 16 0 01-24.55-18.08L153 310.35 23 221.2a16 16 0 019-29.2h160.38l48.4-148.95a16 16 0 0130.44 0l48.4 149H480a16 16 0 019.05 29.2L359 310.35l50.13 148.53A16 16 0 01394 480z"})),ga=l("rate",{display:"inline-flex",flexWrap:"nowrap"},[i("&:hover",[n("item","\n transition:\n transform .1s var(--n-bezier),\n color .3s var(--n-bezier);\n ")]),n("item","\n position: relative;\n display: flex;\n transition:\n transform .1s var(--n-bezier),\n color .3s var(--n-bezier);\n transform: scale(1);\n font-size: var(--n-item-size);\n color: var(--n-item-color);\n ",[i("&:not(:first-child)","\n margin-left: 6px;\n "),s("active","\n color: var(--n-item-color-active);\n ")]),o("readonly","\n cursor: pointer;\n ",[n("item",[i("&:hover","\n transform: scale(1.05);\n "),i("&:active","\n transform: scale(0.96);\n ")])]),n("half","\n display: flex;\n transition: inherit;\n position: absolute;\n top: 0;\n left: 0;\n bottom: 0;\n width: 50%;\n overflow: hidden;\n color: rgba(255, 255, 255, 0);\n ",[s("active","\n color: var(--n-item-color-active);\n ")])]),fa=Object.assign(Object.assign({},d.props),{allowHalf:Boolean,count:{type:Number,default:5},value:Number,defaultValue:{type:Number,default:null},readonly:Boolean,size:{type:[String,Number],default:"medium"},clearable:Boolean,color:String,onClear:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),va=e("n",dt({name:"Rate",props:fa,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:a}=r(e),l=d("Rate","-rate",ga,ma,e,t),i=ut(e,"value"),n=ct(e.defaultValue),s=ct(null),o=u(e),g=c(i,n);function v(t){const{"onUpdate:value":a,onUpdateValue:l}=e,{nTriggerFormChange:i,nTriggerFormInput:s}=o;a&&f(a,t),l&&f(l,t),n.value=t,i(),s()}function _(t,a){return e.allowHalf?a.offsetX>=Math.floor(a.currentTarget.offsetWidth/2)?t+1:t+.5:t+1}let w=!1;const y=pt((()=>{const{size:t}=e,{self:a}=l.value;return"number"==typeof t?`${t}px`:a[m("size",t)]})),b=pt((()=>{const{common:{cubicBezierEaseInOut:t},self:a}=l.value,{itemColor:i,itemColorActive:n}=a,{color:s}=e;return{"--n-bezier":t,"--n-item-color":i,"--n-item-color-active":s||n,"--n-item-size":y.value}})),x=a?p("rate",pt((()=>{const t=y.value,{color:a}=e;let l="";return t&&(l+=t[0]),a&&(l+=h(a)),l})),b,e):void 0;return{mergedClsPrefix:t,mergedValue:g,hoverIndex:s,handleMouseMove:function(e,t){w||(s.value=_(e,t))},handleClick:function(t,a){var l;const{clearable:i}=e,n=_(t,a);i&&n===g.value?(w=!0,null===(l=e.onClear)||void 0===l||l.call(e),s.value=null,v(null)):v(n)},handleMouseLeave:function(){s.value=null},handleMouseEnterSomeStar:function(){w=!1},cssVars:a?void 0:b,themeClass:null==x?void 0:x.themeClass,onRender:null==x?void 0:x.onRender}},render(){const{readonly:e,hoverIndex:t,mergedValue:a,mergedClsPrefix:l,onRender:i,$slots:{default:n}}=this;return null==i||i(),rt("div",{class:[`${l}-rate`,{[`${l}-rate--readonly`]:e},this.themeClass],style:this.cssVars,onMouseleave:this.handleMouseLeave},mt(this.count,((i,s)=>{const o=n?n({index:s}):rt(g,{clsPrefix:l},{default:()=>ha}),r=null!==t?s+1<=t:s+1<=(a||0);return rt("div",{key:s,class:[`${l}-rate__item`,r&&`${l}-rate__item--active`],onClick:e?void 0:e=>{this.handleClick(s,e)},onMouseenter:this.handleMouseEnterSomeStar,onMousemove:e?void 0:e=>{this.handleMouseMove(s,e)}},o,this.allowHalf?rt("div",{class:[`${l}-rate__half`,{[`${l}-rate__half--active`]:r||null===t?s+.5<=(a||0):s+.5<=t}]},o):null)})))}})),{t:_a}=v.global,wa=(e("a",(e=>_.post("/site?action=AddWPSite",{...e,webname:JSON.stringify(e.webname),project_type:"WP2"},{requestOptions:{loading:_a("WP.api.tamper_7")}}))),e("g",(e=>_.post("/site?action=get_wp_versions",e))),e("u",(e=>_.post("/site?action=wp_backup_list",e))),e("v",((e,t=!0)=>_.post("/site?action=wp_backup",e,{requestOptions:{loading:t?_a("WP.api.tamper_9"):"",successMessage:t}})))),ya=(e("x",((e,t=!0)=>_.post("/site?action=wp_restore",e,{requestOptions:{loading:t?_a("WP.api.tamper_10"):"",successMessage:!0}}))),e("t",((e,t=!0)=>_.post("/site?action=wp_remove_backup",e,{requestOptions:{loading:t?_a("WP.api.tamper_8"):"",successMessage:t}}))),e("d",(()=>_.post("/site?action=wp_can_migrate_from_website_to_wptoolkit"))),e("m",(()=>_.post("/site?action=wp_migrate_from_website_to_wptoolkit",{},{requestOptions:{loading:_a("WP.api.tamper_11"),successMessage:!0}}))),e("k",(e=>_.post("/site?action=get_wp_security_info",e))),e("o",(e=>_.post("/site?action=open_wp_file_protection",{paths:JSON.stringify(e.paths)},{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))),e("h",(e=>_.post("/site?action=close_wp_file_protection",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))),e("f",(e=>_.post("/site?action=get_wp_file_info",e))),e("i",(e=>_.post("/site?action=open_wp_firewall_protection",{obj:"open",...e},{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))),e("j",(e=>_.post("/site?action=close_wp_firewall_protection",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))),e("e",(e=>_.post("/site?action=wp_clone",e,{requestOptions:{loading:_a("WP.api.index_1"),successMessage:!0}}))),e("c",(e=>_.post("/site?action=wp_create_with_aap_bak",e,{requestOptions:{loading:_a("WP.api.index_2"),successMessage:!0}}))),e("b",(e=>_.post("/site?action=wp_create_with_plesk_or_cpanel_bak",e,{requestOptions:{loading:_a("WP.api.index_2"),successMessage:!0}}))),e("l",(e=>_.post("/site?action=wp_integrity_check",e,{requestOptions:{loading:"",successMessage:!1,errorMessage:!1}}))),e("w",(e=>_.post("/site?action=wp_reinstall_files",e,{requestOptions:{loading:"",successMessage:!1}}))),e("s",(e=>_.post("/site?action=wp_installed_plugins",e)))),ba=e("r",(e=>_.post("/site?action=wp_uninstall_plugin",e,{requestOptions:{loading:_a("WP.api.tamper_14"),successMessage:!0}}))),xa=e("q",((e,t=!1)=>_.post("/site?action=wp_theme_list",e,{requestOptions:{loading:t?_a("WP.api.tamper_17"):"",successMessage:!1}}))),ka=e("p",((e,t=!1)=>_.post("/site?action=wp_plugin_list",e,{requestOptions:{loading:t?_a("WP.api.tamper_17"):"",successMessage:!1}}))),{t:Sa}=v.global;function Ca(e){w({title:1===e.length?`${Sa("Site.Cert.DelSite")} [${e[0].name}]`:`${Sa("Site.Cert.BathDelSite")}`,width:480,minHeight:248,footer:!0,data:{rows:e},component:ht((()=>x((()=>t.import("./index-legacy146.js?v=1723125373998")),void 0)))})}function Pa({onClick:e}){return{key:"ssl",title:Sa("Site.TableRow.SSL"),width:"9%",minWidth:100,render:t=>{let a;const{ssl:l}=t;return y(l)?gt(b,{type:l.endtime<0?"error":"primary",onClick:()=>{e(t)}},{default:()=>[l.endtime<0?"Expired":`Exp in ${l.endtime} days`]}):gt(b,{type:"warning",onClick:()=>{e(t)}},"function"==typeof(i=a=Sa("WP.index_13"))||"[object Object]"===Object.prototype.toString.call(i)&&!ft(i)?a:{default:()=>[a]});var i}}}function $a({onClick:e}){return{key:"action",title:Sa("Site.TableRow.Operation"),width:130,align:"right",render:t=>gt(le,{options:[{label:Sa("Site.TableOP.Login"),disabled:"0"==t.status,onClick:()=>{window.open(t.login_url,"_blank")}},{label:Sa("Site.TableOP.Conf"),onClick:()=>{e(t)}},{label:Sa("Site.TableOP.Del"),onClick:()=>{Ca([t])}}]},null)}}const Ta=e=>{const{row:t}=e;return gt("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;"},[t.name])},Ra=e=>{const{row:a}=e,{t:l}=vt();return gt(b,{type:a.backup_count>0?"primary":"warning",onClick:()=>{w({title:`${l("Site.Config.Back.Title")} [${a.name}]`,width:720,minHeight:200,data:{row:a},component:ht((()=>x((()=>t.import("./index-legacy147.js?v=1723125373998")),void 0)))})}},{default:()=>[a.backup_count>0?`Exists(${a.backup_count})`:"Not exist"]})},La=e=>{const{row:t}=e;return gt(b,null,{default:()=>[t.php_version]})},Wa=Symbol("server-list");function Ua(){return wt(Wa)}const{t:Ea}=v.global;function Da(){return{key:"name",title:Ea("Site.TableRow.Domain"),render:e=>gt(b,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})}}function Ma(){return{key:"port",title:Ea("Site.TableRow.Port"),width:100}}function qa(){return{key:"action",title:Ea("Site.TableRow.OPT"),width:80,align:"right",render:()=>gt("span",{class:"text-default"},[Ea("Site.TableOP.Inoperable")])}}function ja({delDomain:e}){return{key:"action",title:Ea("Site.TableRow.OPT"),width:80,align:"right",render:t=>gt(le,{options:[{label:Ea("Site.TableOP.Del"),onClick:()=>{k({title:`${Ea("Site.Batch.DeleteDomain.Title")}[${t.name}]`,content:Ea("Site.Batch.DeleteDomain.Content"),onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const Oa={class:"flex justify-between items-center mb-24px"},Aa={class:"w-400px"},Ba={class:"pr-40px"},Ia=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=ct(""),n=async()=>{""!==i.value.trim()?(await ce({id:l.id,webname:l.name,domain:i.value.trim().split("\n").join(",")}),i.value="",m()):C.error(a("Site.RulesError.Domain"))},s=async e=>{await de({id:l.id,webname:l.name,domain:e.name,port:e.port}),m()},{keys:o,table:r,columns:d}=J([{type:"selection",width:40},Da(),Ma(),ja({delDomain:s})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),api:e=>de({id:l.id,webname:l.name,domain:e.name,port:e.port},!1),done:()=>{m()},columns:[{key:"name",title:a("Site.Cert.HolderTable.Domain"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=ae(),m=async()=>{try{p(!0);const e={id:l.id},{message:t}=await ue(e);r.data=S(t)?t:[],r.data.length>1?d.value[d.value.length-1]=ja({delDomain:s}):d.value[d.value.length-1]=qa()}finally{o.value=[],p(!1)}};return m(),t({init:m}),(e,t)=>{const a=It,l=P,s=Q,p=Z,m=X;return yt(),bt("div",null,[xt("div",Oa,[xt("div",Aa,[gt(a,{value:Ct(i),"onUpdate:value":t[0]||(t[0]=e=>Pt(i)?i.value=e:null)},{default:kt((()=>[xt("p",null,St(e.$t("Site.Config.Domain.TopTips.0")),1),xt("p",null,St(e.$t("Site.Config.Domain.TopTips.1")),1),xt("p",null,St(e.$t("Site.Config.Domain.TopTips.2")),1)])),_:1},8,["value"])]),xt("div",Ba,[gt(l,{type:"primary",onClick:n},{default:kt((()=>[$t(St(e.$t("Site.Cert.Add")),1)])),_:1})])]),gt(m,null,{table:kt((()=>[gt(s,{"checked-row-keys":Ct(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Pt(o)?o.value=e:null),loading:Ct(c),"max-height":400,data:Ct(r).data,columns:Ct(d)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:kt((()=>[gt(p,{"checked-row-keys":Ct(o),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>Pt(o)?o.value=e:null),data:Ct(r).data,options:u},null,8,["checked-row-keys","data"])])),_:1})])}}}),Ha={class:"pt-16px"},za={class:"flex-1"},Na={class:"w-240px"},Va={class:"mt-8px text-desc"},Ka={class:"flex-1"},Fa={class:"w-240px"},Xa={class:"mt-12px text-desc"},Ga={class:"my-16px"},Za={class:"text-desc"},Ja=xt("div",{class:"text-desc"},null,-1),Qa={class:"my-20px"},Ya=xt("div",{class:"text-desc"},null,-1),el={class:"w-240px"},tl={class:"w-240px"},al={class:"w-240px"},ll=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=ct("");let n="";const s=async()=>{""!==i.value.trim()?i.value!==n?(await pe({id:l.id,name:l.name,path:i.value}),_()):C.success(a("Site.RulesError.OriginalPath")):C.error(a("Site.RulesError.Directory"))},o=ct(null),r=ct([]),d=async()=>{null!==o.value?(await me({id:l.id,runPath:o.value}),_()):C.error(a("Site.RulesError.RuntimeDirectory"))},u=ct(!1),c=async()=>{await he({id:l.id,path:l.path}),_()},p=ct(!1),m=async()=>{await ge({id:l.id}),_()},h=ct(!1),g=Tt({username_get:"",password_get_1:"",password_get_2:""}),f=async e=>{e||(await fe({id:l.id}),_())},v=async()=>{""!==g.username_get.trim()?""!==g.password_get_1.trim()?""!==g.password_get_2.trim()?g.username_get.trim().length<3||g.password_get_1.trim().length<3?C.error(a("Site.RulesError.UserName2")):g.password_get_1.trim()===g.password_get_2.trim()?(await ve({id:l.id,username:g.username_get,password:g.password_get_1}),g.username_get="",g.password_get_1="",g.password_get_2="",_()):C.error(a("Site.RulesError.Password3")):C.error(a("Site.RulesError.Password2")):C.error(a("Site.RulesError.Password1")):C.error(a("Site.RulesError.UserName1"))},_=()=>{(async()=>{const{message:e}=await _e({id:l.id});y(e)&&(i.value=e.result||"/www",n=i.value)})(),(async()=>{const{message:e}=await we({id:l.id,path:l.path});if(y(e)){o.value=L(e,"runPath.runPath",null),u.value=L(e,"userini",!1),p.value=L(e,"logs.result",!1),h.value=L(e,"pass.result",!1);const t=L(e,"runPath.dirs",[]);r.value=t.map((e=>({label:e,value:e})))}})()};return _(),t({init:_}),(e,t)=>{const a=Vt,l=P,n=$,_=zt,w=Kt,y=T,b=Ft,x=R,k=Nt;return yt(),bt("div",Ha,[gt(k,{"label-width":"140"},{default:kt((()=>[gt(_,{label:e.$t("Site.Lable.SiteDirectory"),"show-feedback":!1},{default:kt((()=>[xt("div",za,[gt(n,null,{default:kt((()=>[xt("div",Na,[gt(a,{value:Ct(i),"onUpdate:value":t[0]||(t[0]=e=>Pt(i)?i.value=e:null)},null,8,["value"])]),gt(l,{type:"primary",onClick:s},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1}),xt("div",Va,St(e.$t("Site.Config.SiteDirectory.Content")),1)])])),_:1},8,["label"]),gt(_,{class:"mt-16px",label:e.$t("Site.Lable.RunningDirectory"),"show-feedback":!1},{default:kt((()=>[xt("div",Ka,[gt(n,null,{default:kt((()=>[xt("div",Fa,[gt(w,{value:Ct(o),"onUpdate:value":t[1]||(t[1]=e=>Pt(o)?o.value=e:null),options:Ct(r)},null,8,["value","options"])]),gt(l,{type:"primary",onClick:d},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1}),xt("div",Xa,St(e.$t("Site.Config.SiteDirectory.Content1")),1)])])),_:1},8,["label"]),xt("div",Ga,[gt(y,{dashed:""})]),gt(_,{label:e.$t("Site.Lable.AntiXSS"),"show-feedback":!1},{default:kt((()=>[gt(n,{class:"items-center"},{default:kt((()=>[gt(b,{value:Ct(u),"onUpdate:value":[t[2]||(t[2]=e=>Pt(u)?u.value=e:null),c]},null,8,["value"]),xt("div",Za,St(e.$t("Site.Config.SiteDirectory.Content2")),1)])),_:1})])),_:1},8,["label"]),gt(_,{class:"mt-16px",label:e.$t("Site.Lable.WriteAL"),"show-feedback":!1},{default:kt((()=>[gt(n,{class:"items-center"},{default:kt((()=>[gt(b,{value:Ct(p),"onUpdate:value":[t[3]||(t[3]=e=>Pt(p)?p.value=e:null),m]},null,8,["value"]),Ja])),_:1})])),_:1},8,["label"]),xt("div",Qa,[gt(y,{dashed:""})]),gt(_,{label:e.$t("Site.Lable.PasswordAccess"),"show-feedback":!1},{default:kt((()=>[gt(n,{class:"items-center"},{default:kt((()=>[gt(b,{value:Ct(h),"onUpdate:value":[t[4]||(t[4]=e=>Pt(h)?h.value=e:null),f]},null,8,["value"]),Ya])),_:1})])),_:1},8,["label"]),Ct(h)?(yt(),bt(Rt,{key:0},[gt(_,{class:"mt-16px",label:e.$t("Site.Lable.Authorized"),"show-feedback":!1},{default:kt((()=>[xt("div",el,[gt(x,{value:Ct(g).username_get,"onUpdate:value":t[5]||(t[5]=e=>Ct(g).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),gt(_,{class:"mt-16px",label:e.$t("Site.Lable.PasswordAccess"),"show-feedback":!1},{default:kt((()=>[xt("div",tl,[gt(x,{value:Ct(g).password_get_1,"onUpdate:value":t[6]||(t[6]=e=>Ct(g).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),gt(_,{class:"mt-16px",label:e.$t("Site.Lable.RepeatPassword"),"show-feedback":!1},{default:kt((()=>[xt("div",al,[gt(x,{value:Ct(g).password_get_2,"onUpdate:value":t[7]||(t[7]=e=>Ct(g).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),gt(_,{class:"mt-16px",label:" ","show-feedback":!1},{default:kt((()=>[gt(l,{type:"primary",onClick:v},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})],64)):Lt("",!0)])),_:1})])}}}),il={class:"mt-8px"},nl=dt({__name:"index",setup(e,{expose:t}){const{data:a}=Ua(),l=W(),i=ct(null),n=ct((()=>{const{webserver:e}=l;return`/www/server/panel/vhost/${"openlitespeed"===e?`${e}/detail`:e}/${a.name}.conf`})()),s=async()=>{i.value?.getContent()},o=()=>{i.value?.saveFile()};return Wt((()=>{s()})),t({init:s}),(e,t)=>{const a=P,l=Xt;return yt(),bt("div",null,[gt(Gt,{ref_key:"configRef",ref:i,path:Ct(n),"onUpdate:path":t[0]||(t[0]=e=>Pt(n)?n.value=e:null),height:"500"},null,8,["path"]),xt("div",il,[gt(a,{type:"primary",onClick:o},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})]),gt(l,{class:"mt-16px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.ConfConfig.Tips.0")),1),xt("li",null,St(e.$t("Site.Config.ConfConfig.Tips.1")),1)])),_:1})])}}}),sl={class:"px-20px py-24px"},ol={class:"w-120px"},rl={class:"w-120px"},dl={class:"w-200px"},ul={class:"w-200px"},cl={class:"w-200px"},pl=dt({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=vt(),l=e,{isEdit:i,siteId:n,siteName:s,row:o,getList:r}=l.data,d=ct(null),u=Tt({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),c={redirectdomain:{trigger:["change"],validator:()=>0!==u.redirectdomain.length||new Error(a("Site.RulesError.RedirectedDomain"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==u.redirectpath.trim()||new Error(a("Site.RulesError.RedirectedPath"))},tourl:{trigger:["blur","input"],validator:()=>""!==u.tourl.trim()||new Error(a("Site.RulesError.RedirectedUrl"))}},p=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],m=[{label:"301",value:"301"},{label:"302",value:"302"}],h=ct([]),g=()=>{u.redirectdomain=[],u.redirectpath=""},{loading:f,setLoading:v}=ae();return i&&o&&(u.redirectname=o.redirectname,u.type=o.type,u.holdpath=o.holdpath,u.redirecttype=o.redirecttype,u.redirectpath=o.redirectpath,u.domainorpath=o.domainorpath,u.redirectdomain=o.redirectdomain,u.tourl=o.tourl),(async()=>{try{v(!0);const{message:e}=await ue({id:n});h.value=S(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{v(!1)}})(),t({onConfirm:async({hide:e})=>{await(d.value?.validate());const t={...Et(u),sitename:s};i?await be(t):await ye(t),r?.(),e()}}),(e,t)=>{const a=Ft,l=zt,i=$,n=Kt,s=R,o=Nt,r=Xt;return yt(),bt("div",sl,[gt(o,{ref_key:"formRef",ref:d,model:Ct(u),rules:c},{default:kt((()=>[gt(i,{size:60},{default:kt((()=>[gt(l,{label:e.$t("Site.Lable.Enable")},{default:kt((()=>[gt(a,{value:Ct(u).type,"onUpdate:value":t[0]||(t[0]=e=>Ct(u).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.TableRow.KeepUP"),"label-width":"120"},{default:kt((()=>[gt(a,{value:Ct(u).holdpath,"onUpdate:value":t[1]||(t[1]=e=>Ct(u).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),gt(i,{size:30},{default:kt((()=>[gt(l,{label:e.$t("Site.TableRow.Type")},{default:kt((()=>[xt("div",ol,[gt(n,{value:Ct(u).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>Ct(u).domainorpath=e),g],options:p},null,8,["value"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.TableRow.Mode"),"label-width":"70"},{default:kt((()=>[xt("div",rl,[gt(n,{value:Ct(u).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>Ct(u).redirecttype=e),options:m},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===Ct(u).domainorpath?(yt(),Ut(l,{key:0,label:e.$t("Site.Lable.Source"),path:"redirectdomain"},{default:kt((()=>[xt("div",dl,[gt(n,{value:Ct(u).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>Ct(u).redirectdomain=e),multiple:!0,loading:Ct(f),options:Ct(h),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):Lt("",!0),"path"===Ct(u).domainorpath?(yt(),Ut(l,{key:1,label:e.$t("Site.Lable.Redirect"),path:"redirectpath"},{default:kt((()=>[xt("div",ul,[gt(s,{value:Ct(u).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>Ct(u).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):Lt("",!0),gt(l,{label:e.$t("Site.Lable.Target"),path:"tourl"},{default:kt((()=>[xt("div",cl,[gt(s,{value:Ct(u).tourl,"onUpdate:value":t[6]||(t[6]=e=>Ct(u).tourl=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),gt(r,{class:"mt-12px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.0")),1),xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.1")),1),xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.2")),1),xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.3")),1),xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.4")),1),xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.5")),1)])),_:1})])}}}),ml={class:"p-20px"},hl={class:"mt-12px"},gl=dt({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:n}=a.data,s=t,o=W(),r=ct(""),d=ct(""),u=ct(""),c=async()=>{const{message:e}=await ke({path:u.value,data:r.value,encoding:d.value});y(e)&&C.success(e.msg),n?.(),s("close")};return(async()=>{const{message:e}=await xe({sitename:i,redirectname:l.redirectname,webserver:o.webserver});y(e)&&(u.value=e.file,r.value=e.data,d.value=e.encoding)})(),(e,t)=>{const a=P,l=Xt;return yt(),bt("div",ml,[gt(Gt,{value:Ct(r),"onUpdate:value":t[0]||(t[0]=e=>Pt(r)?r.value=e:null),height:350,"show-tips":!1},null,8,["value"]),xt("div",hl,[gt(a,{type:"primary",onClick:c},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})]),gt(l,{class:"mt-24px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.6")),1)])),_:1})])}}}),fl=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:n,table:s,columns:o}=J([{type:"selection",width:40},{key:"sitename",title:a("Site.TableRow.Type"),ellipsis:{tooltip:{width:"trigger"}}},{key:"redirecttype",title:a("Site.TableRow.Mode"),width:90},{key:"holdpath",title:a("Site.TableRow.KeepUP"),width:140,render:e=>gt(b,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Se({...i(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?"Enable":"Turn off"]})},{key:"type",title:"Status",width:100,render:e=>gt(ie,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Se({...i(e),type:t,holdpath:e.holdpath,status:e.type}),e.type=t}},null)},ne({width:120,options:e=>[{label:a("Site.TableOP.Conf"),onClick:()=>{f(e)}},{label:a("Site.TableOP.Edit"),onClick:()=>{h(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{k({title:`${a("Site.Batch.DeleteRedirection.Label")} [${e.redirectname}]`,content:a("Site.Batch.DeleteRedirection.Content"),onConfirm:async({hide:t})=>{await Ce({sitename:l.name,redirectname:e.redirectname}),c(),t()}})}}]})]),r=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),columns:[o.value[1]],api:e=>Ce({sitename:l.name,redirectname:e.redirectname},!1),done:()=>{c()}}}],{loading:d,setLoading:u}=ae(),c=async()=>{try{u(!0);const{message:e}=await Pe({sitename:l.name});s.data=S(e)?e:[]}finally{n.value=[],u(!1)}},p=U(a("Site.Config.RedirectConfig.Create"),{row:void 0,siteId:l.id,siteName:l.name,isEdit:!1,getList:c}),m=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=a("Site.Config.RedirectConfig.Create"),p.show=!0},h=e=>{p.data.row=e,p.data.isEdit=!0,p.title=`${a("Site.Config.RedirectConfig.Modify")} [${e.redirectname}]`,p.show=!0},g=U("",{row:void 0,siteName:l.name,getList:c}),f=e=>{g.data.row=e,g.title=`${a("Site.Config.RedirectConfig.Edit")} [${e.redirectname}]`,g.show=!0};return c(),t({init:c}),(e,t)=>{const a=P,l=Q,i=Z,u=X,c=E;return yt(),bt("div",null,[gt(u,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:m},{default:kt((()=>[$t(St(e.$t("Site.Config.RedirectConfig.Add")),1)])),_:1})])),table:kt((()=>[gt(l,{"checked-row-keys":Ct(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Pt(n)?n.value=e:null),"row-key":"redirectname",loading:Ct(d),"max-height":440,data:Ct(s).data,columns:Ct(o)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:kt((()=>[gt(i,{"checked-row-keys":Ct(n),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Pt(n)?n.value=e:null),"row-key":"redirectname",data:Ct(s).data,options:r},null,8,["checked-row-keys","data"])])),_:1}),gt(c,{show:Ct(p).show,"onUpdate:show":t[2]||(t[2]=e=>Ct(p).show=e),title:Ct(p).title,data:Ct(p).data,width:660,footer:!0,component:pl},null,8,["show","title","data"]),gt(c,{show:Ct(g).show,"onUpdate:show":t[3]||(t[3]=e=>Ct(g).show=e),title:Ct(g).title,data:Ct(g).data,width:580,component:gl},null,8,["show","title","data"])])}}}),vl={class:"px-20px py-24px"},_l={class:"w-220px"},wl={class:"w-220px"},yl={class:"w-220px"},bl={class:"w-220px"},xl={class:"w-220px"},kl={class:"w-220px"},Sl={class:"w-220px"},Cl=dt({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=vt(),l=e,{isEdit:i,siteName:n,row:s,getList:o}=l.data,r=ct(null),d=Tt({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:n}),u={proxyname:{trigger:["blur","input"],validator:()=>""!==d.proxyname.trim()||new Error(a("Site.RulesError.ProxyName"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===d.cache&&!d.cachetime)||new Error(a("Site.RulesError.CacheTime"))},proxydir:{trigger:["blur","input"],validator:()=>1!==d.advanced||""!==d.proxydir.trim()||new Error(a("Site.RulesError.ProxyDir"))},proxysite:{trigger:["blur","input"],validator:()=>""!==d.proxysite.trim()||new Error(a("Site.RulesError.RedirectedUrl"))},todomain:{trigger:["blur","input"],validator:()=>""!==d.todomain.trim()||new Error(a("Site.RulesError.Sent"))}},c=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?d.todomain="$host":d.todomain=e},p=ct([]),m=()=>{p.value.length>=3||p.value.push({sub1:"",sub2:""})};return m(),(()=>{if(i&&s){d.type=s.type,d.cache=s.cache,d.advanced=s.advanced,d.proxyname=s.proxyname,d.cachetime=s.cachetime,d.proxydir=s.proxydir,d.proxysite=s.proxysite,d.todomain=s.todomain,d.sitename=s.sitename;const e=s.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(p.value=e)}})(),t({onConfirm:async({hide:e})=>{await(r.value?.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach(((e,t)=>{p.value.length-1<t||(e.sub1=p.value[t].sub1,e.sub2=p.value[t].sub2)})),{...Et(d),subfilter:e}})();i?await Te(t):await $e(t),o?.(),e()}}),(e,t)=>{const a=Ft,l=zt,n=$,s=R,o=D,h=Zt,g=Jt,f=b,v=P,_=Nt,w=Xt;return yt(),bt("div",vl,[gt(_,{ref_key:"formRef",ref:r,model:Ct(d),rules:u},{default:kt((()=>[gt(n,{size:32},{default:kt((()=>[gt(l,{label:e.$t("Site.Lable.EnableProxy")},{default:kt((()=>[gt(a,{value:Ct(d).type,"onUpdate:value":t[0]||(t[0]=e=>Ct(d).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.EnableCache"),"label-width":"100"},{default:kt((()=>[gt(a,{value:Ct(d).cache,"onUpdate:value":t[1]||(t[1]=e=>Ct(d).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Advanced"),"label-width":"126"},{default:kt((()=>[gt(a,{value:Ct(d).advanced,"onUpdate:value":t[2]||(t[2]=e=>Ct(d).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),gt(l,{label:e.$t("Site.Lable.ProxyName"),path:"proxyname"},{default:kt((()=>[xt("div",_l,[gt(s,{value:Ct(d).proxyname,"onUpdate:value":t[3]||(t[3]=e=>Ct(d).proxyname=e),disabled:Ct(i),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),1===Ct(d).cache?(yt(),Ut(l,{key:0,label:e.$t("Site.Lable.CacheTime"),path:"cachetime"},{default:kt((()=>[xt("div",wl,[gt(g,null,{default:kt((()=>[gt(o,{value:Ct(d).cachetime,"onUpdate:value":t[4]||(t[4]=e=>Ct(d).cachetime=e),min:1,"show-button":!1,placeholder:""},null,8,["value"]),gt(h,{class:"w-70px text-center"},{default:kt((()=>[$t(St(Ct(d).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1},8,["label"])):Lt("",!0),1===Ct(d).advanced?(yt(),Ut(l,{key:1,label:e.$t("Site.TableRow.ProxyDir"),path:"proxydir"},{default:kt((()=>[xt("div",yl,[gt(s,{value:Ct(d).proxydir,"onUpdate:value":t[5]||(t[5]=e=>Ct(d).proxydir=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):Lt("",!0),gt(l,{label:e.$t("Site.Lable.Target")},{default:kt((()=>[xt("div",bl,[gt(s,{value:Ct(d).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>Ct(d).proxysite=e),c],placeholder:""},null,8,["value"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Sent")},{default:kt((()=>[xt("div",xl,[gt(s,{value:Ct(d).todomain,"onUpdate:value":t[7]||(t[7]=e=>Ct(d).todomain=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.ContentReplace")},{default:kt((()=>[gt(n,{class:"flex-1",vertical:""},{default:kt((()=>[(yt(!0),bt(Rt,null,mt(Ct(p),((t,a)=>(yt(),Ut(n,{key:`${a+1}`,class:"items-center"},{default:kt((()=>[xt("div",kl,[gt(s,{value:t.sub1,"onUpdate:value":e=>t.sub1=e,placeholder:e.$t("Site.Placeholder.Source")},null,8,["value","onUpdate:value","placeholder"])]),xt("div",Sl,[gt(s,{value:t.sub2,"onUpdate:value":e=>t.sub2=e,placeholder:e.$t("Site.Placeholder.Replace")},null,8,["value","onUpdate:value","placeholder"])]),xt("div",null,[gt(f,{type:"error",disabled:0===a&&1===Ct(p).length,onClick:e=>(e=>{p.value.length<=1||p.value.splice(e,1)})(a)},{default:kt((()=>[$t(St(e.$t("Site.TableOP.Del")),1)])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),xt("div",null,[gt(v,{type:"primary",disabled:Ct(p).length>=3,onClick:m},{default:kt((()=>[xt("span",null,St(e.$t("Site.Config.ProxyConfig.Replacement")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["label"])])),_:1},8,["model"]),gt(w,{class:"mt-12px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.ProxyConfig.Tips.0")),1),xt("li",null,St(e.$t("Site.Config.ProxyConfig.Tips.1")),1),xt("li",null,St(e.$t("Site.Config.ProxyConfig.Tips.2")),1),xt("li",null,St(e.$t("Site.Config.ProxyConfig.Tips.3")),1)])),_:1})])}}}),Pl={class:"p-20px"},$l={class:"mt-12px"},Tl=dt({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:n}=a.data,s=t,o=W(),r=ct(""),d=ct(""),u=ct(""),c=async()=>{const{message:e}=await Le({path:u.value,data:r.value,encoding:d.value});y(e)&&C.success(e.msg),n?.(),s("close")};return(async()=>{const{message:e}=await Re({sitename:i,proxyname:l.proxyname,webserver:o.webserver});y(e)&&(u.value=e.file,r.value=e.data,d.value=e.encoding)})(),(e,t)=>{const a=P,l=Xt;return yt(),bt("div",Pl,[gt(Gt,{value:Ct(r),"onUpdate:value":t[0]||(t[0]=e=>Pt(r)?r.value=e:null),height:350,"show-tips":!1},null,8,["value"]),xt("div",$l,[gt(a,{type:"primary",onClick:c},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})]),gt(l,{class:"mt-24px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.RedirectConfig.Tips.6")),1)])),_:1})])}}}),Rl=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:n,table:s,columns:o}=J([{type:"selection",width:40},{key:"proxyname",title:a("Site.TableRow.Name"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:a("Site.TableRow.ProxyDir"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:a("Site.Lable.Target"),ellipsis:{tooltip:{width:"trigger"}},render:e=>gt("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:a("Site.Lable.Cache"),width:90,render:e=>gt(b,{type:1===e.cache?"primary":"error",onClick:async()=>{await Te({...i(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:a("Site.TableRow.Status"),width:90,render:e=>gt(ie,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Te({...i(e),type:t,cache:e.cache}),e.type=t}},null)},ne({width:120,options:e=>[{label:a("Site.TableOP.Conf"),onClick:()=>{f(e)}},{label:a("Site.TableOP.Edit"),onClick:()=>{h(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{k({title:`${a("Site.Batch.DeleteProxy.Label")} [${e.proxyname}]`,content:a("Site.Batch.DeleteProxy.Content"),onConfirm:async({hide:t})=>{await We({sitename:l.name,proxyname:e.proxyname}),c(),t()}})}}]})]),r=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),api:e=>We({sitename:l.name,proxyname:e.proxyname},!1),done:()=>{c()},columns:[{key:"proxyname",title:a("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:d,setLoading:u}=ae(),c=async()=>{try{u(!0);const{message:e}=await Ue({sitename:l.name});s.data=S(e)?e:[]}finally{n.value=[],u(!1)}},p=U(a("Site.Config.ProxyConfig.Create"),{row:void 0,siteName:l.name,isEdit:!1,getList:c}),m=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=a("Site.Config.ProxyConfig.Create"),p.show=!0},h=e=>{p.data.row=e,p.data.isEdit=!0,p.title=`${a("Site.Config.RedirectConfig.Modify")} [${e.proxyname}]`,p.show=!0},g=U("",{row:void 0,siteName:l.name,getList:c}),f=e=>{g.data.row=e,g.title=`${a("Site.Config.RedirectConfig.Edit")} [${e.proxyname}]`,g.show=!0};return c(),t({init:c}),(e,t)=>{const a=P,l=Q,i=Z,u=X,c=E;return yt(),bt("div",null,[gt(u,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:m},{default:kt((()=>[$t(St(e.$t("Site.Config.ProxyConfig.Add")),1)])),_:1})])),table:kt((()=>[gt(l,{"checked-row-keys":Ct(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Pt(n)?n.value=e:null),"row-key":"proxyname",loading:Ct(d),"max-height":440,data:Ct(s).data,columns:Ct(o)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:kt((()=>[gt(i,{"checked-row-keys":Ct(n),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Pt(n)?n.value=e:null),"row-key":"proxyname",data:Ct(s).data,options:r},null,8,["checked-row-keys","data"])])),_:1}),gt(c,{show:Ct(p).show,"onUpdate:show":t[2]||(t[2]=e=>Ct(p).show=e),title:Ct(p).title,data:Ct(p).data,width:660,footer:!0,component:Cl},null,8,["show","title","data"]),gt(c,{show:Ct(g).show,"onUpdate:show":t[3]||(t[3]=e=>Ct(g).show=e),title:Ct(g).title,data:Ct(g).data,width:580,component:Tl},null,8,["show","title","data"])])}}}),Ll={class:"pt-8px"},Wl={class:"w-200px"},Ul={class:"flex flex-col"},El={class:"w-200px"},Dl={class:"mt-8px text-desc"},Ml={class:"flex flex-col"},ql={class:"w-200px"},jl={class:"mt-8px text-desc"},Ol={class:"flex flex-col"},Al={class:"w-200px"},Bl={class:"mt-8px text-desc"},Il=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=ct(null),n=Tt({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),s={perserver:{trigger:["blur","change"],validator:()=>!!n.perserver||new Error(a("Site.RulesError.Concurrency"))},perip:{trigger:["blur","change"],validator:()=>!!n.perip||new Error(a("Site.RulesError.SingleIP"))},limit_rate:{trigger:["blur","change"],validator:()=>!!n.limit_rate||new Error(a("Site.RulesError.Traffic"))}},o=ct([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),r=async e=>{e?c():(await Ee({id:l.id}),p())},d=(e,t)=>{const{items:a}=t;y(a)&&u(a)},u=e=>{n.perserver=e.perserver,n.perip=e.perip,n.limit_rate=e.limit_rate},c=async()=>{await(i.value?.validate()),await De({id:l.id,perserver:n.perserver,perip:n.perip,limit_rate:n.limit_rate}),p()},p=async()=>{const{message:e}=await Me({id:l.id});y(e)&&(n.status=0!=e.perserver,u(o.value[0].items),M(e.perserver)&&0!=e.perserver&&(n.perserver=e.perserver),M(e.perip)&&0!=e.perip&&(n.perip=e.perip),M(e.limit_rate)&&0!=e.limit_rate&&(n.limit_rate=e.limit_rate))};return p(),t({init:p}),(e,t)=>{const a=Qt,l=zt,u=Kt,p=D,m=P,h=Nt;return yt(),bt("div",Ll,[gt(h,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:Ct(n),rules:s},{default:kt((()=>[gt(l,{label:" "},{default:kt((()=>[gt(a,{checked:Ct(n).status,"onUpdate:checked":[t[0]||(t[0]=e=>Ct(n).status=e),r]},{default:kt((()=>[$t(St(e.$t("Site.Config.TrafficCofig.Tips.0")),1)])),_:1},8,["checked"])])),_:1}),gt(l,{label:e.$t("Site.Lable.Limit"),path:"type"},{default:kt((()=>[xt("div",Wl,[gt(u,{value:Ct(n).type,"onUpdate:value":[t[1]||(t[1]=e=>Ct(n).type=e),d],options:Ct(o)},null,8,["value","options"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Concurrency"),path:"perserver"},{default:kt((()=>[xt("div",Ul,[xt("div",El,[gt(p,{value:Ct(n).perserver,"onUpdate:value":t[2]||(t[2]=e=>Ct(n).perserver=e),"show-button":!1,min:0},null,8,["value"])]),xt("div",Dl,St(e.$t("Site.Config.TrafficCofig.Tips.1")),1)])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.BlockIP"),path:"perip"},{default:kt((()=>[xt("div",Ml,[xt("div",ql,[gt(p,{value:Ct(n).perip,"onUpdate:value":t[3]||(t[3]=e=>Ct(n).perip=e),"show-button":!1,min:0},null,8,["value"])]),xt("div",jl,St(e.$t("Site.Config.TrafficCofig.Tips.2")),1)])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Config.Traffic"),path:"limit_rate"},{default:kt((()=>[xt("div",Ol,[xt("div",Al,[gt(p,{value:Ct(n).limit_rate,"onUpdate:value":t[4]||(t[4]=e=>Ct(n).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),xt("div",Bl,St(e.$t("Site.Config.TrafficCofig.Tips.3")),1)])])),_:1},8,["label"]),gt(l,{label:" "},{default:kt((()=>[gt(m,{type:"primary",onClick:c},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Hl=dt({__name:"index",setup(e,{expose:a}){const l=ht((()=>x((()=>t.import("./index-legacy148.js?v=1723125373998")),void 0))),{t:i}=vt(),{config:n}=Ua(),s=ct("access"),o=ct(),r=[{key:"directory",label:i("Site.Config.Directory"),component:ll},{key:"file",label:i("Site.Config.File"),component:nl},{key:"rewrite",label:i("Site.Config.URL"),component:l},{key:"redirect",label:i("Site.Config.Redirect"),component:fl},{key:"proxy",label:i("Site.Config.Proxy"),component:Rl},{key:"traffic",label:i("Site.Config.Traffic"),component:Il}];return s.value=n.subMenu||"directory",n.subMenu="",a({init:()=>{s.value="directory",Dt((()=>{o.value?.init()}))}}),(e,t)=>{const a=Ht;return yt(),Ut(a,{value:Ct(s),"onUpdate:value":t[0]||(t[0]=e=>Pt(s)?s.value=e:null),ref_key:"tabsRef",ref:o,options:r},null,8,["value"])}}}),zl={class:"p-8"},Nl=xt("li",null,"Directory temporarily only supports reading alarm operation",-1),Vl=dt({__name:"form",setup(e,{expose:t}){const a=ct(null),l=ct(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=Tt({path:"",operation:[]}),s=(e,t)=>{"dir"===t.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return t({onConfirm:async()=>{await(a.value?.validate())}}),(e,t)=>{const o=Vt,r=zt,d=Qt,u=na,c=Yt,p=Nt,m=$,h=Xt;return yt(),bt("div",zl,[gt(m,null,{default:kt((()=>[gt(p,{ref_key:"formRef",ref:a,model:Ct(n),rules:i},{default:kt((()=>[gt(r,{label:"Detection path",path:"path"},{default:kt((()=>[gt(o,{disabled:"",value:Ct(n).path,"onUpdate:value":t[0]||(t[0]=e=>Ct(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])])),_:1}),gt(r,{label:"Alert operation",path:"operation"},{default:kt((()=>[gt(c,{value:Ct(n).operation,"onUpdate:value":t[1]||(t[1]=e=>Ct(n).operation=e)},{default:kt((()=>[gt(u,null,{default:kt((()=>[gt(d,{value:0},{default:kt((()=>[$t(" Read ")])),_:1}),gt(d,{value:1,disabled:Ct(l)},{default:kt((()=>[$t(" delete ")])),_:1},8,["disabled"]),gt(d,{value:2,disabled:Ct(l)},{default:kt((()=>[$t(" Modify/increase ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),gt(h,{class:"mt-16px"},{default:kt((()=>[Nl])),_:1})])}}}),Kl={class:"p-5"},Fl=xt("img",{src:ea,class:"w-5"},null,-1),Xl={class:"mt-16px"},Gl=xt("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1),Zl=xt("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1),Jl=dt({__name:"monitor",setup(e){const t=ct(!1),a=ct(!1),l=ct([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=ct([]);return(e,n)=>{const s=P,o=$,r=Q,d=Xt,u=E;return yt(),bt("div",Kl,[xt("div",null,[gt(o,{justify:"space-between"},{default:kt((()=>[gt(s,{type:"primary",onClick:n[0]||(n[0]=e=>t.value=!0)},{default:kt((()=>[$t(" Add monitor ")])),_:1}),gt(s,null,{icon:kt((()=>[Fl])),_:1})])),_:1})]),xt("div",Xl,[gt(r,{loading:Ct(a),"loading-num":6,data:Ct(i),columns:Ct(l)},null,8,["loading","data","columns"])]),xt("div",null,[gt(d,{class:"mt-16px"},{default:kt((()=>[Gl,Zl,xt("li",null,[gt(s,{text:"",class:"color-#20a53a"},{default:kt((()=>[$t("Tutorial")])),_:1})])])),_:1})]),gt(u,{show:Ct(t),"onUpdate:show":n[1]||(n[1]=e=>Pt(t)?t.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:Vl},null,8,["show"])])}}}),Ql=q({},[["render",function(e,t){return yt(),bt("div",null,"555")}]]),Yl=e=>(qt("data-v-43bec92c"),e=e(),jt(),e),ei={class:"box mt-16px"},ti=Yl((()=>xt("div",null,"Site protection",-1))),ai=Yl((()=>xt("div",null,"today: 0",-1))),li=Yl((()=>xt("div",null,"Total alarm: 0",-1))),ii={key:0,class:"items-center warning"},ni=Yl((()=>xt("img",{src:ta,class:"h-8"},null,-1))),si={class:"warning"},oi={class:"color-#f23836"},ri=Yl((()=>xt("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1))),di=Yl((()=>xt("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1))),ui=Yl((()=>xt("img",{src:aa,class:"h-10"},null,-1))),ci=Yl((()=>xt("img",{src:aa,class:"h-10"},null,-1))),pi=dt({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=W(),a=ct(!1),l=ct(!1),i=ct(!1),n=e,s=j(),o=()=>{O({source:114})},r=()=>{const e=a.value?"Open the site security alarm":"Close the site security alarm",t=a.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";k({title:e,content:t,onConfirm:async()=>{const e=la(a.value);console.log(e,"result")},onPublicClose:()=>{a.value=!a.value}})};return(e,d)=>{const u=Ft,c=$,p=P,m=Xt,h=b,g=F,f=E;return yt(),bt(Rt,null,[xt("div",ei,[gt(g,{install:Ct(s).isPro,class:"install"},Mt({default:kt((()=>[gt(c,{class:"items-center color-#666"},{default:kt((()=>[ti,xt("div",null,[gt(u,{value:Ct(a),"onUpdate:value":[d[0]||(d[0]=e=>Pt(a)?a.value=e:null),r]},null,8,["value"])]),ai,li,Ct(a)?Lt("",!0):(yt(),bt("div",ii,[ni,xt("span",si,[$t(" Please open "),xt("span",oi,"PHP-"+St(n.phpVersion),1),$t(" protection first ")])]))])),_:1}),gt(c,{class:"mt-16px"},{default:kt((()=>[gt(p,{onClick:d[1]||(d[1]=e=>l.value=!0)},{default:kt((()=>[$t("Monitor")])),_:1}),gt(p,{onClick:d[2]||(d[2]=e=>i.value=!0)},{default:kt((()=>[$t("Trigger log")])),_:1})])),_:1}),gt(m,{class:"mt-16px"},{default:kt((()=>[ri,di])),_:1})])),_:2},[n.isInstall?{name:"desc",fn:kt((()=>[gt(c,{class:"items-center"},{default:kt((()=>[ui,xt("span",null,[$t("If you need to use the [PHP website security alarm] function, please buy first "),gt(h,{onClick:o},{default:kt((()=>[$t("click to buy")])),_:1})])])),_:1})])),key:"0"}:{name:"desc",fn:kt((()=>[gt(c,{class:"items-center"},{default:kt((()=>[ci,xt("span",null,[$t("Currently not installed [PHP website security alarm], "),gt(h,null,{default:kt((()=>[$t("Click to install")])),_:1})])])),_:1})])),key:"1"}]),1032,["install"])]),gt(f,{show:Ct(l),"onUpdate:show":d[3]||(d[3]=e=>Pt(l)?l.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:Jl},null,8,["show"]),gt(f,{show:Ct(i),"onUpdate:show":d[4]||(d[4]=e=>Pt(i)?i.value=e:null),title:`[${Ct(t).siteName}] Site security log`,width:1e3,"min-height":148,footer:!1,component:Ql},null,8,["show","title"])],64)}}}),mi=q(pi,[["__scopeId","data-v-43bec92c"]]),hi={class:"w-140px"},gi={class:"my-16px"},fi={key:0,class:"my-16px"},vi=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=W(),n=ct(null),s=ct(!1),o=ct(!1);let r="";const d=ct([]),u=async()=>{null!==n.value?(await qe({siteName:l.name,version:n.value,other:r}),i.setRefresh(!0),m()):C.error(a("Site.RulesError.PHP"))},c=async()=>{const{message:e}=await Be({id:l.id});y(e)&&(s.value=e.result)},p=async e=>{await je({id:l.id,act:e?1:0}),c()},m=()=>{(async()=>{const{message:e}=await ia();y(e)&&(o.value=e.php_status)})(),c(),(async()=>{const{message:e}=await Ae();S(e)&&(d.value=e.reverse().map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await Oe({siteName:l.name});y(e)&&(n.value=e.phpversion,r=e.php_other||"")})()};return m(),t({init:m}),(e,t)=>{const a=Kt,l=P,i=$,r=Xt,c=T,m=Ft;return yt(),bt("div",null,[gt(i,{class:"items-center"},{default:kt((()=>[xt("div",null,St(e.$t("Site.Lable.PHPVersion")),1),xt("div",hi,[gt(a,{value:Ct(n),"onUpdate:value":t[0]||(t[0]=e=>Pt(n)?n.value=e:null),options:Ct(d)},null,8,["value","options"])]),xt("div",null,[gt(l,{type:"primary",onClick:u},{default:kt((()=>[$t(St(e.$t("Site.Cert.Switch")),1)])),_:1})])])),_:1}),gt(r,{class:"mt-16px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.PHP.Tips.0")),1),xt("li",null,St(e.$t("Site.Config.PHP.Tips.1")),1),xt("li",null,St(e.$t("Site.Config.PHP.Tips.2")),1),xt("li",null,St(e.$t("Site.Config.PHP.Tips.3")),1),xt("li",null,St(e.$t("Site.Config.PHP.Tips.4")),1),xt("li",null,St(e.$t("Site.Config.PHP.Tips.5")),1)])),_:1}),xt("div",gi,[gt(c,{dashed:""})]),gt(i,{class:"items-center"},{default:kt((()=>[xt("div",null,St(e.$t("Site.Config.PHP.SessionI")),1),xt("div",null,[gt(m,{value:Ct(s),"onUpdate:value":[t[1]||(t[1]=e=>Pt(s)?s.value=e:null),p]},null,8,["value"])])])),_:1}),gt(r,{class:"mt-16px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.PHP.Tips.6")),1),xt("li",null,St(e.$t("Site.Config.PHP.Tips.7")),1)])),_:1}),Ct(A)?(yt(),bt("div",fi,[gt(c,{dashed:""}),gt(mi,{isInstall:Ct(o),phpVersion:Ct(n)},null,8,["isInstall","phpVersion"])])):Lt("",!0)])}}}),_i=e("_",dt({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const t=Ot(e,"value"),{loading:a,setLoading:l}=ae(),i=ct([]);return(async()=>{try{l(!0);const{message:e}=await Ie();y(e)&&(i.value=Object.entries(e).map((([e,t])=>({label:t,value:e}))))}finally{l(!1)}})(),(e,l)=>{const n=Kt;return yt(),Ut(n,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),loading:Ct(a),filterable:"",options:Ct(i)},null,8,["value","loading","options"])}}})),wi={class:"w-200px"},yi={class:"w-200px mr-8px"},bi={class:"flex flex-col"},xi={class:"mt-8px text-desc"},ki={class:"flex flex-col"},Si={class:"mt-8px text-desc"},Ci=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),l=W(),i=ct(null),{data:n}=Ua(),s=Tt({Login_url:"",redirection_url:"",wps:!1,admin_email:"",home_url:""}),o=ct(!1),r=ct("--"),d=ct("--"),u=pt((()=>o.value?`${a("WP.RulesError.NewVersion")} (${d.value}) ${a("WP.RulesError.NewVersionLast")}`:`${a("WP.TableRow.WP")} ${r.value} ${a("WP.RulesError.LastVersion")}`)),c=ct(!1),p=ct(null),m=ct("en"),h=ct(""),g=ct("--"),f=async()=>{await(i.value?.validate()),await(e=>_.post("/site?action=save_wp_configurations",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))({s_id:n.id,language:m.value,admin_password:h.value?h.value:null,admin_email:s.admin_email,whl_enabled:s.wps?1:0,whl_page:s.Login_url,whl_redirect_admin:s.redirection_url}),T()},v={admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==s.admin_email.trim()||new Error(a("WP.RulesError.Email"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==s.redirection_url.trim()||new Error(a("WP.RulesError.Redirection"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==s.Login_url.trim()||new Error(a("WP.RulesError.Login"))}},w=async()=>{o.value?(await He({s_id:n.id,version:d.value}),T()):C.error(a("WP.RulesError.LastVersion"))},x=async e=>{await ze({version:n.php_version,sitename:n.name,act:e}),l.setRefresh(!0)},k=async()=>{await Ne({s_id:n.id})},S=async()=>{h.value=B(16,"wp")},T=async()=>{const{message:e}=await(e=>_.post("/site?action=get_wp_configurations",e,{requestOptions:{loading:_a("WP.api.tamper_8")}}))({s_id:n.id});y(e)&&(c.value=e.cache_enabled,r.value=e.local_version,d.value=e.latest_version,o.value=e.can_upgrade,g.value=e.login_url,p.value=e.admin_user,m.value=e.language,s.admin_email=e.admin_email,s.Login_url=e.whl_page,s.home_url=e.home_url,s.redirection_url=e.whl_redirect_admin,s.wps=e.whl_enabled)};return T(),t({init:T}),(e,t)=>{const a=b,l=zt,n=sa,r=P,d=Ft,_=R,y=Qt,C=$,T=Nt;return yt(),bt("div",null,[gt(T,{"label-width":"160px",modelValue:Ct(s),"onUpdate:modelValue":t[8]||(t[8]=e=>Pt(s)?s.value=e:null),ref_key:"formRef",ref:i,rules:v},{default:kt((()=>[gt(l,{label:e.$t("WP.Config.LoginUrl")},{default:kt((()=>[gt(a,{href:Ct(g),target:"_blank"},{default:kt((()=>[$t(St(Ct(g)),1)])),_:1},8,["href"])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.TableRow.Status")},{default:kt((()=>[gt(n,{type:Ct(o)?"warning":"default","show-icon":!1},{default:kt((()=>[$t(St(Ct(u)),1)])),_:1},8,["type"]),gt(r,{class:"ml-8px",type:"primary",onClick:w},{default:kt((()=>[$t(St(e.$t("WP.Config.Upgrade")),1)])),_:1})])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Cache")},{default:kt((()=>[gt(d,{value:Ct(c),"onUpdate:value":[t[0]||(t[0]=e=>Pt(c)?c.value=e:null),x],class:"mr-20px"},null,8,["value"]),gt(r,{onClick:k},{default:kt((()=>[$t(St(e.$t("WP.Config.Clear")),1)])),_:1})])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.UserName")},{default:kt((()=>[xt("div",wi,[gt(_,{value:Ct(p),"onUpdate:value":t[1]||(t[1]=e=>Pt(p)?p.value=e:null),readonly:""},null,8,["value"])])])),_:1},8,["label"]),gt(l,{label:e.$t("WP.Label.RePassword")},{default:kt((()=>[xt("div",yi,[gt(_,{value:Ct(h),"onUpdate:value":t[2]||(t[2]=e=>Pt(h)?h.value=e:null),placeholder:e.$t("WP.Placeholder.Password")},null,8,["value","placeholder"])]),gt(r,{type:"primary",onClick:S},{default:kt((()=>[$t(St(e.$t("WP.Config.Generate")),1)])),_:1})])),_:1},8,["label"]),gt(l,{label:e.$t("WP.Label.EmailAddress"),path:"admin_email"},{default:kt((()=>[gt(_,{class:"w-410px!",value:Ct(s).admin_email,"onUpdate:value":t[3]||(t[3]=e=>Ct(s).admin_email=e),placeholder:e.$t("Site.Placeholder.Email")},null,8,["value","placeholder"])])),_:1},8,["label"]),gt(l,{label:e.$t("WP.Label.Language")},{default:kt((()=>[gt(_i,{class:"w-410px",value:Ct(m),"onUpdate:value":t[4]||(t[4]=e=>Pt(m)?m.value=e:null)},null,8,["value"])])),_:1},8,["label"]),gt(l,{label:e.$t("WP.Label.WPS")},{default:kt((()=>[gt(y,{checked:Ct(s).wps,"onUpdate:checked":t[5]||(t[5]=e=>Ct(s).wps=e)},{default:kt((()=>[xt("span",null,St(e.$t("WP.Add.EnableWPS")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),Ct(s).wps?(yt(),bt(Rt,{key:0},[gt(l,{label:e.$t("WP.Add.Login"),path:"Login_url"},{default:kt((()=>[xt("div",bi,[xt("div",null,[gt(C,{class:"items-center"},{default:kt((()=>[xt("div",null,St(Ct(s).home_url)+"/",1),gt(_,{class:"w-200px!",value:Ct(s).Login_url,"onUpdate:value":t[6]||(t[6]=e=>Ct(s).Login_url=e),placeholder:e.$t("Site.Placeholder.Login")},null,8,["value","placeholder"])])),_:1})]),xt("div",xi,St(e.$t("WP.Config.RedirectionTips.0")),1)])])),_:1},8,["label"]),gt(l,{label:e.$t("WP.Add.Redirection"),path:"redirection_url"},{default:kt((()=>[xt("div",ki,[xt("div",null,[gt(C,{class:"items-center"},{default:kt((()=>[xt("div",null,St(Ct(s).home_url)+"/",1),gt(_,{class:"w-200px!",value:Ct(s).redirection_url,"onUpdate:value":t[7]||(t[7]=e=>Ct(s).redirection_url=e),placeholder:e.$t("Site.Placeholder.Redirection")},null,8,["value","placeholder"])])),_:1})]),xt("div",Si,St(e.$t("WP.Config.RedirectionTips.1")),1)])])),_:1},8,["label"])],64)):Lt("",!0),gt(l,{label:" "},{default:kt((()=>[gt(r,{type:"primary",onClick:f},{default:kt((()=>[$t(St(e.$t("WP.Config.Save")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}}),Pi={class:"p-10px"},$i=dt({__name:"install",props:{data:{}},setup(e){const{t:t}=vt(),{data:a}=Ua(),l=e,{getList:i}=l.data,n=Tt({s_id:a.id,p:1,p_size:10,keyword:""}),s=()=>{n.p=1,p()},{loading:o,setLoading:r}=ae(),{keys:d,table:u,columns:c}=J([{key:"name",width:"25%",ellipsis:{tooltip:{width:"trigger"}},title:t("Site.TableRow.Name"),render:e=>gt("span",null,[gt("img",{class:"w-25px h-25px",src:e.icons["1x"]?e.icons["1x"]:e.icons.default},null),gt("span",{class:"ml-5px"},[e.name])])},{key:"short_description",title:t("Security.Hardening.Index_5"),width:"20%",ellipsis:{tooltip:{width:"trigger"}}},{key:"author",title:t("WP.index_17"),render:e=>gt("span",{innerHTML:e.author},null)},{key:"requires",title:"WP",render:e=>e.requires?e.requires:"--",width:"50px",align:"center"},{key:"requires_php",title:t("Site.PHP.index_26"),render:e=>e.requires_php?e.requires_php:"--",align:"center",width:"50px"},{key:"rating",title:t("WP.index_19"),render:e=>gt(va,{size:"small",readonly:!0,color:"#4fb233",value:e.rating/20},null)},ne({width:60,options:e=>[{label:e.installed?t("WP.TableRow.Installed"):t("WP.TableRow.Install"),disabled:a.wp_version<e.requires||a.php_version<e.requires_php||e.installed,onClick:async()=>{try{await(l={s_id:a.id,slug:e.slug},_.post("/site?action=wp_install_plugin",l,{requestOptions:{loading:_a("WP.api.tamper_16"),successMessage:!1}})),C.success(t("WP.index_20")),p(),i?.()}catch(n){console.error(n)}var l}}]}),{key:"",title:"",width:"30px",render:e=>a.wp_version<e.requires||a.php_version<e.requires_php||e.installed?gt(H,{trigger:"hover"},{trigger:()=>gt(I,{name:"common-ask",size:"18",color:"#999"},null),default:()=>a.wp_version<e.requires||a.php_version<e.requires_php?"Current WP or PHP version too low to install":"Installed"}):null}]),p=async()=>{try{r(!0);const{message:e}=await ka(Et(n));y(e)&&(u.total=e.total,S(e.list)?u.data=e.list.map((e=>({...e,author:e.author.replace('href="','target="_blank" style="color: #1d9534" href="')}))):(u.data=[],u.total=0))}finally{d.value=[],r(!1)}};return p(),(e,t)=>{const a=Y,l=Q,i=G,r=X;return yt(),bt("div",Pi,[gt(r,{feedback:!1},{toolsLeft:kt((()=>[])),toolsRight:kt((()=>[gt(a,{value:Ct(n).keyword,"onUpdate:value":t[0]||(t[0]=e=>Ct(n).keyword=e),placeholder:e.$t("WP.index_14"),onSearch:s},null,8,["value","placeholder"])])),table:kt((()=>[gt(l,{loading:Ct(o),data:Ct(u).data,columns:Ct(c),"max-height":500},null,8,["loading","data","columns"])])),pageRight:kt((()=>[gt(i,{page:Ct(n).p,"onUpdate:page":t[1]||(t[1]=e=>Ct(n).p=e),"page-size":Ct(n).p_size,"onUpdate:pageSize":t[2]||(t[2]=e=>Ct(n).p_size=e),"item-count":Ct(u).total,onRefresh:p},null,8,["page","page-size","item-count"])])),_:1})])}}}),Ti=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=()=>{window.open(l.login_url,"_blank")},n=()=>{p.show=!0},{keys:s,table:o,columns:r}=J([{key:"title",title:a("Site.TableRow.Name"),width:"40%",ellipsis:{tooltip:{width:"trigger"}}},se({key:"is_plugin_activate",title:a("WP.TableRow.Active"),minWidth:60,onClick:async(e,t)=>{await(e=>_.post("/site?action=wp_set_plugin_status",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))({s_id:l.id,plugin_file:t.plugin_file,activate:e?1:0})}}),se({key:"auto_update",title:a("WP.TableRow.Autoupdate"),minWidth:60,onClick:async(e,t)=>{await(e=>_.post("/site?action=wp_set_plugin_auto_update",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))({s_id:l.id,plugin_file:t.plugin_file,enable:e?1:0})}}),ne({width:130,options:e=>[{label:a("WP.TableRow.Update"),show:e.can_update,onClick:()=>{k({title:`${a("WP.TableRow.Update")} [${e.name}]`,content:a("WP.index_9",[e.version,e.latest_version]),onConfirm:async({hide:t})=>{await(e=>_.post("/site?action=wp_update_plugin",e,{requestOptions:{loading:_a("WP.api.tamper_15"),successMessage:!0}}))({s_id:l.id,plugin_file:e.plugin_file}),c(),t()}})}},{label:a("WP.TableRow.Uninstall"),onClick:()=>{k({title:`${a("WP.TableRow.Uninstall")} [${e.name}]`,content:a("WP.index_10"),onConfirm:async({hide:t})=>{await ba({s_id:l.id,plugin_file:e.plugin_file}),c(),t()}})}}]})]),{loading:d,setLoading:u}=ae(),c=async()=>{try{u(!0);const{message:e}=await ya({s_id:l.id});S(e)&&(o.data=e)}finally{s.value=[],u(!1)}},p=U(a("WP.index_15"),{getList:c});return c(),t({init:c}),(e,t)=>{const a=P,l=Q,u=X,c=E;return yt(),bt(Rt,null,[xt("div",null,[gt(u,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:i},{default:kt((()=>[$t(St(e.$t("WP.index_3")),1)])),_:1}),gt(a,{onClick:n},{default:kt((()=>[$t(St(e.$t("WP.TableRow.Install")),1)])),_:1})])),table:kt((()=>[gt(l,{"checked-row-keys":Ct(s),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Pt(s)?s.value=e:null),"row-key":"title",loading:Ct(d),data:Ct(o).data,columns:Ct(r)},null,8,["checked-row-keys","loading","data","columns"])])),_:1})]),gt(c,{show:Ct(p).show,"onUpdate:show":t[1]||(t[1]=e=>Ct(p).show=e),title:Ct(p).title,data:Ct(p).data,width:750,"min-height":400,footer:!1,component:$i},null,8,["show","title","data"])],64)}}}),Ri={class:"p-10px"},Li=dt({__name:"install",props:{data:{}},setup(e){const{t:t}=vt(),{data:a}=Ua(),l=e,{getList:i}=l.data,n=Tt({s_id:a.id,p:1,p_size:10,keyword:""}),s=()=>{n.p=1,p()},{loading:o,setLoading:r}=ae(),{keys:d,table:u,columns:c}=J([{key:"name",width:"25%",ellipsis:{tooltip:{width:"trigger"}},title:t("Site.TableRow.Name"),render:e=>gt("span",null,[gt("img",{class:"w-25px",src:e.screenshot_url},null),gt("span",{class:"ml-5px"},[e.name])])},{key:"description",title:t("Security.Hardening.Index_5"),width:"20%",ellipsis:{tooltip:{width:"trigger"}}},{key:"author",title:t("WP.index_17"),render:e=>gt("a",{target:"_blank",style:"color : #1d9534",href:e.author.author_url},[e.author.author])},{key:"requires",title:t("WP.index_18"),render:e=>e.requires?e.requires:"--",width:"50px",align:"center"},{key:"requires_php",title:t("Site.PHP.index_26"),render:e=>e.requires_php?e.requires_php:"--",align:"center",width:"50px"},{key:"rating",title:t("WP.index_19"),render:e=>gt(va,{size:"small",readonly:!0,color:"#4fb233",value:e.rating/20},null)},ne({width:60,options:e=>[{label:e.installed?t("WP.TableRow.Installed"):t("WP.TableRow.Install"),disabled:a.wp_version<e.requires||a.php_version<e.requires_php||e.installed,onClick:async()=>{try{await(l={s_id:a.id,slug:e.slug},_.post("/site?action=wp_install_theme",l,{requestOptions:{loading:_a("WP.api.tamper_16"),successMessage:!1}})),C.success(t("WP.index_20")),i?.(),p()}catch(n){console.error(n)}var l}}]}),{key:"",title:"",width:"30px",render:e=>a.wp_version<e.requires||a.php_version<e.requires_php||e.installed?gt(H,{trigger:"hover"},{trigger:()=>gt(I,{name:"common-ask",size:"18",color:"#999"},null),default:()=>a.wp_version<e.requires||a.php_version<e.requires_php?"Current WP or PHP version too low to install":"Installed"}):null}]),p=async()=>{try{r(!0);const{message:e}=await xa(Et(n));y(e)&&(u.total=e.total,S(e.list)?u.data=e.list:(u.data=[],u.total=0))}finally{d.value=[],r(!1)}};return p(),(e,t)=>{const a=Y,l=Q,i=G,r=X;return yt(),bt("div",Ri,[gt(r,{feedback:!1},{toolsLeft:kt((()=>[])),toolsRight:kt((()=>[gt(a,{value:Ct(n).keyword,"onUpdate:value":t[0]||(t[0]=e=>Ct(n).keyword=e),placeholder:e.$t("WP.index_14"),onSearch:s},null,8,["value","placeholder"])])),table:kt((()=>[gt(l,{loading:Ct(o),data:Ct(u).data,columns:Ct(c),"max-height":500},null,8,["loading","data","columns"])])),pageRight:kt((()=>[gt(i,{page:Ct(n).p,"onUpdate:page":t[1]||(t[1]=e=>Ct(n).p=e),"page-size":Ct(n).p_size,"onUpdate:pageSize":t[2]||(t[2]=e=>Ct(n).p_size=e),"item-count":Ct(u).total,onRefresh:p},null,8,["page","page-size","item-count"])])),_:1})])}}}),Wi=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),i=()=>{window.open(l.login_url,"_blank")},n=()=>{p.show=!0},{keys:s,table:o,columns:r}=J([{key:"title",title:a("Site.TableRow.Name"),width:"40%",ellipsis:{tooltip:{width:"trigger"}}},se({key:"is_theme_activate",title:a("WP.TableRow.Active"),minWidth:30,disabled:!0,tips:a("WP.index_12"),onClick:async(e,t)=>{await(e=>_.post("/site?action=wp_switch_theme",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))({s_id:l.id,stylesheet:t.stylesheet}),c()}}),se({key:"auto_update",title:a("WP.TableRow.Autoupdate"),minWidth:60,onClick:async(e,t)=>{await(e=>_.post("/site?action=wp_set_theme_auto_update",e,{requestOptions:{loading:_a("WP.api.tamper_8"),successMessage:!0}}))({s_id:l.id,stylesheet:t.stylesheet,enable:e?1:0})}}),ne({width:130,options:e=>[{label:a("WP.TableRow.Update"),show:e.can_update,onClick:()=>{k({title:`${a("WP.TableRow.Update")} [${e.name}]`,content:a("WP.index_9",[e.version,e.latest_version]),onConfirm:async({hide:t})=>{await(e=>_.post("/site?action=wp_update_theme",e,{requestOptions:{loading:_a("WP.api.tamper_15"),successMessage:!0}}))({s_id:l.id,stylesheet:e.stylesheet}),c(),t()}})}},{label:a("WP.TableRow.Uninstall"),disabled:e.is_theme_activate,onClick:()=>{k({title:`${a("WP.TableRow.Uninstall")} [${e.name}]`,content:a("WP.index_11"),onConfirm:async({hide:t})=>{await(e=>_.post("/site?action=wp_uninstall_theme",e,{requestOptions:{loading:_a("WP.api.tamper_14"),successMessage:!0}}))({s_id:l.id,stylesheet:e.stylesheet}),c(),t()}})}}]})]),{loading:d,setLoading:u}=ae(),c=async()=>{try{u(!0);const{message:e}=await(e=>_.post("/site?action=wp_installed_themes",e))({s_id:l.id});S(e)&&(o.data=e)}finally{s.value=[],u(!1)}},p=U(a("WP.index_16"),{getList:c});return c(),t({init:c}),(e,t)=>{const a=P,l=Q,u=X,c=E;return yt(),bt(Rt,null,[xt("div",null,[gt(u,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:i},{default:kt((()=>[$t(St(e.$t("WP.index_3")),1)])),_:1}),gt(a,{onClick:n},{default:kt((()=>[$t(St(e.$t("WP.TableRow.Install")),1)])),_:1})])),table:kt((()=>[gt(l,{"checked-row-keys":Ct(s),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Pt(s)?s.value=e:null),"row-key":"title",loading:Ct(d),data:Ct(o).data,columns:Ct(r)},null,8,["checked-row-keys","loading","data","columns"])])),_:1})]),gt(c,{show:Ct(p).show,"onUpdate:show":t[1]||(t[1]=e=>Ct(p).show=e),title:Ct(p).title,data:Ct(p).data,width:750,"min-height":400,footer:!1,component:Li},null,8,["show","title","data"])],64)}}}),Ui=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{config:l}=Ua(),i=ct("setup"),n=ct(),s=[{key:"setup",label:a("Site.Config.Setup"),component:Ci},{key:"plugin",label:a("Site.Config.Plugin"),component:Ti},{key:"theme",label:a("Site.Config.Theme"),component:Wi}];return i.value=l.subMenu||"setup",l.subMenu="",t({init:()=>{i.value="setup",Dt((()=>{n.value?.init()}))}}),(e,t)=>{const a=Ht;return yt(),Ut(a,{value:Ct(i),"onUpdate:value":t[0]||(t[0]=e=>Pt(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),Ei={class:"p-20px"},Di={class:"w-280px"},Mi={class:"w-280px"},qi={class:"w-280px"},ji={class:"w-280px"},Oi=dt({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=vt(),l=e,{isEdit:i,siteId:n,row:s,getList:o}=l.data,r=ct(null),d=Tt({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:a("Site.RulesError.Name"),trigger:["blur","input"]},site_dir:{required:!0,message:a("Site.RulesError.Path"),trigger:["blur","input"]},username:{required:!0,message:a("Site.RulesError.UserName1"),trigger:["blur","input"]},password:{required:!0,message:a("Site.RulesError.Password1"),trigger:["blur","input"]}};return i&&s&&(d.name=s.name,d.site_dir=s.site_dir),t({onConfirm:async({hide:e})=>{await(r.value?.validate()),i?await Ve({id:n,name:d.name,username:d.username,password:d.password}):await Ke({...Et(d),id:n}),o?.(),e()}}),(e,t)=>{const a=R,l=zt,n=Nt,s=Xt;return yt(),bt("div",Ei,[gt(n,{ref_key:"formRef",ref:r,model:Ct(d),rules:u},{default:kt((()=>[gt(l,{label:e.$t("Site.TableRow.Name"),path:"name"},{default:kt((()=>[xt("div",Di,[gt(a,{value:Ct(d).name,"onUpdate:value":t[0]||(t[0]=e=>Ct(d).name=e),disabled:Ct(i),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.TableRow.Path"),path:"site_dir"},{default:kt((()=>[xt("div",Mi,[gt(a,{value:Ct(d).site_dir,"onUpdate:value":t[1]||(t[1]=e=>Ct(d).site_dir=e),disabled:Ct(i),placeholder:"Enter the path: /text/，/test/api"},null,8,["value","disabled"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.UserName"),path:"username"},{default:kt((()=>[xt("div",qi,[gt(a,{value:Ct(d).username,"onUpdate:value":t[2]||(t[2]=e=>Ct(d).username=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Password"),path:"password"},{default:kt((()=>[xt("div",ji,[gt(a,{value:Ct(d).password,"onUpdate:value":t[3]||(t[3]=e=>Ct(d).password=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),gt(s,{class:"mt-4px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.0")),1),xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.1")),1)])),_:1})])}}}),Ai=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),{keys:i,table:n,columns:s}=J([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:a("Site.TableRow.Path"),ellipsis:{tooltip:{width:"trigger"}}},ne({width:130,options:e=>[{label:a("Site.TableOP.Edit"),onClick:()=>{m(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{k({title:`${a("Site.TableOP.Delete")} [${e.name}]`,content:a("Site.Batch.DeleteDomain.Content1"),onConfirm:async({hide:t})=>{await Fe({id:l.id,name:e.name}),u(),t()}})}}]})]),o=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),columns:[s.value[1]],api:e=>Fe({id:l.id,name:e.name},!1),done:()=>{u()}}}],{loading:r,setLoading:d}=ae(),u=async()=>{try{d(!0);const{message:e}=await Xe({id:l.id});if(y(e)){n.data=[];for(const[t,a]of Object.entries(e))if(l.name===t){n.data=a;break}}}finally{i.value=[],d(!1)}},c=U(a("Site.Config.LimitAccess.Add"),{row:void 0,siteId:l.id,isEdit:!1,getList:u}),p=()=>{c.data.isEdit=!1,c.title=a("Site.Config.LimitAccess.Add"),c.show=!0},m=e=>{c.data.row=e,c.data.isEdit=!0,c.title=a("Site.Config.LimitAccess.Edit"),c.show=!0};return u(),t({init:u}),(e,t)=>{const a=P,l=Q,d=Z,u=X,m=Xt,h=E;return yt(),bt("div",null,[gt(u,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:p},{default:kt((()=>[$t(St(e.$t("Site.Config.LimitAccess.Add")),1)])),_:1})])),table:kt((()=>[gt(l,{"checked-row-keys":Ct(i),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Pt(i)?i.value=e:null),"row-key":"name",loading:Ct(r),"max-height":440,data:Ct(n).data,columns:Ct(s)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:kt((()=>[gt(d,{"checked-row-keys":Ct(i),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Pt(i)?i.value=e:null),"row-key":"name",data:Ct(n).data,options:o},null,8,["checked-row-keys","data"])])),_:1}),gt(m,{class:"mt-16px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.0")),1),xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.1")),1)])),_:1}),gt(h,{show:Ct(c).show,"onUpdate:show":t[2]||(t[2]=e=>Ct(c).show=e),title:Ct(c).title,data:Ct(c).data,width:480,footer:!0,component:Oi},null,8,["show","title","data"])])}}}),Bi={class:"p-20px"},Ii={class:"w-280px"},Hi={class:"w-280px"},zi={class:"w-280px"},Ni=dt({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=vt(),l=e,{isEdit:i,siteName:n,row:s,getList:o}=l.data,r=ct(null),d=Tt({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:a("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:a("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:a("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...Et(d),dir:d.dir.replace(/\/$/,"")+"/",website:n});return i&&s&&(d.deny_name=s.name,d.suffix=s.suffix,d.dir=s.dir),t({onConfirm:async({hide:e})=>{await(r.value?.validate()),i?await Ge(c()):await Ze(c()),o?.(),e()}}),(e,t)=>{const a=R,l=zt,n=Nt,s=Xt;return yt(),bt("div",Bi,[gt(n,{ref_key:"formRef",ref:r,model:Ct(d),rules:u},{default:kt((()=>[gt(l,{label:e.$t("Site.TableRow.Name"),path:"deny_name"},{default:kt((()=>[xt("div",Ii,[gt(a,{value:Ct(d).deny_name,"onUpdate:value":t[0]||(t[0]=e=>Ct(d).deny_name=e),disabled:Ct(i),placeholder:e.$t("Site.Placeholder.Index_1")},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.TableRow.Suffix"),path:"suffix"},{default:kt((()=>[xt("div",Hi,[gt(a,{value:Ct(d).suffix,"onUpdate:value":t[1]||(t[1]=e=>Ct(d).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.TableRow.Path"),path:"dir"},{default:kt((()=>[xt("div",zi,[gt(a,{value:Ct(d).dir,"onUpdate:value":t[2]||(t[2]=e=>Ct(d).dir=e),placeholder:e.$t("Site.Placeholder.Index_3")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),gt(s,{class:"mt-4px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.PHP.index_72")),1),xt("li",null,St(e.$t("Site.PHP.index_73")),1),xt("li",null,St(e.$t("Site.PHP.index_74")),1),xt("li",null,St(e.$t("Site.PHP.index_75")),1),xt("li",null,St(e.$t("Site.PHP.index_76")),1)])),_:1})])}}}),Vi=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{data:l}=Ua(),{keys:i,table:n,columns:s}=J([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:a("Site.TableRow.Path"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:a("Site.TableRow.Suffix"),ellipsis:{tooltip:{width:"trigger"}}},ne({width:130,options:e=>[{label:a("Site.TableOP.Edit"),onClick:()=>{m(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{k({title:`${a("Site.TableOP.Delete")} [${e.name}]`,content:a("Site.Batch.DeleteDomain.Content1"),onConfirm:async({hide:t})=>{await Je({website:l.name,deny_name:e.name}),u(),t()}})}}]})]),o=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),columns:[s.value[1]],api:e=>Je({website:l.name,deny_name:e.name},!1),done:()=>{u()}}}],{loading:r,setLoading:d}=ae(),u=async()=>{try{d(!0);const{message:e}=await Qe({website:l.name});n.data=S(e)?e:[]}finally{i.value=[],d(!1)}},c=U(a("Site.Config.LimitAccess.Add"),{row:void 0,siteName:l.name,isEdit:!1,getList:u}),p=()=>{c.data.row=void 0,c.data.isEdit=!1,c.title=a("Site.Config.LimitAccess.Add"),c.show=!0},m=e=>{c.data.row=e,c.data.isEdit=!0,c.title=a("Site.Config.LimitAccess.Edit"),c.show=!0};return u(),t({init:u}),(e,t)=>{const a=P,l=Q,d=Z,u=X,m=Xt,h=E;return yt(),bt("div",null,[gt(u,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:p},{default:kt((()=>[$t(St(e.$t("Site.Config.LimitAccess.Add")),1)])),_:1})])),table:kt((()=>[gt(l,{"checked-row-keys":Ct(i),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Pt(i)?i.value=e:null),"row-key":"name",loading:Ct(r),"max-height":440,data:Ct(n).data,columns:Ct(s)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:kt((()=>[gt(d,{"checked-row-keys":Ct(i),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Pt(i)?i.value=e:null),"row-key":"name",data:Ct(n).data,options:o},null,8,["checked-row-keys","data"])])),_:1}),gt(m,{class:"mt-16px"},{default:kt((()=>[xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.2"))+" |",1),xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.3")),1),xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.4")),1),xt("li",null,St(e.$t("Site.Config.LimitAccess.Tips.5")),1)])),_:1}),gt(h,{show:Ct(c).show,"onUpdate:show":t[2]||(t[2]=e=>Ct(c).show=e),title:Ct(c).title,data:Ct(c).data,width:480,footer:!0,component:Ni},null,8,["show","title","data"])])}}}),Ki={class:"w-300px"},Fi={class:"w-300px"},Xi={class:"w-300px"},Gi={class:"flex flex-col"},Zi=xt("br",null,null,-1),Ji=dt({__name:"form",props:{site:{}},emits:["changeHotlink"],setup(e,{expose:t,emit:a}){const{t:l}=vt(),i=a,n=ut(e,"site"),s=ct(null),o=Tt({fix:"",domains:"",return_rule:"",status:!1,http_status:!1}),r={fix:{trigger:["blur","change"],validator:()=>""!==o.fix.trim()||new Error(l("Site.RulesError.Suffix"))},return_rule:{trigger:["blur","change"],validator:()=>""!==o.return_rule.trim()||new Error(l("Site.RulesError.AntiTheft"))}},d=()=>{c()},u=()=>{c()},c=async()=>{await(s.value?.validate()),await Ye({id:n.value.id,name:n.value.name,fix:o.fix,domains:o.domains.trim().split("\n").join(","),return_rule:o.return_rule,status:o.status,http_status:o.http_status}),i("changeHotlink",o.status),p()},p=async()=>{const{message:e}=await et({id:n.value.id,name:n.value.name});y(e)&&(o.fix=e.fix,o.domains=e.domains.split(",").join("\n"),o.return_rule=e.return_rule,o.status=e.status,o.http_status="true"===e.http_status||!0===e.http_status)};return p(),t({init:p}),(e,t)=>{const a=R,l=zt,i=Qt,n=P,p=Nt,m=Xt;return yt(),bt("div",null,[gt(p,{ref_key:"formRef",ref:s,class:"px-8px",model:Ct(o),rules:r},{default:kt((()=>[gt(l,{label:e.$t("Site.Lable.Suffix"),path:"fix"},{default:kt((()=>[xt("div",Ki,[gt(a,{value:Ct(o).fix,"onUpdate:value":t[0]||(t[0]=e=>Ct(o).fix=e),disabled:Ct(o).status,placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Access")},{default:kt((()=>[xt("div",Fi,[gt(a,{value:Ct(o).domains,"onUpdate:value":t[1]||(t[1]=e=>Ct(o).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1},8,["label"]),gt(l,{label:e.$t("Site.Lable.Response"),path:"return_rule"},{default:kt((()=>[xt("div",Xi,[gt(a,{value:Ct(o).return_rule,"onUpdate:value":t[2]||(t[2]=e=>Ct(o).return_rule=e),disabled:Ct(o).status,placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),gt(l,{label:" "},{default:kt((()=>[xt("div",Gi,[gt(i,{checked:Ct(o).status,"onUpdate:checked":[t[3]||(t[3]=e=>Ct(o).status=e),d]},{default:kt((()=>[$t(St(e.$t("Site.Config.HotlinkConfig.Protection")),1)])),_:1},8,["checked"]),gt(i,{checked:Ct(o).http_status,"onUpdate:checked":[t[4]||(t[4]=e=>Ct(o).http_status=e),u],class:"mt-16px"},{default:kt((()=>[$t(St(e.$t("Site.Config.HotlinkConfig.HTTP")),1)])),_:1},8,["checked"])])])),_:1}),gt(l,{label:" ","show-feedback":!1},{default:kt((()=>[gt(n,{type:"primary",onClick:c},{default:kt((()=>[$t(St(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"]),gt(m,{class:"mt-20px"},{default:kt((()=>[xt("li",null,[$t(St(e.$t("Site.Config.HotlinkConfig.Tips.0")),1),Zi,$t(" "+St(e.$t("Site.Config.HotlinkConfig.Tips.1")),1)]),xt("li",null,St(e.$t("Site.Config.HotlinkConfig.Tips.2")),1),xt("li",null,St(e.$t("Site.Config.HotlinkConfig.Tips.3")),1)])),_:1})])}}}),Qi={class:"pt-8px"},Yi=dt({__name:"index",setup(e,{expose:t}){const{data:a}=Ua(),l=ct();return t({init:async()=>{l.value.init()}}),(e,t)=>(yt(),bt("div",Qi,[gt(Ji,{ref_key:"formRef",ref:l,site:Ct(a)},null,8,["site"])]))}}),en=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{config:l}=Ua(),i=ct("access"),n=ct(),s=[{key:"access",label:a("Site.Config.Limit"),component:Ai},{key:"deny",label:a("Site.Config.Deny"),component:Vi},{key:"hotlink",label:a("Site.Config.Hotlink"),component:Yi}];return i.value=l.subMenu||"access",l.subMenu="",t({init:()=>{i.value="access",Dt((()=>{n.value?.init()}))}}),(e,t)=>{const a=Ht;return yt(),Ut(a,{value:Ct(i),"onUpdate:value":t[0]||(t[0]=e=>Pt(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),tn=dt({__name:"index",setup(e,{expose:t}){const{data:a}=Ua(),l=ct("None"),{loading:i,setLoading:n}=ae(),s=async()=>{try{n(!0);const{message:e}=await tt({siteName:a.name});y(e)&&(l.value=z(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=oa,n=ra;return yt(),Ut(n,{class:"h-560px",show:Ct(i)},{default:kt((()=>[gt(a,{log:Ct(l)},null,8,["log"])])),_:1},8,["show"])}}}),an=dt({__name:"index",setup(e,{expose:t}){const{data:a}=Ua(),l=ct("None"),{loading:i,setLoading:n}=ae(),s=async()=>{try{n(!0);const{message:e}=await at({siteName:a.name});y(e)&&(l.value=z(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=oa,n=ra;return yt(),Ut(n,{class:"h-560px",show:Ct(i)},{default:kt((()=>[gt(a,{log:Ct(l)},null,8,["log"])])),_:1},8,["show"])}}}),ln=dt({__name:"logs",props:{data:{}},setup(e){const t=e,{type:a,path:l}=t.data,i=ct(""),{loading:n,setLoading:s}=ae();return(async()=>{try{s(!0);const{message:e}=await lt({type:a,path:l});y(e)&&(i.value=e.result)}finally{s(!1)}})(),(e,t)=>{const a=oa,l=ra;return yt(),Ut(l,{class:"w-650px h-550px bg-#282C34",show:Ct(n)},{default:kt((()=>[gt(a,{log:Ct(i)},null,8,["log"])])),_:1},8,["show"])}}}),nn={class:"text-error"},sn={class:"w-400px p-20px"},on={class:"mb-16px"},rn=dt({__name:"index",setup(e,{expose:t}){const a=W(),{t:l}=vt(),{data:i}=Ua(),n=pt((()=>{let e="";switch(a.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${i.name}${e}`})),s=pt((()=>{const e=n.value.split("/");return e[e.length-1]})),o=()=>{k({title:l("Site.Config.LogsConfig.ScanTitle"),content:`${l("Site.Config.LogsConfig.ScanContent")} [${s.value}] ${l("Site.Config.LogsConfig.ScanContent1")}`,onConfirm:async({hide:e})=>{await it({path:n.value}),e(),u()}})},r=ct(!1),d=ct(0),u=async()=>{r.value=!0,c()},c=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await nt({path:n.value});y(e)&&(d.value=e.result,d.value>=100?(C.success(l("Site.Config.LogsConfig.Complete")),r.value=!1,d.value=0,v(),clearTimeout(t)):c(1e3))}),e)},p=e=>{w({title:`[${e}] ${l("Site.Config.LogsConfig.Details")}`,data:{type:e,path:n.value},component:ln})},{table:m,columns:h}=J([{key:"start_time",title:"Date"},{key:"time",title:l("Site.DelSite.Time"),render:e=>`${e.time.substring(0,4)} s`},{key:"xss",title:l("Site.TableRow.XSS"),render:e=>e.xss>0?gt("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:l("Site.TableRow.SQL"),render:e=>e.sql>0?gt("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:l("Site.TableRow.Scan"),render:e=>e.san>0?gt("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:l("Site.TableRow.PHP"),render:e=>e.php>0?gt("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:l("Site.TableRow.IPTop"),render:e=>e.ip>0?gt(b,{onClick:()=>{p("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:l("Site.TableRow.URLTop"),render:e=>e.url>0?gt(b,{onClick:()=>{p("url")}},{default:()=>[e.url]}):e.url}]),{loading:g,setLoading:f}=ae(),v=async()=>{try{f(!0);const{message:e}=await st({path:n.value});y(e)&&(m.data=[e])}finally{f(!1)}},_=()=>{v()};return _(),t({init:_}),(e,t)=>{const a=P,l=Q,i=X,n=Xt,s=da,u=E;return yt(),bt("div",null,[gt(i,null,{toolsLeft:kt((()=>[gt(a,{type:"primary",onClick:o},{default:kt((()=>[$t(St(e.$t("Site.Config.LogsConfig.Scan")),1)])),_:1})])),table:kt((()=>[gt(l,{loading:Ct(g),"loading-num":1,data:Ct(m).data,columns:Ct(h)},null,8,["loading","data","columns"])])),_:1}),gt(n,{class:"mt-16px"},{default:kt((()=>[xt("li",null,[$t(St(e.$t("Site.Config.LogsConfig.Tips.0"))+" ",1),xt("span",nn,St(e.$t("Site.Config.LogsConfig.Tips.1")),1),$t(") ")]),xt("li",null,St(e.$t("Site.Config.LogsConfig.Tips.2")),1),xt("li",null,St(e.$t("Site.Config.LogsConfig.Tips.3"))+")",1),xt("li",null,St(e.$t("Site.Config.LogsConfig.Tips.4")),1),xt("li",null,[gt(b,{href:"https://forum.aapanel.com/d/3351-nginx-waf-instructions",target:"_blank"},{default:kt((()=>[$t(St(e.$t("Site.Config.LogsConfig.Tips.5")),1)])),_:1}),$t(" "+St(e.$t("Site.Config.LogsConfig.Tips.6")),1)])])),_:1}),gt(u,{show:Ct(r),"onUpdate:show":t[0]||(t[0]=e=>Pt(r)?r.value=e:null)},{default:kt((()=>[xt("div",sn,[xt("div",on,St(e.$t("Site.Config.LogsConfig.Tips.7")),1),gt(s,{type:"line",status:"success",height:24,percentage:Ct(d),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),dn=dt({__name:"index",setup(e,{expose:t}){const{t:a}=vt(),{config:l}=Ua(),i=ct("access"),n=ct(),s=[{key:"access",label:a("Site.Config.LogsConfig.Access"),component:tn},{key:"error",label:a("Site.Config.LogsConfig.Error"),component:an},{key:"security",label:a("Site.Config.LogsConfig.Security"),component:rn}];return i.value=l.subMenu||"access",l.subMenu="",t({init:()=>{i.value="access",Dt((()=>{n.value?.init()}))}}),(e,t)=>{const a=Ht;return yt(),Ut(a,{value:Ct(i),"onUpdate:value":t[0]||(t[0]=e=>Pt(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),un=dt({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=vt(),l=W(),{siteName:i}=ee(l),n=ht((()=>x((()=>t.import("./old-legacy3.js?v=1723125373998")),void 0))),s=e,{siteInfo:o,config:r}=s;i.value=s.siteInfo.name;const d=ct();o&&_t(Wa,{data:o,config:r});const u=ct("domain"),c=[{key:"domain",label:a("Site.Config.Manager"),component:Ia},{key:"wordpress",label:a("Site.Config.Setting"),component:Ui},{key:"security",label:a("Site.Config.Security"),component:en},{key:"config",label:a("Site.Config.Conf"),component:Hl},{key:"ssl",label:()=>gt(Rt,null,[a("Site.Config.SSL"),gt(ua,{type:"primary",size:"small",bordered:!1,class:"ml-10px"},{default:()=>[$t("lowest price $2.9")]})]),component:n},{key:"php",label:a("Site.Lable.PHPVersion"),component:vi},{key:"logs",label:a("Site.Config.Response"),component:dn}];return u.value=r.menu||"domain",r.menu="",Wt((()=>{window.siteConfigInit=d.value.init})),(e,t)=>{const a=Bt;return yt(),Ut(a,{value:Ct(u),"onUpdate:value":t[0]||(t[0]=e=>Pt(u)?u.value=e:null),ref_key:"tabsRef",ref:d,data:c},null,8,["value"])}}}),cn={class:"pt-50px pb-40px"},pn={class:"mb-24px text-center text-22px font-bold"},mn={class:"mb-16px"},hn={class:"ul-style"},gn={class:"ml-4px"},fn={class:"ml-4px"},vn={class:"ml-4px"},_n={class:"ml-4px"},wn={class:"text-center text-14px color-desc"},yn={class:"text-center my-24px"},bn={class:"flex justify-center"},xn={class:"w-76%"},kn=q(dt({__name:"transition",setup(e){const t=()=>{O({source:180})};return(e,a)=>{const l=I,i=P,n=ca;return yt(),bt("div",cn,[xt("div",pn,St(e.$t("WP.Transition.index_1")),1),xt("div",mn,[xt("ul",hn,[xt("li",null,[gt(l,{name:"wp-install",size:"22"}),xt("span",gn,St(e.$t("WP.Transition.index_2")),1)]),xt("li",null,[gt(l,{name:"wp-safe",size:"22"}),xt("span",fn,St(e.$t("WP.Transition.index_3")),1)]),xt("li",null,[gt(l,{name:"wp-backup",size:"22"}),xt("span",vn,St(e.$t("WP.Transition.index_4")),1)]),xt("li",null,[gt(l,{name:"wp-cache",size:"22"}),xt("span",_n,St(e.$t("WP.Transition.index_5")),1)])])]),xt("div",wn,St(e.$t("WP.Transition.index_6")),1),xt("div",yn,[gt(i,{type:"primary",class:"h-36px text-14px",onClick:t},{default:kt((()=>[$t(St(e.$t("WP.Transition.index_7")),1)])),_:1})]),xt("div",bn,[xt("div",xn,[gt(n,{width:"100%",src:Ct("/static/vite/images/preview.png")},null,8,["src"])])])])}}}),[["__scopeId","data-v-b49ea418"]]),Sn=xt("span",{class:"mx-4px"},"|",-1),Cn={class:"w-860px h-700px"},Pn=dt({__name:"index",setup(e){const a=ht((()=>x((()=>t.import("./index-legacy149.js?v=1723125373998")),void 0))),l=ht((()=>x((()=>t.import("./index-legacy150.js?v=1723125373998")),void 0))),i=ht((()=>x((()=>t.import("./index-legacy151.js?v=1723125373998")),void 0))),n=ht((()=>x((()=>t.import("./index-legacy152.js?v=1723125373998")),void 0))),s=ht((()=>x((()=>t.import("./index-legacy153.js?v=1723125373998")),void 0))),o=ht((()=>x((()=>t.import("./index-legacy154.js?v=1723125373998")),void 0))),{t:r}=vt(),d=W(),u=j(),{web:c}=ee(d),{isPro:p}=ee(u),m=U(r("WP.Migrate.Title")),h=U(r("WP.Add.Title")),g=U(r("Site.Config.Sets")),f=()=>{h.show=!0},v=()=>{m.show=!0},w=()=>{g.show=!0},k=Tt({show:!1,title:"",siteInfo:null,config:{menu:"",subMenu:""}}),C=(e,t={})=>{k.title=`${r("Site.Cert.Modification")} [${e.name}] -- ${r("Site.Cert.Added")} [${e.addtime}]`,k.siteInfo=e,k.config=Object.assign({menu:"",subMenu:""},t),k.show=!0},{keys:$,table:T,columns:R}=J([{type:"selection",width:40},{key:"name",title:r("Site.TableRow.SiteName"),width:"12%",minWidth:120,ellipsis:{tooltip:!0},render:e=>gt(Ta,{row:e,onClick:()=>{C(e)}},null)},oe({width:"8%",minWidth:90,checkedLabel:"Running",uncheckedLabel:"Stopped",confirm:(e,t)=>({title:`${"1"===e?"Start":"Stop "} site [${t.name}]`,content:()=>{const t=r("Site.Cert.StatusConfirm.Start"),a=r("Site.Cert.StatusConfirm.Stop");return"1"===e?t:a},onConfirm:async({hide:a})=>{await ot("1"===e,{id:t.id,name:t.name}),t.status="1"===e?"1":"0",a()}})}),{key:"backup_count",title:r("Site.TableRow.BackUp"),width:"8%",minWidth:80,render:e=>gt(Ra,{row:e},null)},re(),se({key:"cache_status",title:"Cache",width:"6%",minWidth:60,onClick:async(e,t)=>{await ze({version:t.php_version,sitename:t.name,act:e})}}),ne({title:r("WP.TableRow.Setting"),align:"center",width:"350",options:e=>[{label:"00"==e.wp_version?"Static":e.wp_version,width:"30px",onClick:()=>{C(e,{menu:"wordpress"})}},{label:r("WP.index_1"),onClick:()=>{D(e)}},{label:r("WP.TableRow.Plugin"),onClick:()=>{C(e,{menu:"wordpress",subMenu:"plugin"})}},{label:r("WP.TableRow.Theme"),onClick:()=>{C(e,{menu:"wordpress",subMenu:"theme"})}},{label:r("WP.TableRow.Protection"),onClick:()=>{q(e)}},{label:r("WP.TableRow.Integrity"),onClick:()=>{B(e)}}]}),{key:"php_version",title:r("Site.TableRow.PHP"),width:"6%",minWidth:60,render:e=>gt(La,{row:e,onClick:()=>{C(e,{menu:"php"})}},null)},Pa({onClick:e=>{C(e,{menu:"ssl"})}}),$a({onClick:e=>{C(e)}})]),L=U(r("WP.index_2")),D=async e=>{L.data.row=e,L.show=!0},M=U(),q=async e=>{M.title=`${r("WP.Config.Protection.Title")} [${e.name}]`,M.data.site=e,M.show=!0},O=U(),B=async e=>{O.title=`${r("WP.Integrity.Title")} [${e.name}]`,O.data.site=e,O.show=!0},I=[{key:"enable",type:"confirm",label:r("Site.Batch.EnableWeb.Label"),confirm:{title:r("Site.Batch.EnableWeb.Title"),desc:r("Site.Batch.EnableWeb.Content"),columns:[R.value[1]],api:e=>ot(!0,{id:e.id,name:e.name},!1),done:()=>{ie()}}},{key:"disable",type:"confirm",label:r("Site.Batch.DisableWeb.Label"),confirm:{title:r("Site.Batch.DisableWeb.Title"),desc:r("Site.Batch.DisableWeb.Content"),columns:[R.value[1]],api:e=>ot(!1,{id:e.id,name:e.name},!1),done:()=>{ie()}}},{key:"backup",type:"confirm",label:r("Site.Batch.BackupWeb.Label"),confirm:{title:r("Site.Batch.BackupWeb.Title"),desc:r("Site.Batch.BackupWeb.Content"),columns:[R.value[1]],api:e=>wa({s_id:e.id,bak_type:3},!1),done:()=>{ie()}}},{key:"delete",label:r("Site.Batch.DeleteWeb.Label"),onBatch:e=>{Ca(e)}}],{loading:H,setLoading:z}=ae(!0),le=Tt({p:1,limit:10,table:"sites",search:""}),ie=async()=>{try{z(!0);const{message:t}=await(e=Et(le),_.post("/data?action=getData",{...e,table:"sites",project_type:"WP2"}));y(t)?(T.data=S(t.data)?t.data:[],T.total=N(t.page)):(T.data=[],T.total=0)}finally{$.value=[],z(!1)}var e};return At((()=>d.isRefresh),(e=>{e&&(d.setRefresh(!1),ie())})),(async()=>{try{await d.getConfig(),d.web.setup?ie():(z(!1),te())}catch{z(!1)}})(),(e,t)=>{const r=b,d=P,u=Y,_=Q,y=Z,x=G,S=X,C=E,W=F,U=K;return yt(),Ut(U,null,{default:kt((()=>[Ct(p)?(yt(),Ut(W,{key:0,install:Ct(c).setup},{desc:kt((()=>[xt("span",null,St(e.$t("Site.PHP.index_1")),1),gt(r,{class:"ml-4px",onClick:t[0]||(t[0]=e=>Ct(V)("nginx"))},{default:kt((()=>[$t(St(e.$t("Site.PHP.index_2")),1)])),_:1}),Sn,gt(r,{onClick:t[1]||(t[1]=e=>Ct(V)("apache"))},{default:kt((()=>[$t(St(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:kt((()=>[gt(S,{class:"p-16px",feedback:!0},{toolsLeft:kt((()=>[gt(d,{type:"primary",onClick:f},{default:kt((()=>[$t(St(e.$t("WP.index_5")),1)])),_:1}),gt(d,{onClick:v},{default:kt((()=>[$t(St(e.$t("WP.Migrate.Title")),1)])),_:1}),Ct(A)?(yt(),Ut(d,{key:0,onClick:w},{default:kt((()=>[$t(St(e.$t("Site.Config.Sets")),1)])),_:1})):Lt("",!0)])),toolsRight:kt((()=>[gt(u,{value:Ct(le).search,"onUpdate:value":t[2]||(t[2]=e=>Ct(le).search=e),placeholder:e.$t("WP.index_4"),onSearch:ie},null,8,["value","placeholder"])])),table:kt((()=>[gt(_,{"checked-row-keys":Ct($),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>Pt($)?$.value=e:null),loading:Ct(H),data:Ct(T).data,columns:Ct(R)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:kt((()=>[gt(y,{"checked-row-keys":Ct($),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>Pt($)?$.value=e:null),data:Ct(T).data,options:I},null,8,["checked-row-keys","data"])])),pageRight:kt((()=>[gt(x,{page:Ct(le).p,"onUpdate:page":t[5]||(t[5]=e=>Ct(le).p=e),"page-size":Ct(le).limit,"onUpdate:pageSize":t[6]||(t[6]=e=>Ct(le).limit=e),"item-count":Ct(T).total,"store-key":"wp-toolkit",onRefresh:ie},null,8,["page","page-size","item-count"])])),_:1}),gt(C,{show:Ct(h).show,"onUpdate:show":t[7]||(t[7]=e=>Ct(h).show=e),title:Ct(h).title,width:640,height:590,footer:!0,component:Ct(a)},null,8,["show","title","component"]),gt(C,{show:Ct(m).show,"onUpdate:show":t[8]||(t[8]=e=>Ct(m).show=e),title:Ct(m).title,width:640,"min-height":205,footer:!1,component:Ct(l)},null,8,["show","title","component"]),gt(C,{show:Ct(L).show,"onUpdate:show":t[9]||(t[9]=e=>Ct(L).show=e),title:Ct(L).title,data:Ct(L).data,width:640,"min-height":268,footer:!0,component:Ct(i)},null,8,["show","title","data","component"]),gt(C,{show:Ct(M).show,"onUpdate:show":t[10]||(t[10]=e=>Ct(M).show=e),title:Ct(M).title,data:Ct(M).data,width:600,"min-height":268,component:Ct(n)},null,8,["show","title","data","component"]),gt(C,{show:Ct(O).show,"onUpdate:show":t[11]||(t[11]=e=>Ct(O).show=e),title:Ct(O).title,data:Ct(O).data,width:600,"min-height":190,component:Ct(s)},null,8,["show","title","data","component"]),gt(C,{show:Ct(g).show,"onUpdate:show":t[12]||(t[12]=e=>Ct(g).show=e),title:Ct(g).title,width:700,"min-height":400,component:Ct(o)},null,8,["show","title","component"]),gt(C,{show:Ct(k).show,"onUpdate:show":t[13]||(t[13]=e=>Ct(k).show=e),title:Ct(k).title},{default:kt((()=>[xt("div",Cn,[gt(un,{"site-info":Ct(k).siteInfo,config:Ct(k).config},null,8,["site-info","config"])])])),_:1},8,["show","title"])])),_:1},8,["install"])):(yt(),Ut(kn,{key:1}))])),_:1})}}}),$n=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"}));e("z",$n)}}}));
