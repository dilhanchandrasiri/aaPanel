import{N as e,j as t,_ as a,bb as l,a as s,d0 as i,G as n,cG as o,L as r}from"./index.js?v=1723125373998";import{b4 as d,b5 as u}from"./site.js?v=1723125373998";import{a as p,_ as m}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1723125373998";import{c}from"./file2.js?v=1723125373998";import{l as v,ad as S,r as x,k as f,S as h,Z as _,_ as g,P as D,a3 as b,F as y,ag as w,V as C,q as $,W as T,af as j,aj as k,a5 as z,a6 as R,b as M,$ as P,az as I}from"./vue.js?v=1723125373998";import{_ as U}from"./Ellipsis.js?v=1723125373998";import{u as E}from"./use-theme-vars.js?v=1723125373998";import{_ as F,a as G}from"./Checkbox.js?v=1723125373998";import"./pinia.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./DataTable.js?v=1723125373998";import"./Select.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./omit.js?v=1723125373998";const N=e=>(z("data-v-8573d287"),e=e(),R(),e),q={class:"p-24px"},B={class:"flex"},L={class:"flex-1 ml-14px pt-6px"},O={class:"text-19px font-bold text-#111"},V={class:"site-content mt-24px"},W={class:"site-size"},Z={class:"site-title"},A={class:"site-path"},H={class:"value"},J=N((()=>g("span",null,"(",-1))),K={class:"font-bold text-error"},Q=N((()=>g("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))),X={key:1},Y=N((()=>g("span",null,")",-1))),ee={key:0},te={class:"site-time"},ae={key:0,class:"site-db"},le={class:"db-name"},se={class:"db-size"},ie={class:"db-time"},ne={class:"mt-24px text-13px text-error"},oe={key:0},re=N((()=>g("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),de={key:1,class:"mt-6px"},ue=N((()=>g("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),pe={key:2,class:"mt-6px text-#333"},me={class:"text-error font-bold"},ce={key:3,class:"mt-6px"},ve=s(v({__name:"verify",props:{data:{}},emits:["setConfirm"],setup(s,{expose:i,emit:n}){const{t:o}=S(),r=s,u=n,{rows:p,type:m,delSite:v}=r.data,z=x(!0),R=x(!0),M=f((()=>!!m.find((e=>"database"===e)))),P=f((()=>!!m.find((e=>"path"===e)))),I=x([]),E=x(5);return(()=>{u("setConfirm",{type:"error",disabled:!0,text:o("Site.DelSite.ContentText16",[E.value])});const e=setInterval((()=>{E.value--,u("setConfirm",{text:o("Site.DelSite.ContentText16",[E.value])}),0===E.value&&(clearInterval(e),u("setConfirm",{disabled:!1,text:o("Site.DelSite.ContentText16")}))}),1e3)})(),(async()=>{const{message:e}=await d({ids:p.map((e=>e.id))});t(e)&&(I.value=e.data.map((e=>{const{database:a}=e;return t(a)&&(a.addtime_show=a.addtime.split(" ")[0],a.is_time_rule=Math.round(Date.now()/1e3)-a.st_time>2592e3&&a.total>10240),{...e,addtime_show:e.addtime.split(" ")[0],is_time_rule:Math.round(Date.now()/1e3)-e.st_time>2592e3&&e.total>10240}})))})(),(async()=>{const{message:e}=await c();t(e)&&(z.value=e.status,R.value=e.status_db)})(),i({onConfirm:async({hide:e})=>{await(null==v?void 0:v(e))}}),(s,i)=>{const n=a,o=U,r=l;return h(),_("div",q,[g("div",B,[D(n,{name:"base-warning",size:"34",color:"#f0a020"}),g("div",L,[g("div",O,b(s.$t("Site.DelSite.ContentText7")),1)])]),g("div",V,[(h(!0),_(y,null,w(T(I),(a=>(h(),_("div",{key:a.name,class:"content-item"},[g("div",W,[g("div",Z,[D(o,null,{default:C((()=>[$(b(s.$t("Site.DelSite.Site"))+": "+b(a.name),1)])),_:2},1024)]),D(r,{trigger:"hover"},{trigger:C((()=>[g("div",A,[g("div",null,b(s.$t("Site.DelSite.Path"))+":",1),g("div",H,b(a.path),1),g("div",null,[J,a.limit?(h(),_(y,{key:0},[g("span",K,b(s.$t("Site.DelSite.More50")),1),Q],64)):(h(),_("span",X,b(T(e)(a.total)),1)),Y])])])),default:C((()=>[g("div",null,[a.limit?(h(),_("p",ee,b(s.$t("Site.DelSite.ContentText8")),1)):j("",!0),g("p",null,[g("span",null,b(s.$t("Site.DelSite.Directory"))+": "+b(a.path),1),g("span",null," ("+b((a.limit?"greater than ":"")+T(e)(a.total))+")",1)])])])),_:2},1024),g("div",te,[D(r,{trigger:"hover",disabled:!a.is_time_rule},{trigger:C((()=>[g("div",null,[g("span",null,b(s.$t("Site.DelSite.Create"))+": ",1),g("span",{class:k({"text-error":a.is_time_rule})},b(a.addtime_show),3)])])),default:C((()=>[g("div",null,[g("p",null,b(s.$t("Site.DelSite.ContentText9")),1),g("p",null,b(s.$t("Site.DelSite.Time"))+": "+b(a.addtime_show),1)])])),_:2},1032,["disabled"])])]),T(M)&&T(t)(a.database)?(h(),_("div",ae,[g("div",le,[D(o,null,{default:C((()=>[$(b(s.$t("Site.DelSite.DB"))+": "+b(a.name),1)])),_:2},1024)]),g("div",se,[D(r,{trigger:"hover"},{trigger:C((()=>[$(b(s.$t("Site.DelSite.Size"))+": "+b(T(e)(a.database.total)),1)])),default:C((()=>[g("div",null,[g("p",null,b(s.$t("Site.DelSite.ContentText10")),1),g("p",null,b(s.$t("Site.DelSite.Database"))+": "+b(T(e)(a.database.total)),1)])])),_:2},1024)]),g("div",ie,[D(r,{trigger:"hover",disabled:!a.database.is_time_rule},{trigger:C((()=>[g("div",null,[g("span",null,b(s.$t("Site.DelSite.Create"))+": ",1),g("span",{class:k({"text-error":a.database.is_time_rule})},b(a.addtime_show),3)])])),default:C((()=>[g("div",null,[g("p",null,b(s.$t("Site.DelSite.ContentText11")),1),g("p",null,b(s.$t("Site.DelSite.Time"))+": "+b(a.database.addtime_show),1)])])),_:2},1032,["disabled"])])])):j("",!0)])))),128))]),g("div",ne,[T(M)&&!T(R)?(h(),_("div",oe,[re,g("span",null,b(s.$t("Site.DelSite.ContentText12")),1)])):j("",!0),T(P)&&!T(z)?(h(),_("div",de,[ue,g("span",null,b(s.$t("Site.DelSite.ContentText13")),1)])):j("",!0),T(E)>0?(h(),_("div",pe,[g("span",null,b(s.$t("Site.DelSite.ContentText14")),1),g("span",me,b(T(E)),1),g("span",null,b(s.$t("Site.DelSite.Second")),1)])):(h(),_("div",ce,b(s.$t("Site.DelSite.ContentText15")),1))])])}}}),[["__scopeId","data-v-8573d287"]]),Se={class:"p-24px"},xe={class:"flex pl-12px"},fe={class:"flex-1 ml-14px pt-8px"},he={class:"text-16px font-bold text-#111"},_e={class:"mt-20px"},ge={class:"mr-8px"},De=g("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1),be={class:"flex items-center h-40px mt-24px mx-12px pl-48px bg-#f0f0f0 text-14px"},ye={class:"mx-12px"},we=g("span",null,"=",-1),Ce={class:"w-80px ml-12px"},$e=v({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:s}=S(),d=e,{rows:c}=d.data,v=E(),y=i(),w=x(null),j=x([]),k=f((()=>1===j.value.length&&"ftp"===j.value[0])),z=x(0),R=x(0),U=x(null),N=x(!1),q=x("");let B=null;const L=e=>{I((()=>{(e=>{var t;q.value=e,N.value=!0,null==(t=w.value)||t.focus(),B&&clearTimeout(B),B=window.setTimeout((()=>{N.value=!1}),3e3)})(e)}))()},O=async e=>{1===c.length?(await V(c[0],!0),y.setRefresh(!0),null==e||e()):W(e)},V=async(e,t=!1)=>{const a=j.value.reduce(((e,t)=>(e[t]=1,e)),{});return await u(Object.assign({id:e.id,webname:e.name},a),t)},W=e=>{r({title:s("Site.Cert.DelSite"),hideClose:!0,component:p,data:{title:s("Site.Cert.DelSite"),api:V,data:c,callback:t=>{e(),Z(t)}}})},Z=e=>{y.setRefresh(!0),r({title:s("Site.DelSite.DelSiteResult"),width:440,footer:!0,component:m,data:{title:s("Site.Cert.DelSite"),data:e,status:"done",columns:[{key:"name",title:s("Site.TableRow.SiteName"),ellipsis:{tooltip:{width:"trigger"}}}]}})};return U.value=null,z.value=Math.round(9*Math.random()+1),R.value=Math.round(9*Math.random()+1),t({onConfirm:async({hide:e})=>null==U.value||null==U.value?(L(s("Site.DelSite.ContentText5")),!1):U.value!==z.value+R.value?(L(s("Site.DelSite.ContentText6")),!1):void(0===j.value.length||k.value?await O(e):(r({title:1===c.length?"".concat(s("Site.DelSite.ContentText3")," [").concat(c[0].name,"]"):"".concat(s("Site.DelSite.ContentText4")),width:740,footer:!0,data:{rows:c,type:j.value,delSite:O},component:ve}),e()))}),(e,t)=>{const s=a,i=F,r=n,d=G,u=o,p=l;return h(),_("div",Se,[g("div",xe,[D(s,{name:"base-warning",size:"34",color:"#f0a020"}),g("div",fe,[g("div",he,[g("div",null,b(e.$t("Site.DelSite.ContentText1")),1),g("div",_e,b(e.$t("Site.DelSite.ContentText2")),1)]),D(d,{value:T(j),"onUpdate:value":t[0]||(t[0]=e=>M(j)?j.value=e:null)},{default:C((()=>[D(r,{size:32,class:"items-center h-24px mt-24px"},{default:C((()=>[D(i,{value:"ftp"},{default:C((()=>[$(b(e.$t("Site.DelSite.FTP")),1)])),_:1}),D(i,{value:"database"},{default:C((()=>[g("span",ge,b(e.$t("Site.DelSite.Database")),1),De])),_:1}),D(i,{value:"path"},{default:C((()=>[$(b(e.$t("Site.TableRow.Root")),1)])),_:1})])),_:1})])),_:1},8,["value"])])]),g("div",be,[g("span",null,b(e.$t("Site.DelSite.Result"))+":",1),g("span",ye,b(T(z))+" + "+b(T(R)),1),we,g("div",Ce,[D(p,{show:T(N),"onUpdate:show":t[2]||(t[2]=e=>M(N)?N.value=e:null),trigger:"manual",placement:"top-start","arrow-point-to-center":!0,style:P({"--n-color":T(v).errorColor,"--n-text-color":"#fff"})},{trigger:C((()=>[D(u,{ref_key:"inputRef",ref:w,value:T(U),"onUpdate:value":t[1]||(t[1]=e=>M(U)?U.value=e:null),size:"small","show-button":!1,placeholder:""},null,8,["value"])])),default:C((()=>[g("div",null,b(T(q)),1)])),_:1},8,["show","style"])])])])}}});export{$e as default};
