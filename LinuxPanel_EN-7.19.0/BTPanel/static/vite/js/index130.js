import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1732601582185";import{d as e,W as s,V as t,r as o,j as r,e as l,O as i,P as n,M as d,Y as p,Q as u,R as c}from"./vue.js?v=1732601582185";import{aa as m,cE as _,m as v}from"./page_layout.js?v=1732601582185";import{bL as f,bG as b}from"./naive.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./common.js?v=1732601582185";import"./public.js?v=1732601582185";const x={class:"px-20px pt-24px pb-8px"},h={class:"w-260px"},j=e({__name:"index",setup(e,{expose:j}){const{t:g}=s(),w=m(),{remoteList:y}=t(w),D=o(null),E=r({sid:y.value.length>0?y.value[0].id:null}),R=l((()=>y.value.map((a=>({label:"".concat(a.ps||a.db_host," (").concat(a.db_host,")"),value:a.id}))))),L={sid:{trigger:"change",validator:(a,e)=>null!==e||new Error(g("Database.tools.index_63"))}};return j({onConfirm:async({hide:a})=>{var e;try{await(null==(e=D.value)?void 0:e.validate());const s=(()=>{const{sid:a}=E;if(null===a)throw v.error(g("Database.tools.index_64")),new Error(g("Database.tools.index_64"));return{sid:a}})();await _(w.type,s),w.setRefresh(!0),a()}catch(s){console.error(s)}}}),(e,s)=>{const t=f,o=b,r=a;return i(),n("div",x,[d(r,{ref_key:"formRef",ref:D,model:c(E),rules:L},{default:p((()=>[d(o,{label:e.$t("Database.tools.index_76"),path:"sid"},{default:p((()=>[u("div",h,[d(t,{value:c(E).sid,"onUpdate:value":s[0]||(s[0]=a=>c(E).sid=a),class:"server-select",options:c(R)},null,8,["value","options"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}});export{j as default};
