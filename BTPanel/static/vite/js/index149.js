import{_ as e}from"./index77.js?v=1723125373998";import{_ as a}from"./index70.js?v=1723125373998";import{_ as l,a as r}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1723125373998";import{d0 as t,k as i,eF as s,cz as o,I as n,j as p,e as u,ae as d,_,bt as m,G as v,n as c,B as h}from"./index.js?v=1723125373998";import{s as f}from"./pinia.js?v=1723125373998";import{g as b,_ as g,a as w,c as x,b as P}from"./index59.js?v=1723125373998";import{ao as j}from"./site.js?v=1723125373998";import{u as S}from"./useLoading.js?v=1723125373998";import{l as k,ai as y,r as E,S as $,U as L,W as U,n as R,w as W,k as V,ad as q,f as A,V as C,_ as D,a3 as H,q as T,af as z,Z as N,P as I,b as F,D as G}from"./vue.js?v=1723125373998";import{_ as M}from"./Select.js?v=1723125373998";import{_ as B}from"./Checkbox.js?v=1723125373998";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1723125373998";import{u as Z}from"./file2.js?v=1723125373998";import{_ as J}from"./Upload2.js?v=1723125373998";import{_ as K}from"./RadioButton.js?v=1723125373998";import{b as O}from"./DataTable.js?v=1723125373998";import{_ as X}from"./InputGroupLabel.js?v=1723125373998";import{_ as Y}from"./InputGroup.js?v=1723125373998";import"./Tabs.js?v=1723125373998";import"./omit.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang2.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang3.js?v=1723125373998";import"./useTableData.js?v=1723125373998";import"./data.js?v=1723125373998";import"./Skeleton.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1723125373998";import"./site2.js?v=1723125373998";import"./useTableColumns.js?v=1723125373998";import"./Progress.js?v=1723125373998";import"./Switch.js?v=1723125373998";import"./Ellipsis.js?v=1723125373998";import"./index144.js?v=1723125373998";import"./index105.js?v=1723125373998";import"./use-theme-vars.js?v=1723125373998";import"./index73.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1723125373998";import"./Spin.js?v=1723125373998";import"./refersh.js?v=1723125373998";import"./php.js?v=1723125373998";import"./Space.js?v=1723125373998";import"./Alert.js?v=1723125373998";import"./index145.js?v=1723125373998";import"./Tag.js?v=1723125373998";import"./Image.js?v=1723125373998";import"./_createCompounder.js?v=1723125373998";import"./Empty.js?v=1723125373998";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1723125373998";const ee=k({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=t(),{phpVersion:l}=f(a),r=y(e,"value"),{loading:s,setLoading:o}=S(),n=E([]),p=e=>{l.value=e};return(async()=>{try{o(!0);const{message:e}=await j(),a=i(e)?e:[];n.value=a.reverse().filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),await R(),a.length>0&&(r.value="00"==a[0].version?"":a[0].version,l.value="00"==a[0].version?"":a[0].version)}finally{o(!1)}})(),(e,a)=>{const l=M;return $(),L(l,{value:r.value,"onUpdate:value":[a[0]||(a[0]=e=>r.value=e),p],loading:U(s),options:U(n)},null,8,["value","loading","options"])}}}),ae=k({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=t();W((()=>a.phpVersion),(e=>{p(e)}));const l=V((()=>a.phpVersion?"Not supported by current PHP":"Please select PHP version")),r=y(e,"value"),{loading:s,setLoading:o}=S(),n=E([]),p=async e=>{try{o(!0),r.value="";const{message:a}=await b({php_version_short:e});i(a)&&(n.value=a.map((e=>({label:e.version,value:e.version}))),await R(),a.length>0&&(r.value=a[0].version))}finally{o(!1)}};return a.phpVersion&&p(a.phpVersion),(e,a)=>{const t=M;return $(),L(t,{value:r.value,"onUpdate:value":a[0]||(a[0]=e=>r.value=e),loading:U(s),options:U(n),placeholder:U(l)},null,8,["value","loading","options","placeholder"])}}}),le={key:1},re=D("span",{class:"mx-4px"},"|",-1),te={class:"w-400px"},ie={class:"w-400px"},se={class:"w-230px"},oe={class:"w-230px"},ne={class:"w-400px"},pe={class:"w-230px mr-16px"},ue={class:"w-400px"},de={class:"w-400px"},_e=k({__name:"index",setup(e,{expose:i}){const{t:h}=q(),b=t(),{web:x,mysql:P,php:j}=f(b),S=E(null),k=A({domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:s(6),admin_password:o(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+s(6)+"_",enable_cache:!1,wps:!1}),y={domain:{required:!0,trigger:["blur","input"],validator:()=>""!==k.domain.trim()||new Error(h("Site.RulesError.Domain"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==k.weblog_title.trim()||new Error(h("Site.RulesError.WebTitle"))},language:{trigger:"change",validator:()=>null!==k.language||new Error(h("Site.RulesError.Language"))},php_version:{trigger:"change",validator:()=>null!==k.php_version||new Error(h("Site.RulesError.PHPVersion"))},wp_version:{trigger:"change",validator:()=>null!==k.php_version||new Error(h("Site.RulesError.WPVersion"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==k.user_name.trim()||new Error(h("Site.RulesError.UserName"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==k.admin_password.trim()||new Error(h("Site.RulesError.Password"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==k.admin_email.trim()||new Error(h("Site.RulesError.Email"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==k.redirection_url.trim()||new Error(h("Site.RulesError.Redirection"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==k.Login_url.trim()||new Error(h("Site.RulesError.Login"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==k.prefix.trim()||new Error(h("Site.RulesError.Prefix"))}};return i({onConfirm:async()=>{var e;await(null==(e=S.value)?void 0:e.validate());const{message:a}=await w((()=>{const{domain:e,php_version:a}=k,l=e.replace(new RegExp(/([-.])/g),"_");if(null===a)throw c.error(h("Site.RulesError.PHPVersion")),new Error(h("Site.RulesError.PHPVersion"));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:b.sitePath+"/"+e,ps:l,version:a,datauser:"sql_"+l,datapassword:s(16),password:k.admin_password,pw_weak:k.pw_weak?"on":"off",email:k.admin_email,weblog_title:k.weblog_title,language:k.language,user_name:k.user_name,prefix:k.prefix,enable_cache:k.enable_cache?1:0,enable_whl:0,whl_page:k.Login_url?k.Login_url:null,whl_redirect_admin:k.redirection_url?k.redirection_url:null,package_version:k.wp_version}})());p(a)&&b.setRefresh(!0)}}),(e,t)=>{const i=u,s=d,o=l,p=_,c=m,h=v,f=B,b=r,w=a;return $(),L(w,{install:U(P).setup&&U(j).setup},{desc:C((()=>[D("span",null,H(e.$t("WP.index_6")),1),U(j).setup?z("",!0):($(),L(i,{key:0,class:"ml-4px",onClick:t[0]||(t[0]=e=>U(n)("php-8.0"))},{default:C((()=>[T(H(e.$t("WP.index_7")),1)])),_:1})),U(P).setup?z("",!0):($(),N("span",le,[re,I(i,{onClick:t[1]||(t[1]=e=>U(n)("mysql"))},{default:C((()=>[T(H(e.$t("WP.index_8")),1)])),_:1})]))])),default:C((()=>[I(b,{ref_key:"formRef",ref:S,modelValue:U(k),"onUpdate:modelValue":t[13]||(t[13]=e=>F(k)?k.value=e:null),rules:y},{default:C((()=>[I(o,{label:e.$t("Site.Lable.Domain"),path:"domain"},{default:C((()=>[D("div",te,[I(s,{value:U(k).domain,"onUpdate:value":t[2]||(t[2]=e=>U(k).domain=e),placeholder:e.$t("Site.Placeholder.Domain")},null,8,["value","placeholder"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.WebTitle"),path:"weblog_title"},{default:C((()=>[D("div",ie,[I(s,{value:U(k).weblog_title,"onUpdate:value":t[3]||(t[3]=e=>U(k).weblog_title=e),placeholder:e.$t("Site.Placeholder.WebTitle")},null,8,["value","placeholder"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.Language"),path:"language"},{default:C((()=>[D("div",se,[I(g,{value:U(k).language,"onUpdate:value":t[4]||(t[4]=e=>U(k).language=e)},null,8,["value"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.PHPVersion"),path:"php_version"},{default:C((()=>[D("div",oe,[I(ee,{value:U(k).php_version,"onUpdate:value":t[5]||(t[5]=e=>U(k).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.WPVersion"),path:"wp_version"},{default:C((()=>[I(h,{class:"items-center",size:8},{default:C((()=>[I(ae,{value:U(k).wp_version,"onUpdate:value":t[6]||(t[6]=e=>U(k).wp_version=e),class:"w-230px"},null,8,["value"]),I(c,{trigger:"hover"},{trigger:C((()=>[I(p,{name:"common-ask",size:"18",color:"#999"})])),default:C((()=>[T(" "+H(e.$t("WP.Add.Tips")),1)])),_:1})])),_:1})])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.UserName"),path:"user_name"},{default:C((()=>[D("div",ne,[I(s,{value:U(k).user_name,"onUpdate:value":t[7]||(t[7]=e=>U(k).user_name=e),placeholder:e.$t("Site.Placeholder.UserName")},null,8,["value","placeholder"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.Password"),path:"admin_password"},{default:C((()=>[D("div",pe,[I(s,{value:U(k).admin_password,"onUpdate:value":t[8]||(t[8]=e=>U(k).admin_password=e),placeholder:e.$t("Site.Placeholder.Password")},null,8,["value","placeholder"])]),I(f,{checked:U(k).pw_weak,"onUpdate:checked":t[9]||(t[9]=e=>U(k).pw_weak=e)},{default:C((()=>[D("span",null,H(e.$t("WP.Add.Awp")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.Email"),path:"admin_email"},{default:C((()=>[D("div",ue,[I(s,{value:U(k).admin_email,"onUpdate:value":t[10]||(t[10]=e=>U(k).admin_email=e),placeholder:e.$t("Site.Placeholder.Email")},null,8,["value","placeholder"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.Prefix"),path:"prefix"},{default:C((()=>[D("div",de,[I(s,{value:U(k).prefix,"onUpdate:value":t[11]||(t[11]=e=>U(k).prefix=e),placeholder:e.$t("Site.Placeholder.Prefix")},null,8,["value","placeholder"])])])),_:1},8,["label"]),I(o,{label:e.$t("Site.Lable.Cache"),"show-feedback":!1},{default:C((()=>[I(f,{checked:U(k).enable_cache,"onUpdate:checked":t[12]||(t[12]=e=>U(k).enable_cache=e),disabled:"nginx"!==U(x).type},{default:C((()=>[D("span",null,H(e.$t("WP.Add.CacheNginx")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["install"])}}}),me=k({__name:"upload",props:{path:{default:"/"}},emits:["finish"],setup(e,{emit:a}){const l=e,r=a,t=E([]),i=async({file:e})=>{try{const a=new FormData;a.append("f_path",l.path),a.append("f_name",e.name),a.append("f_start","0"),e.file&&(a.append("blob",e.file),a.append("f_size",e.file.size.toString())),await Z(a),r("finish","".concat(l.path,"/").concat(e.name))}finally{t.value=[]}};return(e,a)=>{const l=h,r=J;return $(),L(r,{ref:"upload",class:"w-auto",action:"","file-list":U(t),"onUpdate:fileList":a[0]||(a[0]=e=>F(t)?t.value=e:null),"show-file-list":!1,multiple:!1,"custom-request":i},{default:C((()=>[I(l,null,{default:C((()=>[G(e.$slots,"default")])),_:3})])),_:3},8,["file-list"])}}}),ve={class:"w-302px ml-12px"},ce={class:"w-400px"},he={class:"w-230px"},fe=k({__name:"index",setup(e,{expose:a}){const{t:i}=q(),s=t(),{web:o}=f(s),n=E(null),p=A({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1}),u={bak_file:{trigger:["blur","input"],validator:()=>""!==p.bak_file.trim()||new Error(i("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==p.domain.trim()||new Error(i("Site.RulesError.Domain"))},php_version:{trigger:"change",validator:()=>null!==p.php_version||new Error(i("Site.RulesError.PHPVersion"))}},_=V((()=>p.domain?"/".concat(p.domain,"/"):"/")),m=e=>{p.bak_file=e};return a({onConfirm:async()=>{var e;await(null==(e=n.value)?void 0:e.validate());const a={bak_file:p.bak_file,domain:p.domain,sub_path:p.sub_path,php_ver_short:p.php_version||"",enable_cache:p.enable_cache?1:0};1===p.method?await x(a):await P(a),s.setRefresh(!0)}}),(e,a)=>{const t=K,i=O,v=l,c=Q,h=d,f=X,b=Y,g=B,w=r;return $(),L(w,{ref_key:"formRef",ref:n,modelValue:U(p),"onUpdate:modelValue":a[6]||(a[6]=e=>F(p)?p.value=e:null),rules:u},{default:C((()=>[I(v,{label:e.$t("WP.Add.import_1")},{default:C((()=>[I(i,{value:U(p).method,"onUpdate:value":a[0]||(a[0]=e=>U(p).method=e)},{default:C((()=>[I(t,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),I(t,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"])])),_:1},8,["value"])])),_:1},8,["label"]),I(v,{label:e.$t("WP.Add.import_4"),path:"bak_file"},{default:C((()=>[I(me,{path:"/www/server/panel/temp",onFinish:m},{default:C((()=>[T(" Upload file ")])),_:1}),D("div",ve,[I(c,{value:U(p).bak_file,"onUpdate:value":a[1]||(a[1]=e=>U(p).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"]},null,8,["value"])])])),_:1},8,["label"]),I(v,{label:e.$t("Site.Lable.Domain"),path:"domain"},{default:C((()=>[D("div",ce,[I(h,{value:U(p).domain,"onUpdate:value":a[2]||(a[2]=e=>U(p).domain=e),placeholder:e.$t("Site.Placeholder.Domain")},null,8,["value","placeholder"])])])),_:1},8,["label"]),I(v,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:C((()=>[I(b,{class:"w-400px"},{default:C((()=>[I(f,null,{default:C((()=>[T(H(U(s).sitePath)+H(U(_)),1)])),_:1}),I(h,{value:U(p).sub_path,"onUpdate:value":a[3]||(a[3]=e=>U(p).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])])),_:1})])),_:1},8,["label"]),I(v,{label:e.$t("Site.Lable.PHPVersion"),path:"php_version"},{default:C((()=>[D("div",he,[I(ee,{value:U(p).php_version,"onUpdate:value":a[4]||(a[4]=e=>U(p).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),I(v,{label:e.$t("Site.Lable.Cache"),"show-feedback":!1},{default:C((()=>[I(g,{checked:U(p).enable_cache,"onUpdate:checked":a[5]||(a[5]=e=>U(p).enable_cache=e),disabled:"nginx"!==U(o).type},{default:C((()=>[T(H(e.$t("WP.Add.CacheNginx")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"])}}}),be={class:"p-20px h-full"},ge=k({__name:"index",setup(a,{expose:l}){const{t:r}=q(),t=E("single"),i=E(),s=[{key:"single",label:r("WP.Add.index_1"),isLazy:!0,component:_e},{key:"import",label:r("WP.Add.index_2"),isLazy:!0,component:fe}];return l({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.onConfirm())}}),(a,l)=>{const r=e;return $(),N("div",be,[I(r,{ref_key:"tabsRef",ref:i,value:U(t),"onUpdate:value":l[0]||(l[0]=e=>F(t)?t.value=e:null),options:s},null,8,["value"])])}}});export{ge as default};
