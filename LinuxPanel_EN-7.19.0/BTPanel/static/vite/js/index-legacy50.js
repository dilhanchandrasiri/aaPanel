System.register(["./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1732601582185","./page_layout-legacy.js?v=1732601582185","./public-legacy.js?v=1732601582185","./mail-legacy.js?v=1732601582185","./vue-legacy.js?v=1732601582185","./naive-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1732601582185","./upload-legacy.js?v=1732601582185","./file-legacy.js?v=1732601582185","./common-legacy.js?v=1732601582185","./__commonjsHelpers__-legacy.js?v=1732601582185","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1732601582185"],(function(e,a){"use strict";var l,t,u,n,i,c,s,o,p,d,v,_,r,b,y,k,m,w,h,f,x,g,M,U,B,P,j,$,T,C,S,z,L,D,W,H,I,J,N,O,q,F,G,K,Q,R,X,Y,Z,A;return{setters:[e=>{l=e._},e=>{t=e.I,u=e.f,n=e.c,i=e.S,c=e.o},e=>{s=e.a,o=e.u,p=e.d,d=e.f,v=e.b},e=>{_=e.I,r=e.J,b=e.K,y=e.L,k=e.M,m=e.N,w=e.O},e=>{h=e.d,f=e.aq,x=e.W,g=e.O,M=e.X,U=e.Y,B=e.Q,P=e.M,j=e.k,$=e.v,T=e.c,C=e.Z,S=e.r,z=e.j,L=e.R,D=e.ac,W=e.a6,H=e.ak,I=e.P},e=>{J=e.bL,N=e.bl,O=e.bM,q=e.bN,F=e.bh,G=e.bJ,K=e.bo,Q=e.bG,R=e.aa},e=>{X=e._},e=>{Y=e._},e=>{Z=e.o},e=>{A=e.d},null,null,null],execute:function(){const E={class:"w-100px"},V={class:"w-120px"},ee=h({__name:"period",props:{value:{default:()=>({cycle:"week",week:"1",hour:1,minute:30})},valueModifiers:{}},emits:["update:value"],setup(e){const a=f(e,"value"),{t:l}=x(),t=[{label:l("Public.Unit.Weekly"),value:"week"},{label:l("Public.Unit.Daily"),value:"day"}],u=[{label:l("Public.Unit.Monday"),value:"1"},{label:l("Public.Unit.Tuesday"),value:"2"},{label:l("Public.Unit.Wednesday"),value:"3"},{label:l("Public.Unit.Thursday"),value:"4"},{label:l("Public.Unit.Friday"),value:"5"},{label:l("Public.Unit.Saturday"),value:"6"},{label:l("Public.Unit.Sunday"),value:"0"}];return(e,l)=>{const n=J,i=N,c=O,s=q,o=F;return g(),M(o,{size:20},{default:U((()=>[B("div",E,[P(n,{value:a.value.cycle,"onUpdate:value":l[0]||(l[0]=e=>a.value.cycle=e),options:t},null,8,["value"])]),j(B("div",V,[P(n,{value:a.value.week,"onUpdate:value":l[1]||(l[1]=e=>a.value.week=e),options:u},null,8,["value"])],512),[[$,"week"===a.value.cycle]]),P(s,{class:"w-100px"},{default:U((()=>[P(i,{value:a.value.hour,"onUpdate:value":l[2]||(l[2]=e=>a.value.hour=e),min:0,"show-button":!1},null,8,["value"]),P(c,null,{default:U((()=>[T(C(e.$t("Public.Unit.Hour",a.value.hour)),1)])),_:1})])),_:1}),P(s,{class:"w-120px"},{default:U((()=>[P(i,{value:a.value.minute,"onUpdate:value":l[3]||(l[3]=e=>a.value.minute=e),min:0,"show-button":!1},null,8,["value"]),P(c,null,{default:U((()=>[T(C(e.$t("Public.Unit.Minute",a.value.minute)),1)])),_:1})])),_:1})])),_:1})}}}),ae={class:"p-20px"},le={class:"flex-1"},te={class:"w-140px"},ue=h({__name:"plan",setup(e){const{t:a}=x(),n=S(!1),i=z({open:!1,cycle:"week",week:"1",hour:1,minute:30,backupTo:"localhost",save:3}),c=S([]),o=async()=>{await b({type:i.cycle,hour:i.hour,minute:i.minute,backupTo:i.backupTo,save:i.save,..."week"===i.cycle?{week:i.week}:{}}),v()},p=e=>{n.value&&!1===e&&s({title:a("Mail.Backup.index_6"),content:a("Mail.Backup.index_7"),onConfirm:async()=>{await y(),i.open=!1},onPublicClose:()=>{i.open=!e}})},d=()=>{c.value.unshift({label:a("Mail.Backup.index_8"),value:"localhost"})},v=async()=>{try{const{message:e}=await r();u(e)&&(n.value=!0,i.open=!0,i.cycle=e.type,i.week=e.where1,i.hour=e.where_hour,i.minute=e.where_minute,i.backupTo=e.backupTo,i.save=e.save)}catch(e){n.value=!1,i.open=!1,console.error(e)}};return v(),(async()=>{d();const{message:e}=await _();t(e)&&(c.value=e.map((e=>({label:e.name,value:e.value})))),d()})(),(e,a)=>{const t=K,u=Q,n=J,s=N,d=O,v=q,_=F,r=R,b=l,y=G;return g(),M(y,{class:"mb-16px",title:e.$t("Mail.Backup.index_1")},{default:U((()=>[B("div",ae,[P(b,{model:L(i)},{default:U((()=>[P(u,{label:e.$t("Mail.Backup.index_2")},{default:U((()=>[P(t,{value:L(i).open,"onUpdate:value":[a[0]||(a[0]=e=>L(i).open=e),p]},null,8,["value"])])),_:1},8,["label"]),P(u,{label:e.$t("Mail.Backup.index_3")},{default:U((()=>[B("div",le,[P(ee,{value:L(i),"onUpdate:value":a[1]||(a[1]=e=>D(i)?i.value=e:null)},null,8,["value"])])])),_:1},8,["label"]),P(_,{size:24},{default:U((()=>[P(u,{label:e.$t("Mail.Backup.index_4")},{default:U((()=>[B("div",te,[P(n,{value:L(i).backupTo,"onUpdate:value":a[2]||(a[2]=e=>L(i).backupTo=e),options:L(c)},null,8,["value","options"])])])),_:1},8,["label"]),P(u,{label:e.$t("Mail.Backup.index_5"),"label-width":"auto"},{default:U((()=>[P(v,{class:"w-100px"},{default:U((()=>[P(s,{value:L(i).save,"onUpdate:value":a[3]||(a[3]=e=>L(i).save=e),"show-button":!1},null,8,["value"]),P(d,null,{default:U((()=>[T(C(e.$t("Public.Unit.Part",L(i).save)),1)])),_:1})])),_:1})])),_:1},8,["label"])])),_:1}),P(u,{label:" ","show-feedback":!1},{default:U((()=>[P(r,{type:"primary",onClick:o},{default:U((()=>[T(C(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["title"])}}}),ne={class:"px-20px py-16px"},ie=h({__name:"import",setup(e){const{t:l}=x(),_=z({path:"/www/backup/path/vmail/"}),r=()=>{Z({path:_.path,uploadData:{accept:".gz,.tar,.tar.gz,.zip",multiple:!0},onUploadSuccess:()=>{D()}})},b=()=>{var e;o({title:"Select directory",width:720,height:540,footer:!0,data:{path:(e={checkedType:["file"],onCheckedSuccess:async e=>{await k({file_path:e})}}).path||"/www/wwwroot",checkedType:e.checkedType||["dir"],callback:e.onCheckedSuccess},component:W((()=>n((()=>a.import("./index-legacy158.js?v=1732601582185")),void 0)))})},{table:y,columns:h}=p([{key:"name",title:l("Mail.Backup.index_11"),ellipsis:!0},{key:"mtime",title:l("Mail.Backup.index_12"),render:e=>i(e.mtime)},d({width:120,options:e=>[{label:l("Mail.Backup.index_13"),onClick:()=>{f(e)}},{label:l("Public.Btn.Delete"),onClick:()=>{j(e)}}]})]),f=e=>{s({title:l("Mail.Backup.index_14"),content:l("Mail.Backup.index_15"),onConfirm:async()=>{await k({file_path:`${_.path}/${e.name}`})}})},j=e=>{s({title:l("Mail.Backup.index_16"),content:l("Mail.Backup.index_17"),onConfirm:async()=>{await A({path:`${_.path}/${e.name}`}),D()}})},{loading:$,setLoading:S}=v(),D=async()=>{try{S(!0),await(async()=>{const{message:e}=await w();u(e)&&(_.path=c(e.result)?e.result:"")})();const{message:e}=await m(H(_));y.data=t(e)?e:[]}finally{S(!1)}};return D(),(e,a)=>{const l=R,t=Y,u=X,n=G;return g(),M(n,{title:e.$t("Mail.Backup.index_18")},{default:U((()=>[B("div",ne,[P(u,null,{toolsLeft:U((()=>[P(l,{onClick:r},{default:U((()=>[T(C(e.$t("Mail.Backup.index_9")),1)])),_:1}),P(l,{onClick:b},{default:U((()=>[T(C(e.$t("Mail.Backup.index_10")),1)])),_:1})])),table:U((()=>[P(t,{"max-height":340,bordered:!0,loading:L($),data:L(y).data,columns:L(h)},null,8,["loading","data","columns"])])),_:1})])])),_:1},8,["title"])}}});e("default",h({__name:"index",setup:e=>(e,a)=>(g(),I("div",null,[P(ue),P(ie)]))}))}}}));
