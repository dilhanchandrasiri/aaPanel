import{s as e}from"./pinia.js?v=1723125373998";import{bm as t,dg as o,h as a,dh as s,a as n}from"./index.js?v=1723125373998";import{l as i,r as l,S as p,U as c,W as u,ad as r,P as d,q as x,s as m,Z as v,_ as b,a3 as f,F as _,ag as C,a5 as h,a6 as w}from"./vue.js?v=1723125373998";import{_ as g}from"./Tag.js?v=1723125373998";import{_ as y}from"./Countdown.js?v=1723125373998";import{_ as P}from"./Select.js?v=1723125373998";import"./Empty.js?v=1723125373998";function j(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)}const D=i({__name:"time",props:{endtime:{default:0}},setup(e){const t=e,o=l(0),a=e=>e.toString().padStart(2,"0"),s=({hours:e,minutes:t,seconds:o})=>{let s,n,i;const{t:l}=r();return d("div",{class:"flex justify-center items-center text-default text-16px"},[d("span",null,[l("Public.Coupon.index_10")]),d(g,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},j(s=a(e))?s:{default:()=>[s]}),d("span",null,[x(":")]),d(g,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},j(n=a(t))?n:{default:()=>[n]}),d("span",null,[x(":")]),d(g,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},j(i=a(o))?i:{default:()=>[i]})])};return o.value=1e3*t.endtime-Math.floor(Date.now()),(e,t)=>{const a=y;return p(),c(a,{duration:u(o),render:s},null,8,["duration"])}}}),S={class:"coupon-box"},k={class:"pt-24px bg-#fff rounded-4px"},$={class:"px-36px"},L={class:"text-20px text-[#FFB04C]"},T={class:"coupon-list"},z={class:"decoration"},F={class:"coupon-amount"},M={class:"coupon-price"},O=(e=>(h("data-v-4d8e806d"),e=e(),w(),e))((()=>b("span",{class:"text-20px mr-4px"},"$",-1))),R={class:"text-34px"},U={class:"coupon-info"},q={class:"coupon-name"},B={class:"coupon-time"},E={class:"text-error text-20px"},I={class:"pt-14px px-36px pb-10px"},W={class:"mt-24px text-center"},Z={class:"w-200px mt-10px mx-auto"},A=n(i({__name:"index",props:{couponList:{default:()=>[]}},emits:["close","receive"],setup(n,{emit:i}){const{t:c}=r(),x=i,m=t(),{receiveCoupon:h}=e(m),w=e=>Math.floor(e/86400),g=l(null),y=[{label:c("Public.Coupon.index_6"),value:"today"},{label:c("Public.Coupon.index_7"),value:"week"},{label:c("Public.Coupon.index_8"),value:"forver"}],j=async()=>{await o({obtain_id:"".concat(h.value.obtain_id)}),m.getReceiveCoupon(),x("close"),x("receive")},A=(e,t)=>{a({title:c("Public.Confirm.Title"),content:"".concat(t.label,", ").concat(c("Public.Coupon.index_9")),onConfirm:async()=>{let t=0;switch(e){case"today":t=new Date((new Date).toLocaleDateString()).getTime()+864e5-1;break;case"week":t=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;break;case"forver":t=-100}t=Math.floor(t>0?t/1e3:t),await s({limit_time:t}),m.getReceiveCoupon(),x("close")}})};return(e,t)=>{const o=P;return p(),v("div",S,[b("div",k,[b("div",$,[b("div",L,f(e.$t("Public.Coupon.index_1")),1),b("div",T,[(p(!0),v(_,null,C(e.couponList,((t,o)=>(p(),v("div",{key:"".concat(o),class:"coupon-item"},[b("div",z,f(e.$t("Public.Coupon.index_2")),1),b("div",F,[b("div",M,[O,b("span",R,f(t.deduct_amount),1)])]),b("div",U,[b("div",q,f(t.title),1),b("div",B,[b("span",null,f(e.$t("Public.Coupon.index_3")),1),b("span",E,f(w(t.expires)),1),b("span",null,f(e.$t("Public.Coupon.index_4"))+f(w(t.expires)>1?"s":""),1)])])])))),128))])])]),b("div",I,[b("div",W,[d(D,{endtime:u(h).end_time},null,8,["endtime"])]),b("div",{class:"coupon-btn",onClick:j},f(e.$t("Public.Coupon.index_5")),1),b("div",Z,[d(o,{value:u(g),options:y,"consistent-menu-width":!1,placeholder:"Choose time without notice","onUpdate:value":A},null,8,["value"])])])])}}}),[["__scopeId","data-v-4d8e806d"]]);export{A as default};
