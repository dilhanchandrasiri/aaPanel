import{_ as a}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1732601582185";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1732601582185";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1732601582185";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1732601582185";import{d as s,W as i,r as o,j as n,ak as c,O as r,X as p,Y as u,M as d,Q as m,R as _,ac as y,am as k,c as v,Z as w}from"./vue.js?v=1732601582185";import{I as f,m as h,f as x,be as j}from"./page_layout.js?v=1732601582185";import{o as g}from"./upload.js?v=1732601582185";import{d as B,f as b,a as M}from"./public.js?v=1732601582185";import{p as P,q as C,r as U,t as $,u as D}from"./mail.js?v=1732601582185";import{bJ as R,ad as K,aa as L}from"./naive.js?v=1732601582185";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./common.js?v=1732601582185";const S={class:"w-340px"},I=s({__name:"index",setup(s){const{t:I}=i(),q=o(""),z=async()=>{""!==q.value.trim()?(await U({emails_to_add:q.value.split(",")}),Y(),q.value=""):h.error(I("Mail.Blacklist.index_2"))},A=()=>{g({path:"/www/server/panel/data/mail/",size:5,uploadData:{accept:["json"].map((a=>".".concat(a))).join(","),multiple:!1},onUploadSuccess:async a=>{await D({file:"/www/server/panel/data/mail/".concat(a[0].name)}),Y()}})},E=async()=>{const{message:a}=await $();x(a)&&j(a.result)},{keys:H,table:J,columns:O,setLoading:Q}=B([{type:"selection",width:40},{key:"email",title:I("Mail.Blacklist.index_3"),ellipsis:{tooltip:!0}},b({width:80,options:a=>[{label:I("Public.Btn.Del"),onClick:async()=>{M({title:I("Mail.Blacklist.index_4",[a.email]),content:I("Mail.Blacklist.index_5"),onConfirm:async()=>{await P({emails_to_remove:[a.email]}),Y()}})}}]})]),W=[{key:"del",type:"confirm",label:I("Public.Batch.Del"),confirm:{title:I("Public.Batch.Del"),desc:I("Site.Batch.index_11"),api:a=>P({emails_to_remove:[a.email]},!1),done:()=>{Y()},columns:[{key:"email",title:I("Mail.Blacklist.index_3"),ellipsis:{tooltip:{width:"trigger"}}}]}}],X=n({keyword:""}),Y=async()=>{try{Q(!0);const{message:a}=await C(c(X));f(a)&&(J.data=a.map((a=>({email:a}))))}finally{H.value=[],Q(!1)}};return Y(),(s,i)=>{const o=K,n=L,c=t,f=l,h=e,x=a,j=R;return r(),p(j,{class:"p-16px"},{default:u((()=>[d(x,null,{toolsLeft:u((()=>[m("div",S,[d(o,{value:_(q),"onUpdate:value":i[0]||(i[0]=a=>y(q)?q.value=a:null),placeholder:s.$t("Mail.Blacklist.index_1"),onKeyup:k(z,["enter"])},null,8,["value","placeholder"])]),d(n,{type:"primary",onClick:z},{default:u((()=>[v(w(s.$t("Public.Btn.Add")),1)])),_:1}),d(n,{onClick:A},{default:u((()=>[v(w(s.$t("Public.Btn.Import")),1)])),_:1}),d(n,{onClick:E},{default:u((()=>[v(w(s.$t("Public.Btn.Export")),1)])),_:1})])),toolsRight:u((()=>[d(c,{value:_(X).keyword,"onUpdate:value":i[1]||(i[1]=a=>_(X).keyword=a),width:240,placeholder:s.$t("Mail.Blacklist.index_2"),onSearch:Y},null,8,["value","placeholder"])])),table:u((()=>[d(f,{"checked-row-keys":_(H),"onUpdate:checkedRowKeys":i[2]||(i[2]=a=>y(H)?H.value=a:null),"row-key":"email",loading:_(J).loading,data:_(J).data,columns:_(O)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:u((()=>[d(h,{"checked-row-keys":_(H),"onUpdate:checkedRowKeys":i[3]||(i[3]=a=>y(H)?H.value=a:null),"row-key":"email",data:_(J).data,options:W},null,8,["checked-row-keys","data"])])),_:1})])),_:1})}}});export{I as default};
