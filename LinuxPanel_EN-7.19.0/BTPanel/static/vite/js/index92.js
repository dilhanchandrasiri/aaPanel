const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index98.js?v=1732601582185","js/vue.js?v=1732601582185","js/__commonjsHelpers__.js?v=1732601582185","js/page_layout.js?v=1732601582185","js/naive.js?v=1732601582185","js/common.js?v=1732601582185","js/public.js?v=1732601582185","css/public.css?v=1732601582185","css/page_layout.css?v=1732601582185","css/index54.css?v=1732601582185"])))=>i.map(i=>d[i]);
import{G as e,H as a,f as t,I as n,k as l,J as s,K as o,L as i,_ as c,j as r,m as u,M as d,N as p,O as v,E as y,P as m,A as f,Q as h,R as x,S as _,T as g,U as b,V as w,W as C,X as k,Y as P,Z as L,c as S,$ as j,u as I}from"./page_layout.js?v=1732601582185";import{d as M,V as U,r as $,y as E,O,P as A,Q as B,R as F,ao as V,Z as z,F as Z,L as T,W as H,ad as G,e as D,ap as N,aq as Y,M as q,Y as R,X as W,H as K,i as Q,t as X,c as J,m as ee,k as ae,v as te,f as ne,ac as le,x as se,j as oe,n as ie,a6 as ce,o as re}from"./vue.js?v=1732601582185";import{u as ue,b as de}from"./public.js?v=1732601582185";import{bH as pe,bb as ve,bI as ye,aa as me,be as fe,bK as he,_ as xe,bL as _e}from"./naive.js?v=1732601582185";import{O as ge}from"./open.js?v=1732601582185";import"./common.js?v=1732601582185";import"./__commonjsHelpers__.js?v=1732601582185";import"./configStore.js?v=1732601582185";import"./global.js?v=1732601582185";import"./index99.js?v=1732601582185";import"./home.js?v=1732601582185";const be={class:"relative w-240px py-40px pl-22px pr-8px bg-#FFF5E1"},we={class:"mb-38px"},Ce={class:"flex mb-10px text-20px text-#e8a833"},ke={key:0,class:"glyphicon glyphicon-vip"},Pe={class:"ml-8px"},Le={key:0,class:"min-h-34px text-#888"},Se={key:0},je={class:"mb-16px text-15px text-default"},Ie={class:"text-13px"},Me={class:"flex-1 ml-8px overflow-hidden text-#666"},Ue={key:1,class:"mt-36px text-default"},$e={class:"mb-16px text-15px"},Ee=["innerHTML"],Oe={key:2,class:"pay-info-bg"},Ae={key:3,class:"contrast",href:"https://aapanel.com/new/pricing.html",target:"_blank",rel:"noreferer noopener"},Be={key:4,class:"pay-info-recom"},Fe={class:"buy"},Ve={class:"text"},ze=l(M({__name:"index",setup(l){const s=e(),{type:o,label:i,desc:c,plugins:r}=U(s),u=$([]);return E((()=>{"pro"===o.value&&(async()=>{const{message:e}=await a({product_id:s.pid});t(e)&&(u.value=n(e.res)?e.res:[])})()})),(e,a)=>(O(),A("div",be,[B("div",we,[B("div",Ce,["pro"===F(o)?(O(),A("span",ke)):V("",!0),B("span",Pe,z(F(i)),1)]),"pro"===F(o)?(O(),A("div",Le,z(F(c)),1)):V("",!0)]),"pro"===F(o)&&F(u).length>0?(O(),A("div",Se,[B("div",je,z(e.$t("Component.Pay.index_3"))+":",1),B("div",Ie,[(O(!0),A(Z,null,T(F(u),(e=>(O(),A("div",{key:e,class:"flex py-10px"},[a[0]||(a[0]=B("span",{class:"glyphicon glyphicon-ok text-#feaa04"},null,-1)),B("span",Me,z(e),1)])))),128))])])):V("",!0),"plugin"===F(o)&&F(r).length>0?(O(),A("div",Ue,[B("div",$e,z(e.$t("Component.Pay.index_4"))+":",1),B("div",{class:"w-186px leading-22px text-13px",innerHTML:F(r)[0].ps},null,8,Ee)])):V("",!0),"pro"===F(o)?(O(),A("div",Oe)):V("",!0),"pro"===F(o)?(O(),A("a",Ae,z(e.$t("Component.Pay.index_5")),1)):V("",!0),"plugin"===F(o)?(O(),A("div",Be,[B("div",Fe,z(e.$t("Component.Pay.index_6")),1),B("div",Ve,[B("span",null,z(e.$t("Component.Pay.index_7")),1)])])):V("",!0)]))}}),[["__scopeId","data-v-c29d736b"]]),Ze={class:"pay-menu"},Te=["onClick"],He={class:"name"},Ge={key:0,class:"glyphicon glyphicon-vip"},De={class:"text"},Ne={class:"desc"},Ye=l(M({__name:"index",emits:["change"],setup(a,{emit:t}){const n=t,l=e(),{t:s}=H(),o=$("pro"),i=$([{key:"pro",label:s("Component.Pay.index_1"),desc:s("Component.Pay.index_2"),pid:"100000058"}]),c=e=>{l.setMenu(e),o.value=e.key,n("change")};return(()=>{const{plugins:e}=l;if(e.length>0){const a=e[0];i.value.push({key:"plugin",label:a.name,desc:s("Component.Pay.index_17"),pid:"".concat(a.pid)})}})(),c(i.value[0]),(e,a)=>(O(),A("div",Ze,[(O(!0),A(Z,null,T(F(i),(e=>(O(),A("div",{key:e.key,class:G(["menu-item",["pro"===e.key?e.key:"",F(o)===e.key?"active":""]]),onClick:a=>c(e)},[B("div",He,["pro"===e.key?(O(),A("span",Ge)):V("",!0),B("div",De,z(e.label),1)]),B("div",Ne,z(e.desc),1)],10,Te)))),128))]))}}),[["__scopeId","data-v-c56121d8"]]),qe={class:"new-price"},Re={class:"number"},We={class:"time"},Ke={class:"old-price"},Qe={key:0,class:"tips"},Xe=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1},showTips:{type:Boolean,default:!1}},setup(e){const a=e,{t:t}=H(),n=D((()=>{const{data:e}=a,n=s(e.cycle);return 999===n?t("Component.Auth.index_6"):"year"===e.cycle_unit?t("Component.Pay.index_14",[n,t("Public.Unit.Year",n)]):t("Component.Pay.index_15",[n,t("Public.Unit.Month",n)])})),l=D((()=>{const{data:e}=a;return e.children[0]}));return(e,a)=>e.data.children.length>0?(O(),A("li",{key:0,class:G(["radio-item pro",{active:e.active}])},[B("div",qe,[B("span",Re,[a[0]||(a[0]=B("span",{class:"symbol"},"$",-1)),B("span",null,z(F(l).price.toFixed(2)),1)]),a[1]||(a[1]=B("span",{class:"ml-4px mr-2px"},"/",-1)),B("span",We,z(F(n)),1)]),B("div",Ke,z(F(t)("Component.Pay.index_16",["$".concat(F(l).market_price)])),1),e.showTips?(O(),A("div",Qe,z(e.$t("Component.Pay.index_10")),1)):V("",!0),a[2]||(a[2]=B("div",{class:"checked"},null,-1))],2)):V("",!0)}}),[["__scopeId","data-v-c87d6893"]]),Je={class:"mb-20px"},ea={class:"mb-16px text-14px"},aa=l(M({__name:"index",props:N({data:{default:()=>[]}},{cycle:{default:0},cycleModifiers:{}}),emits:N(["change"],["update:cycle"]),setup(e,{emit:a}){const t=a,n=Y(e,"cycle");return(e,a)=>{const l=o,s=i;return O(),A("div",Je,[B("div",ea,z(e.$t("Component.Pay.index_9")),1),q(s,{"slides-per-view":"auto",effect:"slide","space-between":20,loop:!1,"show-dots":!1,draggable:!0,"show-arrow":!0},{default:R((()=>[(O(!0),A(Z,null,T(e.data,((e,a)=>(O(),W(l,{key:"".concat(e.cycle+e.cycle_unit),class:"pt-8px",style:K({width:3===a?"190px":"180px"})},{default:R((()=>[q(Xe,{data:e,active:a===n.value,"show-tips":0===a,onClick:e=>(e=>{const a=n.value;n.value=e,t("change",e,a)})(a)},null,8,["data","active","show-tips","onClick"])])),_:2},1032,["style"])))),128))])),_:1})])}}}),[["__scopeId","data-v-4e7c7a74"]]),ta={key:0,class:"discount"},na=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1}},setup(e){const a=e,{t:t}=H(),n=D((()=>{const{data:e}=a,n=Math.round(100-100*e.discount_rate);return t("Component.Pay.index_13",["".concat(n,"%")])}));return(e,a)=>(O(),A("li",{class:G(["radio-item pro",{active:e.active}])},[B("span",null,z(e.data.num),1),a[0]||(a[0]=B("div",{class:"checked"},null,-1)),e.data.discount_rate<1?(O(),A("div",ta,z(F(n)),1)):V("",!0)],2))}}),[["__scopeId","data-v-b83b8086"]]),la={class:"mb-16px"},sa={class:"mb-16px text-14px"},oa={class:"relative flex"},ia=M({__name:"index",props:N({data:{default:()=>[]}},{number:{},numberModifiers:{}}),emits:N(["change"],["update:number"]),setup(e,{emit:a}){const t=a,n=Y(e,"number");return(e,a)=>(O(),A("div",la,[B("div",sa,z(e.$t("Component.Pay.index_11")),1),B("ul",oa,[(O(!0),A(Z,null,T(e.data,((e,a)=>(O(),W(na,{key:"".concat(e.num),data:e,active:a===n.value,onClick:e=>(e=>{n.value=e,t("change")})(a)},null,8,["data","active","onClick"])))),128))])]))}});function ca(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Q(e)}const ra=M({props:{value:String,onUpdateValue:Function,"onUpdate:value":Function,list:{type:Array,default:()=>[]}},emits:["change"],setup:(e,{emit:a})=>({doUpdateValue:a=>{const{onUpdateValue:t,"onUpdate:value":n}=e;null==t||t(a),null==n||n(a)},onChange:e=>{a("change",e)}}),render(){let e;return q(ye,{value:this.value,class:"pay-menu pro",type:"card",defaultValue:"",placement:"left",onUpdateValue:e=>{this.doUpdateValue(e)}},ca(e=this.list.map((e=>{let a;return q(pe,{name:e.key,tab:e.label,"display-directive":e.isLazy?"show:lazy":"if","tab-props":{onClick:()=>{this.onChange(e.key)}}},ca(a=ve(e.content))?a:{default:()=>[a]})})))?e:{default:()=>[e]})}});var ua,da="https://js.stripe.com/v3",pa=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,va="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ya=function(e){var a=document.createElement("script");a.src="".concat(da).concat("");var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(a),a},ma=null,fa=null,ha=null,xa=function(e){return null!==ma?ma:(ma=new Promise((function(a,t){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(va),window.Stripe)a(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(da,'"]')),a=0;a<e.length;a++){var t=e[a];if(pa.test(t.src))return t}return null}();if(n&&e)console.warn(va);else if(n){if(n&&null!==ha&&null!==fa){var l;n.removeEventListener("load",ha),n.removeEventListener("error",fa),null===(l=n.parentNode)||void 0===l||l.removeChild(n),n=ya()}}else n=ya();ha=function(e,a){return function(){window.Stripe?e(window.Stripe):a(new Error("Stripe.js not available"))}}(a,t),fa=function(e){return function(){e(new Error("Failed to load Stripe.js?v=1732601582185"))}}(t),n.addEventListener("load",ha),n.addEventListener("error",fa)}catch(s){return void t(s)}else a(null)}))).catch((function(e){return ma=null,Promise.reject(e)}))},_a=!1,ga=function(){return ua||(ua=xa(null).catch((function(e){return ua=null,Promise.reject(e)})))};Promise.resolve().then((function(){return ga()})).catch((function(e){_a||console.warn(e)}));var ba=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];_a=!0;var n=Date.now();return ga().then((function(e){return function(e,a,t){if(null===e)return null;var n=e.apply(void 0,a);return function(e,a){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:a})}(n,t),n}(e,a,n)}))};const wa={key:0,class:"mb-12px text-desc text-13px"},Ca={class:"font-bold"},ka={class:"flex flex-wrap justify-center items-baseline"},Pa={class:"mr-4px text-14px"},La={class:"mr-4px pay-price-color"},Sa={class:"text-24px font-bold"},ja={key:0,class:"ml-8px pay-price-color font-bold"},Ia=l(M({__name:"total",props:N({data:{},order:{},payType:{},showSubscription:{type:Boolean,default:!0},showCurrency:{type:Boolean,default:!0},changeSub:{type:Boolean,default:!0}},{subscribe:{type:Boolean,default:!1},subscribeModifiers:{},currency:{type:Boolean,default:!1},currencyModifiers:{}}),emits:["update:subscribe","update:currency"],setup(e){const a=e,{t:t}=H(),n=Y(e,"subscribe"),l=Y(e,"currency"),o=X((()=>a.data)),i=X((()=>a.order)),c=D((()=>n.value&&s(u.value)>0?u.value:i.value.price)),r=D((()=>{const{cycle_unit:e}=o.value;return"year"===e?90:10})),u=D((()=>"paypal"===a.payType?o.value.paypal_first_subscription_price>0?o.value.paypal_first_subscription_price.toFixed(2):o.value.paypal_subscription_price.toFixed(2):o.value.first_subscription_price>0?o.value.first_subscription_price.toFixed(2):o.value.subscription_price.toFixed(2))),d=D((()=>{const{data:e}=a,n=s(e.cycle);return 999===n?t("Component.Auth.index_6"):"year"===e.cycle_unit?t("Component.Pay.index_14",[n,t("Public.Unit.Year",n)]):t("Component.Pay.index_15",[n,t("Public.Unit.Month",n)])})),p=D((()=>{const{data:e}=a;return 2===e.charge_type?t("Component.Auth.index_6").toLocaleLowerCase():"year"===e.cycle_unit?t("Public.Unit.Year").toLocaleLowerCase():t("Public.Unit.Month").toLocaleLowerCase()}));return E((()=>{const{changeSub:e}=a;if(!e)return;const{num:t,cycle:s}=a.data;1===t&&1===s?(n.value=!0,l.value=!1):(n.value=!1,l.value=!1)})),(e,a)=>(O(),A(Z,null,[n.value?(O(),A("div",wa,[B("span",null,z(e.$t("Component.Pay.index_43")),1),B("span",Ca,z(e.$t("Component.Pay.index_44",[F(r)])),1)])):V("",!0),B("div",ka,[B("span",Pa,z(e.$t("Component.Pay.index_25")),1),B("span",La,[a[0]||(a[0]=B("span",{class:"mr-2px text-18px font-bold"},"$",-1)),B("span",Sa,z(F(c)),1)]),B("span",null,"/"+z(F(d)),1),!n.value&&F(i).couponPrice?(O(),A("span",ja,z(e.$t("Component.Pay.index_19",[F(i).couponPrice,F(p)])),1)):V("",!0)])],64))}}),[["__scopeId","data-v-cd1e8a25"]]),Ma={class:"mb-24px text-18px"},Ua=M({__name:"ssl",setup(e){const{t:a}=H(),t=()=>{ue({title:a("Config.Safe.index_11"),width:600,footer:!0,component:ge})};return(e,a)=>{const n=me;return O(),A(Z,null,[B("div",Ma,z(e.$t("Component.Pay.index_41")),1),q(n,{type:"primary",class:"h-36px",size:"large",onClick:t},{default:R((()=>[J(z(e.$t("Component.Pay.index_42")),1)])),_:1})],64)}}}),$a={class:"relative w-full h-full"},Ea={class:"absolute left-0 top-0 flex-center flex-col w-full h-full bg-#fff z-20"},Oa={class:"mt-16px text-14px"},Aa=l(M({__name:"index",props:{loading:{type:Boolean,default:!1}},setup:e=>(e,a)=>{const t=c;return O(),A("div",$a,[ee(e.$slots,"default",{},void 0,!0),ae(B("div",Ea,[q(t,{class:"loading-icon",name:"base-loading",size:"40"}),B("div",Oa,z(e.$t("Component.Pay.index_12")),1)],512),[[te,e.loading]])])}}),[["__scopeId","data-v-b4814f10"]]),Ba={class:"relative flex-center flex-col h-full"},Fa={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Va={class:"ml-8px"},za=M({__name:"index",props:{data:{},order:{},getOrder:{}},emits:["setMenu"],setup(a,{expose:n,emit:l}){const{t:s}=H(),o=a,i=l,c=X(o,"order"),p=X(o,"data"),v=e(),{ssl:y,orderLoad:m}=U(v);let f=null;const h=$(!0),x=$(!1),_=async()=>{if(!f)return;const e=u.loading(s("Component.Pay.index_12"));try{const{message:e}=await d({order_no:c.value.order_no,subscribe:h.value&&p.value.subscription_price>0?1:0,...x.value?{adaptive_pricing:1}:{}});t(e)&&(e.id?f.redirectToCheckout({sessionId:e.id}):u.error(s("Component.Pay.index_28")))}finally{e.close()}},g=()=>{i("setMenu","paypal")},b=async()=>{try{v.setOrderLoad(!0),await o.getOrder();const e=ba(c.value.stripe_publishable_key);f=await e}finally{v.setOrderLoad(!1)}};return ne((()=>{b()})),n({init:b}),(e,a)=>{const t=me,n=r;return O(),W(Aa,{loading:F(m)},{default:R((()=>[B("div",Ba,[F(y)?(O(),A(Z,{key:0},[q(Ia,{subscribe:F(h),"onUpdate:subscribe":a[0]||(a[0]=e=>le(h)?h.value=e:null),currency:F(x),"onUpdate:currency":a[1]||(a[1]=e=>le(x)?x.value=e:null),"pay-type":"stripe",data:e.data,order:F(c)},null,8,["subscribe","currency","data","order"]),q(t,{class:"mt-16px w-150px h-34px text-14px",type:"primary",color:"#ff8f00",onClick:_},{default:R((()=>[J(z(e.$t("Component.Pay.index_26")),1)])),_:1}),a[3]||(a[3]=B("div",{class:"h-36px"},null,-1)),B("div",Fa,[B("span",Va,z(e.$t("Component.Pay.index_27",["Stripe"])),1),q(n,{onClick:g},{default:R((()=>a[2]||(a[2]=[J("PayPal")]))),_:1})])],64)):(O(),W(Ua,{key:1}))])])),_:1},8,["loading"])}}});function Za(e){var a="";return Object.keys(e).forEach((function(t){0!==a.length&&(a+="&"),a+=t+"="+e[t]})),a}function Ta(e,a){void 0===a&&(a={});var t=document.createElement("script");return t.src=e,Object.keys(a).forEach((function(e){t.setAttribute(e,a[e]),"data-csp-nonce"===e&&t.setAttribute("nonce",a["data-csp-nonce"])})),t}function Ha(e,a){if(void 0===a&&(a=Promise),Da(e,a),"undefined"==typeof document)return a.resolve(null);var t=function(e){var a="sandbox"===e.environment?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js";delete e.environment,e.sdkBaseUrl&&(a=e.sdkBaseUrl,delete e.sdkBaseUrl);var t=e,n=Object.keys(t).filter((function(e){return void 0!==t[e]&&null!==t[e]&&""!==t[e]})).reduce((function(e,a){var n,l=t[a].toString();return n=function(e,a){return(a?"-":"")+e.toLowerCase()},"data"===(a=a.replace(/[A-Z]+(?![a-z])|[A-Z]/g,n)).substring(0,4)||"crossorigin"===a?e.attributes[a]=l:e.queryParams[a]=l,e}),{queryParams:{},attributes:{}}),l=n.queryParams,s=n.attributes;return l["merchant-id"]&&-1!==l["merchant-id"].indexOf(",")&&(s["data-merchant-id"]=l["merchant-id"],l["merchant-id"]="*"),{url:"".concat(a,"?").concat(Za(l)),attributes:s}}(e),n=t.url,l=t.attributes,s=l["data-namespace"]||"paypal",o=Ga(s);return l["data-js-sdk-library"]||(l["data-js-sdk-library"]="paypal-js"),
/*!
 * paypal-js v8.1.2 (2024-09-16T17:52:36.940Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,a){var t=document.querySelector('script[src="'.concat(e,'"]'));if(null===t)return null;var n=Ta(e,a),l=t.cloneNode();if(delete l.dataset.uidAuto,Object.keys(l.dataset).length!==Object.keys(n.dataset).length)return null;var s=!0;return Object.keys(l.dataset).forEach((function(e){l.dataset[e]!==n.dataset[e]&&(s=!1)})),s?t:null}(n,l)&&o?a.resolve(o):function(e,a){void 0===a&&(a=Promise);Da(e,a);var t=e.url,n=e.attributes;if("string"!=typeof t||0===t.length)throw new Error("Invalid url.");if(void 0!==n&&"object"!=typeof n)throw new Error("Expected attributes to be an object.");return new a((function(e,a){if("undefined"==typeof document)return e();!function(e){var a=e.url,t=e.attributes,n=e.onSuccess,l=e.onError,s=Ta(a,t);s.onerror=l,s.onload=n,document.head.insertBefore(s,document.head.firstElementChild)}({url:t,attributes:n,onSuccess:function(){return e()},onError:function(){var e=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return a(e)}})}))}({url:n,attributes:l},a).then((function(){var e=Ga(s);if(e)return e;throw new Error("The window.".concat(s," global variable is not available."))}))}function Ga(e){return window[e]}function Da(e,a){if("object"!=typeof e||null===e)throw new Error("Expected an options object.");var t=e.environment;if(t&&"production"!==t&&"sandbox"!==t)throw new Error('The `environment` option must be either "production" or "sandbox".');if(void 0!==a&&"function"!=typeof a)throw new Error("Expected PromisePonyfill to be a function.")}const Na={class:"relative flex-center flex-col h-full"},Ya={class:"absolute left-0 bottom-12px w-full text-center text-desc"},qa={class:"ml-8px"},Ra=M({__name:"index",props:{data:{},order:{},getOrder:{}},emits:["setMenu"],setup(a,{expose:n,emit:l}){const{t:s}=H(),o=a,i=l,c=X(o,"data"),d=X(o,"order"),h=e(),{ssl:x,orderLoad:_}=U(h),g=$(!0),b=$(!1),w=$(null),C=e=>new Promise(((a,n)=>{const{message:l}=e;if(t(l)){if(l.status)return a(l.res);u.error(l.msg)}n(l)})),k=async e=>{e?await j():await S()},P=()=>{i("setMenu","stripe")},L=async()=>{try{h.setOrderLoad(!0),await o.getOrder(),c.value.paypal_subscription_price>0&&g.value?await j():await S()}finally{h.setOrderLoad(!1)}},S=async()=>{var e,a;const t=await Ha({clientId:d.value.paypal_client_id});t&&w.value&&(w.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createOrder:()=>p({oid:d.value.order_id}).then(C).then((e=>e)),onApprove:e=>v({paypal_order_id:e.orderID}).then((()=>{u.success(s("Component.Pay.index_7")),y()}))}).render(w.value))},j=async()=>{var e,a;const t=await Ha({clientId:d.value.paypal_client_id,vault:!0,intent:"subscription"});t&&w.value&&(w.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createSubscription:(e,a)=>a.subscription.create({custom_id:"".concat(d.value.order_id),plan_id:c.value.paypal_subscription_plan_id}),onApprove:()=>(M(),Promise.resolve())}).render(w.value))};let I=null;const M=async()=>{const{close:e}=u.loading("Loading..."),a=async()=>{const{message:a}=await m({order_id:d.value.order_id});if(t(a)&&1===a.res)return I&&clearTimeout(I),e(),u.success(s("Component.Pay.index_7")),await f({force:1}),void y();n()},n=()=>{I=window.setTimeout((async()=>{await a()}),1e3)};I&&clearTimeout(I),await a(),n()};return ne((async()=>{await L()})),n({init:L}),(e,a)=>{const t=r;return O(),W(Aa,{loading:F(_)},{default:R((()=>[B("div",Na,[F(x)?(O(),A(Z,{key:0},[q(Ia,{subscribe:F(g),"onUpdate:subscribe":[a[0]||(a[0]=e=>le(g)?g.value=e:null),k],currency:F(b),"onUpdate:currency":a[1]||(a[1]=e=>le(b)?b.value=e:null),"pay-type":"paypal",data:e.data,order:F(d),"show-currency":!1},null,8,["subscribe","currency","data","order"]),B("div",{ref_key:"payBtnRef",ref:w,class:"relative w-150px h-34px mt-16px z-10"},null,512),a[3]||(a[3]=B("div",{class:"h-36px"},null,-1)),B("div",Ya,[B("span",qa,z(e.$t("Component.Pay.index_27",["Paypal"])),1),q(t,{onClick:P},{default:R((()=>a[2]||(a[2]=[J("Stripe")]))),_:1})])],64)):(O(),W(Ua,{key:1}))])])),_:1},8,["loading"])}}}),Wa={class:"relative flex-center flex-col h-full"},Ka={class:"mb-8px text-desc"},Qa={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Xa={class:"ml-8px"},Ja=M({__name:"index",props:{data:{},order:{},getOrder:{}},emits:["setMenu"],setup(a,{expose:n,emit:l}){const{t:s}=H(),o=a,i=l,c=X(o,"order"),p=X(o,"data"),v=e(),{ssl:y,orderLoad:m}=U(v);let f=null;const h=$(!1),x=$(!0),_=async()=>{if(!f)return;const e=u.loading(s("Component.Pay.index_12"));try{const{message:e}=await d({order_no:c.value.order_no,subscribe:h.value&&p.value.subscription_price>0?1:0,...x.value?{adaptive_pricing:1}:{}});t(e)&&(e.id?f.redirectToCheckout({sessionId:e.id}):u.error(s("Component.Pay.index_28")))}finally{e.close()}},g=e=>{i("setMenu",e)},b=async()=>{try{v.setOrderLoad(!0),await o.getOrder();const e=ba(c.value.stripe_publishable_key);f=await e}finally{v.setOrderLoad(!1)}};return ne((()=>{b()})),n({init:b}),(e,a)=>{const t=me,n=r;return O(),W(Aa,{loading:F(m)},{default:R((()=>[B("div",Wa,[F(y)?(O(),A(Z,{key:0},[a[7]||(a[7]=B("div",{class:"flex gap-16px mb-8px"},[B("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--applepay-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23F6F8FA'%20d='M0%200h32v32H0z'%3e%3c/path%3e%3cpath%20d='M26.672%208H5.328c-.163%200-.327.002-.49.004a3.265%203.265%200%200%200-.49.043%201.56%201.56%200%200%200-1.148.837c-.076.149-.124.3-.153.464a3.442%203.442%200%200%200-.043.49L3%2010.06v12.255c0%20.164.002.328.004.492.004.163.014.328.043.489a1.562%201.562%200%200%200%20.837%201.148c.149.076.3.124.464.153a3.3%203.3%200%200%200%20.49.044l.223.003h21.877l.226-.003c.162-.005.326-.015.488-.044a1.65%201.65%200%200%200%20.465-.153c.295-.15.534-.389.683-.683.074-.147.126-.304.153-.466.027-.161.041-.324.043-.488.002-.075.003-.149.003-.224l.001-.268V10.062c0-.075-.002-.15-.004-.225a3.243%203.243%200%200%200-.043-.489%201.567%201.567%200%200%200-1.3-1.301%203.274%203.274%200%200%200-.49-.043L26.938%208h-.266Z'%20fill='%23000'%3e%3c/path%3e%3cpath%20d='M26.672%208.555h.262c.071%200%20.143.002.215.004.123.003.27.009.405.034.118.022.217.053.312.103a1.004%201.004%200%200%201%20.54.751c.025.134.032.28.035.405l.004.214v12.515c0%20.07-.002.141-.004.212%200%20.136-.012.272-.034.406a1.08%201.08%200%200%201-.102.311.996.996%200%200%201-.44.44c-.098.05-.202.084-.31.102a2.822%202.822%200%200%201-.404.035%208.19%208.19%200%200%201-.217.002H5.064c-.071%200-.143%200-.212-.002a2.832%202.832%200%200%201-.406-.035%201.087%201.087%200%200%201-.312-.102.995.995%200%200%201-.44-.44%201.09%201.09%200%200%201-.102-.312%202.744%202.744%200%200%201-.033-.405%2010.392%2010.392%200%200%201-.004-.213V10.066c0-.072.001-.143.004-.215.003-.124.01-.269.034-.405.018-.108.052-.213.102-.31a.998.998%200%200%201%20.44-.441%201.11%201.11%200%200%201%20.311-.103c.135-.02.27-.032.406-.033l.213-.004h21.607Z'%20fill='%23fff'%3e%3c/path%3e%3cpath%20d='M10.098%2013.599c.223-.28.373-.652.333-1.035-.325.016-.723.214-.953.494-.207.238-.39.628-.342.994.366.032.731-.183.962-.453Zm.33.524c-.531-.032-.984.302-1.237.302-.254%200-.643-.286-1.063-.278a1.567%201.567%200%200%200-1.331.81c-.571.983-.151%202.442.404%203.244.27.396.594.833%201.022.817.405-.016.564-.26%201.055-.26s.634.26%201.062.252c.444-.008.722-.396.991-.793.31-.453.437-.889.444-.913-.007-.007-.857-.333-.864-1.308-.007-.818.666-1.206.699-1.23-.382-.563-.976-.627-1.183-.642m4.626-1.106c1.155%200%201.959.796%201.959%201.955%200%201.162-.82%201.963-1.988%201.963h-1.278v2.032h-.924v-5.95h2.231Zm-1.307%203.143h1.06c.804%200%201.261-.433%201.261-1.184%200-.75-.457-1.18-1.257-1.18h-1.064v2.364Zm3.508%201.574c0-.759.581-1.224%201.612-1.282l1.187-.07v-.334c0-.482-.326-.771-.87-.771-.515%200-.837.247-.915.635h-.84c.049-.784.716-1.362%201.788-1.362%201.052%200%201.724.557%201.724%201.428v2.99h-.853v-.714h-.02c-.252.483-.802.788-1.37.788-.85%200-1.443-.528-1.443-1.308Zm2.8-.39v-.343l-1.069.065c-.53.037-.832.273-.832.644%200%20.38.313.627.791.627.623%200%201.11-.428%201.11-.994Zm1.692%203.22v-.722c.066.017.215.017.289.017.413%200%20.635-.174.771-.619%200-.009.078-.264.078-.268l-1.566-4.342h.965l1.098%203.53h.016l1.097-3.53h.94l-1.625%204.565c-.37%201.052-.8%201.39-1.699%201.39a3.699%203.699%200%200%201-.363-.021Z'%20fill='%23000'%3e%3c/path%3e%3c/svg%3e",alt:""}),B("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--googlepay-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23F5F6F8'%20d='M0%200h32v32H0z'%3e%3c/path%3e%3cpath%20d='M22.075%209.085H9.905C6.1%209.085%202.99%2012.196%202.99%2016c0%203.803%203.111%206.915%206.915%206.915h12.17c3.803%200%206.915-3.112%206.915-6.915s-3.112-6.915-6.915-6.915Z'%20fill='%23fff'%3e%3c/path%3e%3cpath%20d='M22.075%209.645c.854%200%201.684.17%202.465.501a6.413%206.413%200%200%201%203.388%203.388c.332.782.502%201.612.502%202.466%200%20.854-.17%201.683-.502%202.465a6.412%206.412%200%200%201-3.388%203.388%206.272%206.272%200%200%201-2.465.502H9.905c-.854%200-1.684-.17-2.466-.502a6.41%206.41%200%200%201-3.388-3.388A6.272%206.272%200%200%201%203.55%2016c0-.854.17-1.684.501-2.466a6.411%206.411%200%200%201%203.388-3.388%206.274%206.274%200%200%201%202.466-.501h12.17Zm0-.56H9.905C6.1%209.085%202.99%2012.196%202.99%2016c0%203.803%203.111%206.915%206.915%206.915h12.17c3.803%200%206.915-3.112%206.915-6.915s-3.112-6.915-6.915-6.915Z'%20fill='%233C4043'%3e%3c/path%3e%3cpath%20d='M15.388%2016.49v2.092h-.664v-5.165h1.76c.446%200%20.826.149%201.137.446.319.297.478.66.478%201.09%200%20.438-.16.801-.477%201.095-.308.294-.689.44-1.138.44h-1.096v.003Zm0-2.437v1.801h1.11c.263%200%20.484-.09.657-.266a.87.87%200%200%200%20.266-.632.86.86%200%200%200-.266-.626.861.861%200%200%200-.657-.273h-1.11v-.004Zm4.446.878c.491%200%20.878.132%201.162.395.284.262.425.622.425%201.078v2.178h-.632v-.49h-.028c-.273.404-.64.605-1.096.605-.39%200-.716-.115-.979-.346a1.104%201.104%200%200%201-.394-.865c0-.366.139-.657.415-.87.277-.219.647-.326%201.107-.326.394%200%20.719.073.971.218v-.152a.754.754%200%200%200-.273-.588.937.937%200%200%200-.643-.242c-.37%200-.664.156-.878.47l-.585-.366c.322-.467.8-.699%201.428-.699Zm-.857%202.566c0%20.173.072.318.221.432a.813.813%200%200%200%20.515.173c.28%200%20.53-.104.747-.311a.976.976%200%200%200%20.329-.73c-.208-.162-.495-.245-.865-.245-.27%200-.494.065-.674.193-.183.135-.273.298-.273.488Zm6.053-2.452-2.212%205.09h-.684l.822-1.78-1.459-3.31h.723l1.051%202.538h.014l1.023-2.538h.723Z'%20fill='%233C4043'%3e%3c/path%3e%3cpath%20d='M12.748%2016.069c0-.217-.02-.424-.056-.623H9.91v1.141h1.602c-.065.38-.274.704-.595.92v.74h.954c.557-.516.877-1.278.877-2.178Z'%20fill='%234285F4'%3e%3c/path%3e%3cpath%20d='M10.918%2017.506c-.266.18-.608.284-1.008.284-.772%200-1.428-.52-1.663-1.222h-.984v.763a2.962%202.962%200%200%200%202.647%201.631c.8%200%201.473-.263%201.962-.716l-.954-.74Z'%20fill='%2334A853'%3e%3c/path%3e%3cpath%20d='M8.155%2016.001c0-.197.033-.387.092-.566v-.764h-.984a2.955%202.955%200%200%200%200%202.66l.984-.763a1.782%201.782%200%200%201-.092-.567Z'%20fill='%23FABB05'%3e%3c/path%3e%3cpath%20d='M9.91%2014.212c.437%200%20.828.15%201.137.444l.845-.844a2.846%202.846%200%200%200-1.982-.772c-1.157%200-2.16.664-2.647%201.631l.984.764c.235-.702.89-1.223%201.663-1.223Z'%20fill='%23E94235'%3e%3c/path%3e%3c/svg%3e",alt:""}),B("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--alipay-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M0%200h32v32H0z'%20fill='%231c9fe5'%3e%3c/path%3e%3cpath%20d='M23.104%2018.98a142.494%20142.494%200%200%200%2011.052%203.848c2.044.85%200%205.668-2.159%204.674-2.444-1.066-7.359-3.245-11.097-5.108C18.822%2024.842%2015.556%2028%2010.907%2028%206.775%2028%204%2025.568%204%2021.943c0-3.053%202.11-6.137%206.82-6.137%202.697%200%205.47.766%208.785%201.922a25.007%2025.007%200%200%200%201.529-3.838l-11.981-.006v-1.848l6.162.015V9.63H7.808V7.81l7.507.006V5.115c0-.708.38-1.115%201.042-1.115h3.14v3.827l7.442.005v1.805h-7.44v2.431l6.088.016s-.754%203.904-2.483%206.897zM5.691%2021.79v-.004c0%201.736%201.351%203.489%204.64%203.489%202.54%200%205.028-1.52%207.408-4.522-3.181-1.592-4.886-2.357-7.348-2.357-2.394%200-4.7%201.164-4.7%203.394z'%20fill='%23fff'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",alt:""}),B("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--wechat-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23F5F6F8'%20d='M0%20.098h32v32H0z'%3e%3c/path%3e%3cpath%20d='M12.71%2018.392a.783.783%200%200%201-.36.081.786.786%200%200%201-.694-.407l-.055-.108-2.192-4.666a.338.338%200%200%201-.027-.163.366.366%200%200%201%20.11-.271.384.384%200%200%201%20.278-.109.45.45%200%200%201%20.25.082l2.58%201.79c.2.12.43.185.665.19.143%200%20.284-.028.416-.081l12.096-5.263c-2.193-2.523-5.771-4.15-9.793-4.15C9.354%205.316%204%209.683%204%2015.081c0%202.93%201.609%205.589%204.133%207.38a.698.698%200%200%201%20.278.869c-.194.732-.527%201.927-.527%201.98a.956.956%200%200%200-.055.298.366.366%200%200%200%20.11.27.387.387%200%200%200%20.277.109.319.319%200%200%200%20.222-.081l2.608-1.493c.192-.116.412-.181.638-.19.122.005.243.023.36.054%201.27.363%202.588.546%203.912.544%206.602%200%2011.983-4.368%2011.983-9.766a8.44%208.44%200%200%200-1.359-4.53l-13.786%207.812-.084.054Z'%20fill='%231AAD19'%3e%3c/path%3e%3c/svg%3e",alt:""})],-1)),B("div",Ka,z(e.$t("Component.Pay.index_46")),1),q(Ia,{subscribe:F(h),"onUpdate:subscribe":a[0]||(a[0]=e=>le(h)?h.value=e:null),currency:F(x),"onUpdate:currency":a[1]||(a[1]=e=>le(x)?x.value=e:null),"pay-type":"stripe",data:e.data,order:F(c),"change-sub":!1},null,8,["subscribe","currency","data","order"]),q(t,{class:"mt-16px w-150px h-34px text-14px",type:"primary",color:"#ff8f00",onClick:_},{default:R((()=>[J(z(e.$t("Component.Pay.index_47")),1)])),_:1}),a[8]||(a[8]=B("div",{class:"h-32px"},null,-1)),B("div",Qa,[B("span",Xa,z(e.$t("Component.Pay.index_27",[""])),1),q(n,{onClick:a[2]||(a[2]=e=>g("stripe"))},{default:R((()=>a[4]||(a[4]=[J("Stripe")]))),_:1}),a[6]||(a[6]=B("span",null," or ",-1)),q(n,{onClick:a[3]||(a[3]=e=>g("paypal"))},{default:R((()=>a[5]||(a[5]=[J("PayPal")]))),_:1})])],64)):(O(),W(Ua,{key:1}))])])),_:1},8,["loading"])}}}),et=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1}},setup(e){const a=e,t=X((()=>a.data)),n=D((()=>{const{cycle:e,charge_type:a}=t.value;return 2===a?"Lifetime":"".concat(e," ").concat(t.value.cycle_unit).concat(e>1?"s":"")}));return(e,a)=>(O(),A("div",{class:G(["radio-item pro",{active:e.active}])},[B("span",null,z(F(n)),1),a[0]||(a[0]=B("div",{class:"checked"},null,-1))],2))}}),[["__scopeId","data-v-bc452aeb"]]),at={class:"h-full p-20px"},tt={class:"mb-10px text-14px text-#444"},nt={class:"min-h-30px max-h-80px overflow-auto pr-20px pt-1px pl-1px"},lt={class:"auth-list"},st=["onClick"],ot={class:"flex justify-center mt-20px"},it=l(M({__name:"index",props:{list:{default:()=>[]}},setup(a,{expose:t}){const l=a,s=e(),o=$(0),i=se(l.list),c=async()=>{if(0===i.value.length)return;const e=i.value[o.value];await h({pid:"".concat(e.product_id),code:e.code,coupon_id:e.id,cycle:e.cycle,cycle_unit:e.cycle_unit,charge_type:e.charge_type}),await f({force:1}),y()},{loading:r,setLoading:u}=de(),d=async()=>{try{u(!0);const{message:e}=await x({pid:s.pid});i.value=n(e)?e:[]}finally{u(!1)}};return 0===i.value.length&&d(),t({init:d}),(e,a)=>{const t=me;return O(),W(Aa,{loading:F(r)},{default:R((()=>[B("div",at,[B("div",tt,z(e.$t("Component.Pay.index_37")),1),B("div",nt,[B("div",lt,[(O(!0),A(Z,null,T(F(i),((e,a)=>(O(),A("div",{key:e.id,class:G(["auth-item",{active:a===F(o)}]),onClick:e=>(e=>{o.value=e})(a)},[q(et,{data:e,active:a===F(o)},null,8,["data","active"])],10,st)))),128))])]),B("div",ot,[q(t,{class:"w-150px h-34px text-14px",type:"primary",color:"#ff8f00",disabled:0===F(i).length,onClick:c},{default:R((()=>[J(z(0===F(i).length?e.$t("Component.Pay.index_38"):e.$t("Component.Pay.index_39")),1)])),_:1},8,["disabled"])])])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-3c053001"]]),ct=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1}},setup(e){const a=e,{t:t}=H(),n=X((()=>a.data)),l=D((()=>{const{charge_type:e,end_time:a}=n.value;return 2===e?t("Component.Auth.index_6"):_(a)}));return(e,a)=>(O(),A("div",{class:G(["radio-item pro",{active:e.active}])},[B("span",null,z(F(l)),1),a[0]||(a[0]=B("div",{class:"checked"},null,-1))],2))}}),[["__scopeId","data-v-7c145be1"]]),rt={class:"h-full p-20px"},ut={class:"mb-10px text-14px text-#444"},dt={class:"min-h-30px max-h-80px overflow-auto pr-20px pt-1px pl-1px"},pt={class:"auth-list"},vt=["onClick"],yt={class:"flex justify-center mt-20px"},mt=l(M({__name:"index",props:{list:{default:()=>[]}},setup(a,{expose:t}){const l=a,s=e(),o=$(0),i=se(l.list),c=async()=>{if(0===i.value.length)return;const{serial_no:e}=i.value[o.value];await g({serial_no:e}),await f({force:1}),y()},{loading:r,setLoading:u}=de(),d=async()=>{try{u(!0);const{message:e}=await b({pid:s.pid});i.value=n(e)?e:[]}finally{u(!1)}};return 0===i.value.length&&d(),t({init:d}),(e,a)=>{const t=me;return O(),W(Aa,{loading:F(r)},{default:R((()=>[B("div",rt,[B("div",ut,z(e.$t("Component.Pay.index_34")),1),B("div",dt,[B("div",pt,[(O(!0),A(Z,null,T(F(i),((e,a)=>(O(),A("div",{key:e.id,class:G(["auth-item",{active:a===F(o)}]),onClick:e=>(e=>{o.value=e})(a)},[q(ct,{data:e,active:a===F(o)},null,8,["data","active"])],10,vt)))),128))])]),B("div",yt,[q(t,{class:"w-150px h-34px text-14px",type:"primary",color:"#ff8f00",disabled:0===F(i).length,onClick:c},{default:R((()=>[J(z(0===F(i).length?e.$t("Component.Pay.index_35"):e.$t("Component.Pay.index_36")),1)])),_:1},8,["disabled"])])])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-82518682"]]),ft=l(M({__name:"index",props:{data:{},couponId:{default:-1},couponPrice:{default:""},isUseCoupon:{type:Boolean,default:!1}},setup(a,{expose:l}){const{t:s}=H(),o=a,i=X(o,"data"),c=X(o,"couponId"),r=X(o,"isUseCoupon"),u=X(o,"couponPrice"),d=e(),p=oe({time:0,order_no:"",stripe_publishable_key:"",order_id:0,paypal_client_id:"",price:"",market_price:"",cycle:1,cycle_unit:"month",couponPrice:""}),v=$(""),y=e=>{v.value=e},m=[{key:"stripe",label:"Stripe",isLazy:!0,content:()=>q(za,{ref:e=>h(e,"stripe"),data:i.value,order:p,getOrder:_,onSetMenu:y},null)},{key:"paypal",label:"Paypal",isLazy:!0,content:()=>q(Ra,{ref:e=>h(e,"paypal"),data:i.value,order:p,getOrder:_,onSetMenu:y},null)},{key:"other",label:s("Component.Pay.index_45"),isLazy:!0,content:()=>q(Ja,{ref:e=>h(e,"other"),data:i.value,order:p,getOrder:_,onSetMenu:y},null)},{key:"voucher",label:s("Component.Pay.index_21"),content:()=>q(it,{ref:e=>h(e,"voucher"),list:P.value},null)},{key:"authorization",label:s("Component.Pay.index_22"),content:()=>q(mt,{ref:e=>h(e,"authorization"),list:k.value},null)}],f={},h=(e,a)=>{f[a]=e},_=async()=>{if(0===p.time)try{await(async()=>{try{const{message:e}=await C();if(t(e)&&(d.setSsl(e.result),!e.result))return Promise.reject(!1)}catch(e){d.setSsl(!1)}})();let e={pid:d.pid,cycle:i.value.cycle,cycle_unit:i.value.cycle_unit,charge_type:i.value.charge_type,num:i.value.num,source:d.source};r.value&&-1!==c.value&&(e=Object.assign(e,{coupon_id:c.value}));const{message:a}=await w(e);t(a)&&(p.order_no=a.order_no,p.stripe_publishable_key=a.stripe_publishable_key,p.order_id=a.order_id,p.paypal_client_id=a.paypal_client_id,p.price=a.price,p.market_price=a.market_price,p.cycle=fe(a,"transaction.cycle",1),p.cycle_unit=fe(a,"transaction.cycle_unit",""),p.couponPrice=u.value)}finally{p.time=Date.now()}},g=async e=>{var a,t;"authorization"===e&&(k.value=[]),null==(t=null==(a=f[e])?void 0:a.init)||t.call(a)},k=$([]),P=$([]),{loading:L,setLoading:S}=de();return l({init:async()=>{var e,a;p.time=0,null==(a=null==(e=f[v.value])?void 0:e.init)||a.call(e),(async()=>{try{S(!0);const{message:e}=await b({pid:d.pid});if(n(e)&&e.length>0)return k.value=e,void(v.value="authorization");const{message:a}=await x({pid:d.pid});if(n(a)&&a.length>0)return P.value=a,void(v.value="voucher");v.value="stripe"}finally{S(!1)}})()}}),(e,a)=>(O(),W(Aa,{class:"h-auto!",loading:F(L)},{default:R((()=>[q(F(ra),{value:F(v),"onUpdate:value":a[0]||(a[0]=e=>le(v)?v.value=e:null),list:m,onChange:g},null,8,["value"])])),_:1},8,["loading"]))}}),[["__scopeId","data-v-9c952ed8"]]),ht={class:"ml-16px"};function xt(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Q(e)}const _t=M({__name:"time",props:{endtime:{default:0}},emits:["finish"],setup(e,{emit:a}){const t=e,n=a,{t:l}=H(),s=D((()=>{const e=Date.now(),a=1e3*t.endtime;return Math.max(0,a-e)})),o=e=>e.toString().padStart(2,"0"),i=({hours:e,minutes:a,seconds:t})=>{let n,s,i,c;const r=Math.floor(e/24);return e%=24,q("div",{class:"text-desc"},[q("span",{class:"mr-6px"},[l("Component.Pay.index_40")]),r>0?q(he,{type:"error",size:"small",class:"px-4px",bordered:!1},xt(n=o(r))?n:{default:()=>[n]}):"",r>0?q("span",{class:"mx-4px"},[J(":")]):"",q(he,{type:"error",size:"small",class:"px-4px",bordered:!1},xt(s=o(e))?s:{default:()=>[s]}),q("span",{class:"mx-4px"},[J(":")]),q(he,{type:"error",size:"small",class:"px-4px",bordered:!1},xt(i=o(a))?i:{default:()=>[i]}),q("span",{class:"mx-4px"},[J(":")]),q(he,{type:"error",size:"small",class:"px-4px",bordered:!1},xt(c=o(t))?c:{default:()=>[c]})])},c=()=>{t.endtime>0&&n("finish")};return(e,a)=>{const t=k;return O(),A("div",ht,[q(t,{duration:F(s),render:i,"on-finish":c},null,8,["duration"])])}}}),gt=l(M({__name:"index",props:N({loading:{type:Boolean,default:!1},data:{default:()=>[]}},{value:{},valueModifiers:{},checked:{type:Boolean},checkedModifiers:{}}),emits:N(["change","finish"],["update:value","update:checked"]),setup(a,{emit:t}){const n=a,l=t,{t:s}=H(),o=e(),i=X(n,"data"),c=Y(a,"value"),r=Y(a,"checked"),u=D((()=>{if(-1!==c.value){const e=i.value.find((e=>e.id===c.value));if(e)return e.end_time}return 0})),d=D((()=>i.value.length>0?i.value.map((e=>{const a=(e=>2===e.charge_type?s("Component.Auth.index_6").toLocaleLowerCase():"year"===e.cycle_unit?s("Public.Unit.Year").toLocaleLowerCase():s("Public.Unit.Month").toLocaleLowerCase())(e);return{label:s("Component.Pay.index_19",[e.deduct_amount,a]),value:e.id}})):[{label:s("Component.Pay.index_20"),value:-1}])),p=D((()=>0===n.data.length)),v=()=>{p.value||o.orderLoad||(r.value=!r.value,l("change"))},y=e=>{e.stopPropagation()},m=e=>{o.orderLoad||(r.value=e,l("change"))},f=()=>{l("change")},h=()=>{l("finish")};return(e,a)=>{const t=P,n=xe,l=_e;return O(),A(Z,null,[ae(q(t,{class:"mb-12px",height:"36px"},null,512),[[te,e.loading]]),ae(B("div",{class:G(["coupon-box mb-12px",{active:r.value}]),onClick:v},[q(n,{checked:r.value,disabled:F(p),onClick:y,"onUpdate:checked":m},{default:R((()=>[B("span",null,z(e.$t("Component.Pay.index_18",[e.data.length])),1)])),_:1},8,["checked","disabled"]),B("div",{class:"w-220px ml-16px",onClick:y},[q(l,{value:c.value,"onUpdate:value":[a[0]||(a[0]=e=>c.value=e),f],options:F(d),disabled:F(p),"menu-props":{style:{"--n-option-check-color":"#e4a93c","--n-option-text-color-active":"#e4a93c"}}},null,8,["value","options","disabled"])]),ae(q(_t,{endtime:F(u),onFinish:h},null,8,["endtime"]),[[te,F(u)>0]])],2),[[te,!e.loading]])],64)}}}),[["__scopeId","data-v-14052383"]]),bt={class:"flex flex-col flex-1 overflow-hidden"},wt={class:"relative flex-1 px-24px py-20px"},Ct={class:"mb-16px text-15px"},kt=M({__name:"index",setup(a){const l=e(),s=$(0),o=$([]),i=$(0),c=D((()=>o.value.length>0?o.value[s.value].children:[])),r=async()=>{const{message:e}=await j({product_id:l.pid});o.value=n(e)?e:[]},u=$(-1),d=$(!1),p=$([]),v=$([]),y=$(!1),m=D((()=>{if(d.value){const e=v.value.find((e=>e.id===u.value));if(e)return e.deduct_amount}return""})),f=(e=!1)=>{var a;v.value=[];if(null==(a=c.value[i.value].usable_coupons)||a.forEach((e=>{const a=p.value.find((a=>a.id===e&&"".concat(a.product_id)===l.pid));a&&v.value.push(a)})),v.value.sort(((e,a)=>Number(a.deduct_amount)-Number(e.deduct_amount))),v.value.length>0)u.value=v.value[0].id,d.value=!0;else if(u.value=-1,d.value=!1,e&&p.value.length>0){const e=p.value[0];for(let a=0;a<o.value.length;a++){const t=2===e.charge_type?"999":"".concat(e.cycle);if(o.value[a].cycle===t&&o.value[a].cycle_unit===e.cycle_unit){s.value=a,C(s.value,-1);break}}}},h=async()=>{try{y.value=!0;const{message:e}=await L();n(e)&&(p.value=e,f(!0))}finally{y.value=!1}},{loading:x,setLoading:_}=de(),g=$(0),b=async()=>{s.value=0,i.value=0,await(async()=>{try{_(!0),await r(),await h(),M(),g.value=Date.now()}finally{_(!1)}})(),ie((()=>{var e,a;null==(a=null==(e=w.value)?void 0:e.init)||a.call(e)}))},w=$(),C=async(e,a)=>{var t,n;e!==a&&(i.value=0),f(),null==(n=null==(t=w.value)?void 0:t.init)||n.call(t)},k=()=>{f(),w.value.init()},P=async()=>{w.value.init()},I=async()=>{await h(),w.value.init()},M=async()=>{const e=await l.getReceiveCoupon();if(t(e)){if(!l.showCouponModal)return;await ie(),ue({width:400,bgColor:"transparent",data:{couponList:e.coupons,onReceive:async()=>{try{_(!0),await r(),await h(),ie((()=>{w.value.init()}))}finally{_(!1)}}},component:ce((()=>S((()=>import("./index98.js?v=1732601582185")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))))})}};return(e,a)=>(O(),A("div",bt,[q(Ye,{onChange:b}),B("div",wt,[q(Aa,{loading:F(x)},{default:R((()=>[B("div",Ct,z(e.$t("Component.Pay.index_8",["support@aapanel.com"])),1),q(aa,{cycle:F(s),"onUpdate:cycle":a[0]||(a[0]=e=>le(s)?s.value=e:null),data:F(o),onChange:C},null,8,["cycle","data"]),q(ia,{number:F(i),"onUpdate:number":a[1]||(a[1]=e=>le(i)?i.value=e:null),data:F(c),onChange:k},null,8,["number","data"]),q(gt,{value:F(u),"onUpdate:value":a[2]||(a[2]=e=>le(u)?u.value=e:null),checked:F(d),"onUpdate:checked":a[3]||(a[3]=e=>le(d)?d.value=e:null),loading:F(y),data:F(v),onChange:P,onFinish:I},null,8,["value","checked","loading","data"]),F(g)>0?(O(),W(ft,{key:0,ref_key:"payChannelRef",ref:w,"coupon-id":F(u),"coupon-price":F(m),"is-use-coupon":F(d),data:F(c)[F(i)]},null,8,["coupon-id","coupon-price","is-use-coupon","data"])):V("",!0)])),_:1},8,["loading"])])]))}}),Pt={class:"flex h-full"},Lt=M({__name:"index",props:{source:{},username:{},plugin:{}},setup(a){const t=I(),n=a,{source:l,username:s,plugin:o}=n,i=e();return i.setSource(t.aaPanelPro?210:l),i.setUsername(s),o&&i.setPlugins(o),re((()=>{i.reset()})),(e,a)=>(O(),A("div",Pt,[q(ze),q(kt)]))}});export{Lt as default};
